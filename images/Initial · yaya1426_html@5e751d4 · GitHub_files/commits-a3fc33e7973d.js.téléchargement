"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[3201,6315,9389,16902,28773,28970,31146,37415,38074,42967,45338,48727,50531,57293,57431,58281,60229,64492,65404,73369,73560,73575,76413,76512,76949,83846,85243,86802,90920,91472],{3536:(e,t,n)=>{n.d(t,{I:()=>c,d_:()=>d,wu:()=>o});var i=n(68273),r=n(16522),a=n(96379),l=n(96540),s=n(4095);let o=(0,i.kw)()?function(e,t){let n,i,o=(0,r.c)(5),[c,d]=(0,l.useState)(s.UI);return o[0]!==e?(n=()=>{if(!e)return;let t=!1;return(async()=>{d(s.UI);let n=await (0,a.Sr)(e);if(!t)try{if(n.ok){let e=await n.json();e.loading=!1,e&&d(e)}else d(s.Xx)}catch{d(s.Xx)}})(),function(){t=!0}},o[0]=e,o[1]=n):n=o[1],o[2]!==t||o[3]!==e?(i=[e,t],o[2]=t,o[3]=e,o[4]=i):i=o[4],(0,l.useEffect)(n,i),c}:function(e,t){let[n,i]=(0,l.useState)(s.UI);return(0,l.useEffect)(()=>{if(!e)return;let t=!1;return(async()=>{i(s.UI);let n=await (0,a.Sr)(e);if(!t)try{if(n.ok){let e=await n.json();e.loading=!1,e&&i(e)}else i(s.Xx)}catch{i(s.Xx)}})(),function(){t=!0}},[e,t]),n},c=(0,i.kw)()?function(e){let t,n,i=(0,r.c)(3),[s,o]=(0,l.useState)(void 0);return i[0]!==e?(t=()=>{e&&(async()=>{let t=await (0,a.Sr)(e);try{if(t.ok){let e=await t.json();e&&o(e.data)}}catch{}})()},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,l.useEffect)(t,n),s}:function(e){let[t,n]=(0,l.useState)(void 0);return(0,l.useEffect)(()=>{e&&(async()=>{let t=await (0,a.Sr)(e);try{if(t.ok){let e=await t.json();e&&n(e.data)}}catch{}})()},[e]),t};function d(e,t,n,i){let[r,o]=(0,l.useState)(s.UI),c=(0,l.useRef)([...Array(n)]),d=(0,l.useRef)(t);return(0,l.useEffect)(()=>{if(!e)return;let n=!1;async function i(t){let r=await (0,a.Sr)(`${e}?start_entry=${t}`);if(!n)try{if(r.ok){let e=await r.json();if(e){let t=0;for(let n=d.current;n<e.nextIndex;n++)c.current[n]=e.deferredCommits[t],t++;e.deferredCommits=c.current,e.loadMore&&d.current!==e.nextIndex?(d.current=e.nextIndex,e.error=!1,o(e),setTimeout(()=>i(e.nextIndex),0)):(d.current===e.nextIndex?e.error=!0:e.error=!1,o(e))}}else o(e=>({...e,loading:!1,error:!0,extraDiffEntries:c.current}))}catch{o(e=>({...e,loading:!1,deferredCommits:c.current}))}}return i(t),function(){n=!0}},[e,i,t]),(0,l.useEffect)(()=>{c.current=[],d.current=t},[e,i,t]),r}},4095:(e,t,n)=>{n.d(t,{M2:()=>d,NO:()=>m,UI:()=>s,Xx:()=>o,ej:()=>f,xs:()=>u});var i=n(74848),r=n(68273),a=n(16522),l=n(96540);let s={deferredCommits:[],renameHistory:null,loading:!0},o={deferredCommits:[],renameHistory:null,loading:!1},c=(0,l.createContext)(s),d=(0,r.kw)()?function(e){let t,n=(0,a.c)(3),{children:r,deferredData:l}=e;return n[0]!==r||n[1]!==l?(t=(0,i.jsx)(c,{value:l,children:r}),n[0]=r,n[1]=l,n[2]=t):t=n[2],t}:function({children:e,deferredData:t}){return(0,i.jsx)(c,{value:t,children:e})},m=(0,r.kw)()?function(e){let t,n=(0,a.c)(5),i=(0,l.useContext)(c),r=i.error;n[0]!==i.deferredCommits||n[1]!==e?(t=i.deferredCommits?.find(t=>t?.oid===e),n[0]=i.deferredCommits,n[1]=e,n[2]=t):t=n[2];let s=t;if(r&&void 0===s){let t;n[3]!==e?(t={oid:e,statusCheckStatus:void 0},n[3]=e,n[4]=t):t=n[4],s=t}return s}:function(e){let t=(0,l.useContext)(c),n=t.error,i=t.deferredCommits?.find(t=>t?.oid===e);return n&&void 0===i&&(i={oid:e,statusCheckStatus:void 0}),i},u=(0,r.kw)()?function(){return(0,l.useContext)(c).loading}:function(){return(0,l.useContext)(c).loading},f=(0,r.kw)()?function(){return(0,l.useContext)(c).renameHistory}:function(){return(0,l.useContext)(c).renameHistory};try{c.displayName||(c.displayName="DeferredCommitDataContext")}catch{}try{d.displayName||(d.displayName="DeferredCommitDataProvider")}catch{}},4929:(e,t,n)=>{n.d(t,{V:()=>l});var i=n(74848),r=n(29731),a=n(34164);function l({children:e,alignment:t,variant:n,...l}){return(0,i.jsx)("div",{...(0,r.G)("list-view-item-metadata-item"),...l,className:(0,a.$)("Metadata-module__metadata--ODMG0","primary"===n?"Metadata-module__primary--S8Orc":"Metadata-module__secondary--1te4w","right"===t&&"Metadata-module__alignRight--A1PHa",l.className),children:e})}try{l.displayName||(l.displayName="ListItemMetadata")}catch{}},7808:(e,t,n)=>{n.d(t,{z:()=>WebWorker});var i=n(35750),r=n(18150),a=n(85242),l=n(50467);let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){(0,l._)(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};var s=new WeakMap,o=new WeakMap;let MainThreadWorker=class MainThreadWorker{async postMessage(e){if((0,i._)(this,s))return;let t={data:(0,i._)(this,o).call(this,{data:e})};this.onmessage?.(t)}terminate(){(0,a._)(this,s,!0)}constructor(e){(0,r._)(this,s,{writable:!0,value:!1}),(0,l._)(this,"onmessage",void 0),(0,r._)(this,o,{writable:!0,value:void 0}),(0,a._)(this,o,e)}}},8624:(e,t,n)=>{n.d(t,{L:()=>o});var i=n(74848),r=n(16522),a=n(38621),l=n(26108),s=n(34164);n(96540);let o=e=>{let t,n,o,c=(0,r.c)(17),{ref:d,expanded:m,testid:u,ariaLabel:f,ariaControls:h,onToggleExpanded:p,alignment:g,dataHotkey:x,className:b,size:y,tooltipDirection:j,variant:C}=e,v=m?`collapse-${u}`:`expand-${u}`,N=m?"left"===g?a.SidebarExpandIcon:a.SidebarCollapseIcon:"left"===g?a.SidebarCollapseIcon:a.SidebarExpandIcon;c[0]!==p?(t=e=>{p(e)},c[0]=p,c[1]=t):t=c[1];let w=C??"invisible";return c[2]!==b?(n=(0,s.$)(b,"fgColor-muted"),c[2]=b,c[3]=n):n=c[3],c[4]!==h||c[5]!==f||c[6]!==x||c[7]!==m||c[8]!==d||c[9]!==y||c[10]!==v||c[11]!==N||c[12]!==t||c[13]!==w||c[14]!==n||c[15]!==j?(o=(0,i.jsx)(l.K,{"aria-label":f,tooltipDirection:j,ref:d,"data-testid":v,"aria-expanded":m,"aria-controls":h,icon:N,"data-hotkey":x,onClick:t,variant:w,size:y,className:n}),c[4]=h,c[5]=f,c[6]=x,c[7]=m,c[8]=d,c[9]=y,c[10]=v,c[11]=N,c[12]=t,c[13]=w,c[14]=n,c[15]=j,c[16]=o):o=c[16],o};o.displayName="ExpandButton"},13071:(e,t,n)=>{n.d(t,{C:()=>s});var i=n(74848),r=n(44185),a=n(81945),l=n(42257);function s({deferredData:e,oid:t,repo:n,helpUrl:s}){let o=void 0===e,c="";try{c=e?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,i.jsxs)(i.Fragment,{children:[o&&(0,i.jsx)(a.O,{className:"ml-2",variant:"rounded",width:"62px"}),e?.statusCheckStatus&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"d-flex ml-2 mr-1",children:"\xb7"}),(0,i.jsx)(l.d,{oid:t,status:e?.statusCheckStatus?.state,descriptionString:c,repo:n}),e?.signatureInformation&&e?.verifiedStatus!=="unsigned"&&(0,i.jsx)("span",{className:"d-flex ml-2",children:"\xb7"})]}),e?.signatureInformation&&(0,i.jsx)("div",{className:"ml-2",children:(0,i.jsx)(r.h,{commitOid:t,hasSignature:!0,verificationStatus:e.verifiedStatus,signature:{helpUrl:s,...e.signatureInformation}})})]})}try{s.displayName||(s.displayName="DeferredCommitHeaderData")}catch{}},16790:(e,t,n)=>{n.d(t,{eX:()=>c,xe:()=>d,zq:()=>o});var i=n(74848),r=n(68273),a=n(16522),l=n(96540);let s=(0,l.createContext)({loggingPayload:void 0,loggingPrefix:void 0}),o=(0,r.kw)()?function(e){let t,n=(0,a.c)(3),{children:r,loggingInfo:l}=e;return n[0]!==r||n[1]!==l?(t=(0,i.jsx)(s,{value:l,children:r}),n[0]=r,n[1]=l,n[2]=t):t=n[2],t}:function({children:e,loggingInfo:t}){return(0,i.jsx)(s,{value:t,children:e})},c=(0,r.kw)()?function(){let e=(0,l.useContext)(s);return void 0!==e.loggingPayload&&void 0!==e.loggingPrefix}:function(){let e=(0,l.useContext)(s);return void 0!==e.loggingPayload&&void 0!==e.loggingPrefix},d=(0,r.kw)()?function(){return(0,l.useContext)(s)}:function(){return(0,l.useContext)(s)};try{s.displayName||(s.displayName="CommitsLoggingContext")}catch{}try{o.displayName||(o.displayName="CommitsLoggingInfoProvider")}catch{}},20263:(e,t,n)=>{n.d(t,{BC:()=>s,JU:()=>c,Pk:()=>l});var i=n(74848),r=n(12683),a=n(99418);let l=d(r.az),s=d(r.EY),o=({ref:e,...t})=>(0,i.jsx)("div",{...t,ref:e});o.displayName="Div";let c=d(o);function d(e){let t=t=>{let{sanitizedHTML:n,props:r}=function(e){let{html:t,domPurifyConfig:n,...i}=e,r={...n,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{sanitizedHTML:a.default.sanitize(t,r),props:i}}(t);return(0,i.jsx)(e,{...r,dangerouslySetInnerHTML:{__html:n}})};return t.displayName=`UnsafeHTML${e.displayName||e.name}`,t}try{l.displayName||(l.displayName="UnsafeHTMLBox")}catch{}try{s.displayName||(s.displayName="UnsafeHTMLText")}catch{}try{c.displayName||(c.displayName="UnsafeHTMLDiv")}catch{}},20622:(e,t,n)=>{n.d(t,{uT:()=>a});let i={baseComparisonInfo:"base_comparison_info",changeGroups:"change_groups",codeButton:"code_button",codeowners:"codeowners",diffEntries:"diff_entries",diffstat:"diffstat",header:"header",mergeBox:"merge_box",mergeInstructions:"merge_instructions",pendingReview:"pending_review",statusChecks:"status_checks",tabCounts:"tab_counts",threadPreviews:"thread_previews",diffViewUserSettings:"user_diff_view_settings",diffContextLines:"diff_entry_lines",richDiff:"rich_diff",description:"description"},r={abandonReview:"abandon_review",addCommentReaction:"add_comment_reaction",changeBase:"change_base",cleanupCodespaces:"cleanup_codespaces",convertToDraft:"convert_to_draft",createReviewComment:"create_review_comment",deleteHeadRef:"delete_head_ref",dequeuePullRequest:"dequeue_pull_request",disableAutoMerge:"disable_auto_merge",dismissReview:"dismiss_review",enableAutoMerge:"enable_auto_merge",generateChangeGroups:"generate_change_groups",markReadyForReview:"mark_ready_for_review",merge:"merge",removeCommentReaction:"remove_comment_reaction",reRequestReviewFromUser:"re_request_review_from_user",resolveThread:"resolve_thread",runActionRequiredWorkflows:"run_action_required_workflows",submitCopilotGroupsFeedback:"submit_copilot_groups_feedback",submitReview:"submit_review",submitSuggestedChanges:"apply_suggestions",unresolveThread:"unresolve_thread",updateReviewComment:"update_review_comment",updatePullRequestBranch:"update_pull_request_branch",updateTitle:"update_title",updateShowChangeGroupsPreference:"update_show_change_groups_preference",updateMergeBoxUserPreference:"update_merge_box_user_preference",updateWhitespacePreference:"update_whitespace_preference",hideComment:"hide_comment",unhideComment:"unhide_comment"},a={...i,...r};Object.values(i),Object.values(r)},25556:(e,t,n)=>{n.d(t,{m:()=>p});var i=n(74848),r=n(97068),a=n(96540),l=n(56149),s=n(12683),o=n(34164);let c=n(38267).Ay.span.withConfig({displayName:"ControlledTooltip__TooltipBase",componentId:"sc-4009498c-0"})(["&::after{position:absolute;z-index:1000000;display:none;padding:0.5em 0.75em;font:normal normal 11px/1.5 ",";-webkit-font-smoothing:subpixel-antialiased;color:",";text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;content:attr(data-visible-text);background:",";border-radius:",";opacity:0;}@keyframes tooltip-appear{from{opacity:0;}to{opacity:1;}}&.tooltipped-open,&:hover,&:active,&:focus{&::after{display:inline-block;text-decoration:none;animation-name:tooltip-appear;animation-duration:0.1s;animation-fill-mode:forwards;animation-timing-function:ease-in;animation-delay:0s;}}&.tooltipped-no-delay.tooltipped-open,&.tooltipped-no-delay:hover,&.tooltipped-no-delay:active,&.tooltipped-no-delay:focus{&::after{animation-delay:0s;}}&.tooltipped-s,&.tooltipped-se,&.tooltipped-sw{&::after{top:100%;right:50%;margin-top:6px;}}&.tooltipped-se{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-sw::after{margin-right:-",";}&.tooltipped-n,&.tooltipped-ne,&.tooltipped-nw{&::after{right:50%;bottom:100%;margin-bottom:6px;}}&.tooltipped-ne{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-nw::after{margin-right:-",";}&.tooltipped-s::after,&.tooltipped-n::after{transform:translateX(50%);}&.tooltipped-w{&::after{right:100%;bottom:50%;margin-right:6px;transform:translateY(50%);}}&.tooltipped-e{&::after{bottom:50%;left:100%;margin-left:6px;transform:translateY(50%);}}&.tooltipped-align-right-2::after{right:0;margin-right:0;}&.tooltipped-align-left-2::after{left:0;margin-left:0;}",";"],(0,s.yB)("fonts.normal"),(0,s.yB)("colors.fg.onEmphasis"),(0,s.yB)("colors.neutral.emphasisPlus"),(0,s.yB)("radii.2"),(0,s.yB)("space.3"),(0,s.yB)("space.3"),(0,s.yB)("space.3"),(0,s.yB)("space.3"),s.sx),d=()=>()=>void 0,m=()=>!1,u=()=>!0;function f({ref:e,direction:t="n",className:n,text:r,noDelay:s,align:f,wrap:h,open:p=!1,portalProps:g={},...x}){let b=(0,a.useSyncExternalStore)(d,u,m),y=(0,o.$)(n,`tooltipped-${t}`,f&&`tooltipped-align-${f}-2`,s&&"tooltipped-no-delay",h&&"tooltipped-multiline",p&&"tooltipped-open");return b?(0,i.jsx)(l.ZL,{...g,children:(0,i.jsx)(c,{ref:e,role:"tooltip","aria-label":r,"data-visible-text":r||x["aria-label"],...x,sx:{position:"fixed",zIndex:1,...x.sx},className:y})}):null}try{f.displayName||(f.displayName="ControlledTooltip")}catch{}var h=n(65787);function p({ref:e,contentRef:t,open:n,anchoredPositionAlignment:l,anchorSide:s,anchorOffset:o,alignmentOffset:c,allowOutOfBounds:d,...m}){let u=(0,a.useRef)(null);(0,a.useImperativeHandle)(e,()=>u.current);let p=(0,a.useRef)({left:0,top:0}),g=(0,a.useSyncExternalStore)((0,a.useCallback)(e=>{if(!u.current||!t.current||!n)return()=>void 0;let i=(0,h.U)(t.current);return i?.addEventListener("scroll",e),()=>{i?.removeEventListener("scroll",e)}},[t,n]),(0,a.useCallback)(()=>{if(!u.current||!t.current)return p.current;let e=(0,r.uG)(u.current,t.current,{align:l??"center",side:s??"outside-top",alignmentOffset:c??0,anchorOffset:o??0,allowOutOfBounds:d});return(e.left!==p.current.left||e.top!==p.current.top)&&(p.current=e),p.current},[t,c,o,l,s,d]),(0,a.useCallback)(()=>p.current,[]));return(0,i.jsx)(f,{...m,ref:u,open:n,style:{position:"absolute",...g,...m.style}})}try{p.displayName||(p.displayName="PortalTooltip")}catch{}},27028:(e,t,n)=>{n.d(t,{G:()=>P,Q:()=>$});var i=n(74848),r=n(16522),a=n(38621),l=n(5524),s=n(94236),o=n(26108),c=n(21373),d=n(19415),m=n(96540),u=n(21067),f=n(25407),h=n(96379);function p(e,t){let n,i=(0,r.c)(5),a=(t??[]).filter(e=>!e.dismissed);if(i[0]!==a||i[1]!==e){let t;i[3]!==e?(t=t=>t.name===e,i[3]=e,i[4]=t):t=i[4],n=a.filter(t),i[0]=a,i[1]=e,i[2]=n}else n=i[2];return 0===n.length}var g=n(70719),x=n(34164);let b="compact_diff_lines";function y(e){let t,n,a,l,s,o,y,v,N,w,S,L,_,k,E,I=(0,r.c)(19),{userNotices:D}=e,T=p(b,D),{dismissNotice:A}=(_=(0,r.c)(5),k=p(b,D),_[0]!==k||_[1]!==b?(S=()=>{(0,u.M3)()&&!k&&(0,h.DI)((0,f.VB1)({noticeName:b}),{method:"POST"})},_[0]=k,_[1]=b,_[2]=S):S=_[2],E=S,_[3]!==E?(L={dismissNotice:E},_[3]=E,_[4]=L):L=_[4],L);I[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:C,onError:j},I[0]=t):t=I[0];let{mutate:R}=(0,g.U)(t),[$,O]=(0,m.useState)(!0);I[1]!==A||I[2]!==R?(n=()=>{R({lineSpacing:"compact"}),O(!1),A()},I[1]=A,I[2]=R,I[3]=n):n=I[3];let P=n;I[4]!==A?(a=()=>{O(!1),A()},I[4]=A,I[5]=a):a=I[5];let M=a;return T?null:(I[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,x.$)("d-flex flex-column gap-2","DiffCompactLinesPopover-module__PopoverContent--HUydq"),s=(0,i.jsx)("h2",{className:"DiffCompactLinesPopover-module__Heading--hFmwp",children:"Customizable line height"}),o=(0,i.jsx)("p",{children:"The default line height has been increased for improved accessibility. You can choose to enable a more compact line height from the view settings menu."}),I[6]=l,I[7]=s,I[8]=o):(l=I[6],s=I[7],o=I[8]),I[9]!==P?(y=(0,i.jsx)(c.Q,{onClick:P,children:"Enable compact line height"}),I[9]=P,I[10]=y):y=I[10],I[11]!==M?(v=(0,i.jsx)(c.Q,{onClick:M,variant:"invisible",children:"Dismiss"}),I[11]=M,I[12]=v):v=I[12],I[13]!==y||I[14]!==v?(N=(0,i.jsxs)(d.A.Content,{className:l,children:[s,o,(0,i.jsxs)("div",{className:"d-flex gap-2 flex-row w-full flex-wrap",children:[y,v]})]}),I[13]=y,I[14]=v,I[15]=N):N=I[15],I[16]!==$||I[17]!==N?(w=(0,i.jsx)(d.A,{open:$,caret:"top-right",className:"DiffCompactLinesPopover-module__PopoverContainer--A4URR",children:N}),I[16]=$,I[17]=N,I[18]=w):w=I[18],w)}function j(){}function C(){}try{y.displayName||(y.displayName="DiffCompactLinesPopover")}catch{}var v=n(79472);function N(e){let t,n,a,s,o,c=(0,r.c)(16),{whitespacePreferenceAvailable:d,lineSpacingPreferenceAvailable:m,defaultHideWhitespace:u,onUpdateWhitespace:f,reloadOnChange:h}=e,p=void 0===d||d,x=void 0===m||m,{data:b}=(0,v.ID)(),y=(0,v.Qn)(void 0!==u&&u);c[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:S,onError:w},c[0]=t):t=c[0];let{mutate:j}=(0,g.U)(t);c[1]!==y||c[2]!==f||c[3]!==h?(n=()=>{(0,v.bJ)("w",y?"0":"1"),f?.(!y),void 0!==h&&h()},c[1]=y,c[2]=f,c[3]=h,c[4]=n):n=c[4];let C=n;return b&&(p||x)?(c[5]!==y||c[6]!==C||c[7]!==p?(a=p&&(0,i.jsx)(l.l.Item,{selected:y,onSelect:C,children:"Hide whitespace"}),c[5]=y,c[6]=C,c[7]=p,c[8]=a):a=c[8],c[9]!==b||c[10]!==x||c[11]!==j?(s=x&&(0,i.jsx)(l.l.Item,{selected:"compact"===b.lineSpacing,onSelect:()=>j({lineSpacing:"compact"===b.lineSpacing?"relaxed":"compact"}),children:"Compact line height"}),c[9]=b,c[10]=x,c[11]=j,c[12]=s):s=c[12],c[13]!==a||c[14]!==s?(o=(0,i.jsxs)(l.l.Group,{"aria-label":"Format",selectionVariant:"multiple",variant:"subtle",children:[a,s]}),c[13]=a,c[14]=s,c[15]=o):o=c[15],o):null}function w(){}function S(){}try{N.displayName||(N.displayName="DiffLinePresentationToggles")}catch{}function L(e){let t,n,a,s,o,c,d,m=(0,r.c)(17),{reloadOnChange:u}=e,f=void 0!==u&&u,{data:h}=(0,v.ID)(),p=h?.splitPreference;m[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:k,onError:_},m[0]=t):t=m[0];let{mutate:x}=(0,g.U)(t);m[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(l.l.GroupHeading,{children:"Layout"}),m[1]=n):n=m[1];let b="unified"===p;m[2]!==f||m[3]!==x?(a=()=>{x({splitPreference:"unified"}),(0,v.bJ)("diff","unified"),f&&window.location.reload()},m[2]=f,m[3]=x,m[4]=a):a=m[4],m[5]!==b||m[6]!==a?(s=(0,i.jsx)(l.l.Item,{selected:b,onSelect:a,children:"Unified"}),m[5]=b,m[6]=a,m[7]=s):s=m[7];let y="split"===p;return m[8]!==f||m[9]!==x?(o=()=>{x({splitPreference:"split"}),(0,v.bJ)("diff","split"),f&&window.location.reload()},m[8]=f,m[9]=x,m[10]=o):o=m[10],m[11]!==y||m[12]!==o?(c=(0,i.jsx)(l.l.Item,{selected:y,onSelect:o,children:"Split"}),m[11]=y,m[12]=o,m[13]=c):c=m[13],m[14]!==s||m[15]!==c?(d=(0,i.jsxs)(l.l.Group,{selectionVariant:"single",children:[n,s,c]}),m[14]=s,m[15]=c,m[16]=d):d=m[16],d}function _(){}function k(){}try{L.displayName||(L.displayName="DiffViewPreferenceToggle")}catch{}var E=n(18799);function I(){let e,t,n,a=(0,r.c)(7),{data:s}=(0,v.ID)();a[0]===Symbol.for("react.memo_cache_sentinel")?(e={onSuccess:T,onError:D},a[0]=e):e=a[0];let{mutate:o}=(0,g.U)(e);if(!s)return null;let c=s.commentsPreference===E.sI.Collapsed;return a[1]!==c||a[2]!==o?(t=()=>o({commentsPreference:c?E.sI.Visible:E.sI.Collapsed}),a[1]=c,a[2]=o,a[3]=t):t=a[3],a[4]!==c||a[5]!==t?(n=(0,i.jsx)(l.l.Group,{"aria-label":"Comments",selectionVariant:"single",children:(0,i.jsx)(l.l.Item,{role:"menuitemcheckbox",selected:c,onSelect:t,children:"Minimize comments"})}),a[4]=c,a[5]=t,a[6]=n):n=a[6],n}function D(){}function T(){}try{I.displayName||(I.displayName="DiffCommentsPreferenceToggle")}catch{}var A=n(30459);let R=["layout","comments","whitespace","line-spacing"];function $(e){let t,n,a,s,o,c,d,m,u,f=(0,r.c)(29),{additionalPreferences:h,defaultHideWhitespace:p,enabledDiffViewSettings:g,onUpdateWhitespace:x,reloadOnSplitPreferenceChange:b,reloadOnWhitespaceChange:y}=e,j=void 0===g?R:g,C=void 0!==b&&b,v=void 0!==y&&y;f[0]!==j?(t=j.includes("layout")&&j.includes("comments"),f[0]=j,f[1]=t):t=f[1];let w=t;f[2]!==j?(n=j.includes("line-spacing")||j.includes("whitespace"),f[2]=j,f[3]=n):n=f[3];let S=n;f[4]!==j||f[5]!==S?(a=S&&(j.includes("comments")||j.includes("layout")),f[4]=j,f[5]=S,f[6]=a):a=f[6];let _=a;return f[7]!==j||f[8]!==C?(s=j.includes("layout")&&(0,i.jsx)(L,{reloadOnChange:C}),f[7]=j,f[8]=C,f[9]=s):s=f[9],f[10]!==w?(o=w&&(0,i.jsx)(l.l.Divider,{}),f[10]=w,f[11]=o):o=f[11],f[12]!==j?(c=j.includes("comments")&&(0,i.jsx)(I,{}),f[12]=j,f[13]=c):c=f[13],f[14]!==_?(d=_&&(0,i.jsx)(l.l.Divider,{}),f[14]=_,f[15]=d):d=f[15],f[16]!==p||f[17]!==j||f[18]!==x||f[19]!==v||f[20]!==S?(m=S?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(N,{defaultHideWhitespace:p,lineSpacingPreferenceAvailable:j.includes("line-spacing"),whitespacePreferenceAvailable:j.includes("whitespace"),onUpdateWhitespace:x,reloadOnChange:v?O:void 0})}):null,f[16]=p,f[17]=j,f[18]=x,f[19]=v,f[20]=S,f[21]=m):m=f[21],f[22]!==h||f[23]!==d||f[24]!==m||f[25]!==s||f[26]!==o||f[27]!==c?(u=(0,i.jsxs)(i.Fragment,{children:[s,o,c,d,m,h]}),f[22]=h,f[23]=d,f[24]=m,f[25]=s,f[26]=o,f[27]=c,f[28]=u):u=f[28],u}function O(){return window.location.reload()}function P(e){let t,n,c,d,m,u,f=(0,r.c)(21),{additionalPreferences:h,invisible:p,defaultHideWhitespace:g,enabledDiffViewSettings:x,onUpdateWhitespace:b,reloadOnSplitPreferenceChange:j,reloadOnWhitespaceChange:C,small:v,userNotices:N}=e,w=void 0===x?R:x,S=void 0!==j&&j,L=void 0!==C&&C,{sendAnalyticsEvent:_}=(0,A.s)();f[0]!==_?(t=()=>{_("diff_view.settings.open","DIFF_VIEW_SETTINGS_BUTTON")},f[0]=_,f[1]=t):t=f[1];let k=t,E=v?"small":"medium",I=void 0===p||p?"invisible":"default";return f[2]!==k||f[3]!==E||f[4]!==I?(n=(0,i.jsx)(s.W.Anchor,{children:(0,i.jsx)(o.K,{"aria-label":"Open diff view settings",icon:a.GearIcon,size:E,variant:I,onClick:k})}),f[2]=k,f[3]=E,f[4]=I,f[5]=n):n=f[5],f[6]!==h||f[7]!==g||f[8]!==w||f[9]!==b||f[10]!==S||f[11]!==L?(c=(0,i.jsx)(s.W.Overlay,{children:(0,i.jsx)(l.l,{children:(0,i.jsx)($,{additionalPreferences:h,defaultHideWhitespace:g,enabledDiffViewSettings:w,onUpdateWhitespace:b,reloadOnSplitPreferenceChange:S,reloadOnWhitespaceChange:L})})}),f[6]=h,f[7]=g,f[8]=w,f[9]=b,f[10]=S,f[11]=L,f[12]=c):c=f[12],f[13]!==n||f[14]!==c?(d=(0,i.jsxs)(s.W,{children:[n,c]}),f[13]=n,f[14]=c,f[15]=d):d=f[15],f[16]!==N?(m=(0,i.jsx)(y,{userNotices:N}),f[16]=N,f[17]=m):m=f[17],f[18]!==d||f[19]!==m?(u=(0,i.jsxs)(i.Fragment,{children:[d,m]}),f[18]=d,f[19]=m,f[20]=u):u=f[20],u}try{$.displayName||($.displayName="DiffViewSettingsMenuContent")}catch{}try{P.displayName||(P.displayName="DiffViewSettings")}catch{}},28600:(e,t,n)=>{n.d(t,{A:()=>s});let{getItem:i,setItem:r,removeItem:a}=(0,n(82075).A)("localStorage"),l="REACT_PROFILING_ENABLED",s={enable:()=>r(l,"true"),disable:()=>a(l),isEnabled:()=>!!i(l)}},30459:(e,t,n)=>{n.d(t,{S:()=>o,s:()=>s});var i=n(16522),r=n(96540),a=n(53419),l=n(49936);function s(){let e,t,n=(0,i.c)(6),s=(0,r.use)(l.I);if(!s)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:o,category:c,metadata:d}=s;n[0]!==o||n[1]!==c||n[2]!==d?(e=(e,t,n)=>{let i={react:!0,app_name:o,category:c,...d};(0,a.BI)(e,{...i,...void 0===n?{}:n,target:t})},n[0]=o,n[1]=c,n[2]=d,n[3]=e):e=n[3];let m=e;return n[4]!==m?(t={sendAnalyticsEvent:m},n[4]=m,n[5]=t):t=n[5],t}function o(){let e,t,n=(0,i.c)(4),{sendAnalyticsEvent:r}=s();n[0]!==r?(e=e=>{r("analytics.click",void 0,void 0===e?{}:e)},n[0]=r,n[1]=e):e=n[1];let a=e;return n[2]!==a?(t={sendClickAnalyticsEvent:a},n[2]=a,n[3]=t):t=n[3],t}},34535:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(68273),r=n(16522),a=n(96540);let l=(0,i.xS)()?function(e){let t,n,i=(0,r.c)(4),{focusRowRef:l,mouseRowRef:s}=e,[o,c]=(0,a.useState)(!1);return i[0]!==l||i[1]!==s?(t=()=>{let e=l.current,t=s.current;if(!e||!t)return;let n=()=>{let t=e.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&c(!0)},i=()=>n(),r=()=>c(!1),a=()=>n(),o=()=>c(!1);return e.addEventListener("focus",i),e.addEventListener("blur",r),t.addEventListener("mouseenter",a),t.addEventListener("mouseleave",o),()=>{e.removeEventListener("focus",i),e.removeEventListener("blur",r),t.removeEventListener("mouseenter",a),t.removeEventListener("mouseleave",o)}},n=[l,s],i[0]=l,i[1]=s,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,a.useEffect)(t,n),o}:function({focusRowRef:e,mouseRowRef:t}){let[n,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let n=e.current,r=t.current;if(!n||!r)return;let a=()=>{let e=n.querySelector(".PRIVATE_TreeView-item-content-text");e?.scrollWidth!==e?.offsetWidth&&i(!0)},l=()=>a(),s=()=>i(!1),o=()=>a(),c=()=>i(!1);return n.addEventListener("focus",l),n.addEventListener("blur",s),r.addEventListener("mouseenter",o),r.addEventListener("mouseleave",c),()=>{n.removeEventListener("focus",l),n.removeEventListener("blur",s),r.removeEventListener("mouseenter",o),r.removeEventListener("mouseleave",c)}},[e,t]),n}},39467:(e,t,n)=>{n.d(t,{Gy:()=>S,LB:()=>E,nn:()=>I,lm:()=>k});var i=n(74848),r=n(96540),a=n(35750),l=n(18150),s=n(85242),o=n(88243),c=n(16213),d=n(50467),m=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,g=new WeakMap,x=new WeakSet,b=new WeakSet,y=new WeakSet,j=new WeakSet;let ScreenSizeStore=class ScreenSizeStore{computeSize(e){return(0,o._)(this,x,C).call(this,e)}constructor(e,t){(0,c._)(this,x),(0,c._)(this,b),(0,c._)(this,y),(0,c._)(this,j),(0,l._)(this,m,{writable:!0,value:null}),(0,l._)(this,u,{writable:!0,value:null}),(0,l._)(this,f,{writable:!0,value:new Set}),(0,l._)(this,h,{writable:!0,value:void 0}),(0,l._)(this,p,{writable:!0,value:void 0}),(0,d._)(this,"subscribe",e=>{if("undefined"==typeof document)throw Error("ScreenSizeStore.subscribe() cannot be called on the server");return(0,a._)(this,f).add(e),(0,o._)(this,y,N).call(this),()=>{(0,a._)(this,f).delete(e),(0,o._)(this,j,w).call(this)}}),(0,d._)(this,"getSnapshot",()=>{if("undefined"==typeof document)throw Error("ScreenSizeStore.getSnapshot() cannot be called on the server");return null===(0,a._)(this,m)?(0,o._)(this,b,v).call(this):(0,a._)(this,m)}),(0,l._)(this,g,{writable:!0,value:e=>{let t=e[0];if(!t)return;let n=(0,o._)(this,x,C).call(this,t.contentRect.width);if(null===(0,a._)(this,m)||n!==(0,a._)(this,m))for(let e of((0,s._)(this,m,n),(0,a._)(this,f)))e()}}),(0,s._)(this,h,[...e].sort((e,t)=>t-e)),(0,s._)(this,p,t)}};function C(e){for(let t of(0,a._)(this,h))if(e>=t)return t;return(0,a._)(this,p)}function v(){if("undefined"==typeof document||!document.documentElement)return(0,s._)(this,m,(0,a._)(this,p)),(0,a._)(this,p);let e=document.documentElement.clientWidth;0===e&&"undefined"!=typeof window&&"number"==typeof window.innerWidth&&(e=window.innerWidth);let t=(0,o._)(this,x,C).call(this,e);return(0,s._)(this,m,t),t}function N(){(0,a._)(this,u)||((0,s._)(this,u,new ResizeObserver((0,a._)(this,g))),(0,a._)(this,u).observe(document.documentElement),null===(0,a._)(this,m)&&(0,o._)(this,b,v).call(this))}function w(){0===(0,a._)(this,f).size&&(0,a._)(this,u)&&((0,a._)(this,u).disconnect(),(0,s._)(this,u,null))}let S={small:1,medium:544,large:768,xlarge:1012,xxlarge:1280,xxxlarge:1350,xxxxlarge:1440},L=new ScreenSizeStore([S.xxxxlarge,S.xxxlarge,S.xxlarge,S.xlarge,S.large,S.medium,S.small],S.small),_=r.createContext({screenSize:S.small});function k(){return r.useContext(_)}function E({children:e,initialValue:t=S.small}){let n=(0,r.useSyncExternalStore)(L.subscribe,L.getSnapshot,()=>t),a=(0,r.useMemo)(()=>({screenSize:n}),[n]);return(0,i.jsx)(_,{value:a,children:e})}function I(e){return L.computeSize(e)}try{_.displayName||(_.displayName="ScreenContext")}catch{}try{E.displayName||(E.displayName="ScreenSizeProvider")}catch{}},39619:(e,t,n)=>{n.d(t,{HS:()=>l,Oc:()=>a,Tv:()=>c,Xr:()=>SymbolChangedEvent,f7:()=>s,fD:()=>o,qR:()=>r});var i=n(50467);let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),(0,i._)(this,"payload",void 0),this.payload=e}};Event;let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),(0,i._)(this,"reference",void 0),(0,i._)(this,"openPanel",void 0),(0,i._)(this,"id",void 0),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),(0,i._)(this,"context",void 0),this.context=e}};function r(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function a(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function l(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function s(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function o(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function c(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},40058:(e,t,n)=>{n.d(t,{T:()=>v});var i=n(74848),r=n(16522),a=n(77430),l=n(38621),s=n(94236),o=n(30093),c=n(46251),d=n(69726),m=n(72511),u=n(5524),f=n(96540),h=n(23470);let p=f.memo(function(e){let t,n,l,s,o,c=(0,r.c)(19),{user:d,isCurrent:m,onSelect:f,shouldSetAsDiv:h,count:p,position:g}=e,x=h?"div":"li";c[0]!==f||c[1]!==d?(t=()=>{f&&f(d)},c[0]=f,c[1]=d,c[2]=t):t=c[2];let b=g+1,y=d.primaryAvatarUrl;return c[3]!==d.path?(n=d.path.startsWith("/apps/"),c[3]=d.path,c[4]=n):n=c[4],c[5]!==n||c[6]!==d.primaryAvatarUrl?(l=(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(a.r,{src:y,square:n})}),c[5]=n,c[6]=d.primaryAvatarUrl,c[7]=l):l=c[7],c[8]!==d.name?(s=(0,i.jsx)(u.l.Description,{truncate:!0,children:d.name}),c[8]=d.name,c[9]=s):s=c[9],c[10]!==p||c[11]!==m||c[12]!==x||c[13]!==t||c[14]!==b||c[15]!==l||c[16]!==s||c[17]!==d.login?(o=(0,i.jsxs)(u.l.Item,{as:x,selected:m,onSelect:t,"aria-setsize":p,"aria-posinset":b,children:[l,d.login,s]}),c[10]=p,c[11]=m,c[12]=x,c[13]=t,c[14]=b,c[15]=l,c[16]=s,c[17]=d.login,c[18]=o):o=c[18],o});try{p.displayName||(p.displayName="UserItem")}catch{}let g="UsersList-module__scrollableUserList--v1HiT";function x(e){let t,n=(0,r.c)(2);return n[0]!==e?(t=e.users.length>20?(0,i.jsx)(y,{...e}):(0,i.jsx)(b,{...e}),n[0]=e,n[1]=t):t=n[1],t}function b(e){let t,n,a=(0,r.c)(12),{users:l,currentUser:s,onSelect:o,style:c,className:d}=e,m=d?`${g} ${d}`:g;if(a[0]!==s?.login||a[1]!==o||a[2]!==l){let e;a[4]!==s?.login||a[5]!==o||a[6]!==l.length?(e=(e,t)=>(0,i.jsx)(p,{user:e,isCurrent:e.login===s?.login,onSelect:o,count:l.length,position:t},e.login),a[4]=s?.login,a[5]=o,a[6]=l.length,a[7]=e):e=a[7],t=l.map(e),a[0]=s?.login,a[1]=o,a[2]=l,a[3]=t}else t=a[3];return a[8]!==m||a[9]!==c||a[10]!==t?(n=(0,i.jsx)(u.l,{role:"menu",style:c,className:m,selectionVariant:"single",children:t}),a[8]=m,a[9]=c,a[10]=t,a[11]=n):n=a[11],n}function y(e){let t,n,a=(0,r.c)(9),{users:l,currentUser:s,onSelect:o,style:c,className:d}=e,m=d?`${g} ${d}`:g;return a[0]!==s?.login||a[1]!==o||a[2]!==l.length?(t=(e,t)=>(0,i.jsx)(p,{user:e,isCurrent:e.login===s?.login,onSelect:o,shouldSetAsDiv:!0,count:l.length,position:t},e.login),a[0]=s?.login,a[1]=o,a[2]=l.length,a[3]=t):t=a[3],a[4]!==m||a[5]!==c||a[6]!==t||a[7]!==l?(n=(0,i.jsx)(h.F,{items:l,itemHeight:33,style:c,makeKey:j,shouldUseActionList:!0,renderItem:t,className:m}),a[4]=m,a[5]=c,a[6]=t,a[7]=l,a[8]=n):n=a[8],n}function j(e){return e.login}try{x.displayName||(x.displayName="UsersList")}catch{}try{b.displayName||(b.displayName="FullUsersList")}catch{}try{y.displayName||(y.displayName="VirtualUsersList")}catch{}var C=n(4559);function v(e){var t,n;let o,c,d,m,u,h,p,g,b,y,j,v,k,E,I,D=(0,r.c)(52),{defaultText:T,usersState:A,currentUser:R,onSelect:$,hotKey:O,onOpenChange:P,renderCustomFooter:M,size:F,showTypedInUser:B,width:U,label:H}=e,z=void 0!==B&&B,V=void 0===U?"large":U,G=void 0===H?"":H,[W,K]=(0,f.useState)("");D[0]!==W||D[1]!==z||D[2]!==A.users?(o=function(e,t){if(!e)return[];let n=t.trim().toLowerCase();return n?e.filter(e=>e.login.toLowerCase().includes(n)||e.name?.toLowerCase().includes(n)):e}(A.users,W),c=z&&(t=W,n=o,!!t&&(0===n.length||n.length>1||1===n.length&&!!n[0]&&n[0].login.toLowerCase()!==t.toLowerCase())),D[0]=W,D[1]=z,D[2]=A.users,D[3]=o,D[4]=c):(o=D[3],c=D[4]);let q=c,X=0===o.length&&!q,Q=!A.loading&&!A.error&&X;return D[5]!==Q?(d=()=>{Q&&(0,C.i)("Nothing to show")},D[5]=Q,D[6]=d):d=D[6],D[7]!==Q||D[8]!==W?(m=[Q,W],D[7]=Q,D[8]=W,D[9]=m):m=D[9],(0,f.useEffect)(d,m),D[10]!==Q||D[11]!==P?(u=e=>{P&&P(e),Q&&(0,C.i)("Nothing to show")},D[10]=Q,D[11]=P,D[12]=u):u=D[12],D[13]!==R?(h=(0,i.jsx)("div",{className:"mr-2",children:R?(0,i.jsx)(a.r,{size:16,src:R.primaryAvatarUrl,square:R.path.startsWith("/apps/")}):(0,i.jsx)(l.PeopleIcon,{size:"small",className:"fgColor-muted"})}),D[13]=R,D[14]=h):h=D[14],D[15]!==R||D[16]!==T||D[17]!==G?(p=(0,i.jsx)("div",{className:"UserSelector-module__truncatedUserText--hOMue",children:R?(0,i.jsxs)("span",{children:[G,R.login]}):(0,i.jsx)("span",{children:T})}),D[15]=R,D[16]=T,D[17]=G,D[18]=p):p=D[18],D[19]!==h||D[20]!==p?(g=(0,i.jsxs)("div",{className:"d-flex",children:[h,p]}),D[19]=h,D[20]=p,D[21]=g):g=D[21],D[22]!==O||D[23]!==F||D[24]!==g?(b=(0,i.jsx)(s.W.Button,{"data-hotkey":O,size:F,"data-testid":"user-selector-button",children:g}),D[22]=O,D[23]=F,D[24]=g,D[25]=b):b=D[25],D[26]!==W?(y=(0,i.jsx)(N,{defaultText:W,onFilterChange:K}),D[26]=W,D[27]=y):y=D[27],D[28]!==W||D[29]!==$||D[30]!==q||D[31]!==X||D[32]!==A.error||D[33]!==A.loading?(j=A.loading?(0,i.jsx)(w,{}):A.error?(0,i.jsx)(S,{}):(0,i.jsxs)(i.Fragment,{children:[X&&(0,i.jsx)(L,{}),q&&(0,i.jsx)(_,{filterText:W,onSelect:$})]}),D[28]=W,D[29]=$,D[30]=q,D[31]=X,D[32]=A.error,D[33]=A.loading,D[34]=j):j=D[34],D[35]!==R||D[36]!==o||D[37]!==$||D[38]!==M?(v=o.length>0&&(0,i.jsx)(x,{users:o,currentUser:R,onSelect:$,className:M?"UserSelector-module__userListWithFooter--EOx8I":"UserSelector-module__userListDefault--tFqfI"}),D[35]=R,D[36]=o,D[37]=$,D[38]=M,D[39]=v):v=D[39],D[40]!==M?(k=M?.(),D[40]=M,D[41]=k):k=D[41],D[42]!==y||D[43]!==j||D[44]!==v||D[45]!==k||D[46]!==V?(E=(0,i.jsxs)(s.W.Overlay,{width:V,children:[y,j,v,k]}),D[42]=y,D[43]=j,D[44]=v,D[45]=k,D[46]=V,D[47]=E):E=D[47],D[48]!==b||D[49]!==E||D[50]!==u?(I=(0,i.jsx)("div",{children:(0,i.jsxs)(s.W,{onOpenChange:u,children:[b,E]})}),D[48]=b,D[49]=E,D[50]=u,D[51]=I):I=D[51],I}function N(e){let t,n,a=(0,r.c)(5),{onFilterChange:s,defaultText:c}=e;return a[0]!==s?(t=e=>s(e.target.value),a[0]=s,a[1]=t):t=a[1],a[2]!==c||a[3]!==t?(n=(0,i.jsx)("div",{className:"p-2 border-bottom border-color-border-default",children:(0,i.jsx)(o.A,{leadingVisual:l.SearchIcon,value:c,placeholder:"Find a user...",onChange:t,className:"UserSelector-module__userSearchInput--J_Pgo"})}),a[2]=c,a[3]=t,a[4]=n):n=a[4],n}function w(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(c.B,{justify:"center",className:"p-2",children:(0,i.jsx)(d.A,{size:"medium",srText:"Loading users..."})}),t[0]=e):e=t[0],e}function S(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(m.A,{variant:"danger",children:"Could not load users"}),t[0]=e):e=t[0],e}function L(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(c.B,{justify:"center",className:"p-3",children:"Nothing to show"}),t[0]=e):e=t[0],e}function _(e){let t,n,a,l=(0,r.c)(8),{filterText:s,onSelect:o}=e;return l[0]!==s||l[1]!==o?(t=()=>{o&&o({login:s,name:s,path:"",primaryAvatarUrl:""})},l[0]=s,l[1]=o,l[2]=t):t=l[2],l[3]!==s?(n=(0,i.jsxs)(i.Fragment,{children:["Filter on author\xa0",(0,i.jsx)("span",{className:"text-bold",children:s})]}),l[3]=s,l[4]=n):n=l[4],l[5]!==t||l[6]!==n?(a=(0,i.jsx)(u.l.Item,{role:"none",onSelect:t,className:"UserSelector-module__filterResultItem--JqRZP",children:n}),l[5]=t,l[6]=n,l[7]=a):a=l[7],a}try{v.displayName||(v.displayName="UserSelector")}catch{}try{N.displayName||(N.displayName="UserFilter")}catch{}try{w.displayName||(w.displayName="Loading")}catch{}try{S.displayName||(S.displayName="LoadingFailed")}catch{}try{L.displayName||(L.displayName="UsersZeroState")}catch{}try{_.displayName||(_.displayName="UsersTypedInUser")}catch{}},42257:(e,t,n)=>{n.d(t,{d:()=>o});var i=n(74848),r=n(68273),a=n(16522),l=n(99896);let s="AsyncChecksStatusBadge-module__ChecksStatusBadge--Ddd3K",o=(0,r.kw)()?function(e){let t,n,r=(0,a.c)(8),{status:o,oid:c,repo:d,badgeProps:m,descriptionString:u}=e;r[0]!==m?(t=void 0===m?{}:m,r[0]=m,r[1]=t):t=r[1];let f=t,h=void 0===u?"":u,[p,g]=(0,l.ym)(c,d);return r[2]!==f||r[3]!==h||r[4]!==p||r[5]!==g||r[6]!==o?(n=o?(0,i.jsx)(l.B6,{disablePopover:!1,size:"small",statusRollup:o,combinedStatus:p,descriptionText:h,onWillOpenPopup:g,buttonClassName:s,...f}):null,r[2]=f,r[3]=h,r[4]=p,r[5]=g,r[6]=o,r[7]=n):n=r[7],n}:function({status:e,oid:t,repo:n,badgeProps:r={},descriptionString:a=""}){let[o,c]=(0,l.ym)(t,n);return e?(0,i.jsx)(l.B6,{disablePopover:!1,size:"small",statusRollup:e,combinedStatus:o,descriptionText:a,onWillOpenPopup:c,buttonClassName:s,...r}):null};try{o.displayName||(o.displayName="AsyncChecksStatusBadge")}catch{}},43147:(e,t,n)=>{n.d(t,{w:()=>d});var i=n(74848),r=n(68273),a=n(16522),l=n(98755),s=n(30459),o=n(16790),c=n(68534);let d=(0,r.kw)()?function(e){let t,n,r,d,m,u=(0,a.c)(17),{sha:f,direction:h,className:p}=e,g=void 0===h?"s":h,{sendAnalyticsEvent:x}=(0,s.s)(),{loggingPrefix:b,loggingPayload:y}=(0,o.xe)(),j=(0,o.eX)();u[0]!==y||u[1]!==b||u[2]!==x||u[3]!==j?(t=()=>{j&&x(`${b}click`,"COPY_SHA_CLICKED",y)},u[0]=y,u[1]=b,u[2]=x,u[3]=j,u[4]=t):t=u[4];let C=t;u[5]!==f?(n=(0,c.F)(f),u[5]=f,u[6]=n):n=u[6];let v=`Copy full SHA for ${n}`;return u[7]!==g?(r={direction:g},u[7]=g,u[8]=r):r=u[8],u[9]!==p||u[10]!==f||u[11]!==v||u[12]!==r?(d=(0,i.jsx)(l.T,{textToCopy:f,ariaLabel:v,tooltipProps:r,size:"small",className:p}),u[9]=p,u[10]=f,u[11]=v,u[12]=r,u[13]=d):d=u[13],u[14]!==C||u[15]!==d?(m=(0,i.jsx)("div",{onClick:C,children:d}),u[14]=C,u[15]=d,u[16]=m):m=u[16],m}:function({sha:e,direction:t="s",className:n}){let{sendAnalyticsEvent:r}=(0,s.s)(),{loggingPrefix:a,loggingPayload:d}=(0,o.xe)(),m=(0,o.eX)();return(0,i.jsx)("div",{onClick:()=>{m&&r(`${a}click`,"COPY_SHA_CLICKED",d)},children:(0,i.jsx)(l.T,{textToCopy:e,ariaLabel:`Copy full SHA for ${(0,c.F)(e)}`,tooltipProps:{direction:t},size:"small",className:n})})};try{d.displayName||(d.displayName="CopySHA")}catch{}},48926:(e,t,n)=>{n.d(t,{C:()=>f,j:()=>m});var i=n(74848),r=n(68273),a=n(16522),l=n(61200),s=n(81945),o=n(54571),c=n(62935),d=n(4095);let m=(0,r.kw)()?function(e){let t,n,r,m,f,h=(0,a.c)(19),{commit:p,repo:g,children:x,settings:b,textVariant:y}=e,j=(0,d.NO)(p.oid);h[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],h[0]=t):t=h[0];let[C]=(0,o.I)(u,!0,t),v=j?.onBehalfOf;return h[1]!==b?(n={fontWeight:"normal",fontColor:"fg.muted",avatarSize:16,...b},h[1]=b,h[2]=n):n=h[2],h[3]!==p.committedDate||h[4]!==C?(r=!C&&(0,i.jsx)(c.A,{className:"pl-1",datetime:p.committedDate}),h[3]=p.committedDate,h[4]=C,h[5]=r):r=h[5],h[6]!==C?(m=C&&(0,i.jsx)(s.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"}),h[6]=C,h[7]=m):m=h[7],h[8]!==x||h[9]!==p.authors||h[10]!==p.committer||h[11]!==p.committerAttribution||h[12]!==g||h[13]!==v||h[14]!==n||h[15]!==r||h[16]!==m||h[17]!==y?(f=(0,i.jsxs)(l.jF,{authors:p.authors,committer:p.committer,committerAttribution:p.committerAttribution,onBehalfOf:v,repo:g,includeVerbs:!0,authorSettings:n,textVariant:y,children:[r,m,x]}),h[8]=x,h[9]=p.authors,h[10]=p.committer,h[11]=p.committerAttribution,h[12]=g,h[13]=v,h[14]=n,h[15]=r,h[16]=m,h[17]=y,h[18]=f):f=h[18],f}:function({commit:e,repo:t,children:n,settings:r,textVariant:a}){let m=(0,d.NO)(e.oid),[u]=(0,o.I)(()=>!1,!0,[]);return(0,i.jsxs)(l.jF,{authors:e.authors,committer:e.committer,committerAttribution:e.committerAttribution,onBehalfOf:m?.onBehalfOf,repo:t,includeVerbs:!0,authorSettings:{fontWeight:"normal",fontColor:"fg.muted",avatarSize:16,...r},textVariant:a,children:[!u&&(0,i.jsx)(c.A,{className:"pl-1",datetime:e.committedDate}),u&&(0,i.jsx)(s.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"}),n]})};function u(){return!1}let f=(0,r.kw)()?function(e){let t,n,r,d,m=(0,a.c)(12),{commit:u,repo:f,textVariant:p}=e;m[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],m[0]=t):t=m[0];let[g]=(0,o.I)(h,!0,t);return m[1]!==u.pushedDate||m[2]!==g?(n=!g&&(0,i.jsx)(c.A,{className:"pl-1",datetime:u.pushedDate}),m[1]=u.pushedDate,m[2]=g,m[3]=n):n=m[3],m[4]!==g?(r=g&&(0,i.jsx)(s.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"}),m[4]=g,m[5]=r):r=m[5],m[6]!==u.pusher||m[7]!==f||m[8]!==n||m[9]!==r||m[10]!==p?(d=(0,i.jsxs)(l.Cf,{pusher:u.pusher,repo:f,textVariant:p,children:[n,r]}),m[6]=u.pusher,m[7]=f,m[8]=n,m[9]=r,m[10]=p,m[11]=d):d=m[11],d}:function({commit:e,repo:t,textVariant:n}){let[r]=(0,o.I)(()=>!1,!0,[]);return(0,i.jsxs)(l.Cf,{pusher:e.pusher,repo:t,textVariant:n,children:[!r&&(0,i.jsx)(c.A,{className:"pl-1",datetime:e.pushedDate}),r&&(0,i.jsx)(s.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"})]})};function h(){return!1}try{m.displayName||(m.displayName="CommitAttribution")}catch{}try{f.displayName||(f.displayName="PushAttribution")}catch{}},51407:(e,t,n)=>{n.d(t,{Y:()=>i});function i(){let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}},52475:(e,t,n)=>{n.d(t,{_S:()=>a,cB:()=>s,cW:()=>l});var i=n(53627),r=n(71315);let a=()=>{let e=(0,i.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},l=e=>{(0,i.C3)({appId:e})},s=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};r.cg?.addEventListener("hashchange",()=>{(0,i.C3)({appId:s()})},!0)},53331:(e,t,n)=>{n.d(t,{A:()=>l,K:()=>r});var i=n(50467);function r(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}let a=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),(0,i._)(this,"response",void 0),this.response=t,this.name="ResponseError"}};function l(e,t,n=!1){let i=t.headers.get("content-type")||"";if(!n&&!i.startsWith("text/html"))throw new a(`expected response with text/html, but was ${i}`,t);if(n&&!(i.startsWith("text/html")||i.startsWith("application/json")))throw new a(`expected response with text/html or application/json, but was ${i}`,t);let r=t.headers.get("x-html-safe");if(r){if(!e.includes(r))throw new a("response X-HTML-Safe nonce did not match",t)}else throw new a("missing X-HTML-Safe nonce",t)}},53419:(e,t,n)=>{let i;n.d(t,{BI:()=>h,Ti:()=>p,lA:()=>u,sX:()=>f});var r=n(70837),a=n(18679),l=n(82075),s=n(82518);let{getItem:o}=(0,l.A)("localStorage"),c="dimension_",d=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,r.O)("octolytics");delete e.baseContext,i=new a.s(e)}catch{}function m(e){let t=(0,r.O)("octolytics").baseContext||{};if(t)for(let[e,n]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(c)&&(t[e.replace(c,"")]=n,delete t[e]);let n=document.querySelector("meta[name=visitor-payload]");for(let[e,i]of(n&&Object.assign(t,JSON.parse(atob(n.content))),new URLSearchParams(window.location.search)))d.includes(e.toLowerCase())&&(t[e]=i);return t.staff=(0,s.Xl)().toString(),Object.assign(t,e)}function u(e){i?.sendPageView(m(e))}function f(){return document.head?.querySelector('meta[name="current-catalog-service"]')?.content}function h(e,t={}){let n=f(),r=n?{service:n}:{};for(let[e,n]of Object.entries(t))null!=n&&(r[e]=`${n}`);i&&(m(r),i.sendEvent(e||"unknown",m(r)))}function p(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},59403:(e,t,n)=>{n.d(t,{Dx:()=>l,IP:()=>a,M4:()=>r,dt:()=>s});var i=n(91385);let r=1/0,a=-1/0,l=1,s=(e,t,n=l)=>{let s=e.trim().toLowerCase(),o=t.trim().toLowerCase();if(s===o)return r;if(0===o.length||0===s.length)return a;let c=(0,i.fN)(s,o);return c===1/0&&s!==o?a:o.startsWith(s)||o.endsWith(s)?c+n:c}},63352:(e,t,n)=>{n.d(t,{Z:()=>v});var i=n(74848),r=n(16522),a=n(75202),l=n(71315),s=n(96540),o=n(38621),c=n(26108),d=n(57387),m=n(64451),u=n(86877),f=n(46720),h=n(10576),p=n(21373);let g=[{label:"Comment is harmful or unsafe",value:"OFFENSIVE_OR_DISCRIMINATORY"},{label:"Comment is poorly formatted",value:"POORLY_FORMATTED"},{label:"Comment is not true",value:"INCORRECT"},{label:"Comment is not helpful",value:"UNHELPFUL"},{label:"Comment is attached to the wrong line(s)",value:"INCORRECT_LINE"},{label:"Comment is a duplicate of another comment",value:"DUPLICATE"},{label:"Code suggestion is harmful or unsafe",value:"SUGGESTION_OFFENSIVE_OR_DISCRIMINATORY"},{label:"Code suggestion is poorly formatted",value:"SUGGESTION_POORLY_FORMATTED"},{label:"Code suggestion does not solve the problem in the comment",value:"SUGGESTION_UNHELPFUL"},{label:"Code suggestion is invalid",value:"SUGGESTION_INVALID"}],x=e=>{let t,n,a,l,o=(0,r.c)(16),{commentId:c,onClose:x,onSubmit:b,feedbackOptions:y,returnFocusRef:j}=e,C=void 0===y?g:y,[v,N]=(0,s.useState)(!1);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],o[0]=t):t=o[0];let[w,S]=(0,s.useState)(t),[L,_]=(0,s.useState)("");o[1]!==c||o[2]!==w||o[3]!==b||o[4]!==L?(n=e=>{e.preventDefault(),N(!0),w.length&&b({commentId:c,type:"NEGATIVE",feedbackChoice:w,textResponse:L})},o[1]=c,o[2]=w,o[3]=b,o[4]=L,o[5]=n):n=o[5];let k=n,E=(0,s.useId)(),I=v&&0===w.length;return o[6]!==C||o[7]!==k||o[8]!==I||o[9]!==L||o[10]!==E?(a=()=>(0,i.jsxs)("form",{onSubmit:k,children:[(0,i.jsxs)(d.l.Body,{children:[(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)(m.A,{onChange:S,required:!0,children:[(0,i.jsx)(m.A.Label,{children:"Category"}),C.map(e=>(0,i.jsxs)(u.A,{id:`feedback_choice_${e.value}`,children:[(0,i.jsx)(f.A,{value:e.value,"aria-describedby":I?E:void 0}),(0,i.jsx)(u.A.Label,{children:e.label})]},e.value)),I&&(0,i.jsx)(m.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,i.jsxs)(u.A,{id:"text_response",children:[(0,i.jsx)(u.A.Label,{children:"How should we improve this response?"}),(0,i.jsx)(h.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:L,resize:"vertical",onChange:e=>_(e.currentTarget.value)})]})]}),(0,i.jsx)(d.l.Footer,{children:(0,i.jsx)(p.Q,{type:"submit",disabled:I,children:"Submit"})})]}),o[6]=C,o[7]=k,o[8]=I,o[9]=L,o[10]=E,o[11]=a):a=o[11],o[12]!==x||o[13]!==j||o[14]!==a?(l=(0,i.jsx)(d.l,{onClose:x,title:"Provide additional feedback",subtitle:"Please help us improve GitHub Copilot by sharing more details about this comment.",returnFocusRef:j,renderBody:a}),o[12]=x,o[13]=j,o[14]=a,o[15]=l):l=o[15],l};try{x.displayName||(x.displayName="NegativeFeedbackForm")}catch{}let b=e=>{let t,n,a=(0,r.c)(6),{onClick:l,commentId:s,disabled:d}=e;return a[0]!==s||a[1]!==l?(t=()=>l({type:"POSITIVE",commentId:s}),a[0]=s,a[1]=l,a[2]=t):t=a[2],a[3]!==d||a[4]!==t?(n=(0,i.jsx)(c.K,{size:"small",variant:"invisible",disabled:d,icon:o.ThumbsupIcon,title:"Positive Feedback","aria-label":"Positive Feedback",onClick:t}),a[3]=d,a[4]=t,a[5]=n):n=a[5],n},y=e=>{let t,n,a,l,d,m=(0,r.c)(18),{onClick:u,commentId:f,disabled:h,feedbackOptions:p,showNegativeFeedbackModal:g}=e,b=void 0===g||g,[y,j]=(0,s.useState)(!1),C=(0,s.useRef)(null);m[0]!==u?(t=e=>{u(e),j(!1)},m[0]=u,m[1]=t):t=m[1];let v=t;m[2]!==f||m[3]!==u||m[4]!==b?(n=()=>{b?j(!0):u({type:"NEGATIVE",commentId:f})},m[2]=f,m[3]=u,m[4]=b,m[5]=n):n=m[5];let N=n;return m[6]!==f||m[7]!==y||m[8]!==p||m[9]!==v||m[10]!==b?(a=y&&b&&(0,i.jsx)(x,{onClose:()=>j(!1),onSubmit:v,commentId:f,feedbackOptions:p,returnFocusRef:C}),m[6]=f,m[7]=y,m[8]=p,m[9]=v,m[10]=b,m[11]=a):a=m[11],m[12]!==h||m[13]!==N?(l=(0,i.jsx)(c.K,{ref:C,size:"small",variant:"invisible",disabled:h,icon:o.ThumbsdownIcon,title:"Negative Feedback","aria-label":"Negative Feedback",onClick:N}),m[12]=h,m[13]=N,m[14]=l):l=m[14],m[15]!==a||m[16]!==l?(d=(0,i.jsxs)(i.Fragment,{children:[a,l]}),m[15]=a,m[16]=l,m[17]=d):d=m[17],d};try{b.displayName||(b.displayName="PositiveFeedbackButton")}catch{}try{y.displayName||(y.displayName="NegativeFeedbackButton")}catch{}var j=n(96379);let C=e=>{let t,n,a,o,c,d,m=(0,r.c)(21),{commentId:u,commentUrl:f,feedbackPath:h,feedbackOptions:p,additionalParameters:g,showNegativeFeedbackModal:x}=e,C=void 0===x||x,[v,N]=(0,s.useState)();e:{if(h){t=h;break e}if(f){let e;m[0]!==f?((e=new URL(f,l.fV.origin)).hash="",m[0]=f,m[1]=e):e=m[1],t=`${e}/code_review_feedback`;break e}throw Error("missing feedbackPath and commentUrl")}let w=t;m[2]!==g||m[3]!==w?(n={path:w,additionalParameters:g},m[2]=g,m[3]=w,m[4]=n):n=m[4];let S=(({path:e,additionalParameters:t})=>(0,s.useCallback)(({type:n,commentId:i,feedbackChoice:r,textResponse:a})=>{try{let l=new FormData;if(l.set("comment_id",i),l.set("feedback",n),t)for(let[e,n]of Object.entries(t))l.set(e,n);for(let e of r??[])l.append("feedback_choice[]",e);a&&l.set("text_response",a),(0,j.DI)(e,{method:"POST",body:l})}catch{}},[e,t]))(n);m[5]!==S?(a=e=>{N(e.type),S(e)},m[5]=S,m[6]=a):a=m[6];let L=a,_=`copilot-code-review-feedback-${u}`;return m[7]!==u||m[8]!==L||m[9]!==v?(o="NEGATIVE"!==v&&(0,i.jsx)(b,{disabled:!!v,commentId:u,onClick:L}),m[7]=u,m[8]=L,m[9]=v,m[10]=o):o=m[10],m[11]!==u||m[12]!==p||m[13]!==L||m[14]!==C||m[15]!==v?(c="POSITIVE"!==v&&(0,i.jsx)(y,{disabled:!!v,onClick:L,commentId:u,feedbackOptions:p,showNegativeFeedbackModal:C}),m[11]=u,m[12]=p,m[13]=L,m[14]=C,m[15]=v,m[16]=c):c=m[16],m[17]!==_||m[18]!==o||m[19]!==c?(d=(0,i.jsxs)("div",{"data-testid":_,className:"d-flex gap-1",children:[o,c]}),m[17]=_,m[18]=o,m[19]=c,m[20]=d):d=m[20],d},v=e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=(0,i.jsx)(a.t,{fallback:null,children:(0,i.jsx)(C,{...e})}),n[0]=e,n[1]=t):t=n[1],t};try{C.displayName||(C.displayName="Feedback")}catch{}try{v.displayName||(v.displayName="CopilotCodeReviewFeedback")}catch{}},65787:(e,t,n)=>{n.d(t,{U:()=>a});let i=e=>{let t=getComputedStyle(e,null);return!!t&&"function"==typeof t.getPropertyValue&&["overflow","overflow-y","overflow-x"].some(e=>{let n=t.getPropertyValue(e);return"auto"===n||"scroll"===n})},r=(e,t)=>e&&null!==e.parentNode?r(e.parentNode,t.concat([e])):t;function a(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(let t of r(e.parentNode,[]))if((t instanceof HTMLElement||t instanceof SVGElement)&&i(t))return t;return document.scrollingElement||document.documentElement}}},68534:(e,t,n)=>{n.d(t,{F:()=>i});function i(e){return e.slice(0,7)}},70719:(e,t,n)=>{n.d(t,{U:()=>c});var i=n(16522),r=n(96379),a=n(97665),l=n(94747),s=n(79472),o=n(21067);function c(e){let t,n,r,o,c=(0,i.c)(10),{onSuccess:m,onError:u}=e,f=(0,a.jE)();return c[0]!==f?(t=async e=>{f.setQueryData((0,s.w$)(),t=>({...t,...e}))},c[0]=f,c[1]=t):t=c[1],c[2]!==m?(n=()=>{m()},c[2]=m,c[3]=n):n=c[3],c[4]!==u?(r=e=>{u(e)},c[4]=u,c[5]=r):r=c[5],c[6]!==t||c[7]!==n||c[8]!==r?(o={mutationFn:d,onMutate:t,onSuccess:n,onError:r},c[6]=t,c[7]=n,c[8]=r,c[9]=o):o=c[9],(0,l.n)(o)}async function d(e){let{commentsPreference:t,lineSpacing:n,splitPreference:i}=e;if(!(0,o.M3)())return;let a={};t&&(a={...a,commentsPreference:t}),n&&(a={...a,lineSpacing:n}),i&&(a={...a,diff:i});let l=await (0,r.Sr)("/users/diffview",{method:"POST",headers:{Accept:"application/json"},body:a}),s=await l.json();if(l.ok)return s;throw Error(s.error||"Unknown error occurred",{cause:l.status})}},71833:(e,t,n)=>{n.d(t,{B:()=>a});var i=n(25407),r=n(96379);async function a(e,t){if(!t)return;let n=new FormData;n.set("file_tree_visible",e?"true":"false"),(0,r.DI)((0,i.h6D)(t),{method:"PUT",body:n,headers:{Accept:"application/json"}})}},73017:(e,t,n)=>{n.d(t,{$6:()=>o,JR:()=>l,Jg:()=>d,vb:()=>a});var i=n(74848),r=n(12683);let a=m(r.az),l=m(r.EY),s=({ref:e,...t})=>(0,i.jsx)("div",{...t,ref:e});s.displayName="Div";let o=m(s),c=({ref:e,...t})=>(0,i.jsx)("bdi",{...t,ref:e});c.displayName="Bdi";let d=m(c);function m(e){let t=({html:t,...n})=>(0,i.jsx)(e,{...n,dangerouslySetInnerHTML:t?{__html:t}:void 0});return t.displayName=`SafeHTML${e.displayName||e.name}`,t}try{a.displayName||(a.displayName="VerifiedHTMLBox")}catch{}try{l.displayName||(l.displayName="VerifiedHTMLText")}catch{}try{o.displayName||(o.displayName="VerifiedHTMLDiv")}catch{}try{d.displayName||(d.displayName="VerifiedHTMLBdi")}catch{}},77046:(e,t,n)=>{n.d(t,{A:()=>i});let i={"file-tree-row":"DiffFileTree-module__file-tree-row--GJi_6"}},77430:(e,t,n)=>{n.d(t,{r:()=>s});var i=n(74848),r=n(71315),a=n(12683),l=n(96540);function s({ref:e,src:t,size:n=20,sx:s,...o}){let c=(0,l.useMemo)(()=>{let e=new URL(t,r.fV.origin);return e.searchParams.has("size")||e.searchParams.has("s")||e.searchParams.set("size",String(2*Number(n))),e.toString()},[t,n]);return(0,i.jsx)(a.eu,{src:c,size:n,"data-testid":"github-avatar",sx:s,...o,ref:e})}try{s.displayName||(s.displayName="GitHubAvatar")}catch{}},78252:(e,t,n)=>{n.d(t,{$:()=>s});var i=n(74848),r=n(38621),a=n(5524),l=n(34720);let s=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.l.Divider,{}),(0,i.jsx)(l.t,{eventContext:{prx:!0},leadingVisual:(0,i.jsx)(r.CopilotIcon,{}),fileDiffReference:e.copilotChatReference})]});try{s.displayName||(s.displayName="CopilotDiffChatBlobActionsMenuItems")}catch{}},79463:(e,t,n)=>{var i=n(70103),r=n(1723),a=n(74848),l=n(68273),s=n(16522),o=n(78314),c=n(35898),d=n(75202),m=n(76648),u=n(96540),f=n(38621),h=n(76720);let p=(0,l.kw)()?function(){let e,t,n,i,r,l=(0,s.c)(5);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.E.Visual,{children:(0,a.jsx)(f.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"})}),t=(0,a.jsx)(h.E.Heading,{children:"Unable to load page."}),l[0]=e,l[1]=t):(e=l[0],t=l[1]),l[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:"The page is unavailable due to a system error."}),i=(0,a.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:" Try reloading the page, or if the problem persists, contact support."}),l[2]=n,l[3]=i):(n=l[2],i=l[3]),l[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)("div",{children:(0,a.jsxs)(h.E,{border:!1,spacious:!1,children:[e,t,(0,a.jsxs)(h.E.Description,{children:[n,i,(0,a.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:(0,a.jsx)("a",{href:"https://www.githubstatus.com",children:"GitHub status"})})]})]})}),l[4]=r):r=l[4],r}:function(){return(0,a.jsx)("div",{children:(0,a.jsxs)(h.E,{border:!1,spacious:!1,children:[(0,a.jsx)(h.E.Visual,{children:(0,a.jsx)(f.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"})}),(0,a.jsx)(h.E.Heading,{children:"Unable to load page."}),(0,a.jsxs)(h.E.Description,{children:[(0,a.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:"The page is unavailable due to a system error."}),(0,a.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:" Try reloading the page, or if the problem persists, contact support."}),(0,a.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:(0,a.jsx)("a",{href:"https://www.githubstatus.com",children:"GitHub status"})})]})]})})};try{p.displayName||(p.displayName="CommitErrorState")}catch{}let g=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(7),l=(0,m.B)(),[f]=(0,u.useState)(l?.repo),[h]=(0,u.useState)(l?.currentUser);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(p,{}),r[0]=t):t=r[0],r[1]!==e.children||r[2]!==f?(n=(0,a.jsx)(o.d,{repository:f,children:e.children}),r[1]=e.children,r[2]=f,r[3]=n):n=r[3],r[4]!==n||r[5]!==h?(i=(0,a.jsx)(d.t,{critical:!0,fallback:t,children:(0,a.jsx)(c.Q,{user:h,children:n})}),r[4]=n,r[5]=h,r[6]=i):i=r[6],i}:function(e){let t=(0,m.B)(),[n]=(0,u.useState)(t?.repo),[i]=(0,u.useState)(t?.currentUser);return(0,a.jsx)(d.t,{critical:!0,fallback:(0,a.jsx)(p,{}),children:(0,a.jsx)(c.Q,{user:i,children:(0,a.jsx)(o.d,{repository:n,children:e.children})})})};try{g.displayName||(g.displayName="App")}catch{}var x=n(70719),b=n(79472),y=n(18799),j=n(19976),C=n(53627),v=n(25407),N=n(30721),w=n(71315),S=n(83494),L=n(54571),_=n(70843),k=n(87555),E=n(34164),I=n(72511),D=n(10095);let T=(0,l.kw)()?function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)(I.A,{variant:"warning",className:"mb-4",children:[(0,a.jsx)(D.A,{icon:f.AlertIcon,className:"mr-2"}),(0,a.jsx)("span",{className:"overflow-hidden",children:"This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository."})]}),t[0]=e):e=t[0],e}:function(){return(0,a.jsxs)(I.A,{variant:"warning",className:"mb-4",children:[(0,a.jsx)(D.A,{icon:f.AlertIcon,className:"mr-2"}),(0,a.jsx)("span",{className:"overflow-hidden",children:"This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository."})]})};try{T.displayName||(T.displayName="SpoofedCommitWarningBanner")}catch{}var A=n(83878);let R=(0,l.kw)()?function(e){let t,n=(0,s.c)(1),{oid:i,repo:r}=e;return(0,A.N)(i,r.id)?(n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsxs)(I.A,{className:"mb-4",children:[(0,a.jsx)("img",{src:"/images/modules/commit/flowers@2x.png",alt:"flower",width:"88px",height:"49px",className:"mr-4 mt-1 float-left"}),(0,a.jsx)("h2",{children:"Thanks for everything, Jim."}),(0,a.jsx)("p",{children:"We will miss you."})]}),n[0]=t):t=n[0],t):null}:function({oid:e,repo:t}){return(0,A.N)(e,t.id)?(0,a.jsxs)(I.A,{className:"mb-4",children:[(0,a.jsx)("img",{src:"/images/modules/commit/flowers@2x.png",alt:"flower",width:"88px",height:"49px",className:"mr-4 mt-1 float-left"}),(0,a.jsx)("h2",{children:"Thanks for everything, Jim."}),(0,a.jsx)("p",{children:"We will miss you."})]}):null};try{R.displayName||(R.displayName="WeirichCommitBanner")}catch{}let $=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(9),{oid:l,repo:o,commitBranchState:c}=e;return r[0]!==c.branches||r[1]!==c.loading?(t=c.loading||0!==c.branches.length?null:(0,a.jsx)(T,{}),r[0]=c.branches,r[1]=c.loading,r[2]=t):t=r[2],r[3]!==l||r[4]!==o?(n=(0,a.jsx)(R,{oid:l,repo:o}),r[3]=l,r[4]=o,r[5]=n):n=r[5],r[6]!==t||r[7]!==n?(i=(0,a.jsxs)(a.Fragment,{children:[t,n]}),r[6]=t,r[7]=n,r[8]=i):i=r[8],i}:function({oid:e,repo:t,commitBranchState:n}){return(0,a.jsxs)(a.Fragment,{children:[n.loading||0!==n.branches.length?null:(0,a.jsx)(T,{}),(0,a.jsx)(R,{oid:e,repo:t})]})};try{$.displayName||($.displayName="CommitBanners")}catch{}var O=n(1117),P=n(46251),M=n(91747),F=n(73017),B=n(16051),U=n(21373),H=n(84268),z=n(26108),V=n(26607),G=n(55255),W=n(98783),K=n(3536),q=n(68534),X=n(48926),Q=n(43147),J=n(13071),Y=n(76214),Z=n(81945),ee=n(72579);let et=(0,l.kw)()?function(e){let t,n,i,r,l=(0,s.c)(10),{data:o,repo:c,className:d}=e;return o.loading||0!==o.branches.length?(l[0]!==d?(t=(0,E.$)(d,"d-flex flex-items-center flex-wrap fgColor-muted gap-1"),l[0]=d,l[1]=t):t=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(D.A,{className:"mr-1",icon:f.GitBranchIcon}),l[2]=n):n=l[2],l[3]!==o.branches||l[4]!==o.loading||l[5]!==c?(i=o.loading?(0,a.jsx)(Z.O,{width:"60px",variant:"rounded",height:"22px"}):o.branches.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(en,{branch:e,repo:c}),t!==o.branches.length-1?(0,a.jsx)("span",{className:"ml-1 user-select-none",children:"+"}):null]},e.branch)),l[3]=o.branches,l[4]=o.loading,l[5]=c,l[6]=i):i=l[6],l[7]!==t||l[8]!==i?(r=(0,a.jsxs)("div",{className:t,children:[n,i]}),l[7]=t,l[8]=i,l[9]=r):r=l[9],r):null}:function({data:e,repo:t,className:n}){return e.loading||0!==e.branches.length?(0,a.jsxs)("div",{className:(0,E.$)(n,"d-flex flex-items-center flex-wrap fgColor-muted gap-1"),children:[(0,a.jsx)(D.A,{className:"mr-1",icon:f.GitBranchIcon}),e.loading?(0,a.jsx)(Z.O,{width:"60px",variant:"rounded",height:"22px"}):e.branches.map((n,i)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(en,{branch:n,repo:t}),i!==e.branches.length-1?(0,a.jsx)("span",{className:"ml-1 user-select-none",children:"+"}):null]},n.branch))]}):null},en=(0,l.kw)()?function(e){let t,n,i,r,l=(0,s.c)(11),{branch:o,repo:c}=e,d=o.branch;return l[0]!==d||l[1]!==c?(t=(0,v.bSP)({repo:c,head:d}),l[0]=d,l[1]=c,l[2]=t):t=l[2],l[3]!==o.branch||l[4]!==t?(n=(0,a.jsx)(ee.A,{className:"mx-1",href:t,children:o.branch}),l[3]=o.branch,l[4]=t,l[5]=n):n=l[5],l[6]!==o.prs?(i=o.prs.length>0?(0,a.jsxs)(a.Fragment,{children:["(",o.prs.map((e,t)=>(0,a.jsxs)(u.Fragment,{children:[(0,a.jsx)(ei,{pullRequest:e}),t!==o.prs.length-1?(0,a.jsx)(a.Fragment,{children:",\xa0"}):null]},`pr-${e.repo.ownerLogin}-${e.repo.name}-${e.number}`)),")"]}):null,l[6]=o.prs,l[7]=i):i=l[7],l[8]!==n||l[9]!==i?(r=(0,a.jsxs)(a.Fragment,{children:[n,i]}),l[8]=n,l[9]=i,l[10]=r):r=l[10],r}:function({branch:e,repo:t}){let n=e.branch;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ee.A,{className:"mx-1",href:(0,v.bSP)({repo:t,head:n}),children:e.branch}),e.prs.length>0?(0,a.jsxs)(a.Fragment,{children:["(",e.prs.map((t,n)=>(0,a.jsxs)(u.Fragment,{children:[(0,a.jsx)(ei,{pullRequest:t}),n!==e.prs.length-1?(0,a.jsx)(a.Fragment,{children:",\xa0"}):null]},`pr-${t.repo.ownerLogin}-${t.repo.name}-${t.number}`)),")"]}):null]})},ei=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(12),{pullRequest:l}=e,{repo:o,number:c,showPrefix:d}=l,m=d?`${o.ownerLogin}/${o.name}`:"";return r[0]!==c||r[1]!==o?(t=(0,v.oDn)({repo:o,number:c}),r[0]=c,r[1]=o,r[2]=t):t=r[2],r[3]!==c||r[4]!==o.name||r[5]!==o.ownerLogin?(n=(0,v.i9S)({owner:o.ownerLogin,repo:o.name,pullRequestNumber:c}),r[3]=c,r[4]=o.name,r[5]=o.ownerLogin,r[6]=n):n=r[6],r[7]!==c||r[8]!==m||r[9]!==t||r[10]!==n?(i=(0,a.jsxs)(H.A,{href:t,className:"fgColor-muted","data-hovercard-url":n,children:[m,"#",c]}),r[7]=c,r[8]=m,r[9]=t,r[10]=n,r[11]=i):i=r[11],i}:function({pullRequest:e}){let{repo:t,number:n,showPrefix:i}=e,r=i?`${t.ownerLogin}/${t.name}`:"";return(0,a.jsxs)(H.A,{href:(0,v.oDn)({repo:t,number:n}),className:"fgColor-muted","data-hovercard-url":(0,v.i9S)({owner:t.ownerLogin,repo:t.name,pullRequestNumber:n}),children:[r,"#",n]})};try{et.displayName||(et.displayName="CommitBranchInfo")}catch{}try{en.displayName||(en.displayName="BranchFragment")}catch{}try{ei.displayName||(ei.displayName="PullRequestLink")}catch{}let er="CommitHeader-module__commitMessageContainer--vwxSp",ea="CommitHeader-module__commitBranchContainer--PWvaQ",el="CommitHeader-module__commit-header-actions--Fj6HO",es="CommitHeader-module__pusher-container--AoXTp CommitHeader-module__commitMessageContainer--vwxSp",eo="CommitHeader-module__PageHeader_TitleArea--aAkxF",ec="CommitHeader-module__PageHeader_Title--W3dtK",ed="CommitHeader-module__browseFilesTooltip--q3qJZ",em="CommitHeader-module__browseFilesButton--hQymw";var eu=n(66108);function ef(){return new URL(w.fV.origin+w.fV.pathname+w.fV.search,w.fV.origin).search}let eh=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(8),{commit:r,repo:l}=e,o=`${r.parents.length} parent${r.parents.length>1||0===r.parents.length?"s":""} `;if(i[0]!==r.parents||i[1]!==l){let e;i[3]!==l?(e=(e,t)=>(0,a.jsxs)(u.Fragment,{children:[0!==t?" + ":"",(0,a.jsx)(H.A,{to:(0,v.$Qz)({owner:l.ownerLogin,repo:l.name,commitish:e})+ef(),as:eu.N,className:"color-fg-default Link--inTextBlock","data-hotkey":ep(t),"data-hovercard-url":(0,v.fQd)({owner:l.ownerLogin,repo:l.name,commitish:e}),children:(0,q.F)(e)})]},e),i[3]=l,i[4]=e):e=i[4],t=r.parents.map(e),i[0]=r.parents,i[1]=l,i[2]=t}else t=i[2];return i[5]!==o||i[6]!==t?(n=(0,a.jsxs)(a.Fragment,{children:[o,t]}),i[5]=o,i[6]=t,i[7]=n):n=i[7],n}:function({commit:e,repo:t}){return(0,a.jsxs)(a.Fragment,{children:[`${e.parents.length} parent${e.parents.length>1||0===e.parents.length?"s":""} `,e.parents.map((e,n)=>(0,a.jsxs)(u.Fragment,{children:[0!==n?" + ":"",(0,a.jsx)(H.A,{to:(0,v.$Qz)({owner:t.ownerLogin,repo:t.name,commitish:e})+ef(),as:eu.N,className:"color-fg-default Link--inTextBlock","data-hotkey":ep(n),"data-hovercard-url":(0,v.fQd)({owner:t.ownerLogin,repo:t.name,commitish:e}),children:(0,q.F)(e)})]},e))]})};function ep(e){switch(e){case 0:return"p";case 1:return"o";default:return}}try{eh.displayName||(eh.displayName="CommitParents")}catch{}var eg=n(5524),ex=n(57387);let eb=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m=(0,s.c)(28),{data:u,repo:h,className:p}=e;if(0===u.tags.length)return null;let g=u.tags.length>2&&u.tags.length<25,x=u.tags.length>=25;return m[0]!==p?(t=(0,E.$)(p,"d-flex flex-items-center flex-wrap gap-1"),m[0]=p,m[1]=t):t=m[1],m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(D.A,{className:"mr-2 fgColor-muted",icon:f.TagIcon}),m[2]=n):n=m[2],m[3]!==u.tags[0]||m[4]!==h.name||m[5]!==h.ownerLogin?(i=(0,v.cpj)({owner:h.ownerLogin,repo:h.name,tag:u.tags[0]}),m[3]=u.tags[0],m[4]=h.name,m[5]=h.ownerLogin,m[6]=i):i=m[6],m[7]!==u.tags[0]||m[8]!==i?(r=(0,a.jsx)(H.A,{href:i,className:"fgColor-default",children:u.tags[0]}),m[7]=u.tags[0],m[8]=i,m[9]=r):r=m[9],m[10]!==u.tags||m[11]!==g||m[12]!==h?(l=g?(0,a.jsx)(ey,{tags:u.tags,repo:h}):null,m[10]=u.tags,m[11]=g,m[12]=h,m[13]=l):l=m[13],m[14]!==u.tags||m[15]!==x||m[16]!==h?(o=x?(0,a.jsx)(ej,{tags:u.tags,repo:h}):null,m[14]=u.tags,m[15]=x,m[16]=h,m[17]=o):o=m[17],m[18]!==u.tags||m[19]!==h.name||m[20]!==h.ownerLogin?(c=u.tags.length>1?(0,a.jsx)(H.A,{href:(0,v.cpj)({owner:h.ownerLogin,repo:h.name,tag:u.tags[u.tags.length-1]}),className:"fgColor-muted",children:u.tags[u.tags.length-1]}):null,m[18]=u.tags,m[19]=h.name,m[20]=h.ownerLogin,m[21]=c):c=m[21],m[22]!==t||m[23]!==r||m[24]!==l||m[25]!==o||m[26]!==c?(d=(0,a.jsxs)("div",{className:t,children:[n,r,l,o,c]}),m[22]=t,m[23]=r,m[24]=l,m[25]=o,m[26]=c,m[27]=d):d=m[27],d}:function({data:e,repo:t,className:n}){if(0===e.tags.length)return null;let i=e.tags.length>2&&e.tags.length<25,r=e.tags.length>=25;return(0,a.jsxs)("div",{className:(0,E.$)(n,"d-flex flex-items-center flex-wrap gap-1"),children:[(0,a.jsx)(D.A,{className:"mr-2 fgColor-muted",icon:f.TagIcon}),(0,a.jsx)(H.A,{href:(0,v.cpj)({owner:t.ownerLogin,repo:t.name,tag:e.tags[0]}),className:"fgColor-default",children:e.tags[0]}),i?(0,a.jsx)(ey,{tags:e.tags,repo:t}):null,r?(0,a.jsx)(ej,{tags:e.tags,repo:t}):null,e.tags.length>1?(0,a.jsx)(H.A,{href:(0,v.cpj)({owner:t.ownerLogin,repo:t.name,tag:e.tags[e.tags.length-1]}),className:"fgColor-muted",children:e.tags[e.tags.length-1]}):null]})},ey=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(5),{tags:r,repo:l}=e,[o,c]=(0,u.useState)(!1),d=(0,u.useRef)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{c(!0),requestAnimationFrame(()=>d.current?.focus())},i[0]=t):t=i[0];let m=t;return i[1]!==l||i[2]!==r||i[3]!==o?(n=o?(0,a.jsx)(a.Fragment,{children:r.slice(1,r.length-1).map((e,t)=>(0,a.jsx)(H.A,{ref:0===t?d:null,href:(0,v.cpj)({owner:l.ownerLogin,repo:l.name,tag:e}),className:"fgColor-muted mx-1",children:e},e))}):(0,a.jsx)(z.K,{"aria-label":"Show more tags",tooltipDirection:"s",icon:f.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:m}),i[1]=l,i[2]=r,i[3]=o,i[4]=n):n=i[4],n}:function({tags:e,repo:t}){let[n,i]=(0,u.useState)(!1),r=(0,u.useRef)(null),l=(0,u.useCallback)(()=>{i(!0),requestAnimationFrame(()=>r.current?.focus())},[]);return n?(0,a.jsx)(a.Fragment,{children:e.slice(1,e.length-1).map((e,n)=>(0,a.jsx)(H.A,{ref:0===n?r:null,href:(0,v.cpj)({owner:t.ownerLogin,repo:t.name,tag:e}),className:"fgColor-muted mx-1",children:e},e))}):(0,a.jsx)(z.K,{"aria-label":"Show more tags",tooltipDirection:"s",icon:f.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:l})},ej=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(7),{tags:l,repo:o}=e,[c,d]=(0,u.useState)(!1),m=(0,u.useRef)(null);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(z.K,{"aria-label":"Show all tags",tooltipDirection:"s",icon:f.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:()=>d(!0),ref:m}),r[0]=t):t=r[0],r[1]!==c||r[2]!==o||r[3]!==l?(n=c&&(0,a.jsx)(ex.l,{title:`${l.length} tags`,onClose:()=>d(!1),returnFocusRef:m,width:"medium",height:l.length>=12?"small":"auto",renderBody:()=>(0,a.jsx)(eg.l,{className:"overflow-y-auto py-2","data-testid":"tag-dialog-list",children:l.map(e=>(0,a.jsx)(eg.l.LinkItem,{href:(0,v.cpj)({owner:o.ownerLogin,repo:o.name,tag:e}),children:e},e))})}),r[1]=c,r[2]=o,r[3]=l,r[4]=n):n=r[4],r[5]!==n?(i=(0,a.jsxs)(a.Fragment,{children:[t,n]}),r[5]=n,r[6]=i):i=r[6],i}:function({tags:e,repo:t}){let[n,i]=(0,u.useState)(!1),r=(0,u.useRef)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.K,{"aria-label":"Show all tags",tooltipDirection:"s",icon:f.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:()=>i(!0),ref:r}),n&&(0,a.jsx)(ex.l,{title:`${e.length} tags`,onClose:()=>i(!1),returnFocusRef:r,width:"medium",height:e.length>=12?"small":"auto",renderBody:()=>(0,a.jsx)(eg.l,{className:"overflow-y-auto py-2","data-testid":"tag-dialog-list",children:e.map(e=>(0,a.jsx)(eg.l.LinkItem,{href:(0,v.cpj)({owner:t.ownerLogin,repo:t.name,tag:e}),children:e},e))})})]})};try{eb.displayName||(eb.displayName="CommitTagInfo")}catch{}try{ey.displayName||(ey.displayName="ExpandedTags")}catch{}try{ej.displayName||(ej.displayName="CommitTagsDialog")}catch{}let eC=(0,u.memo)(eN),ev=(0,l.kw)();function eN(e){return ev?function(e){let t,n,i,r,l,o,c,d,m,h,p,g,x,b,y,j,C,N,w,S,L,_,k,I,D,T,A,R,$,O=(0,s.c)(77),{commit:P,commitInfo:V,repo:Z}=e,ee=(0,u.useRef)(null),{helpUrl:en}=(0,W.D)();O[0]!==P.oid||O[1]!==Z.name||O[2]!==Z.ownerLogin?(t=(0,v.$Qz)({owner:Z.ownerLogin,repo:Z.name,commitish:P.oid}),O[0]=P.oid,O[1]=Z.name,O[2]=Z.ownerLogin,O[3]=t):t=O[3];let ei=(0,K.I)(`${t}/deferred_commit_data`);O[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,E.$)("f2",ec),O[4]=n):n=O[4],O[5]!==P.oid?(i=(0,q.F)(P.oid),O[5]=P.oid,O[6]=i):i=O[6],O[7]!==i?(r=(0,a.jsx)(B.z.TitleArea,{variant:"large",className:eo,children:(0,a.jsxs)(B.z.Title,{as:"h1",className:n,children:["Commit ",(0,a.jsx)("span",{className:"text-mono bgColor-muted rounded p-1",children:i})]})}),O[7]=i,O[8]=r):r=O[8],O[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,E.$)(el),O[9]=l):l=O[9],O[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(ew,{}),O[10]=o):o=O[10],O[11]===Symbol.for("react.memo_cache_sentinel")?(c=(0,E.$)("d-none d-md-flex",ed),O[11]=c):c=O[11],O[12]!==P.oid||O[13]!==Z?(d=(0,v.IO9)({repo:Z,action:"tree",commitish:P.oid}),O[12]=P.oid,O[13]=Z,O[14]=d):d=O[14],O[15]!==d?(m=(0,a.jsx)(G.A,{text:"Browse the repository at this point in the history",direction:"sw",className:c,children:(0,a.jsx)(U.Q,{as:H.A,href:d,leadingVisual:f.FileCodeIcon,className:em,children:"Browse files"})}),O[15]=d,O[16]=m):m=O[16],O[17]!==P.oid||O[18]!==Z?(h=(0,v.IO9)({repo:Z,action:"tree",commitish:P.oid}),O[17]=P.oid,O[18]=Z,O[19]=h):h=O[19],O[20]!==h?(p=(0,a.jsx)(z.K,{as:H.A,href:h,icon:f.FileCodeIcon,"aria-label":"Browse files",className:"d-flex d-md-none"}),O[20]=h,O[21]=p):p=O[21],O[22]!==p||O[23]!==m?(g=(0,a.jsx)(B.z.Actions,{className:l,children:(0,a.jsxs)("div",{className:"d-flex gap-2 flex-items-center flex-md-justify-end",children:[o,m,p]})}),O[22]=p,O[23]=m,O[24]=g):g=O[24],O[25]===Symbol.for("react.memo_cache_sentinel")?(x={fontColor:"fg.default",avatarSize:20,fontWeight:"bold"},O[25]=x):x=O[25],O[26]!==P.oid||O[27]!==ei||O[28]!==en||O[29]!==Z?(b=(0,a.jsx)(J.C,{deferredData:ei,oid:P.oid,repo:Z,helpUrl:en}),O[26]=P.oid,O[27]=ei,O[28]=en,O[29]=Z,O[30]=b):b=O[30],O[31]!==P||O[32]!==Z||O[33]!==b?(y=(0,a.jsx)(X.j,{commit:P,repo:Z,settings:x,textVariant:"muted",children:b}),O[31]=P,O[32]=Z,O[33]=b,O[34]=y):y=O[34],O[35]!==P.bodyMessageHtml||O[36]!==P.shortMessageMarkdown?(j=(P.shortMessageMarkdown||P.bodyMessageHtml)&&(0,a.jsxs)("div",{className:er,children:[P.shortMessageMarkdown&&(0,a.jsx)(F.JR,{ref:ee,html:P.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word text-mono"}),P.bodyMessageHtml&&(0,a.jsx)(F.JR,{html:P.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container f6 wb-break-word text-mono mt-2"})]}),O[35]=P.bodyMessageHtml,O[36]=P.shortMessageMarkdown,O[37]=j):j=O[37],O[38]!==V||O[39]!==Z?(C=(0,a.jsx)(et,{data:V,repo:Z}),O[38]=V,O[39]=Z,O[40]=C):C=O[40],O[41]!==V.tags.length?(N=V.tags.length>0&&(0,a.jsx)("span",{className:"px-2",children:"\xb7"}),O[41]=V.tags.length,O[42]=N):N=O[42],O[43]!==V||O[44]!==Z?(w=(0,a.jsx)(eb,{data:V,repo:Z}),O[43]=V,O[44]=Z,O[45]=w):w=O[45],O[46]!==C||O[47]!==N||O[48]!==w?(S=(0,a.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[C,N,w]}),O[46]=C,O[47]=N,O[48]=w,O[49]=S):S=O[49],O[50]!==P||O[51]!==Z?(L=(0,a.jsx)(eh,{commit:P,repo:Z}),O[50]=P,O[51]=Z,O[52]=L):L=O[52],O[53]!==P.oid?(_=(0,q.F)(P.oid),O[53]=P.oid,O[54]=_):_=O[54],O[55]!==_?(k=(0,a.jsx)("span",{className:"fgColor-default",children:_}),O[55]=_,O[56]=k):k=O[56],O[57]!==P.oid?(I=(0,a.jsx)(Q.w,{className:"ml-2",sha:P.oid,direction:"sw"}),O[57]=P.oid,O[58]=I):I=O[58],O[59]!==L||O[60]!==k||O[61]!==I?(D=(0,a.jsxs)("pre",{className:"color-fg-muted d-flex flex-items-center",children:[L," commit ",k,I]}),O[59]=L,O[60]=k,O[61]=I,O[62]=D):D=O[62],O[63]!==S||O[64]!==D?(T=(0,a.jsxs)("div",{className:ea,children:[S,D]}),O[63]=S,O[64]=D,O[65]=T):T=O[65];let eu=(0,M.u)("show_pusher_on_commit_detail")&&P.pusher&&(0,a.jsx)("div",{className:(0,E.$)(es),children:(0,a.jsx)(X.C,{commit:P,repo:Z,textVariant:"muted"})});return O[66]!==j||O[67]!==T||O[68]!==eu?(A=(0,a.jsxs)(Y.Z,{className:"pt-0",children:[j,T,eu]}),O[66]=j,O[67]=T,O[68]=eu,O[69]=A):A=O[69],O[70]!==y||O[71]!==A?(R=(0,a.jsx)(B.z.Description,{children:(0,a.jsxs)("div",{className:"d-flex flex-column gap-2 width-full",children:[y,A]})}),O[70]=y,O[71]=A,O[72]=R):R=O[72],O[73]!==g||O[74]!==R||O[75]!==r?($=(0,a.jsxs)(B.z,{children:[r,g,R]}),O[73]=g,O[74]=R,O[75]=r,O[76]=$):$=O[76],$}(e):function({commit:e,commitInfo:t,repo:n}){let i=(0,u.useRef)(null),{helpUrl:r}=(0,W.D)(),l=(0,K.I)(`${(0,v.$Qz)({owner:n.ownerLogin,repo:n.name,commitish:e.oid})}/deferred_commit_data`);return(0,a.jsxs)(B.z,{children:[(0,a.jsx)(B.z.TitleArea,{variant:"large",className:eo,children:(0,a.jsxs)(B.z.Title,{as:"h1",className:(0,E.$)("f2",ec),children:["Commit ",(0,a.jsx)("span",{className:"text-mono bgColor-muted rounded p-1",children:(0,q.F)(e.oid)})]})}),(0,a.jsx)(B.z.Actions,{className:(0,E.$)(el),children:(0,a.jsxs)("div",{className:"d-flex gap-2 flex-items-center flex-md-justify-end",children:[(0,a.jsx)(ew,{}),(0,a.jsx)(G.A,{text:"Browse the repository at this point in the history",direction:"sw",className:(0,E.$)("d-none d-md-flex",ed),children:(0,a.jsx)(U.Q,{as:H.A,href:(0,v.IO9)({repo:n,action:"tree",commitish:e.oid}),leadingVisual:f.FileCodeIcon,className:em,children:"Browse files"})}),(0,a.jsx)(z.K,{as:H.A,href:(0,v.IO9)({repo:n,action:"tree",commitish:e.oid}),icon:f.FileCodeIcon,"aria-label":"Browse files",className:"d-flex d-md-none"})]})}),(0,a.jsx)(B.z.Description,{children:(0,a.jsxs)("div",{className:"d-flex flex-column gap-2 width-full",children:[(0,a.jsx)(X.j,{commit:e,repo:n,settings:{fontColor:"fg.default",avatarSize:20,fontWeight:"bold"},textVariant:"muted",children:(0,a.jsx)(J.C,{deferredData:l,oid:e.oid,repo:n,helpUrl:r})}),(0,a.jsxs)(Y.Z,{className:"pt-0",children:[(e.shortMessageMarkdown||e.bodyMessageHtml)&&(0,a.jsxs)("div",{className:er,children:[e.shortMessageMarkdown&&(0,a.jsx)(F.JR,{ref:i,html:e.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word text-mono"}),e.bodyMessageHtml&&(0,a.jsx)(F.JR,{html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container f6 wb-break-word text-mono mt-2"})]}),(0,a.jsxs)("div",{className:ea,children:[(0,a.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,a.jsx)(et,{data:t,repo:n}),t.tags.length>0&&(0,a.jsx)("span",{className:"px-2",children:"\xb7"}),(0,a.jsx)(eb,{data:t,repo:n})]}),(0,a.jsxs)("pre",{className:"color-fg-muted d-flex flex-items-center",children:[(0,a.jsx)(eh,{commit:e,repo:n})," commit ",(0,a.jsx)("span",{className:"fgColor-default",children:(0,q.F)(e.oid)}),(0,a.jsx)(Q.w,{className:"ml-2",sha:e.oid,direction:"sw"})]})]}),(0,M.u)("show_pusher_on_commit_detail")&&e.pusher&&(0,a.jsx)("div",{className:(0,E.$)(es),children:(0,a.jsx)(X.C,{commit:e,repo:n,textVariant:"muted"})})]})]})})]})}(e)}let ew=(0,l.kw)()?function(){let e,t=(0,s.c)(1);return(0,M.u)("diff_ux_refresh_beta")?(t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,a.jsx)(V.A,{variant:"success",children:"Preview"}),(0,a.jsx)(H.A,{href:"https://gh.io/new-commit-details-feedback",target:"_blank",rel:"noopener noreferrer",className:"no-wrap f5 text-normal d-none d-sm-block",children:"Give feedback"})]}),t[0]=e):e=t[0],e):null}:function(){return(0,M.u)("diff_ux_refresh_beta")?(0,a.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,a.jsx)(V.A,{variant:"success",children:"Preview"}),(0,a.jsx)(H.A,{href:"https://gh.io/new-commit-details-feedback",target:"_blank",rel:"noopener noreferrer",className:"no-wrap f5 text-normal d-none d-sm-block",children:"Give feedback"})]}):null};try{eC.displayName||(eC.displayName="CommitHeader")}catch{}try{eN.displayName||(eN.displayName="CommitHeaderUnmemoized")}catch{}try{ew.displayName||(ew.displayName="Feedback")}catch{}let eS=(0,l.kw)()?function(e){let t,n,i,r,l,c,d,m=(0,s.c)(19),{unavailableReason:u,commit:f,commitInfo:p}=e,g=(0,o.t)(),x=eL[u];return m[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"normal",regular:"spacious"},m[0]=t):t=m[0],m[1]!==f||m[2]!==p||m[3]!==g?(n=(0,a.jsx)(P.B,{"data-hpc":!0,padding:t,children:(0,a.jsx)(eC,{commit:f,commitInfo:p,repo:g})}),m[1]=f,m[2]=p,m[3]=g,m[4]=n):n=m[4],m[5]!==x.visual?(i=(0,a.jsx)(h.E.Visual,{children:x.visual}),m[5]=x.visual,m[6]=i):i=m[6],m[7]!==x.heading?(r=(0,a.jsx)(h.E.Heading,{children:x.heading}),m[7]=x.heading,m[8]=r):r=m[8],m[9]!==x.description?(l=(0,a.jsx)(h.E.Description,{children:x.description}),m[9]=x.description,m[10]=l):l=m[10],m[11]!==i||m[12]!==r||m[13]!==l||m[14]!==x.secondaryAction?(c=(0,a.jsxs)(h.E,{children:[i,r,l,x.secondaryAction]}),m[11]=i,m[12]=r,m[13]=l,m[14]=x.secondaryAction,m[15]=c):c=m[15],m[16]!==n||m[17]!==c?(d=(0,a.jsxs)(a.Fragment,{children:[n,c]}),m[16]=n,m[17]=c,m[18]=d):d=m[18],d}:function({unavailableReason:e,commit:t,commitInfo:n}){let i=(0,o.t)(),r=eL[e];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.B,{"data-hpc":!0,padding:{narrow:"normal",regular:"spacious"},children:(0,a.jsx)(eC,{commit:t,commitInfo:n,repo:i})}),(0,a.jsxs)(h.E,{children:[(0,a.jsx)(h.E.Visual,{children:r.visual}),(0,a.jsx)(h.E.Heading,{children:r.heading}),(0,a.jsx)(h.E.Description,{children:r.description}),r.secondaryAction]})]})},eL={corrupt:{visual:(0,a.jsx)(f.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,a.jsx)(h.E.SecondaryAction,{href:(0,v.y2B)(),children:"Please contact support for more information"})},"missing commits":{visual:(0,a.jsx)(f.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,a.jsx)(h.E.SecondaryAction,{href:(0,v.y2B)(),children:"Please contact support for more information"})},timeout:{visual:(0,a.jsx)(f.HourglassIcon,{}),heading:"Sorry, this diff is taking too long to generate.",description:"It may be too large to display on GitHub."},"too busy":{visual:(0,a.jsx)(f.HourglassIcon,{}),heading:"Sorry, this diff is temporarily unavailable due to heavy server load.",description:"Please try again later."}};try{eS.displayName||(eS.displayName="CommitUnavailable")}catch{}var e_=n(35311),ek=n(73189),eE=n(79634),eI=n(51220),eD=n(38943),eT=n(96379);let eA={extraDiffEntries:[],loading:!0,error:!1};var eR=n(30093);let e$=(0,u.memo)(function({currentPathDigestIndex:e,searchTerm:t,searchResults:n,setSearchTerm:i,focusedSearchResult:r,currentIndex:l,setCurrentIndex:s,setFocusedSearchResult:o,scrollDiffCellIntoView:c}){let d=(0,u.useRef)([]),m=(0,u.useRef)(0),h=(0,a.jsxs)("div",{className:"d-flex flex-row flex-justify-center flex-items-center",children:[t&&(0,a.jsxs)("span",{className:"text-small fgColor-subtle mx-2 text-center",children:[0===n.size||void 0===r?0:l+1,"/",m.current]}),!t&&(0,a.jsx)("span",{className:"text-small fgColor-subtle mx-2 text-center pr-4",children:"\xa0"}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.K,{size:"small",variant:"invisible",onClick:()=>{p(-1)},icon:f.ChevronUpIcon,"aria-label":"Up","data-testid":"up-search"}),(0,a.jsx)(z.K,{size:"small",variant:"invisible",onClick:()=>{p(1)},icon:f.ChevronDownIcon,"aria-label":"Down","data-testid":"down-search"})]})]}),p=t=>{if(void 0===r||""===r.pathDigest){e.current=0,o({pathDigest:d.current[0]??"",indexWithinDigest:0});return}1===t?(s(l===m.current-1?0:l+1),r.indexWithinDigest===n.get(r.pathDigest).length-1?(e.current=e.current+1,e.current===d.current.length&&(e.current=0),r.pathDigest=d.current[e.current]??"",r.indexWithinDigest=0):r.indexWithinDigest=r.indexWithinDigest+1):(s(0===l?m.current-1:l-1),0===r.indexWithinDigest?(e.current=e.current-1,-1===e.current&&(e.current=d.current.length-1),r.pathDigest=d.current[e.current]??"",r.indexWithinDigest=n.get(r.pathDigest).length-1):r.indexWithinDigest=r.indexWithinDigest-1),o(r)};return(0,u.useEffect)(()=>{d.current=Array.from(n.keys()),e.current=0,o({pathDigest:d.current[0]??"",indexWithinDigest:0});let t=0;for(let e of n.values())t+=e.length;m.current=t},[e,n,n.size,o]),(0,u.useEffect)(()=>{n.size>0&&void 0!==r&&c(r)},[n,r,l]),(0,a.jsxs)("div",{className:"DiffFind-module__defaultStyles--HqMRo",children:[(0,a.jsx)(S.ak,{commands:{"pull-requests-diff-view:jump-to-next-result-alternate":()=>p(1),"pull-requests-diff-view:jump-to-previous-result-alternate":()=>p(-1)}}),(0,a.jsx)(S.tL,{commands:{"pull-requests-diff-view:jump-to-next-result":()=>p(1),"pull-requests-diff-view:jump-to-previous-result":()=>p(-1)},children:(0,a.jsx)(eR.A,{className:"border-0 box-shadow-none",style:{width:"100%"},validationStatus:m.current>1e3?"error":void 0,type:"text",leadingVisual:()=>(0,a.jsx)(D.A,{icon:f.SearchIcon,"aria-hidden":"true"}),autoComplete:"off",name:"Find in commit input","aria-label":"Search within code",placeholder:"Search within code",value:t,onChange:t=>{t.target.value?(i(t.target.value),s(0)):(i(""),o(void 0),e.current=0)},block:!0,trailingAction:h})})]})});try{e$.displayName||(e$.displayName="DiffFind")}catch{}function eO(e,t){return`${"left"===t?"L":"R"}${e}`}function eP(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function eM(e){let t=function(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let n=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=n&&6===n.length?n:null}(e);if(t){let e=t[1],n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0;if(!e||!n||void 0===i)return;return{diffAnchor:e,startOrientation:n,startLineNumber:i,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??n,endLineNumber:(t[5]?parseInt(t[5]):void 0)??i,firstSelectedLineNumber:i,firstSelectedOrientation:n}}}function eF(e){let t=eO(e.startLineNumber,e.startOrientation),n=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=eO(e.endLineNumber,e.endOrientation);n+=`-${t}`}return n}function eB(e){let t=`#${e}`;if(t===window.location.hash)return;let n=window.location.href;(0,C.Zu)(t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:n}))}var eU=n(7808),eH=n(4788);function ez({data:e}){let{query:t,diffEntryInfo:n,currentDiffEntryData:i}=e,r=new Map;return{matchingDiffs:i?function(e,t,n){if(0===n.size)return new Map;let i=n.size>=200,r={},a=e.reduce((n,i,a)=>{if(r[a])return n;r[a]=!0;let l=eG(t,[e[a]]),s=l.next();for(;!s.done&&n.size<200;){let{resultsWithinDiff:t}=s.value;n.set(e[a]?.pathDigest??"",t),s=l.next()}return n},new Map);if(a.size<200&&i){let n=eG(t,e,a.size),i=n.next();for(;!i.done&&a.size<200;){let{resultsWithinDiff:t,diff:r}=i.value;a.set(e[r]?.pathDigest??"",t),i=n.next()}}return a}(n,eV(t),i):function(e,t){let n=new Map,i=eG(t,e),r=i.next();for(;!r.done&&n.size<200;){let{resultsWithinDiff:t,diff:a}=r.value;n.set(e[a]?.pathDigest??"",t),r=i.next()}return n}(n,eV(t)),query:t}}function eV(e){return{kind:"Text",regexp:RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")}}function*eG(e,t,n=0){for(let i=n;i<t.length;i++){let n=t[i],r=[],a=0;for(let l=0;l<n.diffLines.length;l++){let s,o;s=t[i]?.diffLines[l]?.type==="HUNK"?n.diffLines[l]?.text:n.diffLines[l]?.text?.substring(1);let c=n.diffLines[l];for(;s&&null!==(o=e.regexp.exec(s));){let e=o[0],t=o.index;r.push({pathDigest:n.pathDigest,indexWithinPathDigest:a,matchContent:e,column:t,diffLineNumIndex:l,isHunk:c?.type==="HUNK",hunkLineNumber:c?.blobLineNumber??-1,leftLineNumber:c?.type!=="ADDITION"?c?.left??-1:-1,rightLineNumber:c?.type!=="DELETION"?c?.right??-1:-1,columnEnd:t+e.length,text:s}),a++}}0!==r.length&&(yield{diff:i,resultsWithinDiff:r})}}let eW=(0,l.kw)()?function(){let e,t,n,i=(0,s.c)(3),[r,a]=(0,u.useState)("");i[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{a((eP(w.fV.hash??"")??"").replace("diff-",""))},i[0]=e):e=i[0];let l=e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>(window.addEventListener("hashchange",l),l(),()=>{window.removeEventListener("hashchange",l)}),n=[l],i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,u.useEffect)(t,n),r}:function(){let[e,t]=(0,u.useState)(""),n=(0,u.useCallback)(()=>{t((eP(w.fV.hash??"")??"").replace("diff-",""))},[]);return(0,u.useEffect)(()=>(window.addEventListener("hashchange",n),n(),()=>{window.removeEventListener("hashchange",n)}),[n]),e};(0,l.kw)();var eK=n(11680);let eq=(0,l.kw)()?function(){let e,t,n=(0,s.c)(5),[i,r]=(0,u.useState)(!1),l=i?"":"pt-4";return n[0]!==i?(e=!i&&(0,a.jsx)(eK.l,{title:"Some content is hidden",description:(0,a.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"Large Commits have some content hidden by default. Use the searchbox below for content that may be hidden."}),variant:"warning",onDismiss:()=>r(!0)}),n[0]=i,n[1]=e):e=n[1],n[2]!==l||n[3]!==e?(t=(0,a.jsx)("div",{className:l,children:e}),n[2]=l,n[3]=e,n[4]=t):t=n[4],t}:function(){let[e,t]=(0,u.useState)(!1);return(0,a.jsx)("div",{className:e?"":"pt-4",children:!e&&(0,a.jsx)(eK.l,{title:"Some content is hidden",description:(0,a.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"Large Commits have some content hidden by default. Use the searchbox below for content that may be hidden."}),variant:"warning",onDismiss:()=>t(!0)})})};try{eq.displayName||(eq.displayName="VirtualizedBanner")}catch{}var eX=n(90047),eQ=n(59523),eJ=n(28014);let eY=(0,l.kw)()?function(){return(0,m.B)().commentInfo}:function(){return(0,m.B)().commentInfo};var eZ=n(30617),e0=n(49245);let e1=(0,l.kw)()?function(e,t,n){let i,r,a,l,o,c,d,u,f,h=(0,s.c)(34),p=(0,m.B)(),{commit:g,commentInfo:x,repoOwnerGlobalRelayId:b}=p;h[0]!==x.canComment||h[1]!==g||h[2]!==t||h[3]!==p.repo||h[4]!==b?(i={commit:g,repo:p.repo,viewerCanReply:x.canComment,repoOwnerGlobalRelayId:b,getInlineCommentInfoByPathAndPosition:t},h[0]=x.canComment,h[1]=g,h[2]=t,h[3]=p.repo,h[4]=b,h[5]=i):i=h[5];let y=(0,e0.I)(i),{addComment:j,deleteComment:C,editComment:v,hideComment:N,unhideComment:w}=(0,eZ.X)(),{findInlineComment:S,findInlineCommentWithRelay:L}=(0,eJ.B)();h[6]!==j?(r=e=>{let{filePath:t,onCompleted:n,onError:i,text:r,thread:a}=e,[l,s]=a.id.split("::");l&&s?j(r,t,s).then(e=>{e.comment?n?.(e.comment.id):i(Error("Failed to add comment"))}):i(Error("Invalid threadId"))},h[6]=j,h[7]=r):r=h[7];let _=r;h[8]!==j||h[9]!==y||h[10]!==n?(a=e=>{let{text:t,diffLine:i,filePath:r,onCompleted:a,onError:l}=e;!i||i.position&&j(t,r,i.position.toString()).then(e=>{if(e.comment){let t=e.comment.id,l=`${r}::${i.position}`;n?.(r,i.position??0,[e.comment],!0),y(l,!0),a?.(l,t)}else l?.(Error("Failed to add comment"))})},h[8]=j,h[9]=y,h[10]=n,h[11]=a):a=h[11];let k=a;h[12]!==v||h[13]!==L?(l=e=>{let{comment:t,text:n,onCompleted:i,onError:r}=e,a=L(t.id);a?v(n,{id:a.id,bodyVersion:a.bodyVersion}).then(e=>{e.updatedFields?i?.():r(Error("Failed to edit comment"))}):r(Error("Comment not found"))},h[12]=v,h[13]=L,h[14]=l):l=h[14];let E=l;h[15]!==C||h[16]!==L?(o=e=>{let{commentId:t,onCompleted:n,onError:i}=e,r=L(t);r?C(r.id.toString()).then(e=>{"success"===e?n?.():"error"===e&&i?.(Error("Failed to delete comment"))}):i?.(Error("Comment not found"))},h[15]=C,h[16]=L,h[17]=o):o=h[17];let I=o;h[18]!==S||h[19]!==N?(c=e=>{let{commentDatabaseId:t,reason:n,onCompleted:i,onError:r}=e,a=S(t);a?N(a.id.toString(),n).then(e=>{"success"===e?i?.():"error"===e&&r(Error("Failed to hide comment"))}):r?.(Error("Comment not found"))},h[18]=S,h[19]=N,h[20]=c):c=h[20];let D=c;h[21]!==S||h[22]!==w?(d=e=>{let{commentDatabaseId:t,onCompleted:n,onError:i}=e,r=S(t);r?w(r.id.toString()).then(e=>{"success"===e?n?.():"error"===e&&i(Error("Failed to unhide comment"))}):i?.(Error("Comment not found"))},h[21]=S,h[22]=w,h[23]=d):d=h[23];let T=d;return h[24]===Symbol.for("react.memo_cache_sentinel")?(u=[],h[24]=u):u=h[24],h[25]!==k||h[26]!==_||h[27]!==e||h[28]!==I||h[29]!==E||h[30]!==y||h[31]!==D||h[32]!==T?(f={batchingEnabled:!1,commentSubjectType:"commit",commentBoxSubject:e,multilineEnabled:!1,resolvingEnabled:!1,suggestedChangesEnabled:!1,lazyFetchReactionGroups:!0,addThread:k,addThreadReply:_,deleteComment:I,editComment:E,pendingSuggestedChangesBatch:u,submitSuggestedChanges:ek.l,addSuggestedChangeToPendingBatch:ek.l,removeSuggestedChangeFromPendingBatch:ek.l,addFileLevelThread:ek.l,resolveThread:ek.l,unresolveThread:ek.l,hideComment:D,unhideComment:T,fetchThread:y},h[25]=k,h[26]=_,h[27]=e,h[28]=I,h[29]=E,h[30]=y,h[31]=D,h[32]=T,h[33]=f):f=h[33],f}:function(e,t,n){let i=(0,m.B)(),{commit:r,commentInfo:a,repoOwnerGlobalRelayId:l}=i,s=(0,e0.I)({commit:r,repo:i.repo,viewerCanReply:a.canComment,repoOwnerGlobalRelayId:l,getInlineCommentInfoByPathAndPosition:t}),{addComment:o,deleteComment:c,editComment:d,hideComment:f,unhideComment:h}=(0,eZ.X)(),{findInlineComment:p,findInlineCommentWithRelay:g}=(0,eJ.B)(),x=(0,u.useCallback)(({filePath:e,onCompleted:t,onError:n,text:i,thread:r})=>{let[a,l]=r.id.split("::");a&&l?o(i,e,l).then(e=>{e.comment?t?.(e.comment.id):n(Error("Failed to add comment"))}):n(Error("Invalid threadId"))},[o]),b=(0,u.useCallback)(({text:e,diffLine:t,filePath:i,onCompleted:r,onError:a})=>{!t||t.position&&o(e,i,t.position.toString()).then(e=>{if(e.comment){let a=e.comment.id,l=`${i}::${t.position}`;n?.(i,t.position??0,[e.comment],!0),s(l,!0),r?.(l,a)}else a?.(Error("Failed to add comment"))})},[o,n,s]),y=(0,u.useCallback)(({comment:e,text:t,onCompleted:n,onError:i})=>{let r=g(e.id);r?d(t,{id:r.id,bodyVersion:r.bodyVersion}).then(e=>{e.updatedFields?n?.():i(Error("Failed to edit comment"))}):i(Error("Comment not found"))},[d,g]),j=(0,u.useCallback)(({commentId:e,onCompleted:t,onError:n})=>{let i=g(e);i?c(i.id.toString()).then(e=>{"success"===e?t?.():"error"===e&&n?.(Error("Failed to delete comment"))}):n?.(Error("Comment not found"))},[c,g]),C=(0,u.useCallback)(({commentDatabaseId:e,reason:t,onCompleted:n,onError:i})=>{let r=p(e);r?f(r.id.toString(),t).then(e=>{"success"===e?n?.():"error"===e&&i(Error("Failed to hide comment"))}):i?.(Error("Comment not found"))},[p,f]),v=(0,u.useCallback)(({commentDatabaseId:e,onCompleted:t,onError:n})=>{let i=p(e);i?h(i.id.toString()).then(e=>{"success"===e?t?.():"error"===e&&n(Error("Failed to unhide comment"))}):n?.(Error("Comment not found"))},[p,h]);return(0,u.useMemo)(()=>({batchingEnabled:!1,commentSubjectType:"commit",commentBoxSubject:e,multilineEnabled:!1,resolvingEnabled:!1,suggestedChangesEnabled:!1,lazyFetchReactionGroups:!0,addThread:b,addThreadReply:x,deleteComment:j,editComment:y,pendingSuggestedChangesBatch:[],submitSuggestedChanges:ek.l,addSuggestedChangeToPendingBatch:ek.l,removeSuggestedChangeFromPendingBatch:ek.l,addFileLevelThread:ek.l,resolveThread:ek.l,unresolveThread:ek.l,hideComment:C,unhideComment:v,fetchThread:s}),[b,x,j,y,s,C,v,e])},e2="commit-details-marker-portal",e3=(0,l.kw)()?function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={filteredMarkers:[],activeGlobalMarkerID:"",decrementActiveMarker:ek.l,incrementActiveMarker:ek.l,overlayPortalContainerName:e2},t[0]=e):e=t[0],e}:function(){return(0,u.useMemo)(()=>({filteredMarkers:[],activeGlobalMarkerID:"",decrementActiveMarker:ek.l,incrementActiveMarker:ek.l,overlayPortalContainerName:e2}),[])};async function e4(e,t,n){let i=await (0,eT.Sr)(`${t}?pathDigest=${n}${function(e){let t="";for(let n=0;n<e.length;n++)t+=`&lineRanges[]=${JSON.stringify(e[n])}`;return t}(e)}`);if(i.ok)return await i.json()??void 0}async function e5({repo:e,sha1:t,sha2:n,entry:i}){let r=await (0,eT.Sr)((0,v.uxJ)({owner:e.ownerLogin,repo:e.name,entry:i,sha1:t,sha2:n}));if(r.ok)return(await r.json()).diffLines;throw Error("error fetching diff lines.")}var e6=n(13083),e7=n(60745),e8=n(21537),e9=n(97068);let te={ArrowLeft:e9.z0.ArrowHorizontal,ArrowDown:e9.z0.ArrowVertical,ArrowUp:e9.z0.ArrowVertical,ArrowRight:e9.z0.ArrowHorizontal,h:e9.z0.HL,j:e9.z0.JK,k:e9.z0.JK,l:e9.z0.HL,a:e9.z0.AD,s:e9.z0.WS,w:e9.z0.WS,d:e9.z0.AD,Tab:e9.z0.Tab,Home:e9.z0.HomeAndEnd,End:e9.z0.HomeAndEnd,PageUp:e9.z0.PageUpDown,PageDown:e9.z0.PageUpDown,Backspace:e9.z0.Backspace},tt=e9.z0.ArrowAll|e9.z0.PageUpDown|e9.z0.HomeAndEnd|e9.z0.AD,tn={displayName:"Ghost",login:"ghost",avatarUrl:"https://avatars.githubusercontent.com/ghost",path:"/ghost",url:"/ghost"},ti=(0,u.createContext)(null);function tr({children:e,...t}){let n=!!t.commentingImplementation,i=!!t.markerNavigationImplementation;if(t.commentingEnabled!==n&&t.commentingEnabled!==i)throw Error("commentingEnabled, commentingImplementation, and markerNavigationImplementation must be passed together");let r=t?.ghostUser??tn,l=(0,u.useMemo)(()=>({ghostUser:r,...t}),[...Object.values(t),r]);return(0,a.jsx)(ti,{value:l,children:e})}let ta=(0,l.kw)()?function(){let e=(0,u.useContext)(ti);if(!e)throw Error("useDiffContext must be used within a DiffContextProvider");return e}:function(){let e=(0,u.useContext)(ti);if(!e)throw Error("useDiffContext must be used within a DiffContextProvider");return e};try{ti.displayName||(ti.displayName="DiffContext")}catch{}try{tr.displayName||(tr.displayName="DiffContextProvider")}catch{}var tl=n(4559),ts=n(50899),to=n(46996),tc=n(18651);let td="FAILURE",tm="NOTICE",tu="WARNING",tf="empty-diff-line";function th(e,t,n){return"left"===n?!tb(e)&&e.left===t:!tb(e)&&(0,e6.XU)(e.type)===n&&e.right===t}function tp(e,t){if(!e)return;if(!t)return e;let n=!1,i=!1,r=!1;for(let a of t)if(a&&(i||(i=th(a,e.startLineNumber,e.startOrientation)),r||(r=th(a,e.endLineNumber,e.endOrientation)),(n=r&&!i)||i&&r))break;return n?{...e,startLineNumber:e.endLineNumber,startOrientation:e.endOrientation,endLineNumber:e.startLineNumber,endOrientation:e.startOrientation}:e}function tg(e,t,n){let i=`-${tb(t)||"number"!=typeof t.left?"empty":t.left}`,r=n?`-${tb(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${r}`}function tx(e,t){return`${e}-${t}`}function tb(e){return!!e&&e===tf}function ty(e){return"CONTEXT"===e.type}function tj(e,t,n=!1){return n?function(e,t){let n;switch(t){case"ADDITION":n=["+"];break;case"DELETION":n=["-"];break;case"CONTEXT":n=[" "];break;case"INJECTED_CONTEXT":n=[" ","~"]}if(void 0===n||0===n.length||n.every(t=>!e.startsWith(t)))return[e,void 0];let i=e[0];return[e.substring(1),i]}(e,t):function(e,t){let n;switch(t){case"ADDITION":n="+";break;case"DELETION":n="-";break;case"CONTEXT":case"INJECTED_CONTEXT":n=" "}if(!n||!e.startsWith(n))return[e,void 0];let i=e[0];return[e.substring(1),i]}(e,t)}function tC(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(tf);for(;n.length<t.length;)n.push(tf)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}}function tv(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent||""}function tN(e){return["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type)}function tw({line:e,range:t,fileAnchor:n}){let i,{origin:r,pathname:a}=window.location;if(e){let r=tN(e)?e.left:e.right;i=t&&r&&t.startLineNumber<=r&&t.endLineNumber>=r?eF(t):function(e,t){let n=tN(e),i=n?e.left:e.right,r=n?"left":"right";if(null!==i)return eF({diffAnchor:t,endLineNumber:i,endOrientation:r,startLineNumber:i,startOrientation:r,firstSelectedLineNumber:i,firstSelectedOrientation:r})}(e,n)}else t&&(i=eF(t));if(i)return`${r}${a}#${i}`}function tS({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let r=e?`${(0,tc.U0)()?"\u2318":"Ctrl + "}`:"";return n&&(r+=`${(0,tc.U0)()?"\u2325":"Alt + "}`),t&&(r+=`${(0,tc.U0)()?"\u21E7":"Shift + "}`),r+=i}function tL({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let r="";return e&&(r+=(0,tc.U0)()?"Command+":"Control+"),n&&(r+=(0,tc.U0)()?"Option+":"Alt+"),t&&(r+="Shift+"),r+=i}let t_=["ADDITION","DELETION","CONTEXT"],tk=e=>e?e.filter(e=>!tb(e)).map(e=>{let[t]=tj(tv(e.html),e.type);return t}).join(`
`):"",tE=(e,t,n,i)=>{let r;if(e)return e;if(!tb(t)){let e=(n?t.left:t.right)??0,a=n?"left":"right";r={startOrientation:a,endOrientation:a,startLineNumber:e,endLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:a,diffAnchor:i}}return r};function tI(e,t=!1,n=!1){let i;switch(e){case"ADDITION":i=t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";break;case"DELETION":i=t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";break;case"HUNK":i=t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";break;case"EMPTY":i=t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";break;default:i="var(--bgColor-default)"}return n?`color-mix(in oklab, var(--bgColor-accent-emphasis) 8%, ${i})`:i}function tD({selectedDiffRowRange:e,leftLines:t,rightLines:n,isNumberCell:i}){let r=!!n,{startOrientation:a,endOrientation:l}=e;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation&&!i)return{isRowSelected:()=>!1,selectedRightLines:[],selectedLeftLines:[]};let s=m(a).findIndex(t=>th(t,e.startLineNumber,e.startOrientation)),o=m(l).findIndex(t=>th(t,e.endLineNumber,e.endOrientation)),c=s>=0&&o>=0;function d(e){if(!c||tb(e))return!1;let t=m((0,e6.XU)(e.type)).indexOf(e);return t>=s&&t<=o}function m(e){var i;return r&&"left"!==("string"==typeof(i=e)?i:(0,e6.XU)(i.type))?n:t}let u=m("left").filter(e=>d(e)),f=m("right").filter(e=>d(e));return{isRowSelected:d,selectedRightLines:f,selectedLeftLines:u}}let tT=(0,u.createContext)(null),tA=(0,l.kw)()?function(){let e=(0,u.useContext)(tT);if(!e)throw Error("useSelectedDiffRowRange must be used within a SelectedDiffRowRangeContext");return e}:function(){let e=(0,u.useContext)(tT);if(!e)throw Error("useSelectedDiffRowRange must be used within a SelectedDiffRowRangeContext");return e};function tR(e){e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation?(0,tl.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} selected.`):(0,tl.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} to ${"left"===e.endOrientation?"L":"R"}${e.endLineNumber} selected.`)}function t$(){(0,tl.i)("Selection Cleared")}function tO(e,t,n,i,r){return r&&e&&e.diffAnchor===t?n<=e.firstSelectedLineNumber?{...e,startLineNumber:n,startOrientation:i,endLineNumber:e.firstSelectedLineNumber,endOrientation:e.firstSelectedOrientation}:{...e,startLineNumber:e.firstSelectedLineNumber,startOrientation:e.firstSelectedOrientation,endLineNumber:n,endOrientation:i}:{diffAnchor:t,endLineNumber:n,endOrientation:i,startLineNumber:n,startOrientation:i,firstSelectedLineNumber:n,firstSelectedOrientation:i}}let tP=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,f,h,p,g=(0,s.c)(35),{children:x}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Map,g[0]=t):t=g[0];let b=(0,u.useRef)(t);g[1]===Symbol.for("react.memo_cache_sentinel")?(n=(e,t)=>{if(!e)return;let n=e.diffAnchor,i=b.current.get(n);if(!i)return;let{leftLines:r,rightLines:a}=tC(i);return tD({selectedDiffRowRange:e,leftLines:r,rightLines:a,isNumberCell:t})},g[1]=n):n=g[1];let y=(0,ts.K)(n),[j,v]=(0,u.useState)(tM);g[2]!==y||g[3]!==j?(i=()=>{if(j){let e=y(j);if(e)return{leftLines:e.selectedLeftLines,rightLines:e.selectedRightLines||[]}}return{leftLines:[],rightLines:[]}},g[2]=y,g[3]=j,g[4]=i):i=g[4];let[N,w]=(0,u.useState)(i);g[5]!==y||g[6]!==N?(r=(e,t)=>{let n=y(e,t),i=n?{leftLines:n.selectedLeftLines,rightLines:n.selectedRightLines||[]}:{leftLines:[],rightLines:[]};(0,to.A)(N,i)||w(i)},g[5]=y,g[6]=N,g[7]=r):r=g[7];let S=(0,ts.K)(r);g[8]!==j||g[9]!==S?(l=(e,t,n,i,r)=>{if(!t||!n)return;let a=tO(j,e,t,n,i);tR(a),(r||i)&&v(a),S(a,r),eB(eF(a))},g[8]=j,g[9]=S,g[10]=l):l=g[10];let L=(0,ts.K)(l);g[11]!==S?(o=e=>{tR(e),v(e),S(e),eB(eF(e))},g[11]=S,g[12]=o):o=g[12];let _=(0,ts.K)(o);g[13]!==_?(c=e=>{let{diffAnchor:t,startGridCell:n,endGridCell:i,focusedGridCell:r}=e;_({diffAnchor:t,endLineNumber:i.lineNumber,endOrientation:i.orientation,firstSelectedLineNumber:r.lineNumber,firstSelectedOrientation:r.orientation,startLineNumber:n.lineNumber,startOrientation:n.orientation})},g[13]=_,g[14]=c):c=g[14];let k=(0,ts.K)(c);g[15]!==j||g[16]!==S?(d=()=>{j&&(v(void 0),S(void 0),t$(),(0,C.K3)())},g[15]=j,g[16]=S,g[17]=d):d=g[17];let E=(0,ts.K)(d);g[18]!==j||g[19]!==S?(m=(e,t)=>{b.current.set(e,t),j?.diffAnchor===e&&S(j)},g[18]=j,g[19]=S,g[20]=m):m=g[20];let I=(0,ts.K)(m);g[21]===Symbol.for("react.memo_cache_sentinel")?(f=e=>b.current.get(e),g[21]=f):f=g[21];let D=(0,ts.K)(f);g[22]!==E||g[23]!==D||g[24]!==y||g[25]!==_||g[26]!==k||g[27]!==N||g[28]!==j||g[29]!==I||g[30]!==L?(h={selectedDiffRowRange:j,updateSelectedDiffRowRange:L,clearSelectedDiffRowRange:E,replaceSelectedDiffRowRange:_,replaceSelectedDiffRowRangeFromGridCells:k,updateDiffLines:I,selectedDiffLines:N,getDiffLinesFromLineRange:y,getDiffLinesByDiffAnchor:D},g[22]=E,g[23]=D,g[24]=y,g[25]=_,g[26]=k,g[27]=N,g[28]=j,g[29]=I,g[30]=L,g[31]=h):h=g[31];let T=h;return g[32]!==x||g[33]!==T?(p=(0,a.jsx)(tT,{value:T,children:x}),g[32]=x,g[33]=T,g[34]=p):p=g[34],p}:function({children:e}){let t=(0,u.useRef)(new Map),n=(0,ts.K)((e,n)=>{if(!e)return;let i=e.diffAnchor,r=t.current.get(i);if(!r)return;let{leftLines:a,rightLines:l}=tC(r);return tD({selectedDiffRowRange:e,leftLines:a,rightLines:l,isNumberCell:n})}),[i,r]=(0,u.useState)(()=>eM(w.fV.hash)),[l,s]=(0,u.useState)(()=>{if(i){let e=n(i);if(e)return{leftLines:e.selectedLeftLines,rightLines:e.selectedRightLines||[]}}return{leftLines:[],rightLines:[]}}),o=(0,ts.K)((e,t)=>{let i=n(e,t),r=i?{leftLines:i.selectedLeftLines,rightLines:i.selectedRightLines||[]}:{leftLines:[],rightLines:[]};(0,to.A)(l,r)||s(r)}),c=(0,ts.K)((e,t,n,a,l)=>{if(!t||!n)return;let s=tO(i,e,t,n,a);tR(s),(l||a)&&r(s),o(s,l),eB(eF(s))}),d=(0,ts.K)(e=>{tR(e),r(e),o(e),eB(eF(e))}),m=(0,ts.K)(({diffAnchor:e,startGridCell:t,endGridCell:n,focusedGridCell:i})=>{d({diffAnchor:e,endLineNumber:n.lineNumber,endOrientation:n.orientation,firstSelectedLineNumber:i.lineNumber,firstSelectedOrientation:i.orientation,startLineNumber:t.lineNumber,startOrientation:t.orientation})}),f=(0,ts.K)(()=>{i&&(r(void 0),o(void 0),t$(),(0,C.K3)())}),h=(0,ts.K)((e,n)=>{t.current.set(e,n),i?.diffAnchor===e&&o(i)}),p=(0,ts.K)(e=>t.current.get(e)),g=(0,u.useMemo)(()=>({selectedDiffRowRange:i,updateSelectedDiffRowRange:c,clearSelectedDiffRowRange:f,replaceSelectedDiffRowRange:d,replaceSelectedDiffRowRangeFromGridCells:m,updateDiffLines:h,selectedDiffLines:l,getDiffLinesFromLineRange:n,getDiffLinesByDiffAnchor:p}),[i,c,f,d,m,l,h,n,p]);return(0,a.jsx)(tT,{value:g,children:e})};function tM(){return eM(w.fV.hash)}try{tT.displayName||(tT.displayName="SelectedDiffRowRangeContext")}catch{}try{tP.displayName||(tP.displayName="SelectedDiffRowRangeContextProvider")}catch{}let tF="final-hunk-header-line";function tB(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function tU(e,t){if("HUNK"===e.type&&e.__id===tF)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(tB).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function tH(e){let t,n=[],i=0;for(let r=1;r<e.length;r++){let a=e[r];if(a&&!tb(a)&&(t=a,"HUNK"===a.type)){let t,l=e[i];if(!l||tb(l))continue;let s=r-1;for(;(!t||tb(t))&&(t=e[s],-1!=--s););t&&!tb(t)&&n.push({startBlobLineNumber:l.blobLineNumber,endBlobLineNumber:t.blobLineNumber}),a.__id===tF&&n.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:a.blobLineNumber+20}),i=r;continue}}if(t&&"HUNK"!==t.type){let r=e[i];r&&!tb(r)&&n.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:t.blobLineNumber})}return n}function tz(e){let t=document.getElementById("__primerPortalRoot__");return!!t&&!!e&&t.contains(e)}let tV="DiffLines-module__tableLayoutFixed--InKAb",tG="DiffLines-module__compact--emLm8";var tW=n(69726);let tK="HiddenDiffPatch-module__gridColumnTemplate--UvUAt",tq=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,h,p=(0,s.c)(27),{children:g,helpText:x,helpUrl:b,onLoadDiff:y,diffAnchor:j}=e,C=b&&x,[v,N]=(0,u.useState)("initial");p[0]!==y?(t=async()=>{try{N("loading"),await y()}catch{N("error")}},p[0]=y,p[1]=t):t=p[1];let w=t;return p[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,E.$)(tK),p[2]=n):n=p[2],p[3]===Symbol.for("react.memo_cache_sentinel")?(i={maxWidth:"340px"},p[3]=i):i=p[3],p[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)("svg",{"aria-hidden":!0,height:"84",style:i,viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})}),p[4]=r):r=p[4],p[5]!==v?(l="loading"===v&&(0,a.jsx)(tW.A,{size:"medium"}),p[5]=v,p[6]=l):l=p[6],p[7]!==v?(o="error"===v&&(0,a.jsx)(f.AlertIcon,{size:24}),p[7]=v,p[8]=o):o=p[8],p[9]!==v||p[10]!==w?(c="initial"===v&&(0,a.jsx)(U.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{w(),N("loading")},children:"Load Diff"}),p[9]=v,p[10]=w,p[11]=c):c=p[11],p[12]!==g||p[13]!==x||p[14]!==b||p[15]!==v||p[16]!==w||p[17]!==C?(d="error"===v?(0,a.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,a.jsx)(H.A,{inline:!0,as:"button",onClick:()=>{w(),N("loading")},children:"Retry"})]}):(0,a.jsxs)("span",{className:"fgColor-muted mt-1",children:[g,C&&(0,a.jsx)(H.A,{inline:!0,href:b,children:x})]}),p[12]=g,p[13]=x,p[14]=b,p[15]=v,p[16]=w,p[17]=C,p[18]=d):d=p[18],p[19]!==l||p[20]!==o||p[21]!==c||p[22]!==d?(m=(0,a.jsxs)("div",{className:n,children:[r," ",(0,a.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:[l,o,c,d]})]}),p[19]=l,p[20]=o,p[21]=c,p[22]=d,p[23]=m):m=p[23],p[24]!==j||p[25]!==m?(h=(0,a.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":j,children:m}),p[24]=j,p[25]=m,p[26]=h):h=p[26],h}:function({children:e,helpText:t,helpUrl:n,onLoadDiff:i,diffAnchor:r}){let l=n&&t,[s,o]=(0,u.useState)("initial"),c=(0,u.useCallback)(async()=>{try{o("loading"),await i()}catch{o("error")}},[i,o]);return(0,a.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":r,children:(0,a.jsxs)("div",{className:(0,E.$)(tK),children:[(0,a.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,a.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:["loading"===s&&(0,a.jsx)(tW.A,{size:"medium"}),"error"===s&&(0,a.jsx)(f.AlertIcon,{size:24}),"initial"===s&&(0,a.jsx)(U.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{c(),o("loading")},children:"Load Diff"}),"error"===s?(0,a.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,a.jsx)(H.A,{inline:!0,as:"button",onClick:()=>{c(),o("loading")},children:"Retry"})]}):(0,a.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,l&&(0,a.jsx)(H.A,{inline:!0,href:n,children:t})]})]})]})})};try{tq.displayName||(tq.displayName="HiddenDiffPatch")}catch{}var tX=n(12918);let tQ=(0,u.createContext)(null),tJ=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(23),{children:r,currentHunk:l,diffEntryId:o,diffLine:c,fileAnchor:d,fileLineCount:m,filePath:u,hasHiddenUnicodeCharacters:f,isLeftSide:h,isRowSelected:p,isSplit:g,modifiedLineThreads:x,nextHunk:b,originalLineThreads:y,previousHunk:j,rowId:C,diffContext:v,setInGridMode:N}=e,w=void 0!==p&&p,S=x&&x.length>0,L=y&&y.length>0;i[0]!==l||i[1]!==v||i[2]!==o||i[3]!==c||i[4]!==d||i[5]!==m||i[6]!==u||i[7]!==f||i[8]!==h||i[9]!==w||i[10]!==g||i[11]!==x||i[12]!==b||i[13]!==y||i[14]!==j||i[15]!==C||i[16]!==N||i[17]!==S||i[18]!==L?(t={currentHunk:l,diffEntryId:o,diffLine:c,fileAnchor:d,fileLineCount:m,filePath:u,hasHiddenUnicodeCharacters:f,isLeftSide:h,isRowSelected:w,isSplit:g,modifiedLineThreads:x,modifiedLineHasThreads:S,nextHunk:b,originalLineThreads:y,originalLineHasThreads:L,previousHunk:j,rowId:C,diffContext:v,setInGridMode:N},i[0]=l,i[1]=v,i[2]=o,i[3]=c,i[4]=d,i[5]=m,i[6]=u,i[7]=f,i[8]=h,i[9]=w,i[10]=g,i[11]=x,i[12]=b,i[13]=y,i[14]=j,i[15]=C,i[16]=N,i[17]=S,i[18]=L,i[19]=t):t=i[19];let _=t;return i[20]!==r||i[21]!==_?(n=(0,a.jsx)(tQ,{value:_,children:r}),i[20]=r,i[21]=_,i[22]=n):n=i[22],n}:function({children:e,currentHunk:t,diffEntryId:n,diffLine:i,fileAnchor:r,fileLineCount:l,filePath:s,hasHiddenUnicodeCharacters:o,isLeftSide:c,isRowSelected:d=!1,isSplit:m,modifiedLineThreads:f,nextHunk:h,originalLineThreads:p,previousHunk:g,rowId:x,diffContext:b,setInGridMode:y}){let j=(0,u.useMemo)(()=>({currentHunk:t,diffEntryId:n,diffLine:i,fileAnchor:r,fileLineCount:l,filePath:s,hasHiddenUnicodeCharacters:o,isLeftSide:c,isRowSelected:d,isSplit:m,modifiedLineThreads:f,modifiedLineHasThreads:f&&f.length>0,nextHunk:h,originalLineThreads:p,originalLineHasThreads:p&&p.length>0,previousHunk:g,rowId:x,diffContext:b,setInGridMode:y}),[t,n,i,r,l,s,o,c,d,m,f,h,p,g,x,b,y]);return(0,a.jsx)(tQ,{value:j,children:e})},tY=(0,l.kw)()?function(){let e=(0,u.useContext)(tQ);if(!e)throw Error("useDiffLineContext must be used within a DiffLineContextProvider");return e}:function(){let e=(0,u.useContext)(tQ);if(!e)throw Error("useDiffLineContext must be used within a DiffLineContextProvider");return e};try{tQ.displayName||(tQ.displayName="DiffLineContext")}catch{}try{tJ.displayName||(tJ.displayName="DiffLineContextProvider")}catch{}function tZ(e,t){return e?.threads?.flatMap(e=>{let n=e?.id,i=e?.commentsData?.comments?.[0]?.author??t,r=e?.commentsData?.totalCount??0,a=e?.commentsData?.__id;return n&&i?[{id:n,author:i,commentCount:r,commentsConnectionId:a,diffSide:e.diffSide,isOutdated:e.isOutdated,line:e.line,startLine:e.startLine,startDiffSide:e.startDiffSide}]:[]})??[]}var t0=n(45800),t1=n(35750),t2=n(18150),t3=n(85242),t4=n(88243),t5=n(16213),t6=n(50467),t7=new WeakMap,t8=new WeakMap,t9=new WeakMap,ne=new WeakMap,nt=new WeakMap,nn=new WeakMap,ni=new WeakSet,nr=new WeakSet,na=new WeakSet,nl=new WeakSet,ns=new WeakSet,no=new WeakSet,nc=new WeakSet,nd=new WeakSet,nm=new WeakSet,nu=new WeakSet;let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n,i=(0,t1._)(this,t8).get(this.focusedGridCell?.cellId??"");if(!i)return;let[r]=i,[,a]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&(0,t4._)(this,nc,ny).call(this,r)&&(0,t1._)(this,ne)&&(a=(0,t1._)(this,ne),(0,t3._)(this,ne,void 0)),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=(0,t1._)(this,t7).length-1,t=(0,t1._)(this,t7)[e]?.length;t&&(n=(0,t1._)(this,t7)[e]?.[t-1]);break}case"ArrowUp"===e:(0,t4._)(this,nc,ny).call(this,r-1)?((0,t4._)(this,nu,nv).call(this,a),n=(0,t1._)(this,t7)[r-1]?.[0]):n=(0,t1._)(this,t7)[r-1]?.[a];break;case"ArrowDown"===e:(0,t4._)(this,nc,ny).call(this,r+1)?((0,t4._)(this,nu,nv).call(this,a),n=(0,t1._)(this,t7)[r+1]?.[0]):n=(0,t1._)(this,t7)[r+1]?.[a];break;case"ArrowLeft"===e:n=(0,t1._)(this,t7)[r]?.[a-1];break;case"ArrowRight"===e:n=(0,t1._)(this,t7)[r]?.[a+1];break;case"PageUp"===e:{(0,t4._)(this,nu,nv).call(this,a);let e=(0,t4._)(this,na,np).call(this,r);n=(0,t1._)(this,t7)[e]?.[0];break}case"PageDown"===e:{(0,t4._)(this,nu,nv).call(this,a);let e=(0,t4._)(this,nr,nh).call(this,r),t=0;e||(e=(0,t1._)(this,t7).length-1,t=a),n=(0,t1._)(this,t7)[e]?.[t];break}case"Home"===e:n=(0,t1._)(this,t7)[r]?.[0];break;case"End"===e:{let e=(0,t1._)(this,t7)[r];if(e&&!(0,t4._)(this,nc,ny).call(this,r)){let t=e.length-1;n=(0,t1._)(this,t7)[r]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){(0,t4._)(this,nl,ng).call(this,e,t)}focusFirstGridCell(e){e&&(0,t1._)(this,t8).get(e)?this.focusGridCell(e):this.focusedGridCell=(0,t1._)(this,t7)[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=(0,t1._)(this,t8).get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=(0,t1._)(this,t7)[n]?.[i]}getNextSelectableCell(e){let t,n=this.getValidSelectableRowCell()||this.focusedGridCell,i=this.lastSelectedGridCell||n,r=(0,t1._)(this,t8).get(i?.cellId??"");if(!r)return;let[a,l]=r;if("ArrowUp"===e){let e=a-1;for(;!t&&e>=0;)t=(0,t4._)(this,ni,nf).call(this,{rowIndex:e,columnIndex:l}),e--}if("ArrowDown"===e){let e=a+1;for(;!t&&e<(0,t1._)(this,t7).length;)t=(0,t4._)(this,ni,nf).call(this,{rowIndex:e,columnIndex:l}),e++}return t&&(this.lastSelectedGridCell=t),t}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=(0,t1._)(this,t8).get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<=1&&!(0,t1._)(this,nn)?(0,t1._)(this,t7)[e]?.[this.focusedGridCell.columnIndex+1]:this.focusedGridCell.columnIndex<2&&(0,t1._)(this,nn)?(0,t1._)(this,t7)[e]?.[this.focusedGridCell.columnIndex+2]:(0,t1._)(this,t7)[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=(0,t1._)(this,t7).find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=(0,t1._)(this,t7).slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=tx(tg((0,t1._)(this,nt),e,t),0),r=(0,t1._)(this,t8).get(i);if(!r)return!1;let[a]=r;return!!n===(0,t4._)(this,nc,ny).call(this,a)}constructor(e,t,n,i,r){(0,t5._)(this,ni),(0,t5._)(this,nr),(0,t5._)(this,na),(0,t5._)(this,nl),(0,t5._)(this,ns),(0,t5._)(this,no),(0,t5._)(this,nc),(0,t5._)(this,nd),(0,t5._)(this,nm),(0,t5._)(this,nu),(0,t2._)(this,t7,{writable:!0,value:[]}),(0,t2._)(this,t8,{writable:!0,value:new Map}),(0,t2._)(this,t9,{writable:!0,value:new Set}),(0,t6._)(this,"focusedGridCell",void 0),(0,t6._)(this,"lastSelectedGridCell",void 0),(0,t2._)(this,ne,{writable:!0,value:void 0}),(0,t2._)(this,nt,{writable:!0,value:void 0}),(0,t2._)(this,nn,{writable:!0,value:void 0}),(0,t3._)(this,nt,e),(0,t3._)(this,nn,t),(0,t4._)(this,nl,ng).call(this,n,i),this.focusFirstGridCell(r)}};function nf({rowIndex:e,columnIndex:t}){let n=(0,t1._)(this,t7)[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty&&(0,t1._)(this,nn):return n?.[t-2];case i?.orientation==="right"&&i.isEmpty&&!(0,t1._)(this,nn):return n?.[t+1];default:return n?.[t]}}function nh(e){return Array.from((0,t1._)(this,t9)).sort((e,t)=>e-t).find(t=>t>e)}function np(e){return Array.from((0,t1._)(this,t9)).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}function ng(e,t){(0,t3._)(this,t7,[]),(0,t3._)(this,t8,new Map),(0,t3._)(this,t9,new Set);for(let n=0;n<e.length;n++){let i=[],r=e[n];if(void 0!==r){if((0,t1._)(this,nn)){let e=(t||[])[n],a=tg((0,t1._)(this,nt),r,e);tb(r)||"HUNK"!==r.type?(0,t4._)(this,nd,nj).call(this,{leftLine:r,rightLine:e,row:i,rowIdentifier:a,rowIndex:n}):(0,t4._)(this,no,nb).call(this,i,a,n)}else{let e=tg((0,t1._)(this,nt),r,r);tb(r)||"HUNK"!==r.type?(0,t4._)(this,nm,nC).call(this,{diffLine:r,row:i,rowIdentifier:e,rowIndex:n}):(0,t4._)(this,no,nb).call(this,i,e,n)}(0,t1._)(this,t7).push(i)}}}function nx({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:r,rowIndex:a,isSplit:l}){let s,o,c=tx(r,e);o=!(l||tb(t))&&t?.type==="DELETION"&&1===e||!(l||tb(t))&&t?.type==="ADDITION"&&0===e||tb(t),tb(t)||"left"!==n||(s=t?.left),tb(t)||"right"!==n||(s=t?.right),i.push({lineNumber:s,orientation:n,isEmpty:o,isHunk:!1,cellId:tx(r,e),columnIndex:e}),(0,t1._)(this,t8).set(c,[a,e])}function nb(e,t,n){let i=tx(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:i,columnIndex:0}),(0,t1._)(this,t8).set(i,[n,0]),(0,t1._)(this,t9).add(n)}function ny(e){return(0,t1._)(this,t9).has(e)}function nj({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:r}){(0,t4._)(this,ns,nx).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,t4._)(this,ns,nx).call(this,{cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,t4._)(this,ns,nx).call(this,{cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,t4._)(this,ns,nx).call(this,{cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0})}function nC({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let r=tb(e)||"DELETION"!==e.type?"right":"left";(0,t4._)(this,ns,nx).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,t4._)(this,ns,nx).call(this,{cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,t4._)(this,ns,nx).call(this,{cellIndex:2,diffLine:e,orientation:r,row:t,rowIdentifier:n,rowIndex:i,isSplit:!1})}function nv(e){(0,t4._)(this,nc,ny).call(this,e)||(0,t3._)(this,ne,e)}function nN(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}function nw(e,t,n){let i=[];for(let r=0;r<t.length;r++){let a=t[r],l=n?.[r]??a,s=!tb(a)&&a?.type==="HUNK";a&&l&&!e.hasLine(a,l,s)&&i.push(a)}return i}let nS=(0,l.kw)()?function(e,t,n,i,r,a){let l,o,c=(0,s.c)(8);c[0]!==i||c[1]!==e||c[2]!==n||c[3]!==t||c[4]!==r||c[5]!==a?(l=()=>{if(r&&document.activeElement){let l=nw(r,t,a);if(0!==l.length){if(document.activeElement===document.body){let i,r,a,s=t.indexOf(l[l.length-1]),o=t[s+1],c=l[0];o&&!tb(o)&&"HUNK"===o.type&&(i=tx(tg(e,o,o),0),r=document.querySelector(`[data-grid-cell-id=${i}]`),a=r?.querySelector("button[data-direction=down], button[data-direction=all]")),a||(i=tx(tg(e,c,c),0),r=document.querySelector(`[data-grid-cell-id=${i}]`),a=r?.querySelector("button[data-direction=up], button[data-direction=all]")),i&&r&&(a?a.focus():r.focus(),n.focusGridCell(i),nN(r))}else if("BUTTON"===document.activeElement.tagName)nN(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=n.focusedGridCell?.cellId;if(e!==t){let e=i.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},o=[e,t,n,a,r,i],c[0]=i,c[1]=e,c[2]=n,c[3]=t,c[4]=r,c[5]=a,c[6]=l,c[7]=o):(l=c[6],o=c[7]),(0,u.useEffect)(l,o)}:function(e,t,n,i,r,a){(0,u.useEffect)(()=>{if(r&&document.activeElement){let l=nw(r,t,a);if(0!==l.length){if(document.activeElement===document.body){let i,r,a,s=t.indexOf(l[l.length-1]),o=t[s+1],c=l[0];o&&!tb(o)&&"HUNK"===o.type&&(i=tx(tg(e,o,o),0),r=document.querySelector(`[data-grid-cell-id=${i}]`),a=r?.querySelector("button[data-direction=down], button[data-direction=all]")),a||(i=tx(tg(e,c,c),0),r=document.querySelector(`[data-grid-cell-id=${i}]`),a=r?.querySelector("button[data-direction=up], button[data-direction=all]")),i&&r&&(a?a.focus():r.focus(),n.focusGridCell(i),nN(r))}else if("BUTTON"===document.activeElement.tagName)nN(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),t=n.focusedGridCell?.cellId;if(e!==t){let e=i.current?.querySelector(`[data-grid-cell-id=${t}]`);e?.focus()}}}}},[e,t,n,a,r,i])},nL=(0,l.kw)()?function(e,t){let n,i,r,a=(0,s.c)(6);a[0]!==t?(n=e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},a[0]=t,a[1]=n):n=a[1];let l=n;a[2]!==e||a[3]!==l?(i=()=>{let t=e.current;return t?.addEventListener("focusin",l),()=>t?.removeEventListener("focusin",l)},r=[e,l],a[2]=e,a[3]=l,a[4]=i,a[5]=r):(i=a[4],r=a[5]),(0,u.useEffect)(i,r)}:function(e,t){let n=(0,u.useCallback)(e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},[t]);(0,u.useEffect)(()=>{let t=e.current;return t?.addEventListener("focusin",n),()=>t?.removeEventListener("focusin",n)},[e,n])};function n_(e){return e in te&&(te[e]&tt)>0}function nk({clearSelectedDiffRowRange:e,containerRef:t,fileAnchor:n,isSplitDiff:i,leftLines:r,replaceSelectedDiffRowRangeFromGridCells:a,rightLines:l,disabled:s}){let o=(0,u.useRef)(void 0),c=(0,u.useMemo)(()=>new GridNavigator(n,i,r,l,o.current?.focusedGridCell?.cellId),[n,i,r,l]);(0,u.useEffect)(()=>{o.current=c},[c]),(0,u.useEffect)(()=>{let e=t.current,n=()=>{c.clearLastSelectedCell()};return e?.addEventListener("mousedown",n),()=>e?.removeEventListener("mousedown",n)},[t,c]),nS(n,r,c,t,o.current,l),nL(t,c);let d=(0,u.useCallback)((t,i,r)=>{let l=c.getValidSelectableRowCell();switch(!0){case(r.metaKey||r.ctrlKey)&&"KeyA"===r.code:{let e=c.getFirstCodeCell(),t=c.getLastCodeCell();if(!e||!t)return i;return a({diffAnchor:n,focusedGridCell:e,startGridCell:e,endGridCell:t}),i}case r.shiftKey&&"ArrowDown"===r.key:{let e=c.getNextSelectableCell("ArrowDown");if(!e||!l)return i;return a({diffAnchor:n,focusedGridCell:l,startGridCell:l,endGridCell:e}),nE(e.cellId),i}case r.shiftKey&&"ArrowUp"===r.key:{let e=c.getNextSelectableCell("ArrowUp");if(!e||!l)return i;return a({diffAnchor:n,focusedGridCell:l,startGridCell:e,endGridCell:l}),nE(e.cellId),i}case"ArrowLeft"===r.key&&r.metaKey&&r.shiftKey:return i;default:{let t=c.moveToNextItem(r.key,r.ctrlKey),n=t&&document.querySelector(`[data-grid-cell-id=${t.cellId}]`);return e(),c.clearLastSelectedCell(),n??void 0}}},[c,n,a,e]);return(0,t0.G)({containerRef:t,bindKeys:tt,getNextFocusable:d,focusableElementFilter:e=>"BUTTON"!==e.tagName&&"TEXTAREA"!==e.tagName,focusInStrategy:"previous",disabled:s},[d]),{gridNavigator:c}}function nE(e){let t=w.XC?.querySelector(`[data-grid-cell-id=${e}]`);!function(e){if(!w.XC||!w.cg||!e)return!1;let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(w.cg.innerHeight||w.XC.documentElement.clientHeight)&&t.right<=(w.cg.innerWidth||w.XC.documentElement.clientWidth)}(t)&&t?.scrollIntoView({block:"nearest",inline:"nearest"})}var nI=n(87825);let nD=(0,u.createContext)({isInDialogMode:!1,enableInlineCommentDialogMode:()=>{},disableInlineCommentDialogMode:()=>{}}),nT=(0,l.kw)()?function(e){let t,n,i,r,l=(0,s.c)(11),{enableDiffGridMode:o,children:c}=e,[d,m]=(0,u.useState)(!1);l[0]!==o?(t=()=>{m(!0),o?.(!1)},l[0]=o,l[1]=t):t=l[1];let f=t;l[2]!==o?(n=()=>{m(!1),o?.(!0)},l[2]=o,l[3]=n):n=l[3];let h=n;l[4]!==h||l[5]!==f||l[6]!==d?(i={isInDialogMode:d,enableInlineCommentDialogMode:f,disableInlineCommentDialogMode:h},l[4]=h,l[5]=f,l[6]=d,l[7]=i):i=l[7];let p=i;return l[8]!==c||l[9]!==p?(r=(0,a.jsx)(nD,{value:p,children:c}),l[8]=c,l[9]=p,l[10]=r):r=l[10],r}:function({enableDiffGridMode:e,children:t}){let[n,i]=(0,u.useState)(!1),r=(0,u.useCallback)(()=>{i(!0),e?.(!1)},[e]),l=(0,u.useCallback)(()=>{i(!1),e?.(!0)},[e]),s=(0,u.useMemo)(()=>({isInDialogMode:n,enableInlineCommentDialogMode:r,disableInlineCommentDialogMode:l}),[n,r,l]);return(0,a.jsx)(nD,{value:s,children:t})},nA=((0,l.kw)(),()=>(0,u.useContext)(nD));try{nD.displayName||(nD.displayName="InlineCommentDialogModeContext")}catch{}try{nT.displayName||(nT.displayName="InlineCommentDialogModeProvider")}catch{}function nR(e){let t=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),n=document.querySelector(`#${e} div[role="dialog"]`);(t||n)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}function n$(e){return null!=e}let nO="thread",nP="annotation",nM=(0,u.createContext)(null),nF=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,f,h,p=(0,s.c)(36),{children:g,line:x}=e,[b,y]=(0,u.useState)(!1),[j,C]=(0,u.useState)(),[v,N]=(0,u.useState)(),[w,S]=(0,u.useState)(),[L,_]=(0,u.useState)(),[k,E]=(0,u.useState)(),{ghostUser:I,markerNavigationImplementation:D}=ta(),{originalLineThreads:T,modifiedLineThreads:A}=tY(),[R,$]=(0,u.useState)();p[0]!==I||p[1]!==x||p[2]!==A||p[3]!==T||p[4]!==R?(t=nU({line:x,side:R,originalLineThreads:T,modifiedLineThreads:A,ghostUser:I}),p[0]=I,p[1]=x,p[2]=A,p[3]=T,p[4]=R,p[5]=t):t=p[5];let O=t,P=!!j||!!v||!!w||!!L;p[6]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{y(!0)},p[6]=n):n=p[6];let M=n;p[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{y(!1)},p[7]=i):i=p[7];let F=i;p[8]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{e?E({id:e,kind:nO}):E(void 0)},p[8]=r):r=p[8];let B=r,U=k?.kind===nO?k.id:void 0,H=k?.kind===nP?k.id:void 0;p[9]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{e?E({id:e,kind:nP}):E(void 0)},p[9]=l):l=p[9];let z=l;p[10]!==D?.overlayPortalContainerName?(o=(e,t,n)=>{switch(nR(D?.overlayPortalContainerName),e){case"context-menu":C(t),_(void 0),S(void 0),N(void 0);break;case"new-conversation":_({cellId:t,withSuggestedChange:n?.withSuggestedChange}),C(void 0),S(void 0),N(void 0);break;case"marker-details":S(t),C(void 0),N(void 0),_(void 0);break;case"marker-list":N(t),C(void 0),_(void 0),S(void 0)}},p[10]=D?.overlayPortalContainerName,p[11]=o):o=p[11],D?.overlayPortalContainerName;let V=o;p[12]===Symbol.for("react.memo_cache_sentinel")?(c=e=>{switch(e){case"context-menu":C(void 0);break;case"new-conversation":_(void 0);break;case"marker-details":S(void 0);break;case"marker-list":N(void 0)}},p[12]=c):c=p[12];let G=c;p[13]!==I||p[14]!==x||p[15]!==A||p[16]!==T?(d=e=>($(e),nU({line:x,side:e,modifiedLineThreads:A,originalLineThreads:T,ghostUser:I})),p[13]=I,p[14]=x,p[15]=A,p[16]=T,p[17]=d):d=p[17];let W=d;x.annotationsData?.annotations,p[18]!==x.annotationsData?.annotations?(m=x.annotationsData?.annotations?.filter(n$)??[],p[18]=x.annotationsData?.annotations,p[19]=m):m=p[19];let K=m;p[20]!==K||p[21]!==P||p[22]!==b||p[23]!==j||p[24]!==V||p[25]!==w||p[26]!==v||p[27]!==L||p[28]!==H||p[29]!==U||p[30]!==O||p[31]!==W?(f={annotations:K,isActionBarVisible:b,showActionBar:M,hideActionBar:F,selectThreadId:B,selectAnnotationId:z,closeDialog:G,openDialog:V,anyMenuOpen:P,selectedThreadId:U,selectedAnnotationId:H,openContextMenuCell:j,openMarkersListCell:v,openMarkerDetailsCell:w,openNewConversationCell:L,threads:O,updateVisibleThreads:W},p[20]=K,p[21]=P,p[22]=b,p[23]=j,p[24]=V,p[25]=w,p[26]=v,p[27]=L,p[28]=H,p[29]=U,p[30]=O,p[31]=W,p[32]=f):f=p[32];let q=f;return p[33]!==g||p[34]!==q?(h=(0,a.jsx)(nM,{value:q,children:g}),p[33]=g,p[34]=q,p[35]=h):h=p[35],h}:function({children:e,line:t}){let[n,i]=(0,u.useState)(!1),[r,l]=(0,u.useState)(),[s,o]=(0,u.useState)(),[c,d]=(0,u.useState)(),[m,f]=(0,u.useState)(),[h,p]=(0,u.useState)(),{ghostUser:g,markerNavigationImplementation:x}=ta(),{originalLineThreads:b,modifiedLineThreads:y}=tY(),[j,C]=(0,u.useState)(),v=nU({line:t,side:j,originalLineThreads:b,modifiedLineThreads:y,ghostUser:g}),N=(0,u.useMemo)(()=>!!r||!!s||!!c||!!m,[r,c,s,m]),w=(0,u.useCallback)(()=>{i(!0)},[]),S=(0,u.useCallback)(()=>{i(!1)},[]),L=(0,u.useCallback)(e=>{e?p({id:e,kind:nO}):p(void 0)},[]),_=h?.kind===nO?h.id:void 0,k=h?.kind===nP?h.id:void 0,E=(0,u.useCallback)(e=>{e?p({id:e,kind:nP}):p(void 0)},[]),I=(0,u.useCallback)((e,t,n)=>{switch(nR(x?.overlayPortalContainerName),e){case"context-menu":l(t),f(void 0),d(void 0),o(void 0);break;case"new-conversation":f({cellId:t,withSuggestedChange:n?.withSuggestedChange}),l(void 0),d(void 0),o(void 0);break;case"marker-details":d(t),l(void 0),o(void 0),f(void 0);break;case"marker-list":o(t),l(void 0),f(void 0),d(void 0)}},[x?.overlayPortalContainerName]),D=(0,u.useCallback)(e=>{switch(e){case"context-menu":l(void 0);break;case"new-conversation":f(void 0);break;case"marker-details":d(void 0);break;case"marker-list":o(void 0)}},[]),T=(0,u.useCallback)(e=>(C(e),nU({line:t,side:e,modifiedLineThreads:y,originalLineThreads:b,ghostUser:g})),[t,y,b,g]),A=(0,u.useMemo)(()=>t.annotationsData?.annotations?.filter(n$)??[],[t.annotationsData?.annotations]),R=(0,u.useMemo)(()=>({annotations:A,isActionBarVisible:n,showActionBar:w,hideActionBar:S,selectThreadId:L,selectAnnotationId:E,closeDialog:D,openDialog:I,anyMenuOpen:N,selectedThreadId:_,selectedAnnotationId:k,openContextMenuCell:r,openMarkersListCell:s,openMarkerDetailsCell:c,openNewConversationCell:m,threads:v,updateVisibleThreads:T}),[A,n,w,S,L,E,D,I,N,_,k,r,s,c,m,v,T]);return(0,a.jsx)(nM,{value:R,children:e})},nB=(0,l.kw)()?function(){let e=(0,u.useContext)(nM);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}:function(){let e=(0,u.useContext)(nM);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e};function nU({line:e,side:t,originalLineThreads:n,modifiedLineThreads:i,ghostUser:r}){switch(t){case"LEFT":return n||[];case"RIGHT":return i||[];case void 0:return tZ(e.threadsData,r);default:return[]}}try{nM.displayName||(nM.displayName="MarkersDialogContext")}catch{}try{nF.displayName||(nF.displayName="MarkersDialogContextProvider")}catch{}var nH=n(40260),nz=n(98211),nV=n(94236);let nG=(0,u.createContext)({}),nW=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(5),{children:r}=e,[l,o]=(0,u.useState)(!1);i[0]!==l?(t={isDialogOpen:l,setIsDialogOpen:o},i[0]=l,i[1]=t):t=i[1];let c=t;return i[2]!==r||i[3]!==c?(n=(0,a.jsx)(nG,{value:c,children:r}),i[2]=r,i[3]=c,i[4]=n):n=i[4],n}:function({children:e}){let[t,n]=(0,u.useState)(!1),i=(0,u.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,a.jsx)(nG,{value:i,children:e})},nK=((0,l.kw)(),()=>(0,u.useContext)(nG));try{nG.displayName||(nG.displayName="DialogStateContext")}catch{}try{nW.displayName||(nW.displayName="DialogStateProvider")}catch{}let nq=e9.z0.ArrowAll;e9.z0.ArrowHorizontal,e9.z0.ArrowVertical,e9.z0.ArrowVertical,e9.z0.ArrowHorizontal;let MarkerNavigator=class MarkerNavigator{focusMarker(e){let t=this.markers.findIndex(t=>t.id.toString()===e.toString());-1!==t&&(this.currentMarkerPosition={markerId:e,index:t})}get focusedMarker(){if(this.currentMarkerPosition)return this.markers[this.currentMarkerPosition.index]}moveToFirstComment(e){if(0!==this.markers.length&&!e)return}moveToNextMarker(e,t){let n;if(0===this.markers.length)return;if(t){let e=t.closest("[data-marker-id]"),n=e?.getAttribute("data-marker-id");n&&(this.currentMarkerPosition={markerId:n,index:this.markers.findIndex(e=>e.id.toString()===n.toString())})}if(!this.currentMarkerPosition){let t="ArrowUp"===e?this.markers.length-1:0,n=this.markers[t];if(!n)return;return this.currentMarkerPosition={markerId:n.id,index:t},this.markers[t]}let i=0===this.currentMarkerPosition.index,r=this.currentMarkerPosition.index===this.markers.length-1;switch(e){case"ArrowDown":if(r)return;n=(this.currentMarkerPosition.index+1)%this.markers.length;break;case"ArrowUp":if(i)return;n=(this.currentMarkerPosition.index-1+this.markers.length)%this.markers.length;break;default:return}let a=this.markers[n];if(a)return this.currentMarkerPosition={markerId:a.id,index:n},a}moveToNextMarkerItem(e,t){let n;if(!t||!this.markerComments)return;let i=t.closest("[data-marker-id]"),r=i?.getAttribute("data-marker-id");if(!i||!r)return;let a=this.markerComments[r]||[];if(0===a.length)return;let l=t.getAttribute("data-marker-navigation-comment-id"),s=a.findIndex(e=>e.id===l);if(-1===s)return;let o=s===a.length-1;switch(e){case"ArrowDown":if(o)return;n=s+1;break;case"ArrowUp":if(0===s)return;n=s-1;break;default:return}let c=a[n];if(c)return this.currentMarkerCommentPosition={markerId:c.id,index:n},c}constructor(e,t,n){if((0,t6._)(this,"markers",void 0),(0,t6._)(this,"markerComments",null),(0,t6._)(this,"currentMarkerPosition",null),(0,t6._)(this,"currentMarkerCommentPosition",null),this.markers=e.map(e=>{let t=e.id;return{...e,id:t}}),this.markerComments=e.reduce((e,t)=>{let n=document.querySelectorAll(`[data-marker-navigation-comment-thread-id="${t.id}"]`);if(n){let i=Array.from(n).map(e=>({id:e.getAttribute("data-marker-navigation-comment-id")}));return{...e,[t.id.toString()]:i}}return e},{}),t&&!n){const e=this.markers.findIndex(e=>e.id.toString()===t.toString());-1!==e&&(this.currentMarkerPosition={markerId:t,index:e})}}};function nX({containerRef:e,markers:t,disabled:n=!1,focusInStrategy:i="previous",selectedMarkerId:r}){let a=(0,u.useRef)(void 0),l=(0,u.useRef)(void 0);(0,u.useEffect)(()=>{l.current=new MarkerNavigator(t,a.current?.focusedMarker?.id||r||void 0),a.current=l.current},[t,r]);let s=(0,u.useCallback)((e,t,n)=>{let i=n.key,r=!t?.hasAttribute("data-marker-id")&&!t?.hasAttribute("data-marker-navigation-comment-id");switch(!0){case r&&("ArrowUp"===i||"ArrowDown"===i||"ArrowRight"===i||"ArrowLeft"===i):return t?.closest("[data-marker-navigation-comment-id]")||t?.closest("[data-marker-id]")||void 0;case"ArrowUp"===i||"ArrowDown"===i:if(l.current&&t?.hasAttribute("data-marker-id")){let e=l.current.moveToNextMarker(i,t);if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(l.current&&t?.hasAttribute("data-marker-navigation-comment-id")){let e=l.current.moveToNextMarkerItem(i,t);if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0}return t;case"ArrowRight"===i:if(t?.hasAttribute("data-marker-navigation-comment-id"))return t;if(t?.hasAttribute("data-marker-id"))return t?.querySelector('[data-first-thread-comment="true"]')||void 0;return t;case"ArrowLeft"===i:if(t?.hasAttribute("data-marker-id"))return t;if(t?.hasAttribute("data-marker-navigation-comment-id"))return t?.closest("[data-marker-id]")||void 0;return t;default:return t??void 0}},[l]);return(0,t0.G)({containerRef:e,bindKeys:nq,getNextFocusable:s,focusableElementFilter:e=>e.hasAttribute("data-marker-id")||e.hasAttribute("data-marker-navigation-comment-id"),focusInStrategy:i,disabled:n},[s,n]),{markerNavigator:l}}let nQ="a, audio, button, details, embed, iframe, img, input, keygen, label, object, select, textarea, video";function nJ(e){e?.setAttribute("aria-hidden","true"),!function t(n=0){setTimeout(()=>{let n=Array.from(e?.querySelectorAll("*")??[]),i=Array.from(e?.querySelectorAll(nQ)??[]);if(0===i.length)return t(200);for(let e of n)e?.setAttribute("aria-hidden","true");for(let e of i)e.setAttribute("tabindex","-1")},n)}()}function nY(e){for(let t of(e?.setAttribute("aria-hidden","false"),Array.from(e?.querySelectorAll("*")??[])))t?.setAttribute("aria-hidden","false");for(let t of Array.from(e?.querySelectorAll(nQ)??[]))t.setAttribute("tabindex","0")}let nZ=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(7),{commentSubjectType:r,markerRef:a,isThread:l,thread:o}=e,c=void 0!==l&&l,{isInDialogMode:d}=nA();i[0]!==r||i[1]!==d||i[2]!==c||i[3]!==a||i[4]!==o?(t=()=>{let e=null;if(!c||o)return d?"commit"===r?e=setTimeout(()=>{nY(a.current)},100):nY(a.current):nJ(a.current),()=>{e&&clearTimeout(e)}},n=[d,r,a,c,o],i[0]=r,i[1]=d,i[2]=c,i[3]=a,i[4]=o,i[5]=t,i[6]=n):(t=i[5],n=i[6]),(0,u.useEffect)(t,n)}:function({commentSubjectType:e,markerRef:t,isThread:n=!1,thread:i}){let{isInDialogMode:r}=nA();(0,u.useEffect)(()=>{let a=null;if(!n||i)return r?"commit"===e?a=setTimeout(()=>{nY(t.current)},100):nY(t.current):nJ(t.current),()=>{a&&clearTimeout(a)}},[r,e,t,n,i])};var n0=n(77430),n1=n(98552),n2=n(69497);let n3="Annotation-module__annotation--XyhuZ",n4="Annotation-module__annotationSource--_lhYD",n5="Annotation-module__annotationMessage--vtkTa";var n6=n(38267);function n7({annotationLevel:e,...t}){let{icon:n,...i}=ie[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:i,className:r}){return(0,a.jsx)("svg",{"aria-label":n,className:r,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:i})}({...n,...i,...t})}let n8=(0,n6.i7)(["0%{opacity:0;}100%{opacity:1;}"]),n9=(0,n6.Ay)(n7).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-a72ff19-0"})(["animation:"," 0.1s ease-in;"],n8),ie={[td]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",primaryColorClass:"fgColor-danger",borderColor:"borderColor-danger-emphasis",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,a.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[tu]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",primaryColorClass:"fgColor-attention",borderColor:"borderColor-attention-emphasis",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[tm]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",primaryColorClass:"fgColor-muted",borderColor:"fgColor-muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{n7.displayName||(n7.displayName="AnnotationIcon")}catch{}try{n9.displayName||(n9.displayName="AnimatedAnnotationIcon")}catch{}let it={[td]:(0,a.jsx)(f.StopIcon,{className:"fgColor-danger"}),[tu]:(0,a.jsx)(f.AlertIcon,{className:"fgColor-attention"}),[tm]:(0,a.jsx)(f.InfoIcon,{className:"fgColor-muted"})},ii=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,u,f,h,p,g,x,b,y=(0,s.c)(45),{annotation:j}=e,C=ie[j.annotationLevel]?.borderColor;y[0]!==C?(t=(0,E.$)("p-3 bgColor-default",C,n3),y[0]=C,y[1]=t):t=y[1];let v=it[j.annotationLevel],N=ie[j.annotationLevel]?.ariaLabel;y[2]!==N?(n=(0,a.jsx)(n1.A,{weight:"semibold",className:"fgColor-muted pl-2",size:"small",children:N}),y[2]=N,y[3]=n):n=y[3],y[4]!==v||y[5]!==n?(i=(0,a.jsxs)("div",{className:"d-flex flex-items-center mb-2",children:[v,n]}),y[4]=v,y[5]=n,y[6]=i):i=y[6],y[7]!==j.annotationLevel||y[8]!==j.title?(r=j.title&&(0,a.jsx)(n1.A,{weight:"semibold",size:"medium",className:ie[j.annotationLevel]?.primaryColorClass,children:j.title}),y[7]=j.annotationLevel,y[8]=j.title,y[9]=r):r=y[9],y[10]!==r?(l=(0,a.jsx)("div",{className:"ml-4",children:r}),y[10]=r,y[11]=l):l=y[11];let w=ie[j.annotationLevel]?.ariaLabel;y[12]!==j.title||y[13]!==w?(o=(0,a.jsxs)("h2",{className:"sr-only",children:[w,": ",j.title]}),y[12]=j.title,y[13]=w,y[14]=o):o=y[14],y[15]!==j.message?(c=j.message&&(0,a.jsx)(F.$6,{html:j.message,className:n5}),y[15]=j.message,y[16]=c):c=y[16],y[17]!==c?(d=(0,a.jsx)("div",{className:"mb-3 mt-1 ml-4",children:c}),y[17]=c,y[18]=d):d=y[18],y[19]!==j.appAvatarAltText||y[20]!==j.appAvatarUrl?(m=(0,a.jsx)(n0.r,{src:j.appAvatarUrl,alt:j.appAvatarAltText}),y[19]=j.appAvatarAltText,y[20]=j.appAvatarUrl,y[21]=m):m=y[21];let S=`${j.checkSuiteName} / ${j.checkRun.name}`;return y[22]!==j.checkSuiteName?(u=(0,a.jsx)(n1.A,{weight:"semibold",size:"small",children:j.checkSuiteName}),y[22]=j.checkSuiteName,y[23]=u):u=y[23],y[24]!==j.checkRun.name?(f=(0,a.jsx)(n1.A,{size:"small",children:j.checkRun.name}),y[24]=j.checkRun.name,y[25]=f):f=y[25],y[26]!==S||y[27]!==u||y[28]!==f?(h=(0,a.jsxs)(n2.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:S,children:[u," ","/ ",f]}),y[26]=S,y[27]=u,y[28]=f,y[29]=h):h=y[29],y[30]!==m||y[31]!==h?(p=(0,a.jsxs)("div",{className:n4,children:[m,h]}),y[30]=m,y[31]=h,y[32]=p):p=y[32],y[33]!==j.checkRun.detailsUrl?(g=j.checkRun.detailsUrl&&(0,a.jsx)(U.Q,{as:"a",href:j.checkRun.detailsUrl,size:"small",children:"View details"}),y[33]=j.checkRun.detailsUrl,y[34]=g):g=y[34],y[35]!==p||y[36]!==g?(x=(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4",children:[p,g]}),y[35]=p,y[36]=g,y[37]=x):x=y[37],y[38]!==o||y[39]!==d||y[40]!==t||y[41]!==x||y[42]!==i||y[43]!==l?(b=(0,a.jsxs)("div",{className:t,children:[i,l,o,d,x]}),y[38]=o,y[39]=d,y[40]=t,y[41]=x,y[42]=i,y[43]=l,y[44]=b):b=y[44],b}:function({annotation:e}){return(0,a.jsxs)("div",{className:(0,E.$)("p-3 bgColor-default",ie[e.annotationLevel]?.borderColor,n3),children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center mb-2",children:[it[e.annotationLevel],(0,a.jsx)(n1.A,{weight:"semibold",className:"fgColor-muted pl-2",size:"small",children:ie[e.annotationLevel]?.ariaLabel})]}),(0,a.jsx)("div",{className:"ml-4",children:e.title&&(0,a.jsx)(n1.A,{weight:"semibold",size:"medium",className:ie[e.annotationLevel]?.primaryColorClass,children:e.title})}),(0,a.jsxs)("h2",{className:"sr-only",children:[ie[e.annotationLevel]?.ariaLabel,": ",e.title]}),(0,a.jsx)("div",{className:"mb-3 mt-1 ml-4",children:e.message&&(0,a.jsx)(F.$6,{html:e.message,className:n5})}),(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4",children:[(0,a.jsxs)("div",{className:n4,children:[(0,a.jsx)(n0.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,a.jsxs)(n2.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,a.jsx)(n1.A,{weight:"semibold",size:"small",children:e.checkSuiteName})," ","/ ",(0,a.jsx)(n1.A,{size:"small",children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,a.jsx)(U.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})};try{ii.displayName||(ii.displayName="Annotation")}catch{}let ir="InlineAnnotation-module__inlineAnnotation--zYahl",ia=(0,l.kw)()?function(e){let t,n,i,r,l=(0,s.c)(14),{annotation:o,isFirstMarker:c,commentingImplementation:d}=e,m=(0,u.useRef)(null),{isInDialogMode:f}=nA();l[0]!==d.commentSubjectType?(t={commentSubjectType:d.commentSubjectType,markerRef:m},l[0]=d.commentSubjectType,l[1]=t):t=l[1],nZ(t);let h=`annotation_${o.databaseId}`,p=c?"mb-1":"mb-2";l[2]!==p?(n=(0,E.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",p,ir),l[2]=p,l[3]=n):n=l[3];let g=`annotation-${o.id}`,x=`${o.id}`,b=f?0:-1;return l[4]!==o?(i=(0,a.jsx)(ii,{annotation:o}),l[4]=o,l[5]=i):i=l[5],l[6]!==o.annotationLevel||l[7]!==h||l[8]!==n||l[9]!==g||l[10]!==x||l[11]!==b||l[12]!==i?(r=(0,a.jsx)("div",{id:h,ref:m,className:n,"data-level":o.annotationLevel,"data-testid":g,"data-marker-id":x,tabIndex:b,children:i}),l[6]=o.annotationLevel,l[7]=h,l[8]=n,l[9]=g,l[10]=x,l[11]=b,l[12]=i,l[13]=r):r=l[13],r}:function({annotation:e,isFirstMarker:t,commentingImplementation:n}){let i=(0,u.useRef)(null),{isInDialogMode:r}=nA();return nZ({commentSubjectType:n.commentSubjectType,markerRef:i}),(0,a.jsx)("div",{id:`annotation_${e.databaseId}`,ref:i,className:(0,E.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",t?"mb-1":"mb-2",ir),"data-level":e.annotationLevel,"data-testid":`annotation-${e.id}`,"data-marker-id":`${e.id}`,tabIndex:r?0:-1,children:(0,a.jsx)(ii,{annotation:e})})};try{ia.displayName||(ia.displayName="InlineAnnotation")}catch{}let il="InlineMarkers-module__closeMarkersDialogButton--kjk9B",is="InlineMarkers-module__markersWrapper--PUwBK",io="InlineMarkers-module__markersDialogActive--NvAFu";var ic=n(82075),id=n(30459),im=n(11196),iu=n(12683);let ih=(0,l.kw)()?function(){let e,t,n,i=(0,s.c)(3);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.E.Visual,{children:(0,a.jsx)(f.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(h.E.Heading,{children:(0,a.jsx)("strong",{children:"Comments cannot be loaded right now"})}),i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("div",{className:"position-relative",children:(0,a.jsxs)(h.E,{border:!0,children:[e,t,(0,a.jsx)("div",{className:"mb-n2",children:(0,a.jsx)(h.E.Description,{children:"Refresh the page or try again later"})}),(0,a.jsx)(h.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})}),i[2]=n):n=i[2],n}:function(){return(0,a.jsx)("div",{className:"position-relative",children:(0,a.jsxs)(h.E,{border:!0,children:[(0,a.jsx)(h.E.Visual,{children:(0,a.jsx)(f.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),(0,a.jsx)(h.E.Heading,{children:(0,a.jsx)("strong",{children:"Comments cannot be loaded right now"})}),(0,a.jsx)("div",{className:"mb-n2",children:(0,a.jsx)(h.E.Description,{children:"Refresh the page or try again later"})}),(0,a.jsx)(h.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})})};try{ih.displayName||(ih.displayName="CommentErrorFallback")}catch{}let ip="InlineReviewThread-module__inlineReviewThreadHeading--ytbVB",ig="InlineReviewThread-module__ReviewThreadContainer--m84Gi",ix="InlineReviewThread-module__ResolvableContainer--yhxaM",ib="InlineReviewThread-module__ThreadLoading--E5i0R";var iy=n(11738);function ij(e,t="r"){(0,C.Zu)(`#${t}${e}`)}function iC(e,t){return t.some(t=>{var n,i;return n=t,i=e,n.commentId===i.commentId&&n.path===i.path&&n.suggestion.length===i.suggestion.length&&iv(n.suggestion,i.suggestion)})}let iv=(e,t)=>e.length===t.length&&!e.some((e,n)=>e!==t[n]);function iN({suggestedChange:e,isOutdated:t,isPending:n,isResolved:i,pullRequestIsClosed:r,pullRequestIsInMergeQueue:a,userCanApplySuggestion:l,applySuggestedChangesValidationData:s,suggestedChangesConfig:o}){let{lineRange:c}=s;if(t)return{isValid:!1,reason:"This suggestion is outdated and cannot be applied."};if(n)return{isValid:!1,reason:"This suggestion is part of a pending comment and cannot be applied."};if(i)return{isValid:!1,reason:"This suggestion is part of a resolved comment and cannot be applied."};if(r)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is closed."};if(a)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is queued to merge."};if(!l)return{isValid:!1,reason:"You do not have permission to apply this suggestion."};if(!c)return{isValid:!1,reason:"This suggestion does not have a valid line range."};if(!o)return{isValid:!1,reason:"Unable to determine the validity of this suggestion."};if(!o?.isValidSuggestionRange)return{isValid:!1,reason:"Unable to apply suggestions on deleted lines."};let d=o?.sourceContentFromDiffLines,m=e.suggestion.join(`
`);return 0!==e.suggestion.length&&m===d?{isValid:!1,reason:"This suggestion is invalid because no changes were made to the code."}:{isValid:!0}}function iw(e,t){return t.length>=50?{isValid:!1,reason:"Unable to commit due to too many changes in the batch."}:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let r of t)if(e.path===r.path){var n,i;return n=e.lineRange,i=r.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?{isValid:!1,reason:"Unable to commit due to other pending changes affecting this line."}:{isValid:!0}}function iS(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let n=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:n,startOrientation:t||"RIGHT"}}var iL=n(91835),i_=n(46747);let{getItem:ik,removeItem:iE,setItem:iI}=(0,ic.D)("localStorage"),iD=(e,t)=>{let{diffSide:n,filePath:i,line:r,subjectId:a}=e;if(t)return`PullRequest:${a}-File:${i}`;if(void 0!==r&&void 0!==n)return`PullRequest:${a}-File:${i}-Line:${r}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function iT(e,t){let n=ik(e),i=!!n?.text?.trim();return(0,u.useEffect)(()=>{i&&t?.(n)},[i]),{hasPersistedComment:i,removePersistedCommentFromStorage:()=>{iE(e),i=!1,n=null}}}(0,l.kw)();let iA=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(14),{diffSide:a,filePath:l,handlePersistedCommentExists:o,line:c,subjectId:d,threadId:m,fileLevelComment:f}=e,[h,p]=(0,u.useState)(!1);e:{let e;if(m){t=m;break e}r[0]!==a||r[1]!==f||r[2]!==l||r[3]!==c||r[4]!==d||r[5]!==m?(e=m??iD({diffSide:a,filePath:l,line:c,subjectId:d},f),r[0]=a,r[1]=f,r[2]=l,r[3]=c,r[4]=d,r[5]=m,r[6]=e):e=r[6],t=e}let g=t,{hasPersistedComment:x,removePersistedCommentFromStorage:b}=iT(g,o);r[7]!==h||r[8]!==g?(n=e=>{if(h)return;let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide});try{iI(g,t)}catch{p(!0)}},r[7]=h,r[8]=g,r[9]=n):n=r[9];let y=(0,i_.d)(n,1e3);return r[10]!==x||r[11]!==y||r[12]!==b?(i={hasPersistedComment:x,persistCommentToStorage:y,removePersistedCommentFromStorage:b},r[10]=x,r[11]=y,r[12]=b,r[13]=i):i=r[13],i}:function({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:r,threadId:a,fileLevelComment:l}){let[s,o]=(0,u.useState)(!1),c=(0,u.useMemo)(()=>a||(a??iD({diffSide:e,filePath:t,line:i,subjectId:r},l)),[e,t,i,r,a,l]),{hasPersistedComment:d,removePersistedCommentFromStorage:m}=iT(c,n);return{hasPersistedComment:d,persistCommentToStorage:(0,i_.d)(e=>{if(s)return;let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide});try{iI(c,t)}catch{o(!0)}},1e3),removePersistedCommentFromStorage:m}};function iR(e,t){for(let n of function e(t,n=[]){var i,r;let a;if(""===t)return n;let l=t.match(i$());if(!l)return n;let s=l.groups.fence;if(!s)return n;let o=s.includes("~")?"~":"`",c=t.match((a=i$([i=o],r=s.length),RegExp(`${a.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${i}{${r},}[ 	]*$`,"ms")));if(!c)return n;let d=0,m=l.groups.indent;""!==m&&(d=m.length);let u=c.groups.suggestion;if(d>0){let e=RegExp(`^ {0,${d}}`,"m");u=u.replace(e,"")}return n.push(u),e(t.slice(c.index+c[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function i$(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}let iO="AddCommentEditor-module__AddCommentEditor--PS0ul";var iP=n(42118);let iM=(0,l.kw)()?e=>{let t,n,i,r,l,o=(0,s.c)(10);return o[0]!==e?({ref:n,children:t,subject:r,...i}=e,o[0]=e,o[1]=t,o[2]=n,o[3]=i,o[4]=r):(t=o[1],n=o[2],i=o[3],r=o[4]),o[5]!==t||o[6]!==n||o[7]!==i||o[8]!==r?(l=(0,a.jsx)(iP.hF,{...i,ref:n,placeholder:"Leave a comment",actions:t,subject:r,showLabel:!1}),o[5]=t,o[6]=n,o[7]=i,o[8]=r,o[9]=l):l=o[9],l}:({ref:e,children:t,subject:n,...i})=>(0,a.jsx)(iP.hF,{...i,ref:e,placeholder:"Leave a comment",actions:t,subject:n,showLabel:!1});iM.displayName="ConversationCommentBox";let iF=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,f,h,p,g,x,b,y,j,C=(0,s.c)(71),{batchPending:v,batchingEnabled:N,commentBoxSubject:S,condensed:L,fileLevelComment:_,filePath:k,focusOnMount:E,isReplying:I,lineNumber:D,onAddComment:T,onCancelComment:A,onPersistedCommentExists:R,quotedText:$,side:O,startLineNumber:P,subjectId:M,threadId:F,suggestedChangesConfig:B}=e,[U,H]=(0,u.useState)(void 0===$?"":$),[z,V]=(0,u.useState)(!1),[G,W]=(0,u.useState)(),K=(0,u.useRef)(null),q=(0,u.useRef)(null);C[0]!==R?(t=e=>{let{text:t}=e;t&&(H(t),R?.())},C[0]=R,C[1]=t):t=C[1];let X=!!_;C[2]!==k||C[3]!==D||C[4]!==O||C[5]!==M||C[6]!==t||C[7]!==X||C[8]!==F?(n={diffSide:O,filePath:k,line:D,subjectId:M,threadId:F,handlePersistedCommentExists:t,fileLevelComment:X},C[2]=k,C[3]=D,C[4]=O,C[5]=M,C[6]=t,C[7]=X,C[8]=F,C[9]=n):n=C[9];let{persistCommentToStorage:Q,removePersistedCommentFromStorage:J}=iA(n);if(C[10]!==E?(i=()=>{if(E){let e=setTimeout(()=>{if(q.current&&(w.XC||w.cg)){let e=q.current,t=e.getBoundingClientRect(),n=w.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(w.cg?.innerHeight||n))){let i=t.top,r=w.XC?.documentElement.getBoundingClientRect().top||0,a=.6666666666666666*e.clientHeight;w.cg?.scrollTo({top:i-r-.6666666666666666*n+a,behavior:"smooth"})}}K.current?.focus()},100);return()=>{window.clearTimeout(e)}}},r=[E],C[10]=E,C[11]=i,C[12]=r):(i=C[11],r=C[12]),(0,u.useEffect)(i,r),C[13]!==U||C[14]!==z||C[15]!==T||C[16]!==A||C[17]!==J||C[18]!==B?.sourceContentFromDiffLines){let e,t=e=>{let{submitBatch:t}=e,n="Failed to save comment";if(z)return;if(!U.trim())return void W(`${n}: Body can't be blank`);V(!0),W(void 0);let i=iR(U,B?.sourceContentFromDiffLines??"");if(!i.isValid){W(i.errorMessage),V(!1);return}T?.({commentText:U,onCompleted(){V(!1),l()},onError(e){V(!1),e.message&&(n=`${n}: ${e.message}`),W(n)},submitBatch:t})};o=()=>t({submitBatch:!1}),c=()=>t({submitBatch:!0}),C[22]!==A||C[23]!==J?(e=()=>{J(),H(""),A?.()},C[22]=A,C[23]=J,C[24]=e):e=C[24],l=e,C[13]=U,C[14]=z,C[15]=T,C[16]=A,C[17]=J,C[18]=B?.sourceContentFromDiffLines,C[19]=l,C[20]=o,C[21]=c}else l=C[19],o=C[20],c=C[21];C[25]!==Q?(d=e=>{W(void 0),Q({text:e}),H(e)},C[25]=Q,C[26]=d):d=C[26];let Y=d,Z=L||I?"none":"flex";C[27]!==Z?(m={"> div:first-child":{display:Z}},C[27]=Z,C[28]=m):m=C[28];let ee=m;C[29]===Symbol.for("react.memo_cache_sentinel")?(f={"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}},C[29]=f):f=C[29];let et=f,en=I?"end":"space-between",ei=L&&et;C[30]!==ee||C[31]!==en||C[32]!==ei?(h={footer:{justifyContent:en,...ee,...ei}},C[30]=ee,C[31]=en,C[32]=ei,C[33]=h):h=C[33];let er=h;C[34]!==l||C[35]!==U?(p=e=>{"Escape"!==e.key||U.trim()?e.stopPropagation():(e.preventDefault(),l())},C[34]=l,C[35]=U,C[36]=p):p=C[36];let ea=N?o:c;return C[37]!==l||C[38]!==z||C[39]!==A?(g=A&&(0,a.jsx)(iL.x,{disabled:z,className:"py-1 px-2",variant:"default",onClick:l,children:"Cancel"}),C[37]=l,C[38]=z,C[39]=A,C[40]=g):g=C[40],C[41]!==v||C[42]!==N||C[43]!==U||C[44]!==c||C[45]!==I||C[46]!==z?(x=!v&&(0,a.jsx)(iL.x,{disabled:z||!U.length,className:"py-1 px-2",variant:N?"default":"primary",onClick:c,ref:q,children:I?"Reply":"Comment"}),C[41]=v,C[42]=N,C[43]=U,C[44]=c,C[45]=I,C[46]=z,C[47]=x):x=C[47],C[48]!==v||C[49]!==N||C[50]!==U||C[51]!==o||C[52]!==z?(b=N&&(0,a.jsx)(iL.x,{disabled:z||!U.length,className:"py-1 px-2",variant:"primary",onClick:o,children:v?"Add review comment":"Start a review"}),C[48]=v,C[49]=N,C[50]=U,C[51]=o,C[52]=z,C[53]=b):b=C[53],C[54]!==S||C[55]!==U||C[56]!==G||C[57]!==k||C[58]!==er||C[59]!==Y||C[60]!==D||C[61]!==P||C[62]!==B||C[63]!==ea||C[64]!==g||C[65]!==x||C[66]!==b?(y=(0,a.jsxs)(iM,{ref:K,label:"Add diff comment",sx:er,value:U,onChange:Y,onPrimaryAction:ea,suggestedChangesConfig:B,markdownErrorMessage:G,subject:S,lineNumber:D,filePath:k,startLineNumber:P,children:[g,x,b]}),C[54]=S,C[55]=U,C[56]=G,C[57]=k,C[58]=er,C[59]=Y,C[60]=D,C[61]=P,C[62]=B,C[63]=ea,C[64]=g,C[65]=x,C[66]=b,C[67]=y):y=C[67],C[68]!==p||C[69]!==y?(j=(0,a.jsx)("div",{className:iO,onKeyDown:p,children:y}),C[68]=p,C[69]=y,C[70]=j):j=C[70],j}:function({batchPending:e,batchingEnabled:t,commentBoxSubject:n,condensed:i,fileLevelComment:r,filePath:l,focusOnMount:s,isReplying:o,lineNumber:c,onAddComment:d,onCancelComment:m,onPersistedCommentExists:f,quotedText:h="",side:p,startLineNumber:g,subjectId:x,threadId:b,suggestedChangesConfig:y}){let[j,C]=(0,u.useState)(h),[v,N]=(0,u.useState)(!1),[S,L]=(0,u.useState)(),_=(0,u.useRef)(null),k=(0,u.useRef)(null),{persistCommentToStorage:E,removePersistedCommentFromStorage:I}=iA({diffSide:p,filePath:l,line:c,subjectId:x,threadId:b,handlePersistedCommentExists:({text:e})=>{e&&(C(e),f?.())},fileLevelComment:!!r});(0,u.useEffect)(()=>{if(s){let e=setTimeout(()=>{if(k.current&&(w.XC||w.cg)){let e=k.current,t=e.getBoundingClientRect(),n=w.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(w.cg?.innerHeight||n))){let i=t.top,r=w.XC?.documentElement.getBoundingClientRect().top||0,a=e.clientHeight*(2/3);w.cg?.scrollTo({top:i-r-2/3*n+a,behavior:"smooth"})}}_.current?.focus()},100);return()=>{window.clearTimeout(e)}}},[s]);let D=({submitBatch:e})=>{let t="Failed to save comment";if(v)return;if(!j.trim())return void L(`${t}: Body can't be blank`);N(!0),L(void 0);let n=iR(j,y?.sourceContentFromDiffLines??"");if(!n.isValid){L(n.errorMessage),N(!1);return}d?.({commentText:j,onCompleted(){N(!1),R()},onError(e){N(!1),e.message&&(t=`${t}: ${e.message}`),L(t)},submitBatch:e})},T=()=>D({submitBatch:!1}),A=()=>D({submitBatch:!0}),R=(0,u.useCallback)(()=>{I(),C(""),m?.()},[m,I]),$={footer:{justifyContent:o?"end":"space-between","> div:first-child":{display:i||o?"none":"flex"},...i&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,a.jsx)("div",{className:iO,onKeyDown:e=>{"Escape"!==e.key||j.trim()?e.stopPropagation():(e.preventDefault(),R())},children:(0,a.jsxs)(iM,{ref:_,label:"Add diff comment",sx:$,value:j,onChange:e=>{L(void 0),E({text:e}),C(e)},onPrimaryAction:t?T:A,suggestedChangesConfig:y,markdownErrorMessage:S,subject:n,lineNumber:c,filePath:l,startLineNumber:g,children:[m&&(0,a.jsx)(iL.x,{disabled:v,className:"py-1 px-2",variant:"default",onClick:R,children:"Cancel"}),!e&&(0,a.jsx)(iL.x,{disabled:v||!j.length,className:"py-1 px-2",variant:t?"default":"primary",onClick:A,ref:k,children:o?"Reply":"Comment"}),t&&(0,a.jsx)(iL.x,{disabled:v||!j.length,className:"py-1 px-2",variant:"primary",onClick:T,children:e?"Add review comment":"Start a review"})]})})};try{iF.displayName||(iF.displayName="AddCommentEditor")}catch{}var iB=n(26156),iU=n(18559),iH=n(81156),iz=n(63352),iV=n(78809),iG=n(24967),iW=n(19805),iK=n(43258),iq=n(31021),iX=n(40961);let iQ=(0,l.kw)()?function(e){let t,n=(0,s.c)(4),{commentingImplementation:i,suggestedChange:r}=e,{sendAnalyticsEvent:l}=(0,id.s)();return n[0]!==i||n[1]!==l||n[2]!==r?(t=(0,a.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,a.jsx)(U.Q,{variant:"primary",onClick:()=>{l("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),i.addSuggestedChangeToPendingBatch(r)},children:"Add suggestion to batch"})}),n[0]=i,n[1]=l,n[2]=r,n[3]=t):t=n[3],t}:function({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,id.s)();return(0,a.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,a.jsx)(U.Q,{variant:"primary",onClick:()=>{n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})};try{iQ.displayName||(iQ.displayName="AddToExistingBatch")}catch{}var iJ=n(73783);let iY={applySuggestion:{text:"Apply suggestion"},addSuggestionToBatch:{text:"Add suggestion to batch",inactive:!0,inactiveReason:"This feature is not supported yet."}},iZ=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m=(0,s.c)(24),{commentingImplementation:h,onOpenDialog:p,suggestedChange:g}=e,{sendAnalyticsEvent:x}=(0,id.s)(),[b,y]=(0,u.useState)(iY.applySuggestion),[j,C]=(0,u.useState)(!1),v=(0,u.useRef)(null),N=(0,u.useRef)(null);m[0]!==j?(t=()=>C(!j),m[0]=j,m[1]=t):t=m[1];let w=t,{addSuggestedChangeToPendingBatch:S}=h;m[2]!==S||m[3]!==p||m[4]!==b||m[5]!==x||m[6]!==g?(n=()=>{b===iY.addSuggestionToBatch&&(S(g),x("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),b===iY.applySuggestion&&p(N)},m[2]=S,m[3]=p,m[4]=b,m[5]=x,m[6]=g,m[7]=n):n=m[7];let L=n;return m[8]!==L||m[9]!==b.text?(i=(0,a.jsx)(U.Q,{variant:"primary",onClick:L,ref:N,children:b.text}),m[8]=L,m[9]=b.text,m[10]=i):i=m[10],m[11]!==w?(r=(0,a.jsx)(nV.W.Anchor,{children:(0,a.jsx)(z.K,{ref:v,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:f.TriangleDownIcon,size:"medium",variant:"primary",onClick:w})}),m[11]=w,m[12]=r):r=m[12],m[13]===Symbol.for("react.memo_cache_sentinel")?(l=Object.keys(iY),m[13]=l):l=m[13],m[14]!==b?(o=(0,a.jsx)(nV.W.Overlay,{width:"medium",children:(0,a.jsx)(eg.l,{selectionVariant:"single",children:l.map(e=>{let t=iY[e];return(0,a.jsx)(eg.l.Item,{selected:b===t,onSelect:()=>y(t),inactiveText:t.inactiveReason,children:t.text},e)})})}),m[14]=b,m[15]=o):o=m[15],m[16]!==j||m[17]!==r||m[18]!==o||m[19]!==w?(c=(0,a.jsxs)(nV.W,{anchorRef:v,open:j,onOpenChange:w,children:[r,o]}),m[16]=j,m[17]=r,m[18]=o,m[19]=w,m[20]=c):c=m[20],m[21]!==i||m[22]!==c?(d=(0,a.jsx)("div",{className:"d-flex flex-row-reverse flex-wrap-reverse",children:(0,a.jsxs)(iJ.A,{children:[i,c]})}),m[21]=i,m[22]=c,m[23]=d):d=m[23],d}:function({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let{sendAnalyticsEvent:i}=(0,id.s)(),[r,l]=(0,u.useState)(iY.applySuggestion),[s,o]=(0,u.useState)(!1),c=(0,u.useRef)(null),d=(0,u.useRef)(null),m=()=>o(!s),{addSuggestedChangeToPendingBatch:h}=e,p=(0,u.useCallback)(()=>{r===iY.addSuggestionToBatch&&(h(n),i("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),r===iY.applySuggestion&&t(d)},[h,t,r,i,n]);return(0,a.jsx)("div",{className:"d-flex flex-row-reverse flex-wrap-reverse",children:(0,a.jsxs)(iJ.A,{children:[(0,a.jsx)(U.Q,{variant:"primary",onClick:p,ref:d,children:r.text}),(0,a.jsxs)(nV.W,{anchorRef:c,open:s,onOpenChange:m,children:[(0,a.jsx)(nV.W.Anchor,{children:(0,a.jsx)(z.K,{ref:c,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:f.TriangleDownIcon,size:"medium",variant:"primary",onClick:m})}),(0,a.jsx)(nV.W.Overlay,{width:"medium",children:(0,a.jsx)(eg.l,{selectionVariant:"single",children:Object.keys(iY).map(e=>{let t=iY[e];return(0,a.jsx)(eg.l.Item,{selected:r===t,onSelect:()=>l(t),inactiveText:t.inactiveReason,children:t.text},e)})})})]})]})})};try{iZ.displayName||(iZ.displayName="ApplyOrAddToBatch")}catch{}var i0=n(70263),i1=n(86877),i2=n(10576);let i3=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(5),{children:r,footerButtons:l}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t={bindKeys:e9.z0.ArrowHorizontal|e9.z0.Tab,focusInStrategy:"closest"},i[0]=t):t=i[0];let{containerRef:o}=(0,t0.G)(t);return i[1]!==r||i[2]!==l||i[3]!==o?(n=l?(0,a.jsx)(ex.l.Footer,{ref:o,children:(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)("div",{className:"d-flex flex-row gap-2 flex-justify-end",children:(0,a.jsx)(ex.l.Buttons,{buttons:l})}),r]})}):null,i[1]=r,i[2]=l,i[3]=o,i[4]=n):n=i[4],n}:function({children:e,footerButtons:t}){let{containerRef:n}=(0,t0.G)({bindKeys:e9.z0.ArrowHorizontal|e9.z0.Tab,focusInStrategy:"closest"});return t?(0,a.jsx)(ex.l.Footer,{ref:n,children:(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)("div",{className:"d-flex flex-row gap-2 flex-justify-end",children:(0,a.jsx)(ex.l.Buttons,{buttons:t})}),e]})}):null},i4="CHANGE_COMMIT_MESSAGE",i5="CHANGE_EXTENDED_DESCRIPTION",i6="There was an error trying to commit changes";function i7(e,t){switch(t.type){case i4:return{...e,commitMessage:t.payload};case i5:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function i8(e){return 1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review"}let i9=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,f,h,p,g,x,b,y=(0,s.c)(41),{authorLogins:j,batchSize:C,onClose:v,onCommit:N}=e,w=(0,i0.A)(),{sendAnalyticsEvent:L}=(0,id.s)(),[_,k]=(0,u.useState)(!1),[E,I]=(0,u.useState)();y[0]!==j?(t=i8(j),y[0]=j,y[1]=t):t=y[1],y[2]!==t?(n={commitMessage:t,extendedDescription:""},y[2]=t,y[3]=n):n=y[3];let[D,T]=(0,u.useReducer)(i7,n);y[4]!==w?(i=(e,t,n)=>{let i;w()&&(i=n?i6+`: ${n}`:i6+".",k(!1),I(i))},y[4]=w,y[5]=i):i=y[5];let A=i;y[6]!==E||y[7]!==w?(r=()=>{w()&&(k(!1),E&&I(void 0))},y[6]=E,y[7]=w,y[8]=r):r=y[8];let R=r;y[9]!==C||y[10]!==D.commitMessage||y[11]!==D.extendedDescription||y[12]!==R||y[13]!==A||y[14]!==_||y[15]!==N||y[16]!==L?(l=()=>{_||(k(!0),L("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:C}),N(`${D.commitMessage}

${D.extendedDescription}`,A,R))},y[9]=C,y[10]=D.commitMessage,y[11]=D.extendedDescription,y[12]=R,y[13]=A,y[14]=_,y[15]=N,y[16]=L,y[17]=l):l=y[17];let $=l;y[18]!==E||y[19]!==$||y[20]!==_||y[21]!==v?(o=()=>(0,a.jsx)(i3,{footerButtons:[{content:"Cancel",onClick:v},{content:(0,a.jsxs)("span",{className:"d-flex flex-row flex-items-center",children:["Commit changes",_&&(0,a.jsx)(tW.A,{size:"small",className:"ml-1"})]}),onClick:$,buttonType:"primary"}],children:E&&(0,a.jsx)(i1.A.Validation,{variant:"error",className:"mt-2 pt-1 flex-justify-end",children:E})}),y[18]=E,y[19]=$,y[20]=_,y[21]=v,y[22]=o):o=y[22];let O=o;return y[23]!==$?(c={"github:submit-form":$},y[23]=$,y[24]=c):c=y[24],y[25]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(i1.A.Label,{required:!0,children:"Commit message"}),y[25]=d):d=y[25],y[26]===Symbol.for("react.memo_cache_sentinel")?(m=e=>T({type:i4,payload:e.target.value}),y[26]=m):m=y[26],y[27]!==D.commitMessage?(f=(0,a.jsxs)(i1.A,{className:"mb-2",children:[d,(0,a.jsx)(eR.A,{block:!0,name:"commit_message",onChange:m,value:D.commitMessage})]}),y[27]=D.commitMessage,y[28]=f):f=y[28],y[29]===Symbol.for("react.memo_cache_sentinel")?(h=(0,a.jsx)(i1.A.Label,{children:"Extended description"}),y[29]=h):h=y[29],y[30]===Symbol.for("react.memo_cache_sentinel")?(p=e=>T({type:i5,payload:e.target.value}),y[30]=p):p=y[30],y[31]!==D.extendedDescription?(g=(0,a.jsxs)(i1.A,{children:[h,(0,a.jsx)(i2.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:p,value:D.extendedDescription})]}),y[31]=D.extendedDescription,y[32]=g):g=y[32],y[33]!==v||y[34]!==O||y[35]!==f||y[36]!==g?(x=(0,a.jsxs)(ex.l,{title:"Apply suggestion",renderFooter:O,onClose:v,children:[f,g]}),y[33]=v,y[34]=O,y[35]=f,y[36]=g,y[37]=x):x=y[37],y[38]!==x||y[39]!==c?(b=(0,a.jsx)(S.tL,{commands:c,children:x}),y[38]=x,y[39]=c,y[40]=b):b=y[40],b}:function({authorLogins:e,batchSize:t,onClose:n,onCommit:i}){let r=(0,i0.A)(),{sendAnalyticsEvent:l}=(0,id.s)(),[s,o]=(0,u.useState)(!1),[c,d]=(0,u.useState)(),[m,f]=(0,u.useReducer)(i7,{commitMessage:i8(e),extendedDescription:""}),h=(0,u.useCallback)((e,t,n)=>{if(!r())return;let i=i6;n?i+=`: ${n}`:i+=".",o(!1),d(i)},[r]),p=(0,u.useCallback)(()=>{r()&&(o(!1),c&&d(void 0))},[c,r]),g=(0,u.useCallback)(()=>{s||(o(!0),l("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),i(`${m.commitMessage}

${m.extendedDescription}`,h,p))},[t,m.commitMessage,m.extendedDescription,p,h,s,i,l]);return(0,a.jsx)(S.tL,{commands:{"github:submit-form":g},children:(0,a.jsxs)(ex.l,{title:"Apply suggestion",renderFooter:()=>(0,a.jsx)(i3,{footerButtons:[{content:"Cancel",onClick:n},{content:(0,a.jsxs)("span",{className:"d-flex flex-row flex-items-center",children:["Commit changes",s&&(0,a.jsx)(tW.A,{size:"small",className:"ml-1"})]}),onClick:g,buttonType:"primary"}],children:c&&(0,a.jsx)(i1.A.Validation,{variant:"error",className:"mt-2 pt-1 flex-justify-end",children:c})}),onClose:n,children:[(0,a.jsxs)(i1.A,{className:"mb-2",children:[(0,a.jsx)(i1.A.Label,{required:!0,children:"Commit message"}),(0,a.jsx)(eR.A,{block:!0,name:"commit_message",onChange:e=>f({type:i4,payload:e.target.value}),value:m.commitMessage})]}),(0,a.jsxs)(i1.A,{children:[(0,a.jsx)(i1.A.Label,{children:"Extended description"}),(0,a.jsx)(i2.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>f({type:i5,payload:e.target.value}),value:m.extendedDescription})]})]})})};try{i3.displayName||(i3.displayName="DialogFooter")}catch{}try{i9.displayName||(i9.displayName="ApplySuggestionDialog")}catch{}let re=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(5),{reason:r,className:l}=e,o=void 0===l?"m-2":l;return i[0]!==r?(t=(0,a.jsx)("small",{className:"fgColor-muted",children:r}),i[0]=r,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,a.jsx)("div",{className:o,children:t}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n}:function({reason:e,className:t="m-2"}){return(0,a.jsx)("div",{className:t,children:(0,a.jsx)("small",{className:"fgColor-muted",children:e})})};try{re.displayName||(re.displayName="CodeSuggestionUnavailable")}catch{}let rt=(0,l.kw)()?function(e){let t,n,i,r,l,o=(0,s.c)(14),{commentingImplementation:c,onOpenDialog:d,suggestedChange:m}=e,f=(0,u.useRef)(null);o[0]!==d?(t=()=>{d(f)},o[0]=d,o[1]=t):t=o[1];let h=t,p=c.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:g}=(0,id.s)();o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(V.A,{variant:"attention",className:"my-auto",children:"Pending in batch"}),o[2]=n):n=o[2],o[3]!==c||o[4]!==g||o[5]!==m?(i=(0,a.jsx)(U.Q,{size:"medium",variant:"danger",onClick:()=>{c.removeSuggestedChangeFromPendingBatch(m),g("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),o[3]=c,o[4]=g,o[5]=m,o[6]=i):i=o[6];let x=`Apply suggestion${p>1?"s":""}`;return o[7]!==p||o[8]!==h||o[9]!==x?(r=(0,a.jsx)(U.Q,{ref:f,size:"medium",count:p,variant:"primary",onClick:h,children:x}),o[7]=p,o[8]=h,o[9]=x,o[10]=r):r=o[10],o[11]!==i||o[12]!==r?(l=(0,a.jsxs)("div",{className:"d-flex flex-row flex-justify-between",children:[n,(0,a.jsxs)("div",{className:"d-flex gap-2",children:[i,r]})]}),o[11]=i,o[12]=r,o[13]=l):l=o[13],l}:function({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let i=(0,u.useRef)(null),r=(0,u.useCallback)(()=>{t(i)},[t]),l=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:s}=(0,id.s)();return(0,a.jsxs)("div",{className:"d-flex flex-row flex-justify-between",children:[(0,a.jsx)(V.A,{variant:"attention",className:"my-auto",children:"Pending in batch"}),(0,a.jsxs)("div",{className:"d-flex gap-2",children:[(0,a.jsx)(U.Q,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(n),s("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,a.jsx)(U.Q,{ref:i,size:"medium",count:l,variant:"primary",onClick:r,children:`Apply suggestion${l>1?"s":""}`})]})]})};try{rt.displayName||(rt.displayName="CommitOrRemoveFromBatch")}catch{}let rn=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,f,h,p,g,x=(0,s.c)(52),{commentingImplementation:b,suggestedChange:y}=e,{setIsDialogOpen:j}=nK(),[C,v]=(0,u.useState)(!1),N=(0,u.useRef)(void 0),{pendingSuggestedChangesBatch:w,submitSuggestedChanges:S}=b;x[0]!==w||x[1]!==y?(t=iC(y,w),x[0]=w,x[1]=y,x[2]=t):t=x[2];let L=t,_=0===w.length;x[3]!==w||x[4]!==y?(n=iw(y,w),x[3]=w,x[4]=y,x[5]=n):n=x[5];let{isValid:k,reason:E}=n;x[6]!==L||x[7]!==w||x[8]!==y?(i=L?w:[y],x[6]=L,x[7]=w,x[8]=y,x[9]=i):i=x[9];let I=i;x[10]!==j?(r=e=>{v(e),j?.(e)},x[10]=j,x[11]=r):r=x[11];let D=r;x[12]!==D?(l=()=>{if(D(!1),N.current){let e=N.current.current;setTimeout(()=>e?.focus())}},x[12]=D,x[13]=l):l=x[13];let T=l;x[14]!==D?(o=e=>{D(!0),N.current=e},x[14]=D,x[15]=o):o=x[15];let A=o;x[16]!==I||x[17]!==T||x[18]!==S?(c=(e,t,n)=>{S({suggestedChanges:I,commitMessage:e,onCompleted:()=>{T(),n()},onError:t})},x[16]=I,x[17]=T,x[18]=S,x[19]=c):c=x[19];let R=c;return x[20]!==b||x[21]!==L||x[22]!==A||x[23]!==y?(d=L&&(0,a.jsx)(rt,{commentingImplementation:b,suggestedChange:y,onOpenDialog:A}),x[20]=b,x[21]=L,x[22]=A,x[23]=y,x[24]=d):d=x[24],x[25]!==L||x[26]!==k||x[27]!==E?(m=!L&&!k&&E&&(0,a.jsx)(re,{reason:E,className:"m-0"}),x[25]=L,x[26]=k,x[27]=E,x[28]=m):m=x[28],x[29]!==_||x[30]!==b||x[31]!==L||x[32]!==A||x[33]!==y?(f=!L&&_&&(0,a.jsx)(iZ,{commentingImplementation:b,suggestedChange:y,onOpenDialog:A}),x[29]=_,x[30]=b,x[31]=L,x[32]=A,x[33]=y,x[34]=f):f=x[34],x[35]!==_||x[36]!==b||x[37]!==L||x[38]!==k||x[39]!==y?(h=!L&&k&&!_&&(0,a.jsx)(iQ,{commentingImplementation:b,suggestedChange:y}),x[35]=_,x[36]=b,x[37]=L,x[38]=k,x[39]=y,x[40]=h):h=x[40],x[41]!==I||x[42]!==T||x[43]!==R||x[44]!==C?(p=C&&(0,a.jsx)(i9,{authorLogins:I.map(ri),batchSize:I.length,onClose:T,onCommit:R}),x[41]=I,x[42]=T,x[43]=R,x[44]=C,x[45]=p):p=x[45],x[46]!==f||x[47]!==h||x[48]!==p||x[49]!==d||x[50]!==m?(g=(0,a.jsxs)("div",{className:"border-top p-2",children:[d,m,f,h,p]}),x[46]=f,x[47]=h,x[48]=p,x[49]=d,x[50]=m,x[51]=g):g=x[51],g}:function({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:n}=nK(),[i,r]=(0,u.useState)(!1),l=(0,u.useRef)(void 0),{pendingSuggestedChangesBatch:s,submitSuggestedChanges:o}=e,c=iC(t,s),d=0===s.length,{isValid:m,reason:f}=iw(t,s),h=(0,u.useMemo)(()=>c?s:[t],[c,s,t]),p=(0,u.useCallback)(e=>{r(e),n?.(e)},[n]),g=(0,u.useCallback)(()=>{if(p(!1),l.current){let e=l.current.current;setTimeout(()=>e?.focus())}},[p]),x=(0,u.useCallback)(e=>{p(!0),l.current=e},[p,l]),b=(0,u.useCallback)((e,t,n)=>{o({suggestedChanges:h,commitMessage:e,onCompleted:()=>{g(),n()},onError:t})},[g,o,h]);return(0,a.jsxs)("div",{className:"border-top p-2",children:[c&&(0,a.jsx)(rt,{commentingImplementation:e,suggestedChange:t,onOpenDialog:x}),!c&&!m&&f&&(0,a.jsx)(re,{reason:f,className:"m-0"}),!c&&d&&(0,a.jsx)(iZ,{commentingImplementation:e,suggestedChange:t,onOpenDialog:x}),!c&&m&&!d&&(0,a.jsx)(iQ,{commentingImplementation:e,suggestedChange:t}),i&&(0,a.jsx)(i9,{authorLogins:h.map(e=>e.authorLogin),batchSize:h.length,onClose:g,onCommit:b})]})};function ri(e){return e.authorLogin}try{rn.displayName||(rn.displayName="CodeSuggestionActions")}catch{}let rr=(0,l.kw)()?function(e,t,n,i,r){let a,l,o=(0,s.c)(17),[c,d]=(0,u.useState)();o[0]!==r.lineRange||o[1]!==t.author?.login||o[2]!==t.id||o[3]!==t.subjectType||o[4]!==e||o[5]!==n||o[6]!==i?(a=()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let a=[...e.current.getElementsByClassName("js-apply-changes")];if(a.length>0){let e=[];for(let l of a){let a=l?.closest("div.js-suggested-changes-blob");if(!a)continue;let s=[...a.querySelectorAll(".js-blob-code-addition")];r.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:l,suggestion:s.map(ra),lineRange:r.lineRange,threadId:i})}d(e)}},o[0]=r.lineRange,o[1]=t.author?.login,o[2]=t.id,o[3]=t.subjectType,o[4]=e,o[5]=n,o[6]=i,o[7]=a):a=o[7];let m=t.author?.login;return o[8]!==r.lineRange||o[9]!==t.bodyHTML||o[10]!==t.id||o[11]!==t.subjectType||o[12]!==e||o[13]!==n||o[14]!==m||o[15]!==i?(l=[r.lineRange,m,t.bodyHTML,t.id,t.subjectType,e,n,i],o[8]=r.lineRange,o[9]=t.bodyHTML,o[10]=t.id,o[11]=t.subjectType,o[12]=e,o[13]=n,o[14]=m,o[15]=i,o[16]=l):l=o[16],(0,u.useLayoutEffect)(a,l),c}:function(e,t,n,i,r){let[a,l]=(0,u.useState)();return(0,u.useLayoutEffect)(()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let a=[...e.current.getElementsByClassName("js-apply-changes")];if(a.length>0){let e=[];for(let l of a){let a=l?.closest("div.js-suggested-changes-blob");if(!a)continue;let s=[...a.querySelectorAll(".js-blob-code-addition")];r.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:l,suggestion:s.map(e=>e.textContent),lineRange:r.lineRange,threadId:i})}l(e)}},[r.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,n,i]),a};function ra(e){return e.textContent}let rl=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(15),{applySuggestedChangesValidationData:l,comment:o,commentBodyRef:c,commentingImplementation:d,filePath:m,isOutdated:u,isThreadResolved:f,subject:h,suggestedChangesConfig:p,databaseId:g,viewerData:x}=e,b=rr(c,o,m,g,l);r[0]!==h?.state?(t=h?.state?.toUpperCase(),r[0]=h?.state,r[1]=t):t=r[1];let y=t;return r[2]!==l||r[3]!==o||r[4]!==d||r[5]!==u||r[6]!==f||r[7]!==y||r[8]!==h?.isInMergeQueue||r[9]!==b||r[10]!==p||r[11]!==x?.viewerCanApplySuggestion?(n=b?.length?b.map(e=>{let{isValid:t,reason:n}=iN({suggestedChange:e,isOutdated:u,isPending:"PENDING"===o.state.toUpperCase(),isResolved:f,pullRequestIsClosed:void 0===y||"CLOSED"===y||"MERGED"===y,pullRequestIsInMergeQueue:!!h?.isInMergeQueue,userCanApplySuggestion:!!x?.viewerCanApplySuggestion,applySuggestedChangesValidationData:l,suggestedChangesConfig:p});return!t&&n?(0,iX.createPortal)((0,a.jsx)(re,{reason:n}),e.ref):(0,iX.createPortal)((0,a.jsx)(rn,{commentingImplementation:d,suggestedChange:e}),e.ref)}):null,r[2]=l,r[3]=o,r[4]=d,r[5]=u,r[6]=f,r[7]=y,r[8]=h?.isInMergeQueue,r[9]=b,r[10]=p,r[11]=x?.viewerCanApplySuggestion,r[12]=n):n=r[12],r[13]!==n?(i=(0,a.jsx)(a.Fragment,{children:n}),r[13]=n,r[14]=i):i=r[14],i}:function({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,commentingImplementation:i,filePath:r,isOutdated:l,isThreadResolved:s,subject:o,suggestedChangesConfig:c,databaseId:d,viewerData:m}){let u=rr(n,t,r,d,e),f=o?.state?.toUpperCase();return(0,a.jsx)(a.Fragment,{children:u?.length?u.map(n=>{let{isValid:r,reason:d}=iN({suggestedChange:n,isOutdated:l,isPending:"PENDING"===t.state.toUpperCase(),isResolved:s,pullRequestIsClosed:void 0===f||"CLOSED"===f||"MERGED"===f,pullRequestIsInMergeQueue:!!o?.isInMergeQueue,userCanApplySuggestion:!!m?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:c});return!r&&d?(0,iX.createPortal)((0,a.jsx)(re,{reason:d}),n.ref):(0,iX.createPortal)((0,a.jsx)(rn,{commentingImplementation:i,suggestedChange:n}),n.ref)}):null})};try{rl.displayName||(rl.displayName="SuggestedChangeView")}catch{}function rs({isAnchorable:e=!1,index:t=0,isInlineComment:n,isLastChild:i,isOutdated:r,isThreadResolved:l,anchorPrefix:s="r",comment:o,commentingImplementation:c,filePath:d,hideActions:m,isFirstComment:h=!1,enterDialogMode:p=ek.l,onRefreshThread:g,onQuoteReply:x=ek.l,subjectId:b,subject:y,threadCommentCount:j,threadId:C,threadPositionNumber:v,threadsConnectionId:N,suggestedChangesConfig:S,applySuggestedChangesValidationData:L,viewerData:_,ghostUser:k=iH.t.ghostUser,skipReactions:D=!1,originalDiffPathUri:T}){let{addToast:A}=(0,iK.Y6)(),[R,$]=(0,u.useState)(!1),[O,P]=(0,u.useState)(o.isHidden),[M,B]=(0,u.useState)(o.body),[U,H]=(0,u.useState)(!1),[z,V]=(0,u.useState)(""),{persistCommentToStorage:G,removePersistedCommentFromStorage:W}=iA({subjectId:b,filePath:d,fileLevelComment:"FILE"===o.subjectType,threadId:o.id,handlePersistedCommentExists:({text:e})=>{e&&B(e)}}),{blockUserFromOrg:K,unblockUserFromOrg:q,editComment:X,deleteComment:Q,hideComment:J,unhideComment:Y,reactToComment:Z,lazyFetchReactionGroups:ee}=c,et=!!K,en=!!q,ei=(0,u.useRef)(null),er=(0,u.useRef)(null),[ea,el]=(0,u.useState)(""),{isInDialogMode:es}=nA(),eo=()=>{ei.current?.focus()};(0,u.useEffect)(()=>{if(R){let e=window.setTimeout(eo);return()=>{window.clearTimeout(e)}}},[R]);let ec=(0,iq.S)(),{enableInlineCommentDialogMode:ed,disableInlineCommentDialogMode:em}=nA(),eu=async()=>{em();let e=!1;try{e=await ec({title:"Delete comment?",content:"Are you sure you want to delete this comment?",confirmButtonContent:"Delete",confirmButtonType:"danger"})}finally{ed()}e&&Q({commentId:o.id,onCompleted:()=>{g?.(C)},onError:()=>{H(!1),A({type:"error",message:"Failed to delete comment"})},threadCommentCount:j,threadId:C,threadsConnectionId:N,filePath:d})},ef=(0,u.useCallback)((e,t,n,i,r,a)=>{K&&K({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:r,userLogin:a,onCompleted:()=>{t&&P(!0),g?.(C)},onError:()=>{el("Failed to block user")}})},[K,g,C]),eh=(0,u.useCallback)((e,t)=>{q&&q({organizationLogin:e,userLogin:t,onCompleted:()=>{g?.(C)},onError:()=>{el("Failed to unblock user")}})},[g,C,q]),ep=(0,u.useCallback)(()=>{H(!0);let e=iR(M,S?.sourceContentFromDiffLines??"");if(!e.isValid){V(e.errorMessage),H(!1);return}X({text:M,comment:o,onCompleted:()=>{$(!1),H(!1),W(),g?.(C)},onError:()=>{H(!1),A({type:"error",message:"Failed to update comment"})}})},[A,M,o,X,g,W,S,C]),eg=o.databaseId?.toString(),ex=eg?`${s}${eg}`:void 0,eb=ex&&w.fV?new URL(`${w.fV.pathname}#${ex}`,w.fV.origin).toString():"",ey=(0,u.useRef)(null);(0,u.useEffect)(()=>{e&&eg&&ex&&window.location.hash.split("#").pop()===ex&&(ij(eg,s),p?.(!1),ey.current?.focus())},[s,ex,eg,p,e]);let ej={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eC=t>0,ev=t>1,eN=c.suggestedChangesEnabled,ew=R?"editing":O?"hidden":"visible",eS={headingProps:{as:"h3"},avatarUrl:o.author?.avatarUrl??k.avatarUrl,comment:{...o,url:eb,referenceText:o.reference.text??`#${o.reference.number}`},commentRef:ey,deleteComment:eu,editComment:()=>{$(!0)},editHistoryComponent:void 0,hideComment:e=>{J({commentDatabaseId:o.databaseId,reason:e,onCompleted:()=>{P(!0),g?.(C)},onError:()=>{H(!1),el("Failed to hide comment")}})},onBlock:et?ef:void 0,onUnblock:en?eh:void 0,onMinimize:P,onSuccessfulBlock:()=>{setTimeout(()=>w.cg?.location.reload(),800)},isMinimized:O,commentAuthorLogin:o.author?.login??k.login,navigate:ek.l,commentSubjectAuthorLogin:o.reference?.author?.login??"",commentSubjectType:c.commentSubjectType,onReplySelect:x,unhideComment:()=>{Y({commentDatabaseId:o.databaseId,onCompleted:()=>{P(!1),g?.(C)},onError:()=>{H(!1),el("Failed to unhide comment")}})},hideActions:m,isReply:eC,forceInlineAvatar:!0,containerStyle:{},originalDiffPathUri:T,isOutdated:r,commentAuthorSlug:"copilot"===o.reviewVariantType?"copilot-pull-request-reviewer":void 0,commentAuthorType:"copilot"===o.reviewVariantType?iB.S.Bot:void 0};return(0,a.jsxs)(iu.az,{ref:ey,id:e?ex:void 0,tabIndex:n?es?0:-1:0,"data-first-thread-comment":h,"data-marker-navigation-comment-thread-id":C,"data-marker-navigation-comment-id":o.id,...es?{role:"document","aria-roledescription":"comment","aria-label":eC?void 0!==v?`Reply ${t} to Comment ${v}`:`Reply ${t}`:void 0!==v?`Comment ${v}`:"Comment"}:{},sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":ej,":focus":ej,scrollMarginTop:e?"120px":0},children:[ev&&(0,a.jsx)(iu.az,{sx:{display:"flex",pl:+!!eC},children:(0,a.jsx)(iu.az,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,a.jsx)(iu.az,{sx:{px:3,pt:2*!ev,pb:0},children:(0,a.jsx)(iB.v,{...eS,commentBody:o.body,threadCommentCount:j,isInDialogMode:es,actions:m?void 0:(0,a.jsx)(iU.p,{...eS}),isOutdated:r})}),ea&&(0,a.jsxs)(I.A,{variant:"danger",className:"m-3",children:[(0,a.jsx)(f.StopIcon,{className:"mr-2"}),ea]}),(0,a.jsxs)(iu.az,{sx:{display:"flex",pl:+!!eC},children:[eC&&(0,a.jsx)(iu.az,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...i&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===ew&&(0,a.jsx)("div",{className:(0,E.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",eC?"pl-0":"pl-2"),children:(0,a.jsxs)(iM,{ref:ei,label:"Update comment",value:M,onChange:e=>{G({text:e}),B(e),V(void 0)},onPrimaryAction:ep,subject:c.commentBoxSubject,suggestedChangesConfig:S,markdownErrorMessage:z,children:[(0,a.jsx)(iP.xR,{variant:"default",onClick:()=>{$(!1),W(),B(o.body)},children:"Cancel"}),(0,a.jsx)(iP.xR,{disabled:U||!M.length,variant:"primary",onClick:ep,children:"Update"})]})}),"visible"===ew&&(0,a.jsx)(iu.az,{sx:eC?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:o.bodyHTML&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.vb,{ref:er,className:"markdown-body","comment-testid":`Comment body html for comment ${o.id}`,html:o.bodyHTML,sx:{mt:1,fontSize:1}}),"copilot"===o.reviewVariantType&&(0,a.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,a.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,a.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===o.reviewVariantType&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(iz.Z,{commentUrl:o.url,commentId:o.databaseId?.toString()??""})}),o.reactionGroups&&Z?(0,a.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,a.jsx)(iV.P,{reactionGroups:o.reactionGroups,onReact:(e,t)=>{Z?.({commentDatabaseId:o.databaseId,threadId:C,reaction:e,viewerHasReacted:t,onCompleted:()=>{g?.(C)},onError:()=>{H(!1),A({type:"error",message:"Failed to react to comment"})}})},canReact:o.viewerCanReact})}):!D&&(0,a.jsx)(iu.az,{sx:{display:"flex",flexDirection:"column",mt:3},children:ee?(0,a.jsx)(u.Suspense,{fallback:(0,a.jsx)(iG.e,{}),children:(0,a.jsx)(iW.ReactionViewerRelayQueryComponent,{id:o.id,subjectLocked:!o.viewerCanReact})}):(0,a.jsx)(iW.ReactionViewerRelay,{reactionGroups:o,subjectId:o.id,canReact:o.viewerCanReact})})]}),eN&&L&&(0,a.jsx)(rl,{comment:o,commentBodyRef:er,commentingImplementation:c,filePath:d,isOutdated:r,isThreadResolved:l,databaseId:o.databaseId,suggestedChangesConfig:S,applySuggestedChangesValidationData:L,subject:y,viewerData:_})]})})]})]})}try{rs.displayName||(rs.displayName="ReviewThreadComment")}catch{}let ro="StaticUnifiedDiffPreview-module__StaticDiffPreview--R_cuY",rc="StaticUnifiedDiffPreview-module__HeaderContainer--l3mJd",rd=(0,l.kw)()?function(e){let t,n,i,r,l,o=(0,s.c)(20),{subject:c,tabSize:d,hideHeaderDetails:m,className:u,diffTableClassName:f}=e;if(!c?.diffLines||c?.diffLines.length<1)return null;o[0]!==c.diffLines?(t=(0,e6.c7)(c.diffLines),o[0]=c.diffLines,o[1]=t):t=o[1];let h=t;return o[2]!==u?(n=(0,E.$)(ro,u),o[2]=u,o[3]=n):n=o[3],o[4]!==m||o[5]!==c.endDiffSide||o[6]!==c.originalEndLine||o[7]!==c.originalStartLine||o[8]!==c.pullRequestCommit?.commit||o[9]!==c.startDiffSide?(i=!m&&(0,a.jsx)("div",{className:rc,children:(0,a.jsxs)("span",{className:"text-small fgColor-muted",children:["Line"," ",(0,j.Ah)({originalStartLine:c.originalStartLine,originalEndLine:c.originalEndLine,startDiffSide:c.startDiffSide,endDiffSide:c.endDiffSide}),", commit ",(0,a.jsx)("code",{children:c.pullRequestCommit?.commit.abbreviatedOid})]})}),o[4]=m,o[5]=c.endDiffSide,o[6]=c.originalEndLine,o[7]=c.originalStartLine,o[8]=c.pullRequestCommit?.commit,o[9]=c.startDiffSide,o[10]=i):i=o[10],o[11]!==f||o[12]!==h||o[13]!==c.diffLines||o[14]!==d?(r=(0,a.jsx)(j.l4,{lineWidth:h,lines:c.diffLines,tabSize:d,className:f}),o[11]=f,o[12]=h,o[13]=c.diffLines,o[14]=d,o[15]=r):r=o[15],o[16]!==n||o[17]!==i||o[18]!==r?(l=(0,a.jsxs)("div",{className:n,children:[i,r]}),o[16]=n,o[17]=i,o[18]=r,o[19]=l):l=o[19],l}:function({subject:e,tabSize:t,hideHeaderDetails:n,className:i,diffTableClassName:r}){if(!e?.diffLines||e?.diffLines.length<1)return null;let l=(0,e6.c7)(e.diffLines);return(0,a.jsxs)("div",{className:(0,E.$)(ro,i),children:[!n&&(0,a.jsx)("div",{className:rc,children:(0,a.jsxs)("span",{className:"text-small fgColor-muted",children:["Line"," ",(0,j.Ah)({originalStartLine:e.originalStartLine,originalEndLine:e.originalEndLine,startDiffSide:e.startDiffSide,endDiffSide:e.endDiffSide}),", commit ",(0,a.jsx)("code",{children:e.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,a.jsx)(j.l4,{lineWidth:l,lines:e.diffLines,tabSize:t,className:r})]})};try{rd.displayName||(rd.displayName="StaticUnifiedDiffPreview")}catch{}let rm=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,f,h,p=(0,s.c)(89),{batchingEnabled:g,batchPending:x,commentAnchorPrefix:b,commentingImplementation:y,commentsConnectionId:j,filePath:C,hideDiffPreview:v,isInlineComment:N,onRefreshThread:S,enterDialogMode:L,repositoryId:_,subject:k,subjectId:E,tabSize:I,thread:D,threadPositionNumber:T,threadsConnectionId:A,shouldLimitHeight:R,suggestedChangesConfig:$,viewerData:O,ghostUser:P}=e,M=void 0===R||R,[F,B]=(0,u.useState)(!1),[U,H]=(0,u.useState)(void 0),{sendAnalyticsEvent:z}=(0,id.s)(),{addThreadReply:V}=y,G=(0,u.useRef)(null);p[0]!==V||p[1]!==j||p[2]!==C||p[3]!==S||p[4]!==z||p[5]!==D||p[6]!==A?(t=e=>{let{commentText:t,onCompleted:n,onError:i,submitBatch:r}=e,a=[];D.commentsData.__id&&a.push(D.commentsData.__id),j&&a.push(j),V({commentsConnectionIds:a,filePath:C,thread:D,text:t,submitBatch:r,onCompleted:e=>{e&&ij(e.toString()),n?.(),S?.(D.id)},onError:i,threadsConnectionId:A}),z("comments.add","ADD_COMMENT_BUTTON")},p[0]=V,p[1]=j,p[2]=C,p[3]=S,p[4]=z,p[5]=D,p[6]=A,p[7]=t):t=p[7];let W=t;p[8]!==z?(n=()=>{B(!1),z("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),w.cg?.requestAnimationFrame(()=>G.current?.focus())},p[8]=z,p[9]=n):n=p[9];let K=n;p[10]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{H(e),B(!0)},p[10]=i):i=p[10];let q=i;if(null===D.commentsData.comments||D.commentsData.comments.length<1)return null;p[11]!==D?(r=iS(D),p[11]=D,p[12]=r):r=p[12];let X=r;p[13]!==X||p[14]!==D.subjectType?(l="LINE"===D.subjectType?{lineRange:X}:void 0,p[13]=X,p[14]=D.subjectType,p[15]=l):l=p[15];let Q=l;if(p[16]!==M?(o=M?{maxHeight:"40vh",overflowY:"auto"}:{},p[16]=M,p[17]=o):o=p[17],p[18]!==v||p[19]!==I||p[20]!==D.isOutdated||p[21]!==D.subject?(c=!v&&D.isOutdated&&(0,a.jsx)(rd,{subject:D.subject,tabSize:I??4}),p[18]=v,p[19]=I,p[20]=D.isOutdated,p[21]=D.subject,p[22]=c):c=p[22],p[23]!==Q||p[24]!==b||p[25]!==y||p[26]!==L||p[27]!==C||p[28]!==P||p[29]!==N||p[30]!==S||p[31]!==_||p[32]!==k||p[33]!==E||p[34]!==$||p[35]!==D.commentsData.__id||p[36]!==D.commentsData.comments||p[37]!==D.id||p[38]!==D.isOutdated||p[39]!==D.isResolved||p[40]!==T||p[41]!==A||p[42]!==O){let e;p[44]!==Q||p[45]!==b||p[46]!==y||p[47]!==L||p[48]!==C||p[49]!==P||p[50]!==N||p[51]!==S||p[52]!==_||p[53]!==k||p[54]!==E||p[55]!==$||p[56]!==D.commentsData.__id||p[57]!==D.commentsData.comments.length||p[58]!==D.id||p[59]!==D.isOutdated||p[60]!==D.isResolved||p[61]!==T||p[62]!==A||p[63]!==O?(e=(e,t)=>(0,a.jsx)(rs,{enterDialogMode:L,isAnchorable:!0,index:t,threadPositionNumber:T,isFirstComment:0===t,isInlineComment:N,isLastChild:t===D.commentsData.comments.length-1,anchorPrefix:b,comment:e,commentConnectionId:D.commentsData.__id,commentingImplementation:y,filePath:C,isOutdated:D.isOutdated,repositoryId:_,subject:k,subjectId:E,threadId:D.id,onRefreshThread:S,onQuoteReply:q,threadCommentCount:D.commentsData.comments.length,threadsConnectionId:A,isThreadResolved:!!D.isResolved,suggestedChangesConfig:$,applySuggestedChangesValidationData:Q,viewerData:O,ghostUser:P},e.id),p[44]=Q,p[45]=b,p[46]=y,p[47]=L,p[48]=C,p[49]=P,p[50]=N,p[51]=S,p[52]=_,p[53]=k,p[54]=E,p[55]=$,p[56]=D.commentsData.__id,p[57]=D.commentsData.comments.length,p[58]=D.id,p[59]=D.isOutdated,p[60]=D.isResolved,p[61]=T,p[62]=A,p[63]=O,p[64]=e):e=p[64],d=D.commentsData.comments.map(e),p[23]=Q,p[24]=b,p[25]=y,p[26]=L,p[27]=C,p[28]=P,p[29]=N,p[30]=S,p[31]=_,p[32]=k,p[33]=E,p[34]=$,p[35]=D.commentsData.__id,p[36]=D.commentsData.comments,p[37]=D.id,p[38]=D.isOutdated,p[39]=D.isResolved,p[40]=T,p[41]=A,p[42]=O,p[43]=d}else d=p[43];return p[65]!==D.reviewCommentsLimit||p[66]!==D.reviewCommentsLimitExceeded?(m=D.reviewCommentsLimitExceeded&&(0,a.jsx)(eK.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(D.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),p[65]=D.reviewCommentsLimit,p[66]=D.reviewCommentsLimitExceeded,p[67]=m):m=p[67],p[68]!==W||p[69]!==x||p[70]!==g||p[71]!==K||p[72]!==y.commentBoxSubject||p[73]!==C||p[74]!==F||p[75]!==U||p[76]!==_||p[77]!==z||p[78]!==E||p[79]!==$||p[80]!==D.id||p[81]!==D.viewerCanReply?(f=D.viewerCanReply&&(0,a.jsxs)("div",{className:"rounded-bottom-2 p-2",children:[F&&(0,a.jsx)(iF,{batchingEnabled:g,batchPending:x,commentBoxSubject:y.commentBoxSubject,condensed:!1,fileLevelComment:!0,filePath:C,focusOnMount:!0,isReplying:!0,onCancelComment:K,repositoryId:_,quotedText:U,subjectId:E,threadId:D.id,onAddComment:W,suggestedChangesConfig:$}),!F&&(0,a.jsx)(iy.z,{ref:G,onClick:()=>{z("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),B(!0)},children:"Write a reply"})]}),p[68]=W,p[69]=x,p[70]=g,p[71]=K,p[72]=y.commentBoxSubject,p[73]=C,p[74]=F,p[75]=U,p[76]=_,p[77]=z,p[78]=E,p[79]=$,p[80]=D.id,p[81]=D.viewerCanReply,p[82]=f):f=p[82],p[83]!==m||p[84]!==f||p[85]!==o||p[86]!==c||p[87]!==d?(h=(0,a.jsx)("div",{"data-testid":"review-thread",children:(0,a.jsxs)(iu.az,{sx:o,children:[c,d,m,f]})}),p[83]=m,p[84]=f,p[85]=o,p[86]=c,p[87]=d,p[88]=h):h=p[88],h}:function({batchingEnabled:e,batchPending:t,commentAnchorPrefix:n,commentingImplementation:i,commentsConnectionId:r,filePath:l,hideDiffPreview:s,isInlineComment:o,onRefreshThread:c,enterDialogMode:d,repositoryId:m,subject:f,subjectId:h,tabSize:p,thread:g,threadPositionNumber:x,threadsConnectionId:b,shouldLimitHeight:y=!0,suggestedChangesConfig:j,viewerData:C,ghostUser:v}){let[N,S]=(0,u.useState)(!1),[L,_]=(0,u.useState)(void 0),{sendAnalyticsEvent:k}=(0,id.s)(),{addThreadReply:E}=i,I=(0,u.useRef)(null),D=e=>{_(e),S(!0)};if(null===g.commentsData.comments||g.commentsData.comments.length<1)return null;let T=iS(g),A="LINE"===g.subjectType?{lineRange:T}:void 0;return(0,a.jsx)("div",{"data-testid":"review-thread",children:(0,a.jsxs)(iu.az,{sx:y?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!s&&g.isOutdated&&(0,a.jsx)(rd,{subject:g.subject,tabSize:p??4}),g.commentsData.comments.map((e,t)=>(0,a.jsx)(rs,{enterDialogMode:d,isAnchorable:!0,index:t,threadPositionNumber:x,isFirstComment:0===t,isInlineComment:o,isLastChild:t===g.commentsData.comments.length-1,anchorPrefix:n,comment:e,commentConnectionId:g.commentsData.__id,commentingImplementation:i,filePath:l,isOutdated:g.isOutdated,repositoryId:m,subject:f,subjectId:h,threadId:g.id,onRefreshThread:c,onQuoteReply:D,threadCommentCount:g.commentsData.comments.length,threadsConnectionId:b,isThreadResolved:!!g.isResolved,suggestedChangesConfig:j,applySuggestedChangesValidationData:A,viewerData:C,ghostUser:v},e.id)),g.reviewCommentsLimitExceeded&&(0,a.jsx)(eK.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(g.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),g.viewerCanReply&&(0,a.jsxs)("div",{className:"rounded-bottom-2 p-2",children:[N&&(0,a.jsx)(iF,{batchingEnabled:e,batchPending:t,commentBoxSubject:i.commentBoxSubject,condensed:!1,fileLevelComment:!0,filePath:l,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{S(!1),k("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),w.cg?.requestAnimationFrame(()=>I.current?.focus())},repositoryId:m,quotedText:L,subjectId:h,threadId:g.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let a=[];g.commentsData.__id&&a.push(g.commentsData.__id),r&&a.push(r),E({commentsConnectionIds:a,filePath:l,thread:g,text:e,submitBatch:i,onCompleted:e=>{e&&ij(e.toString()),t?.(),c?.(g.id)},onError:n,threadsConnectionId:b}),k("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:j}),!N&&(0,a.jsx)(iy.z,{ref:I,onClick:()=>{k("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),S(!0)},children:"Write a reply"})]})]})})};try{rm.displayName||(rm.displayName="ReviewThread")}catch{}let ru=(0,l.kw)()?function(e){let t,n=(0,s.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("span",{className:"text-semibold fgColor-default",children:i}),n[0]=i,n[1]=t):t=n[1],t}:function({children:e}){return(0,a.jsx)("span",{className:"text-semibold fgColor-default",children:e})};function rf({thread:e}){return void 0!==e&&e?.diffSide&&e.line?e.startLine&&e.startDiffSide?rp({thread:e}):rh({thread:e}):null}let rh=(0,l.kw)()?function(e){let t,n=(0,s.c)(3),{thread:i}=e,r="LEFT"===i.diffSide?"L":"R";return n[0]!==r||n[1]!==i.line?(t=(0,a.jsxs)("h2",{className:ip,children:["Comment on line"," ",(0,a.jsxs)(ru,{children:[r,i.line]})]}),n[0]=r,n[1]=i.line,n[2]=t):t=n[2],t}:function({thread:e}){let t="LEFT"===e.diffSide?"L":"R";return(0,a.jsxs)("h2",{className:ip,children:["Comment on line"," ",(0,a.jsxs)(ru,{children:[t,e.line]})]})},rp=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(9),{thread:l}=e,o="LEFT"===l.startDiffSide?"L":"R",c="LEFT"===l.diffSide?"L":"R";return r[0]!==o||r[1]!==l.startLine?(t=(0,a.jsxs)(ru,{children:[o,l.startLine]}),r[0]=o,r[1]=l.startLine,r[2]=t):t=r[2],r[3]!==c||r[4]!==l.line?(n=(0,a.jsxs)(ru,{children:[c,l.line]}),r[3]=c,r[4]=l.line,r[5]=n):n=r[5],r[6]!==t||r[7]!==n?(i=(0,a.jsxs)("h2",{className:ip,children:["Comment on lines"," ",t," ","to"," ",n]}),r[6]=t,r[7]=n,r[8]=i):i=r[8],i}:function({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,a.jsxs)("h2",{className:ip,children:["Comment on lines"," ",(0,a.jsxs)(ru,{children:[t,e.startLine]})," ","to"," ",(0,a.jsxs)(ru,{children:[n,e.line]})]})},rg=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,m,h,p,g,x,b,y,j,C,v,N,w,S,L,_,k,D,T,A,R,$,O,P,M,F,B,U,H,z,G,W,K,q,X,Q,J,Y=(0,s.c)(129);if(Y[0]!==e){let{commentingImplementation:a,fileAnchor:s,filePath:d,threadId:u,threadPositionNumber:f,isOutdated:y,threads:j,threadsConnectionId:C,isFirstThread:v,enterDialogMode:N,ghostUser:w,manuallyUpdateCommentsWithThisThreadId:S,suggestedChangesConfig:L,..._}=e;t=a,i=s,r=d,p=u,g=f,x=j,b=C,o=v,n=N,l=w,c=S,h=L,m=_,Y[0]=e,Y[1]=t,Y[2]=n,Y[3]=i,Y[4]=r,Y[5]=l,Y[6]=o,Y[7]=c,Y[8]=m,Y[9]=h,Y[10]=p,Y[11]=g,Y[12]=x,Y[13]=b}else t=Y[1],n=Y[2],i=Y[3],r=Y[4],l=Y[5],o=Y[6],c=Y[7],m=Y[8],h=Y[9],p=Y[10],g=Y[11],x=Y[12],b=Y[13];let[Z,ee]=(0,u.useState)(void 0),{fetchThread:et,shouldRefetchThread:en}=t,ei=(0,u.useRef)(null);Y[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,ic.A)("localStorage"),Y[14]=y):y=Y[14];let er=y,ea=Z?.isResolved,[el,es]=(0,u.useState)(""),[eo,ec]=(0,u.useState)(ea??!1);Y[15]!==ea||Y[16]!==p?(j=()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${p}`);null!==e?ec(JSON.parse(e)):ea&&ec(!0)},C=[ea,p],Y[15]=ea,Y[16]=p,Y[17]=j,Y[18]=C):(j=Y[17],C=Y[18]),(0,u.useEffect)(j,C),Y[19]!==eo||Y[20]!==p?(v=()=>{window.requestAnimationFrame(()=>{er.setItem(`reviewThreadIsCollapsed_${p}`,JSON.stringify(!eo))}),ec(rb)},Y[19]=eo,Y[20]=p,Y[21]=v):v=Y[21];let ed=v;Y[22]!==et?(N=async(e,t)=>{ee(await et(e,void 0===t||t))},Y[22]=et,Y[23]=N):N=Y[23];let em=N;Y[24]!==em||Y[25]!==p?(w=()=>{em(p,!1)},Y[24]=em,Y[25]=p,Y[26]=w):w=Y[26],Y[27]!==em||Y[28]!==c||Y[29]!==p?(S=[em,c,p],Y[27]=em,Y[28]=c,Y[29]=p,Y[30]=S):S=Y[30],(0,u.useEffect)(w,S),Y[31]!==t.commentSubjectType||Y[32]!==Z?(L={commentSubjectType:t.commentSubjectType,markerRef:ei,isThread:!0,thread:Z},Y[31]=t.commentSubjectType,Y[32]=Z,Y[33]=L):L=Y[33],nZ(L),Y[34]!==em||Y[35]!==Z||Y[36]!==p?(_=()=>{Z||em(p,!1)},Y[34]=em,Y[35]=Z,Y[36]=p,Y[37]=_):_=Y[37],Y[38]!==et||Y[39]!==em||Y[40]!==Z||Y[41]!==p?(k=[p,Z,et,em],Y[38]=et,Y[39]=em,Y[40]=Z,Y[41]=p,Y[42]=k):k=Y[42],(0,u.useEffect)(_,k);e:{if(i&&Z&&Z.subject?.startDiffSide&&Z.subject?.endDiffSide&&Z.subject?.startLine&&Z.subject?.endLine&&h?.configureSuggestedChangesFromLineRange){let e,t=Z.subject?.startLine??Z?.subject?.endLine,n=Z.subject?.startDiffSide??Z?.subject?.endDiffSide,r=Z?.subject?.endLine,a=Z.subject?.endDiffSide==="LEFT"?"left":"right",l="LEFT"===n?"left":"right",s="LEFT"===n?"left":"right";if(Y[43]!==i||Y[44]!==t||Y[45]!==h||Y[46]!==r||Y[47]!==a||Y[48]!==l||Y[49]!==s){let n={diffAnchor:i,endLineNumber:r,endOrientation:a,startLineNumber:t,firstSelectedLineNumber:t,firstSelectedOrientation:l,startOrientation:s};e=h?.configureSuggestedChangesFromLineRange(n),Y[43]=i,Y[44]=t,Y[45]=h,Y[46]=r,Y[47]=a,Y[48]=l,Y[49]=s,Y[50]=e}else e=Y[50];D=e;break e}D=void 0}let eu=D;Y[51]!==em||Y[52]!==en||Y[53]!==Z||Y[54]!==p?(T=()=>{Z&&en?.(Z)&&em(p,!0)},Y[51]=em,Y[52]=en,Y[53]=Z,Y[54]=p,Y[55]=T):T=Y[55],Y[56]!==em||Y[57]!==en||Y[58]!==Z||Y[59]!==p||Y[60]!==x?(A=[em,en,Z,p,x],Y[56]=em,Y[57]=en,Y[58]=Z,Y[59]=p,Y[60]=x,Y[61]=A):A=Y[61],(0,u.useEffect)(T,A);let{sendAnalyticsEvent:ef}=(0,id.s)(),{resolveThread:eh,unresolveThread:ep,resolvingEnabled:eg}=t;if(Y[62]!==p||Y[63]!==x){let e;Y[65]!==p?(e=e=>e.id===p,Y[65]=p,Y[66]=e):e=Y[66],R=x.find(e),Y[62]=p,Y[63]=x,Y[64]=R}else R=Y[64];let ex=R;Y[67]!==em||Y[68]!==eh||Y[69]!==ef||Y[70]!==en||Y[71]!==Z||Y[72]!==p?($=()=>{Z&&(eh({threadId:Z.id,onCompleted:()=>{en||em(Z.id),ec(!0),er.removeItem(`reviewThreadIsCollapsed_${p}`)},onError:()=>{es("Failed to resolve thread")}}),ef("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))},Y[67]=em,Y[68]=eh,Y[69]=ef,Y[70]=en,Y[71]=Z,Y[72]=p,Y[73]=$):$=Y[73];let eb=$;Y[74]!==em||Y[75]!==ef||Y[76]!==en||Y[77]!==Z||Y[78]!==p||Y[79]!==ep?(O=()=>{Z&&(ep({threadId:Z.id,onCompleted:()=>{en||em(Z.id),ec(!1),er.removeItem(`reviewThreadIsCollapsed_${p}`)},onError:()=>{es("Failed to unresolve thread")}}),ef("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))},Y[74]=em,Y[75]=ef,Y[76]=en,Y[77]=Z,Y[78]=p,Y[79]=ep,Y[80]=O):O=Y[80];let ey=O;if(!Z||!(Z.commentsData.comments.length>0))return null;let ej=!!Z.isResolved,eC=ex?.commentsConnectionId;Y[81]!==eg||Y[82]!==Z.commentsData.comments?(P=eg&&Z.commentsData.comments.some(rx),Y[81]=eg,Y[82]=Z.commentsData.comments,Y[83]=P):P=Y[83];let ev=P;Y[84]===Symbol.for("react.memo_cache_sentinel")?(M=(0,a.jsx)(ih,{}),Y[84]=M):M=Y[84],Y[85]===Symbol.for("react.memo_cache_sentinel")?(F=(0,E.$)("px-1",ig),Y[85]=F):F=Y[85];let eN=eo?"Expand comment":"Collapse comment",ew=eo?f.ChevronRightIcon:f.ChevronDownIcon;return Y[86]!==ed||Y[87]!==o||Y[88]!==eN||Y[89]!==ew?(B=(0,a.jsx)(iu.K0,{"aria-label":eN,icon:ew,size:"small",variant:"invisible",onClick:ed,"data-is-first-collapse-button":o}),Y[86]=ed,Y[87]=o,Y[88]=eN,Y[89]=ew,Y[90]=B):B=Y[90],Y[91]!==ex?(U=(0,a.jsx)(rf,{thread:ex}),Y[91]=ex,Y[92]=U):U=Y[92],Y[93]!==ej?(H=ej&&(0,a.jsx)(V.A,{variant:"secondary",children:"Resolved"}),Y[93]=ej,Y[94]=H):H=Y[94],Y[95]!==eb||Y[96]!==ey||Y[97]!==ev||Y[98]!==ej?(z=ev&&(0,a.jsx)(im.m,{text:ej?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,a.jsx)(iu.K0,{"aria-labelledby":"resolve-conversation",icon:ej?f.CheckCircleFillIcon:f.CheckCircleIcon,sx:{color:ej?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:ej?ey:eb})}),Y[95]=eb,Y[96]=ey,Y[97]=ev,Y[98]=ej,Y[99]=z):z=Y[99],Y[100]!==H||Y[101]!==z?(G=(0,a.jsxs)("div",{className:ix,children:[H,z]}),Y[100]=H,Y[101]=z,Y[102]=G):G=Y[102],Y[103]!==B||Y[104]!==U||Y[105]!==G?(W=(0,a.jsxs)("div",{className:F,children:[B,U,G]}),Y[103]=B,Y[104]=U,Y[105]=G,Y[106]=W):W=Y[106],Y[107]===Symbol.for("react.memo_cache_sentinel")?(K=(0,a.jsxs)("div",{className:ib,children:[(0,a.jsx)(tW.A,{}),(0,a.jsx)("p",{children:"Loading comments"})]}),Y[107]=K):K=Y[107],Y[108]!==el?(q=el&&(0,a.jsxs)(I.A,{variant:"danger",className:"m-2",children:[(0,a.jsx)(f.StopIcon,{className:"mr-2"}),el]}),Y[108]=el,Y[109]=q):q=Y[109],Y[110]!==t||Y[111]!==eC||Y[112]!==eu||Y[113]!==n||Y[114]!==em||Y[115]!==r||Y[116]!==l||Y[117]!==eo||Y[118]!==m||Y[119]!==Z||Y[120]!==g||Y[121]!==b?(X=!eo&&(0,a.jsx)(rm,{enterDialogMode:n,commentingImplementation:t,commentsConnectionId:eC,filePath:r,isInlineComment:!0,onRefreshThread:em,thread:Z,threadPositionNumber:g,threadsConnectionId:b,suggestedChangesConfig:eu,shouldLimitHeight:!1,...m,ghostUser:l}),Y[110]=t,Y[111]=eC,Y[112]=eu,Y[113]=n,Y[114]=em,Y[115]=r,Y[116]=l,Y[117]=eo,Y[118]=m,Y[119]=Z,Y[120]=g,Y[121]=b,Y[122]=X):X=Y[122],Y[123]!==q||Y[124]!==X?(Q=(0,a.jsxs)(u.Suspense,{fallback:K,children:[q,X]}),Y[123]=q,Y[124]=X,Y[125]=Q):Q=Y[125],Y[126]!==W||Y[127]!==Q?(J=(0,a.jsx)(d.t,{fallback:M,children:(0,a.jsxs)("div",{className:"rounded-2 bgColor-default",ref:ei,children:[W,Q]})}),Y[126]=W,Y[127]=Q,Y[128]=J):J=Y[128],J}:function({commentingImplementation:e,fileAnchor:t,filePath:n,threadId:i,threadPositionNumber:r,isOutdated:l,threads:s,threadsConnectionId:o,isFirstThread:c,enterDialogMode:m,ghostUser:h,manuallyUpdateCommentsWithThisThreadId:p,suggestedChangesConfig:g,...x}){let[b,y]=(0,u.useState)(void 0),{fetchThread:j,shouldRefetchThread:C}=e,v=(0,u.useRef)(null),N=(0,ic.A)("localStorage"),w=b?.isResolved,[S,L]=(0,u.useState)(""),[_,k]=(0,u.useState)(w??!1);(0,u.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${i}`);null!==e?k(JSON.parse(e)):w&&k(!0)},[w,i]);let D=(0,u.useCallback)(async(e,t=!0)=>{y(await j(e,t))},[j]);(0,u.useEffect)(()=>{D(i,!1)},[D,p,i]),nZ({commentSubjectType:e.commentSubjectType,markerRef:v,isThread:!0,thread:b}),(0,u.useEffect)(()=>{b||D(i,!1)},[i,b,j,D]);let T=(0,u.useMemo)(()=>{if(t&&b&&b.subject?.startDiffSide&&b.subject?.endDiffSide&&b.subject?.startLine&&b.subject?.endLine&&g?.configureSuggestedChangesFromLineRange){let e=b.subject?.startLine??b?.subject?.endLine,n=b.subject?.startDiffSide??b?.subject?.endDiffSide,i={diffAnchor:t,endLineNumber:b?.subject?.endLine,endOrientation:b.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===n?"left":"right",startOrientation:"LEFT"===n?"left":"right"};return g?.configureSuggestedChangesFromLineRange(i)}},[t,b,g]);(0,u.useEffect)(()=>{b&&C?.(b)&&D(i,!0)},[D,C,b,i,s]);let{sendAnalyticsEvent:A}=(0,id.s)(),{resolveThread:R,unresolveThread:$,resolvingEnabled:O}=e,P=s.find(e=>e.id===i);if(!b||!(b.commentsData.comments.length>0))return null;let M=!!b.isResolved,F=P?.commentsConnectionId,B=O&&b.commentsData.comments.some(e=>e.state?.toUpperCase()!=="PENDING");return(0,a.jsx)(d.t,{fallback:(0,a.jsx)(ih,{}),children:(0,a.jsxs)("div",{className:"rounded-2 bgColor-default",ref:v,children:[(0,a.jsxs)("div",{className:(0,E.$)("px-1",ig),children:[(0,a.jsx)(iu.K0,{"aria-label":_?"Expand comment":"Collapse comment",icon:_?f.ChevronRightIcon:f.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{N.setItem(`reviewThreadIsCollapsed_${i}`,JSON.stringify(!_))}),k(e=>!e)},"data-is-first-collapse-button":c}),(0,a.jsx)(rf,{thread:P}),(0,a.jsxs)("div",{className:ix,children:[M&&(0,a.jsx)(V.A,{variant:"secondary",children:"Resolved"}),B&&(0,a.jsx)(im.m,{text:M?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,a.jsx)(iu.K0,{"aria-labelledby":"resolve-conversation",icon:M?f.CheckCircleFillIcon:f.CheckCircleIcon,sx:{color:M?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:M?()=>{b&&($({threadId:b.id,onCompleted:()=>{C||D(b.id),k(!1),N.removeItem(`reviewThreadIsCollapsed_${i}`)},onError:()=>{L("Failed to unresolve thread")}}),A("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{b&&(R({threadId:b.id,onCompleted:()=>{C||D(b.id),k(!0),N.removeItem(`reviewThreadIsCollapsed_${i}`)},onError:()=>{L("Failed to resolve thread")}}),A("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))}})})]})]}),(0,a.jsxs)(u.Suspense,{fallback:(0,a.jsxs)("div",{className:ib,children:[(0,a.jsx)(tW.A,{}),(0,a.jsx)("p",{children:"Loading comments"})]}),children:[S&&(0,a.jsxs)(I.A,{variant:"danger",className:"m-2",children:[(0,a.jsx)(f.StopIcon,{className:"mr-2"}),S]}),!_&&(0,a.jsx)(rm,{enterDialogMode:m,commentingImplementation:e,commentsConnectionId:F,filePath:n,isInlineComment:!0,onRefreshThread:D,thread:b,threadPositionNumber:r,threadsConnectionId:o,suggestedChangesConfig:T,shouldLimitHeight:!1,...x,ghostUser:h})]})]})})};function rx(e){return e.state?.toUpperCase()!=="PENDING"}function rb(e){return!e}try{ru.displayName||(ru.displayName="Emphasis")}catch{}try{rf.displayName||(rf.displayName="ThreadBanner")}catch{}try{rh.displayName||(rh.displayName="SingleLineThreadBanner")}catch{}try{rp.displayName||(rp.displayName="MultineLineThreadBanner")}catch{}try{rg.displayName||(rg.displayName="InlineReviewThread")}catch{}let ry={[td]:0,[tu]:1,[tm]:2},rj=(0,l.kw)()?function(e){let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,a.jsx)(nW,{children:(0,a.jsx)(rC,{...e})}),n[0]=e,n[1]=t):t=n[1],t}:function(e){return(0,a.jsx)(nW,{children:(0,a.jsx)(rC,{...e})})},rC=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,h,p,g,x,b,y,j,C,v,N,w,S,L,_,k,I,D,T,A,R,$,O,P,M,F,B=(0,s.c)(92);if(B[0]!==e){let{annotations:a,children:s,commentingImplementation:u,conversationListThreads:f,inlineMarkersRef:w,isMarkerListOpen:S,isRowSelected:L,fileAnchor:_,filePath:k,gutterSizeOffset:E,lineType:I,onAnnotationSelected:D,onCloseConversationList:T,onCloseFocusMode:A,onThreadSelected:R,returnFocusRef:$,selectedAnnotationId:O,selectedThreadId:P,threadsConnectionId:M,suggestedChangesConfig:F,manuallyUpdateCommentsWithThisThreadId:U,ghostUser:H,enterDialogMode:z,...V}=e;t=a,n=s,i=u,r=f,h=w,p=L,o=_,c=k,m=E,g=I,b=A,y=R,C=P,N=M,v=F,x=U,d=H,l=z,j=V,B[0]=e,B[1]=t,B[2]=n,B[3]=i,B[4]=r,B[5]=l,B[6]=o,B[7]=c,B[8]=d,B[9]=m,B[10]=h,B[11]=p,B[12]=g,B[13]=x,B[14]=b,B[15]=y,B[16]=j,B[17]=C,B[18]=v,B[19]=N}else t=B[1],n=B[2],i=B[3],r=B[4],l=B[5],o=B[6],c=B[7],d=B[8],m=B[9],h=B[10],p=B[11],g=B[12],x=B[13],b=B[14],y=B[15],j=B[16],C=B[17],v=B[18],N=B[19];B[20]===Symbol.for("react.memo_cache_sentinel")?(w={},B[20]=w):w=B[20];let[,U]=(0,u.useState)(w);B[21]!==i||B[22]!==r?(S=async e=>{let t=await i.fetchThread(e,!1);t&&r.push(t),U({})},B[21]=i,B[22]=r,B[23]=S):S=B[23];let H=S;B[24]!==r.length||B[25]!==H||B[26]!==x?(L=()=>{0===r.length&&x&&""!==x&&H(x)},B[24]=r.length,B[25]=H,B[26]=x,B[27]=L):L=B[27],B[28]!==i||B[29]!==r.length||B[30]!==H||B[31]!==x?(_=[i,r.length,H,x],B[28]=i,B[29]=r.length,B[30]=H,B[31]=x,B[32]=_):_=B[32],(0,u.useEffect)(L,_);let{isInDialogMode:V,enableInlineCommentDialogMode:G}=nA(),W=(0,u.useRef)(null);B[33]!==t?(k=[...t].sort(rv),B[33]=t,B[34]=k):k=B[34];let K=k;e:{let e;if(n){let e,t;B[35]===Symbol.for("react.memo_cache_sentinel")?(e={id:"new-comment"},B[35]=e):e=B[35],B[36]!==r||B[37]!==K?(t=[...r,e,...K],B[36]=r,B[37]=K,B[38]=t):t=B[38],I=t;break e}B[39]!==r||B[40]!==K?(e=[...r,...K],B[39]=r,B[40]=K,B[41]=e):e=B[41],I=e}let q=I,X=!V;B[42]!==q||B[43]!==C||B[44]!==X?(D={containerRef:W,markers:q,disabled:X,selectedMarkerId:C},B[42]=q,B[43]=C,B[44]=X,B[45]=D):D=B[45],nX(D);let Q=V?io:"";if(B[46]!==Q?(T=(0,E.$)("d-flex pt-1",Q),B[46]=Q,B[47]=T):T=B[47],B[48]!==m||B[49]!==V||B[50]!==p||B[51]!==g?(A=V?{marginRight:`-${m}`,backgroundColor:tI(g,!0,p)}:{marginRight:`-${m}`},B[48]=m,B[49]=V,B[50]=p,B[51]=g,B[52]=A):A=B[52],B[53]!==G||B[54]!==V?(R=()=>{V||G()},B[53]=G,B[54]=V,B[55]=R):R=B[55],B[56]!==i||B[57]!==r||B[58]!==l||B[59]!==o||B[60]!==c||B[61]!==d||B[62]!==V||B[63]!==x||B[64]!==q||B[65]!==y||B[66]!==j||B[67]!==v||B[68]!==N?($=r.map((e,t)=>(0,a.jsx)("div",{className:(0,E.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===q.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:V?0:-1,children:(0,a.jsx)(rg,{threadPositionNumber:t+1,manuallyUpdateCommentsWithThisThreadId:x,enterDialogMode:l,isFirstThread:0===t,commentingImplementation:i,filePath:c,fileAnchor:o,threadId:e.id,isOutdated:e.isOutdated,threads:r,threadsConnectionId:N,onThreadSelected:y,suggestedChangesConfig:v,ghostUser:d,...j})},`review-thread-${e.id}`)),B[56]=i,B[57]=r,B[58]=l,B[59]=o,B[60]=c,B[61]=d,B[62]=V,B[63]=x,B[64]=q,B[65]=y,B[66]=j,B[67]=v,B[68]=N,B[69]=$):$=B[69],B[70]!==i||B[71]!==q||B[72]!==K){let e;B[74]!==i||B[75]!==q?(e=(e,t)=>{let n=0===t&&e===q[0];return(0,a.jsx)(ia,{annotation:e,commentingImplementation:i,isFirstMarker:n},`annotation-${e.id}`)},B[74]=i,B[75]=q,B[76]=e):e=B[76],O=K.map(e),B[70]=i,B[71]=q,B[72]=K,B[73]=O}else O=B[73];return B[77]!==n||B[78]!==$||B[79]!==O?(P=(0,a.jsxs)("div",{className:is,ref:W,children:[$,n,O]}),B[77]=n,B[78]=$,B[79]=O,B[80]=P):P=B[80],B[81]!==r.length||B[82]!==V||B[83]!==b?(M=V&&(0,a.jsx)(z.K,{icon:f.UndoIcon,className:(0,E.$)(il,"ml-2 position-relative",0===r.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:b,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&b()}}),B[81]=r.length,B[82]=V,B[83]=b,B[84]=M):M=B[84],B[85]!==h||B[86]!==T||B[87]!==A||B[88]!==R||B[89]!==P||B[90]!==M?(F=(0,a.jsxs)("div",{className:T,style:A,onFocus:R,"data-inline-markers":!0,ref:h,children:[P,M]}),B[85]=h,B[86]=T,B[87]=A,B[88]=R,B[89]=P,B[90]=M,B[91]=F):F=B[91],F}:function({annotations:e,children:t,commentingImplementation:n,conversationListThreads:i,inlineMarkersRef:r,isMarkerListOpen:l,isRowSelected:s,fileAnchor:o,filePath:c,gutterSizeOffset:d,lineType:m,onAnnotationSelected:h,onCloseConversationList:p,onCloseFocusMode:g,onThreadSelected:x,returnFocusRef:b,selectedAnnotationId:y,selectedThreadId:j,threadsConnectionId:C,suggestedChangesConfig:v,manuallyUpdateCommentsWithThisThreadId:N,ghostUser:w,enterDialogMode:S,...L}){let[_,k]=(0,u.useState)({}),I=(0,u.useCallback)(async e=>{let t=await n.fetchThread(e,!1);t&&i.push(t),k({})},[n,i]);(0,u.useEffect)(()=>{0===i.length&&N&&""!==N&&I(N)},[n,i.length,I,N]);let{isInDialogMode:D,enableInlineCommentDialogMode:T}=nA(),A=(0,u.useRef)(null),R=(0,u.useMemo)(()=>[...e].sort((e,t)=>ry[e.annotationLevel]-ry[t.annotationLevel]),[e]),$=(0,u.useMemo)(()=>t?[...i,{id:"new-comment"},...R]:[...i,...R],[t,i,R]);return nX({containerRef:A,markers:$,disabled:!D,selectedMarkerId:j}),(0,a.jsxs)("div",{className:(0,E.$)("d-flex pt-1",D?io:""),style:D?{marginRight:`-${d}`,backgroundColor:tI(m,!0,s)}:{marginRight:`-${d}`},onFocus:()=>{D||T()},"data-inline-markers":!0,ref:r,children:[(0,a.jsxs)("div",{className:is,ref:A,children:[i.map((e,t)=>(0,a.jsx)("div",{className:(0,E.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===$.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:D?0:-1,children:(0,a.jsx)(rg,{threadPositionNumber:t+1,manuallyUpdateCommentsWithThisThreadId:N,enterDialogMode:S,isFirstThread:0===t,commentingImplementation:n,filePath:c,fileAnchor:o,threadId:e.id,isOutdated:e.isOutdated,threads:i,threadsConnectionId:C,onThreadSelected:x,suggestedChangesConfig:v,ghostUser:w,...L})},`review-thread-${e.id}`)),t,R.map((e,t)=>{let i=0===t&&e===$[0];return(0,a.jsx)(ia,{annotation:e,commentingImplementation:n,isFirstMarker:i},`annotation-${e.id}`)})]}),D&&(0,a.jsx)(z.K,{icon:f.UndoIcon,className:(0,E.$)(il,"ml-2 position-relative",0===i.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:g,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&g()}})]})};function rv(e,t){return ry[e.annotationLevel]-ry[t.annotationLevel]}try{rj.displayName||(rj.displayName="InlineMarkers")}catch{}try{rC.displayName||(rC.displayName="InlineMarkersInternal")}catch{}var rN=n(31604),rw=n(81960);let rS=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,u,h,p,g,x,b,y,j,C,v=(0,s.c)(39);v[0]!==e?({addCommentDialogTitle:t,isLeftSide:i,filePath:n,lineNumber:r,onAddComment:l,onClose:o,viewerData:u,threadsConnectionId:m,showOnCloseIcon:d,...c}=e,v[0]=e,v[1]=t,v[2]=n,v[3]=i,v[4]=r,v[5]=l,v[6]=o,v[7]=c,v[8]=d,v[9]=m,v[10]=u):(t=v[1],n=v[2],i=v[3],r=v[4],l=v[5],o=v[6],c=v[7],d=v[8],m=v[9],u=v[10]);let N=void 0===d||d;v[11]!==n||v[12]!==l||v[13]!==m?(h=e=>{let{commentText:t,onCompleted:i,onError:r,submitBatch:a}=e;l({text:t,onError:r,onCompleted:(e,t)=>{t&&ij(t.toString()),i?.(e,t)},submitBatch:a,filePath:n,threadsConnectionId:m})},v[11]=n,v[12]=l,v[13]=m,v[14]=h):h=v[14];let w=h,S=u.avatarUrl||"";v[15]!==S||v[16]!==u.login?(p=(0,a.jsx)(n0.r,{alt:u.login,size:24,src:S,className:"mr-2"}),v[15]=S,v[16]=u.login,v[17]=p):p=v[17];let L=t??"Add a comment";v[18]!==L?(g=(0,a.jsx)("span",{children:L}),v[18]=L,v[19]=g):g=v[19],v[20]!==p||v[21]!==g?(x=(0,a.jsxs)(rw.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2",children:[p,g]}),v[20]=p,v[21]=g,v[22]=x):x=v[22],v[23]!==o||v[24]!==N?(b=o&&N&&(0,a.jsx)(z.K,{variant:"invisible",icon:f.XIcon,onClick:o,"aria-label":"Cancel"}),v[23]=o,v[24]=N,v[25]=b):b=v[25],v[26]!==x||v[27]!==b?(y=(0,a.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[x,b]}),v[26]=x,v[27]=b,v[28]=y):y=v[28];let _=i?"LEFT":"RIGHT";return v[29]!==n||v[30]!==w||v[31]!==r||v[32]!==o||v[33]!==c||v[34]!==_?(j=(0,a.jsx)(iF,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:n,lineNumber:r,onAddComment:w,onCancelComment:o,side:_,...c}),v[29]=n,v[30]=w,v[31]=r,v[32]=o,v[33]=c,v[34]=_,v[35]=j):j=v[35],v[36]!==j||v[37]!==y?(C=(0,a.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[y,j]}),v[36]=j,v[37]=y,v[38]=C):C=v[38],C}:function({addCommentDialogTitle:e,isLeftSide:t,filePath:n,lineNumber:i,onAddComment:r,onClose:l,viewerData:s,threadsConnectionId:o,showOnCloseIcon:c=!0,...d}){return(0,a.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[(0,a.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[(0,a.jsxs)(rw.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2",children:[(0,a.jsx)(n0.r,{alt:s.login,size:24,src:s.avatarUrl||"",className:"mr-2"}),(0,a.jsx)("span",{children:e??"Add a comment"})]}),l&&c&&(0,a.jsx)(z.K,{variant:"invisible",icon:f.XIcon,onClick:l,"aria-label":"Cancel"})]}),(0,a.jsx)(iF,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:n,lineNumber:i,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:a})=>{r({text:e,onError:i,onCompleted:(e,n)=>{n&&ij(n.toString()),t?.(e,n)},submitBatch:a,filePath:n,threadsConnectionId:o})},onCancelComment:l,side:t?"LEFT":"RIGHT",...d})]})};try{rS.displayName||(rS.displayName="StartThreadComment")}catch{}let rL=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,u,f=(0,s.c)(22);f[0]!==e?({align:c,anchorRef:t,isOpen:n,isDialog:d,returnFocusRef:l,onCloseCommentDialog:i,suggestedChangesConfig:o,...r}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=i,f[4]=r,f[5]=l,f[6]=o,f[7]=c,f[8]=d):(t=f[1],n=f[2],i=f[3],r=f[4],l=f[5],o=f[6],c=f[7],d=f[8]);let h=void 0===c?"end":c,p=void 0===d||d,{sendAnalyticsEvent:g}=(0,id.s)(),{isInDialogMode:x}=nA();e:{if(n&&o?.configureSuggestedChangesFromLineRange){let e;f[9]!==o?(e=o.configureSuggestedChangesFromLineRange(o?.selectedDiffRowRange,o?.shouldStartNewConversationWithSuggestedChange),f[9]=o,f[10]=e):e=f[10],m=e;break e}m=void 0}let b=m;return n?(f[11]!==h||f[12]!==t||f[13]!==b||f[14]!==p||f[15]!==x||f[16]!==n||f[17]!==i||f[18]!==r||f[19]!==l||f[20]!==g?(u=p?(0,a.jsx)(rN.T,{align:h,anchorRef:t,focusZoneSettings:{disabled:!0},open:n,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",preventOverflow:!1,returnFocusRef:l,style:{borderRadius:"8px"},"aria-label":"Add a comment",onClickOutside:ek.l,onKeyDown:r_},onClose:i,children:(0,a.jsx)(rS,{onClose:()=>{i(),g("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:b,...r})}):(0,a.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-id":"new-comment",tabIndex:x?0:-1,children:(0,a.jsx)(rS,{onClose:()=>{i(),g("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:b,...r})}),f[11]=h,f[12]=t,f[13]=b,f[14]=p,f[15]=x,f[16]=n,f[17]=i,f[18]=r,f[19]=l,f[20]=g,f[21]=u):u=f[21],u):null}:function({align:e="end",anchorRef:t,isOpen:n,isDialog:i=!0,returnFocusRef:r,onCloseCommentDialog:l,suggestedChangesConfig:s,...o}){let{sendAnalyticsEvent:c}=(0,id.s)(),{isInDialogMode:d}=nA(),m=(0,u.useMemo)(()=>{if(n&&s?.configureSuggestedChangesFromLineRange)return s.configureSuggestedChangesFromLineRange(s?.selectedDiffRowRange,s?.shouldStartNewConversationWithSuggestedChange)},[n,s]);return n?i?(0,a.jsx)(rN.T,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:n,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",preventOverflow:!1,returnFocusRef:r,style:{borderRadius:"8px"},"aria-label":"Add a comment",onClickOutside:ek.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:l,children:(0,a.jsx)(rS,{onClose:()=>{l(),c("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:m,...o})}):(0,a.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-id":"new-comment",tabIndex:d?0:-1,children:(0,a.jsx)(rS,{onClose:()=>{l(),c("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:m,...o})}):null};function r_(e){"Escape"!==e.key&&e.stopPropagation()}try{rL.displayName||(rL.displayName="StartConversation")}catch{}let rk=new Set,rE=!1,rI=e=>{for(let t of rk){let{element:n,shouldIgnore:i,onPointerExit:r}=t;if(!n.isConnected){rk.delete(t);continue}if(e?.(n)){t.pendingExit=!1;continue}t.pendingExit=!0,i?.()||(t.pendingExit=!1,r())}0===rk.size&&rA()},rD=e=>{let t=e.target instanceof Node?e.target:null;rI(e=>!!(t&&e.contains(t)))},rT=()=>{rI()},rA=()=>{rE&&w.XC&&!(rk.size>0)&&(w.XC.removeEventListener("pointermove",rD),w.XC.removeEventListener("scroll",rT,!0),rE=!1)},rR=(0,l.kw)()?function(e){let t,n,i,r,a,l,o,c,d,m,f,h,p,g,x=(0,s.c)(64),{cellId:b,actionBarRef:y,onOpenInLineThread:j}=e,{replaceSelectedDiffRowRange:C}=tA(),{fileAnchor:v}=tY(),[N,w]=(0,u.useState)(y),{annotations:S,openDialog:L,closeDialog:_,selectedAnnotationId:k,selectAnnotationId:E,selectedThreadId:I,selectThreadId:D,openContextMenuCell:T,openNewConversationCell:A,openMarkerDetailsCell:R,threads:$,anyMenuOpen:O}=nB(),{sendAnalyticsEvent:P}=(0,id.s)(),M=A?.cellId===b,F=A?.withSuggestedChange;x[0]!==b||x[1]!==j||x[2]!==L?(t=e=>{j?.(),L("new-conversation",b,e)},x[0]=b,x[1]=j,x[2]=L,x[3]=t):t=x[3];let B=t;x[4]!==B?(n=()=>{B()},x[4]=B,x[5]=n):n=x[5];let U=n;x[6]!==B||x[7]!==P?(i=()=>{B({withSuggestedChange:!0}),P("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},x[6]=B,x[7]=P,x[8]=i):i=x[8];let H=i;x[9]!==_?(r=()=>{_("new-conversation")},x[9]=_,x[10]=r):r=x[10];let z=r,V=T===b;x[11]!==b||x[12]!==L?(a=()=>{L("context-menu",b)},x[11]=b,x[12]=L,x[13]=a):a=x[13];let G=a;x[14]!==y||x[15]!==G?(l=()=>{w(y),G()},x[14]=y,x[15]=G,x[16]=l):l=x[16];let W=l;x[17]!==_?(o=()=>{_("context-menu")},x[17]=_,x[18]=o):o=x[18];let K=o;x[19]!==K||x[20]!==V||x[21]!==G?(c=()=>{V?K():G()},x[19]=K,x[20]=V,x[21]=G,x[22]=c):c=x[22];let q=c;x[23]!==y||x[24]!==q?(d=()=>{w(y),q()},x[23]=y,x[24]=q,x[25]=d):d=x[25];let X=d,Q=R===b?I:void 0,J=R===b?k:void 0;x[26]!==j?(m=()=>{j?.()},x[26]=j,x[27]=m):m=x[27];let Y=m;x[28]!==v||x[29]!==Y||x[30]!==C||x[31]!==D||x[32]!==$?(f=(e,t)=>{if(D(e),Y(),(void 0===t?{skipLineSelection:!1}:t).skipLineSelection)return;let n=$.find(t=>t.id===e);if(n&&n.diffSide&&n.line){let e=n.startLine??n.line,t=n.startDiffSide??n.diffSide;C({diffAnchor:v,endLineNumber:n.line,endOrientation:"LEFT"===n.diffSide?"left":"right",startLineNumber:e,startOrientation:"LEFT"===t?"left":"right",firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right"})}},x[28]=v,x[29]=Y,x[30]=C,x[31]=D,x[32]=$,x[33]=f):f=x[33];let Z=(0,ts.K)(f);x[34]!==S||x[35]!==v||x[36]!==Y||x[37]!==C||x[38]!==E?(h=(e,t)=>{if(E(e),Y(),(void 0===t?{skipLineSelection:!1}:t).skipLineSelection)return;let n=S.find(t=>t.id===e);n&&C({diffAnchor:v,endLineNumber:n.endLine,endOrientation:"right",startLineNumber:n.startLine,startOrientation:"right",firstSelectedLineNumber:n.startLine,firstSelectedOrientation:"right"})},x[34]=S,x[35]=v,x[36]=Y,x[37]=C,x[38]=E,x[39]=h):h=x[39];let ee=(0,ts.K)(h);x[40]!==_?(p=()=>{_("marker-list")},x[40]=_,x[41]=p):p=x[41];let et=p;return x[42]!==S||x[43]!==O||x[44]!==K||x[45]!==et||x[46]!==z||x[47]!==V||x[48]!==M||x[49]!==G||x[50]!==W||x[51]!==Y||x[52]!==J||x[53]!==Q||x[54]!==N||x[55]!==ee||x[56]!==Z||x[57]!==F||x[58]!==U||x[59]!==H||x[60]!==$||x[61]!==q||x[62]!==X?(g={isNewConversationDialogOpen:M,startNewConversation:U,closeNewConversation:z,startNewConversationWithSuggestedChange:H,shouldStartNewConversationWithSuggestedChange:F,isContextMenuOpen:V,openContextMenu:G,openContextMenuFromActionBar:W,closeContextMenu:K,toggleContextMenu:q,toggleContextMenuFromActionBar:X,optimizedSelectedThreadId:Q,optimizedSelectedAnnotationId:J,selectThread:Z,selectAnnotation:ee,openMarkersDialog:Y,closeMarkerListDialog:et,annotations:S,returnFocusRef:N,threads:$,anyMenuOpen:O},x[42]=S,x[43]=O,x[44]=K,x[45]=et,x[46]=z,x[47]=V,x[48]=M,x[49]=G,x[50]=W,x[51]=Y,x[52]=J,x[53]=Q,x[54]=N,x[55]=ee,x[56]=Z,x[57]=F,x[58]=U,x[59]=H,x[60]=$,x[61]=q,x[62]=X,x[63]=g):g=x[63],g}:function({cellId:e,actionBarRef:t,onOpenInLineThread:n}){let{replaceSelectedDiffRowRange:i}=tA(),{fileAnchor:r}=tY(),[a,l]=(0,u.useState)(t),{annotations:s,openDialog:o,closeDialog:c,selectedAnnotationId:d,selectAnnotationId:m,selectedThreadId:f,selectThreadId:h,openContextMenuCell:p,openNewConversationCell:g,openMarkerDetailsCell:x,threads:b,anyMenuOpen:y}=nB(),{sendAnalyticsEvent:j}=(0,id.s)(),C=(0,u.useMemo)(()=>g?.cellId===e,[e,g]),v=(0,u.useMemo)(()=>g?.withSuggestedChange,[g]),N=(0,u.useCallback)(t=>{n?.(),o("new-conversation",e,t)},[e,n,o]),w=(0,u.useCallback)(()=>{N()},[N]),S=(0,u.useCallback)(()=>{N({withSuggestedChange:!0}),j("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[N,j]),L=(0,u.useCallback)(()=>{c("new-conversation")},[c]),_=(0,u.useMemo)(()=>p===e,[e,p]),k=(0,u.useCallback)(()=>{o("context-menu",e)},[e,o]),E=(0,u.useCallback)(()=>{l(t),k()},[t,k]),I=(0,u.useCallback)(()=>{c("context-menu")},[c]),D=(0,u.useCallback)(()=>{_?I():k()},[I,_,k]),T=(0,u.useCallback)(()=>{l(t),D()},[t,D]),A=(0,u.useMemo)(()=>x===e?f:void 0,[e,x,f]),R=(0,u.useMemo)(()=>x===e?d:void 0,[e,x,d]),$=(0,u.useCallback)(()=>{n?.()},[n]),O=(0,ts.K)((e,t={skipLineSelection:!1})=>{if(h(e),$(),t.skipLineSelection)return;let n=b.find(t=>t.id===e);if(n&&n.diffSide&&n.line){let e=n.startLine??n.line,t=n.startDiffSide??n.diffSide;i({diffAnchor:r,endLineNumber:n.line,endOrientation:"LEFT"===n.diffSide?"left":"right",startLineNumber:e,startOrientation:"LEFT"===t?"left":"right",firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right"})}});return{isNewConversationDialogOpen:C,startNewConversation:w,closeNewConversation:L,startNewConversationWithSuggestedChange:S,shouldStartNewConversationWithSuggestedChange:v,isContextMenuOpen:_,openContextMenu:k,openContextMenuFromActionBar:E,closeContextMenu:I,toggleContextMenu:D,toggleContextMenuFromActionBar:T,optimizedSelectedThreadId:A,optimizedSelectedAnnotationId:R,selectThread:O,selectAnnotation:(0,ts.K)((e,t={skipLineSelection:!1})=>{if(m(e),$(),t.skipLineSelection)return;let n=s.find(t=>t.id===e);n&&i({diffAnchor:r,endLineNumber:n.endLine,endOrientation:"right",startLineNumber:n.startLine,startOrientation:"right",firstSelectedLineNumber:n.startLine,firstSelectedOrientation:"right"})}),openMarkersDialog:$,closeMarkerListDialog:(0,u.useCallback)(()=>{c("marker-list")},[c]),annotations:s,returnFocusRef:a,threads:b,anyMenuOpen:y}},r$=(0,l.kw)()?function(e){let t,n,i,r,a,l,o,c,d=(0,s.c)(29),{cellRef:m}=e,{showActionBar:f,hideActionBar:h,anyMenuOpen:p}=nB(),[g,x]=(0,u.useState)(!1);d[0]!==f?(t=()=>{f()},d[0]=f,d[1]=t):t=d[1];let b=t;d[2]!==p||d[3]!==m||d[4]!==h?(n=e=>{p||m.current&&m.current.contains(e.relatedTarget)||h()},d[2]=p,d[3]=m,d[4]=h,d[5]=n):n=d[5];let y=n;d[6]!==f?(i=()=>{f()},d[6]=f,d[7]=i):i=d[7];let j=i;d[8]!==p||d[9]!==m||d[10]!==h?(r=()=>{p||m.current===document.activeElement||m.current?.contains(document.activeElement)||h()},d[8]=p,d[9]=m,d[10]=h,d[11]=r):r=d[11];let C=r;d[12]!==p||d[13]!==m||d[14]!==h?(a=e=>{m.current&&(p||(m.current.contains(e.relatedTarget)?m.current===e.relatedTarget&&x(!1):(h(),x(!1))))},d[12]=p,d[13]=m,d[14]=h,d[15]=a):a=d[15];let v=a;d[16]!==p?(l=e=>{p||(e.stopPropagation(),x(!0))},d[16]=p,d[17]=l):l=d[17];let N=l;d[18]!==p?(o=e=>{!p&&n_(e.key)&&e.stopPropagation()},d[18]=p,d[19]=o):o=d[19];let w=o;return d[20]!==v||d[21]!==N||d[22]!==w||d[23]!==y||d[24]!==b||d[25]!==j||d[26]!==C||d[27]!==g?(c={isActionBarFocused:g,handleCellBlur:y,handleCellFocus:b,handleCellMouseEnter:j,handleCellMouseLeave:C,handleActionBarBlur:v,handleActionBarFocusCapture:N,handleActionBarKeydownCapture:w},d[20]=v,d[21]=N,d[22]=w,d[23]=y,d[24]=b,d[25]=j,d[26]=C,d[27]=g,d[28]=c):c=d[28],c}:function({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=nB(),[r,a]=(0,u.useState)(!1),l=(0,u.useCallback)(()=>{t()},[t]),s=(0,u.useCallback)(t=>{i||e.current&&e.current.contains(t.relatedTarget)||n()},[i,e,n]),o=(0,u.useCallback)(()=>{t()},[t]),c=(0,u.useCallback)(()=>{i||e.current===document.activeElement||e.current?.contains(document.activeElement)||n()},[i,e,n]),d=(0,u.useCallback)(t=>{e.current&&(i||(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&a(!1):(n(),a(!1))))},[i,e,n]);return{isActionBarFocused:r,handleCellBlur:s,handleCellFocus:l,handleCellMouseEnter:o,handleCellMouseLeave:c,handleActionBarBlur:d,handleActionBarFocusCapture:(0,u.useCallback)(e=>{i||(e.stopPropagation(),a(!0))},[i]),handleActionBarKeydownCapture:(0,u.useCallback)(e=>{!i&&n_(e.key)&&e.stopPropagation()},[i])}},rO=(0,l.kw)()?function(e,t){let n,i,r,a,l=(0,s.c)(13),{selectedDiffLines:o,getDiffLinesByDiffAnchor:c}=tA();l[0]!==e||l[1]!==c||l[2]!==t?(n=()=>{let n=c(e);if(!n||!t)return"";let{startOrientation:i,endOrientation:r,startLineNumber:a,endLineNumber:l}=t,s=0,o=0;return n.length>1&&(s=n.findIndex(e=>"left"===i?e.left===a:e.right===a),o=n.findIndex(e=>"left"===r?e.left===l:e.right===l)),tk(n.slice(s,o+1))},l[0]=e,l[1]=c,l[2]=t,l[3]=n):n=l[3];let d=n;l[4]!==e||l[5]!==c?(i=(t,n)=>{if(!t||!n)return"";let i=c(e)?.find(e=>"left"===t?e.left===n:e.right===n);return i?tk([i]):""},l[4]=e,l[5]=c,l[6]=i):i=l[6];let m=i;l[7]!==o?(r=e=>void 0===e?"":"left"===e?tk(o.leftLines):tk(o.rightLines),l[7]=o,l[8]=r):r=l[8];let u=r;return l[9]!==m||l[10]!==u||l[11]!==d?(a={getUnifiedDiffMultiLineCode:d,getDiffSingleLineCode:m,getSplitDiffMultiLineCode:u},l[9]=m,l[10]=u,l[11]=d,l[12]=a):a=l[12],a}:function(e,t){let{selectedDiffLines:n,getDiffLinesByDiffAnchor:i}=tA();return{getUnifiedDiffMultiLineCode:()=>{let n=i(e);if(!n||!t)return"";let{startOrientation:r,endOrientation:a,startLineNumber:l,endLineNumber:s}=t,o=0,c=0;return n.length>1&&(o=n.findIndex(e=>"left"===r?e.left===l:e.right===l),c=n.findIndex(e=>"left"===a?e.left===s:e.right===s)),tk(n.slice(o,c+1))},getDiffSingleLineCode:(t,n)=>{if(!t||!n)return"";let r=i(e)?.find(e=>"left"===t?e.left===n:e.right===n);return r?tk([r]):""},getSplitDiffMultiLineCode:e=>void 0===e?"":"left"===e?tk(n.leftLines):tk(n.rightLines)}};function rP({fileAnchor:e}){let{isSplit:t,isLeftSide:n,diffLine:i}=tY(),{selectedDiffRowRange:r}=tA(),{getDiffSingleLineCode:a,getUnifiedDiffMultiLineCode:l,getSplitDiffMultiLineCode:s}=rO(e,r);return(0,u.useCallback)(async()=>{let e=window.getSelection();e&&""!==e.toString()?document.execCommand("copy"):void 0===r||r?.startOrientation===r?.endOrientation&&r?.startLineNumber===r?.endLineNumber?await (0,nH.D)(a(n?"left":"right",n?i?.left:i?.right)):t?await (0,nH.D)(s(n?"left":"right")):await (0,nH.D)(l())},[r,t,l,a,n,i?.left,i?.right,s])}function rM(e,t){switch(t){case"SHOW_MARKERS":return{userMinimized:!1,showMarkers:!0};case"USER_EXPANDED_MARKERS":return{showMarkers:!0,userMinimized:!1};case"USER_MINIMIZED_MARKERS":return{userMinimized:!0,showMarkers:!1};case"USER_EXITED_MARKERS_DIALOG":return{...e,showMarkers:!1}}}let rF=(0,l.kw)()?function(e){let t,n,i,r,a=(0,s.c)(7),l=e===y.sI.Collapsed;a[0]!==l?(t={userMinimized:l,showMarkers:!1},a[0]=l,a[1]=t):t=a[1];let[o,c]=(0,u.useReducer)(rM,t),d=(0,u.useRef)(e);return a[2]!==e?(n=()=>{d.current!==e&&(d.current=e,e===y.sI.Visible?c("SHOW_MARKERS"):c("USER_MINIMIZED_MARKERS"))},i=[e,c],a[2]=e,a[3]=n,a[4]=i):(n=a[3],i=a[4]),(0,u.useEffect)(n,i),a[5]!==o?(r=[o,c],a[5]=o,a[6]=r):r=a[6],r}:function(e){let[t,n]=(0,u.useReducer)(rM,{userMinimized:e===y.sI.Collapsed,showMarkers:!1}),i=(0,u.useRef)(e);return(0,u.useEffect)(()=>{i.current!==e&&(i.current=e,e===y.sI.Visible?n("SHOW_MARKERS"):n("USER_MINIMIZED_MARKERS"))},[e,n]),[t,n]},rB=(0,l.kw)()?function(e,t,n){let i,r,a,l,o=(0,s.c)(15),{sendAnalyticsEvent:c}=(0,id.s)(),{getDiffLinesFromLineRange:d,selectedDiffRowRange:m}=tA();o[0]!==d||o[1]!==t?(i=function(e){if(!e)return"DELETION"!==t.type;if("right"===e.startOrientation&&"right"===e.endOrientation)return!0;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return"DELETION"!==t.type;let n=d(e)?.selectedLeftLines;return!!n?.every(rU)},o[0]=d,o[1]=t,o[2]=i):i=o[2];let u=i;o[3]!==d||o[4]!==t?(r=function(e){let n=d(e)?.selectedRightLines;if(e&&n&&n.length>1)return tk(n);if(!t)return"";let[i]=tj(t.text,t.type);return i},o[3]=d,o[4]=t,o[5]=r):r=o[5];let f=r;o[6]!==f||o[7]!==c||o[8]!==u||o[9]!==e?(a=function(t,n){if(!e)return;let i=u(t);return{isValidSuggestionRange:i,showSuggestChangesButton:i,sourceContentFromDiffLines:i?f(t):void 0,onInsertSuggestedChange:()=>{c("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:n}},o[6]=f,o[7]=c,o[8]=u,o[9]=e,o[10]=a):a=o[10];let h=(0,ts.K)(a);return o[11]!==h||o[12]!==m||o[13]!==n?(l={selectedDiffRowRange:m,configureSuggestedChangesFromLineRange:h,shouldStartNewConversationWithSuggestedChange:n},o[11]=h,o[12]=m,o[13]=n,o[14]=l):l=o[14],l}:function(e,t,n){let{sendAnalyticsEvent:i}=(0,id.s)(),{getDiffLinesFromLineRange:r,selectedDiffRowRange:a}=tA(),l=(0,ts.K)(function(n,a){if(!e)return;let l=function(e){if(!e)return"DELETION"!==t.type;if("right"===e.startOrientation&&"right"===e.endOrientation)return!0;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return"DELETION"!==t.type;let n=r(e)?.selectedLeftLines;return!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(n);return{isValidSuggestionRange:l,showSuggestChangesButton:l,sourceContentFromDiffLines:l?function(e){let n=r(e)?.selectedRightLines;if(e&&n&&n.length>1)return tk(n);if(!t)return"";let[i]=tj(t.text,t.type);return i}(n):void 0,onInsertSuggestedChange:()=>{i("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:a}});return(0,u.useMemo)(()=>({selectedDiffRowRange:a,configureSuggestedChangesFromLineRange:l,shouldStartNewConversationWithSuggestedChange:n}),[a,l,n])};function rU(e){return"empty-diff-line"!==e&&"DELETION"!==e.type}var rH=n(21513);let rz="ActionBar-module__actionBarHeight--rjbc7";var rV=n(24494);let rG={compact:{avatarSize:18},relaxed:{avatarSize:20}};function rW({shouldAnimateRef:e,lineSpacingPreference:t="relaxed"}){let{diffLine:n}=tY(),{ghostUser:i}=ta();(0,u.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:r}=rG[t],l=(n.threadsData?.totalCommentsCount||0)+(n.annotationsData?.totalCount||0);if(0===l)return null;let s={},o=[];n.annotationsData?.annotations?.map(e=>{e?.annotationLevel&&o.push({id:e.id,level:e.annotationLevel})}),n.threadsData?.threads?.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?s[e?.author.login]=e.author:i?.login&&(s[i.login]=i)}));let c=[...o.sort((e,t)=>(ie[e.level]?.priority||0)<(ie[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,a.jsx)(n9,{annotationLevel:t.level},t.id):(0,a.jsx)(n7,{annotationLevel:t.level},t.id)),...Object.keys(s).map(e=>{let t=s[e]?.login,n=s[e]?.avatarUrl??(i?.avatarUrl||" ");return(0,a.jsx)(n0.r,{alt:t,size:20,src:n},t)})].slice(0,3),d=l>9?"9+":`${l}`;return(0,a.jsxs)("div",{className:(0,E.$)("d-flex","flex-justify-between","flex-items-center","CommentIndicator-module__commentIndicatorContainer--js8be"),children:[(0,a.jsx)(rV.A,{disableExpand:!0,size:r,className:(0,E.$)("CommentIndicator-module__AvatarStack--jEc1l","relaxed"===t?"CommentIndicator-module__Relaxed--BloMn":"CommentIndicator-module__Compact--ZE18o"),children:c}),(0,a.jsx)("span",{className:(0,E.$)("fgColor-default","ml-1","CommentIndicator-module__textStyles--F0_Xp"),children:d})]})}try{rW.displayName||(rW.displayName="CommentIndicator")}catch{}var rK=n(89141),rq=n(29255);let rX=(0,l.kw)()?function(){let e,t,n,i,r=(0,s.c)(17),{nextHunk:a,currentHunk:l,previousHunk:o}=tY(),{addInjectedContextLines:c}=ta(),d=!!l&&0!==l.startBlobLineNumber,m=!!l&&!!a;r[0]!==c||r[1]!==d||r[2]!==l?(e=()=>{d&&l&&c({start:Math.max(0,l.startBlobLineNumber-20),end:l.startBlobLineNumber})},r[0]=c,r[1]=d,r[2]=l,r[3]=e):e=r[3];let u=e;r[4]!==c||r[5]!==m||r[6]!==l?(t=()=>{m&&l&&c({start:l.endBlobLineNumber+1,end:l.endBlobLineNumber+1+20})},r[4]=c,r[5]=m,r[6]=l,r[7]=t):t=r[7];let f=t;r[8]!==c||r[9]!==o?(n=()=>{o&&c({start:o.endBlobLineNumber+1,end:o.endBlobLineNumber+1+20})},r[8]=c,r[9]=o,r[10]=n):n=r[10];let h=n;return r[11]!==m||r[12]!==d||r[13]!==f||r[14]!==h||r[15]!==u?(i={expandStartOfHunk:u,expandEndOfHunk:f,expandEndOfPreviousHunk:h,canExpandEndOfHunk:m,canExpandStartOfHunk:d},r[11]=m,r[12]=d,r[13]=f,r[14]=h,r[15]=u,r[16]=i):i=r[16],i}:function(){let{nextHunk:e,currentHunk:t,previousHunk:n}=tY(),{addInjectedContextLines:i}=ta(),r=!!t&&0!==t.startBlobLineNumber,a=!!t&&!!e;return{expandStartOfHunk:()=>{r&&t&&i({start:Math.max(0,t.startBlobLineNumber-20),end:t.startBlobLineNumber})},expandEndOfHunk:()=>{a&&t&&i({start:t.endBlobLineNumber+1,end:t.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&i({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:a,canExpandStartOfHunk:r}},rQ={left:"L",right:"R"},rJ="Add comment",rY="Suggest change";function rZ(e,t,n){let i=n&&!ty(t)?rQ.left:rQ.right;return`${e} on line ${i}${t.blobLineNumber}`}function r0(e,t,n,i,r){return e.right===t.right?n||i&&r?` on line R${e.right}`:`, modified line R${t.right}`:n||i&&r?` on lines R${e.right}-R${t.right}`:`, modified lines R${e.right}-R${t.right}`}function r1(e,t,n){return e.left===t.left?n?` on line L${e.left}`:`, original line L${e.left}`:n?` on lines L${e.left}-L${t.right}`:`, original lines L${e.left}-L${t.left}`}let r2=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,u,h,p,g,x=(0,s.c)(56),{handleStartConversationWithSuggestedChange:b,handleStartConversation:y}=e,{selectedDiffRowRange:j,selectedDiffLines:C,replaceSelectedDiffRowRange:v}=tA(),{commentingEnabled:N}=ta(),{diffLine:w,isLeftSide:S,isSplit:L,diffContext:_}=tY(),k=C.leftLines[0],E=C.leftLines[C.leftLines.length-1];x[0]!==C.leftLines?(t=C.leftLines.every(r5),x[0]=C.leftLines,x[1]=t):t=x[1];let I=t,D=C.rightLines[0],T=C.rightLines[C.rightLines.length-1],A=0===C.rightLines.length,R=0===C.leftLines.length;e:{if(C.leftLines.find(r4)||C.rightLines.find(r3)){n=!1;break e}n=!0}let $=n;x[2]!==k||x[3]!==y||x[4]!==b||x[5]!==E||x[6]!==v||x[7]!==j?(i=(e,t)=>{!j||!E||!k||tb(E)||tb(k)||!k.left||!E.left||(v({diffAnchor:j.diffAnchor,endLineNumber:E.left,endOrientation:"left",startLineNumber:k.left,startOrientation:"left",firstSelectedLineNumber:k.left,firstSelectedOrientation:"left"}),t?.withSuggestedChange?b():y())},x[2]=k,x[3]=y,x[4]=b,x[5]=E,x[6]=v,x[7]=j,x[8]=i):i=x[8];let O=i;x[9]!==D||x[10]!==y||x[11]!==b||x[12]!==T||x[13]!==v||x[14]!==j?(r=(e,t)=>{!j||!T||!D||tb(T)||tb(D)||!D.right||!T.right||(v({diffAnchor:j.diffAnchor,endLineNumber:T.right,endOrientation:"right",startLineNumber:D.right,startOrientation:"right",firstSelectedLineNumber:D.right,firstSelectedOrientation:"right"}),t?.withSuggestedChange?b():y())},x[9]=D,x[10]=y,x[11]=b,x[12]=T,x[13]=v,x[14]=j,x[15]=r):r=x[15];let P=r,M="DELETION"!==w.type&&("pr"===_||void 0===_);t:{if(!j){l=!1;break t}if(j.startOrientation!==j.endOrientation||j.startLineNumber!==j.endLineNumber){l=!0;break t}l=!1}let F=l;if(!N)return null;let B=!1,U=!1;if(j&&F){let e,t=rQ[j.startOrientation],n=rQ[j.endOrientation];if(d=` on lines ${t}${j.startLineNumber}-${n}${j.endLineNumber}`,!tb(k)&&!tb(E)&&k&&E){let e;B=!0,x[16]!==k||x[17]!==E||x[18]!==A?(e=r1(k,E,A),x[16]=k,x[17]=E,x[18]=A,x[19]=e):e=x[19],o=e}if(!tb(D)&&!tb(T)&&D&&T){let e;U=!0,x[20]!==$||x[21]!==D||x[22]!==L||x[23]!==T||x[24]!==R?(e=r0(D,T,R,L,$),x[20]=$,x[21]=D,x[22]=L,x[23]=T,x[24]=R,x[25]=e):e=x[25],c=e}return x[26]!==$||x[27]!==I||x[28]!==M||x[29]!==y||x[30]!==b||x[31]!==P||x[32]!==O||x[33]!==L||x[34]!==A||x[35]!==c||x[36]!==o||x[37]!==U||x[38]!==B||x[39]!==d?(e=(0,a.jsx)(a.Fragment,{children:L?(0,a.jsx)(a.Fragment,{children:$?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eg.l.Item,{onSelect:P,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusIcon,{})}),rJ+c,(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)(rq.U,{keys:"Alt+n"})})]}),(0,a.jsxs)(eg.l.Item,{onSelect:e=>P(e,{withSuggestedChange:!0}),children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusCircleIcon,{})}),rY+c]})]}):(0,a.jsxs)(a.Fragment,{children:[B?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eg.l.Item,{onSelect:O,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusIcon,{})}),rJ+o,(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)(rq.U,{keys:A?"Alt+n":"Alt+Shift+N"})})]}),I&&(0,a.jsxs)(eg.l.Item,{onSelect:e=>O(e,{withSuggestedChange:!0}),children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusCircleIcon,{})}),rY+o]})]}):null,U?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eg.l.Item,{onSelect:P,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusIcon,{})}),rJ+c,(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)(rq.U,{keys:"Alt+n"})})]}),(0,a.jsxs)(eg.l.Item,{onSelect:e=>P(e,{withSuggestedChange:!0}),children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusCircleIcon,{})}),rY+c]})]}):null]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eg.l.Item,{onSelect:y,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusIcon,{})}),rJ+d]}),M&&I&&(0,a.jsxs)(eg.l.Item,{onSelect:b,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusCircleIcon,{})}),rY+d]})]})}),x[26]=$,x[27]=I,x[28]=M,x[29]=y,x[30]=b,x[31]=P,x[32]=O,x[33]=L,x[34]=A,x[35]=c,x[36]=o,x[37]=U,x[38]=B,x[39]=d,x[40]=e):e=x[40],e}return x[41]===Symbol.for("react.memo_cache_sentinel")?(m=(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusIcon,{})}),x[41]=m):m=x[41],x[42]!==S||x[43]!==w?(u=rZ(rJ,w,S),x[42]=S,x[43]=w,x[44]=u):u=x[44],x[45]!==y||x[46]!==u?(h=(0,a.jsxs)(eg.l.Item,{onSelect:y,children:[m,u]}),x[45]=y,x[46]=u,x[47]=h):h=x[47],x[48]!==M||x[49]!==b||x[50]!==S||x[51]!==w?(p=M&&(0,a.jsxs)(eg.l.Item,{onSelect:b,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusCircleIcon,{})}),rZ(rY,w,S)]}),x[48]=M,x[49]=b,x[50]=S,x[51]=w,x[52]=p):p=x[52],x[53]!==h||x[54]!==p?(g=(0,a.jsxs)(a.Fragment,{children:[h,p]}),x[53]=h,x[54]=p,x[55]=g):g=x[55],g}:function({handleStartConversationWithSuggestedChange:e,handleStartConversation:t}){let n,i,r,{selectedDiffRowRange:l,selectedDiffLines:s,replaceSelectedDiffRowRange:o}=tA(),{commentingEnabled:c}=ta(),{diffLine:d,isLeftSide:m,isSplit:h,diffContext:p}=tY(),g=(0,u.useMemo)(()=>s.leftLines[0],[s.leftLines]),x=(0,u.useMemo)(()=>s.leftLines[s.leftLines.length-1],[s.leftLines]),b=(0,u.useMemo)(()=>s.leftLines.every(e=>!tb(e)&&"DELETION"!==e.type),[s.leftLines]),y=(0,u.useMemo)(()=>s.rightLines[0],[s.rightLines]),j=(0,u.useMemo)(()=>s.rightLines[s.rightLines.length-1],[s.rightLines]),C=(0,u.useMemo)(()=>0===s.rightLines.length,[s.rightLines]),v=(0,u.useMemo)(()=>0===s.leftLines.length,[s.leftLines]),N=(0,u.useMemo)(()=>!(s.leftLines.find(e=>!tb(e)&&!ty(e)&&"INJECTED_CONTEXT"!==e.type)||s.rightLines.find(e=>!tb(e)&&!ty(e)&&"INJECTED_CONTEXT"!==e.type)),[s.leftLines,s.rightLines]),w=(0,u.useCallback)((n,i)=>{!l||!x||!g||tb(x)||tb(g)||!g.left||!x.left||(o({diffAnchor:l.diffAnchor,endLineNumber:x.left,endOrientation:"left",startLineNumber:g.left,startOrientation:"left",firstSelectedLineNumber:g.left,firstSelectedOrientation:"left"}),i?.withSuggestedChange?e():t())},[l,x,g,o,e,t]),S=(0,u.useCallback)((n,i)=>{!l||!j||!y||tb(j)||tb(y)||!y.right||!j.right||(o({diffAnchor:l.diffAnchor,endLineNumber:j.right,endOrientation:"right",startLineNumber:y.right,startOrientation:"right",firstSelectedLineNumber:y.right,firstSelectedOrientation:"right"}),i?.withSuggestedChange?e():t())},[l,j,y,o,e,t]),L="DELETION"!==d.type&&("pr"===p||void 0===p),_=(0,u.useMemo)(()=>!!l&&(l.startOrientation!==l.endOrientation||l.startLineNumber!==l.endLineNumber),[l]);if(!c)return null;let k=!1,E=!1;if(l&&_){let s=rQ[l.startOrientation],o=rQ[l.endOrientation];return r=` on lines ${s}${l.startLineNumber}-${o}${l.endLineNumber}`,!tb(g)&&!tb(x)&&g&&x&&(k=!0,n=r1(g,x,C)),!tb(y)&&!tb(j)&&y&&j&&(E=!0,i=r0(y,j,v,h,N)),(0,a.jsx)(a.Fragment,{children:h?(0,a.jsx)(a.Fragment,{children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eg.l.Item,{onSelect:S,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusIcon,{})}),rJ+i,(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)(rq.U,{keys:"Alt+n"})})]}),(0,a.jsxs)(eg.l.Item,{onSelect:e=>S(e,{withSuggestedChange:!0}),children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusCircleIcon,{})}),rY+i]})]}):(0,a.jsxs)(a.Fragment,{children:[k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eg.l.Item,{onSelect:w,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusIcon,{})}),rJ+n,(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)(rq.U,{keys:C?"Alt+n":"Alt+Shift+N"})})]}),b&&(0,a.jsxs)(eg.l.Item,{onSelect:e=>w(e,{withSuggestedChange:!0}),children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusCircleIcon,{})}),rY+n]})]}):null,E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eg.l.Item,{onSelect:S,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusIcon,{})}),rJ+i,(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)(rq.U,{keys:"Alt+n"})})]}),(0,a.jsxs)(eg.l.Item,{onSelect:e=>S(e,{withSuggestedChange:!0}),children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusCircleIcon,{})}),rY+i]})]}):null]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eg.l.Item,{onSelect:t,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusIcon,{})}),rJ+r]}),L&&b&&(0,a.jsxs)(eg.l.Item,{onSelect:e,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusCircleIcon,{})}),rY+r]})]})})}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eg.l.Item,{onSelect:t,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusIcon,{})}),rZ(rJ,d,m)]}),L&&(0,a.jsxs)(eg.l.Item,{onSelect:e,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.PlusCircleIcon,{})}),rZ(rY,d,m)]})]})};function r3(e){return!tb(e)&&!ty(e)&&"INJECTED_CONTEXT"!==e.type}function r4(e){return!tb(e)&&!ty(e)&&"INJECTED_CONTEXT"!==e.type}function r5(e){return!tb(e)&&"DELETION"!==e.type}try{r2.displayName||(r2.displayName="StartConversationContextMenuItems")}catch{}let r6=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d=(0,s.c)(13);return d[0]!==e?(t=(0,a.jsx)(an,{...e}),d[0]=e,d[1]=t):t=d[1],d[2]!==e.copilotChatReference?(n=(0,a.jsx)(ae,{fileDiffReference:e.copilotChatReference}),d[2]=e.copilotChatReference,d[3]=n):n=d[3],d[4]!==e.handleCopyCode?(i=(0,a.jsx)(as,{handleCopyCode:e.handleCopyCode}),d[4]=e.handleCopyCode,d[5]=i):i=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)(at,{}),l=(0,a.jsx)(r7,{}),o=(0,a.jsx)(ac,{}),d[6]=r,d[7]=l,d[8]=o):(r=d[6],l=d[7],o=d[8]),d[9]!==t||d[10]!==n||d[11]!==i?(c=(0,a.jsxs)(a.Fragment,{children:[t,n,i,r,l,o]}),d[9]=t,d[10]=n,d[11]=i,d[12]=c):c=d[12],c}:function(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(an,{...e}),(0,a.jsx)(ae,{fileDiffReference:e.copilotChatReference}),(0,a.jsx)(as,{handleCopyCode:e.handleCopyCode}),(0,a.jsx)(at,{}),(0,a.jsx)(r7,{}),(0,a.jsx)(ac,{})]})},r7=(0,l.kw)()?function(){let e,t,n,i,r=(0,s.c)(8),{diffLine:l,fileAnchor:o}=tY(),{selectedDiffRowRange:c}=tA();r[0]!==o||r[1]!==l||r[2]!==c?(e=()=>{let e=tw({line:l,range:c,fileAnchor:o});e&&(0,nH.D)(e)},r[0]=o,r[1]=l,r[2]=c,r[3]=e):e=r[3];let d=e;return r[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.LinkIcon,{})}),r[4]=t):t=r[4],r[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)(rq.U,{keys:"Mod+Alt+y"})}),r[5]=n):n=r[5],r[6]!==d?(i=(0,a.jsxs)(eg.l.Item,{onSelect:d,onMouseDown:r8,children:[t,"Copy link",n]}),r[6]=d,r[7]=i):i=r[7],i}:function(){let{diffLine:e,fileAnchor:t}=tY(),{selectedDiffRowRange:n}=tA(),i=(0,u.useCallback)(()=>{let i=tw({line:e,range:n,fileAnchor:t});i&&(0,nH.D)(i)},[t,e,n]);return(0,a.jsxs)(eg.l.Item,{onSelect:i,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.LinkIcon,{})}),"Copy link",(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)(rq.U,{keys:"Mod+Alt+y"})})]})};function r8(e){window.getSelection()?.toString()!==""&&e.preventDefault()}let r9=(0,l.kw)()?function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ad,{}),(0,a.jsx)(at,{})]}),t[0]=e):e=t[0],e}:function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ad,{}),(0,a.jsx)(at,{})]})},ae=(0,l.kw)()?e=>{let t,n,i=(0,s.c)(8),{selectedDiffRowRange:r}=tA(),{diffLine:l,isLeftSide:o,fileAnchor:c}=tY();i[0]!==l||i[1]!==c||i[2]!==o||i[3]!==r?(t=tE(r,l,o,c),i[0]=l,i[1]=c,i[2]=o,i[3]=r,i[4]=t):t=i[4];let d=t;return e.fileDiffReference?(i[5]!==d||i[6]!==e.fileDiffReference?(n=(0,a.jsx)(rK.w,{showDivider:!0,selectedRange:d,fileDiffReference:e.fileDiffReference}),i[5]=d,i[6]=e.fileDiffReference,i[7]=n):n=i[7],n):null}:e=>{let{selectedDiffRowRange:t}=tA(),{diffLine:n,isLeftSide:i,fileAnchor:r}=tY(),l=tE(t,n,i,r);return e.fileDiffReference?(0,a.jsx)(rK.w,{showDivider:!0,selectedRange:l,fileDiffReference:e.fileDiffReference}):null},at=(0,l.kw)()?function(){let e,t,n,i,r=(0,s.c)(6),{fileAnchor:l}=tY();r[0]!==l?(e=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${l}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},r[0]=l,r[1]=e):e=r[1];let o=e;return r[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.MultiSelectIcon,{})}),r[2]=t):t=r[2],r[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)(rq.U,{keys:"Mod+a"})}),r[3]=n):n=r[3],r[4]!==o?(i=(0,a.jsxs)(eg.l.Item,{onSelect:o,children:[t,"Select all",n]}),r[4]=o,r[5]=i):i=r[5],i}:function(){let{fileAnchor:e}=tY();return(0,a.jsxs)(eg.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.MultiSelectIcon,{})}),"Select all",(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)(rq.U,{keys:"Mod+a"})})]})},an=(0,l.kw)()?function(e){let t,n,i,r,l=(0,s.c)(11),{handleViewMarkersSelection:o,shouldDisplayCollapseComments:c,showStartConversation:d,startConversationCurrentLine:m,startConversationWithSuggestedChange:u}=e,{commentingEnabled:f}=ta(),{annotations:h,threads:p}=nB(),g=h.length>0;return f&&(d||p||g)?(l[0]!==d||l[1]!==m||l[2]!==u?(t=d&&(0,a.jsx)(r2,{handleStartConversation:m,handleStartConversationWithSuggestedChange:u}),l[0]=d,l[1]=m,l[2]=u,l[3]=t):t=l[3],l[4]!==o||l[5]!==c?(n=(0,a.jsx)(ai,{handleViewMarkersSelection:o,shouldDisplayCollapseComments:c}),l[4]=o,l[5]=c,l[6]=n):n=l[6],l[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(eg.l.Divider,{}),l[7]=i):i=l[7],l[8]!==t||l[9]!==n?(r=(0,a.jsxs)(a.Fragment,{children:[t,n,i]}),l[8]=t,l[9]=n,l[10]=r):r=l[10],r):null}:function({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t,showStartConversation:n,startConversationCurrentLine:i,startConversationWithSuggestedChange:r}){let{commentingEnabled:l}=ta(),{annotations:s,threads:o}=nB(),c=s.length>0;return l&&(n||o||c)?(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(r2,{handleStartConversation:i,handleStartConversationWithSuggestedChange:r}),(0,a.jsx)(ai,{handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}),(0,a.jsx)(eg.l.Divider,{})]}):null},ai=(0,l.kw)()?function(e){let t,n=(0,s.c)(8),{handleViewMarkersSelection:i,shouldDisplayCollapseComments:r}=e,{commentingEnabled:l}=ta(),{isSplit:o}=tY(),{viewerData:c}=ta();if(!l||c.commentsPreference===y.sI.Visible)return null;if(!o){let e,t;return n[0]!==i?(e=()=>i(),n[0]=i,n[1]=e):e=n[1],n[2]!==r||n[3]!==e?(t=(0,a.jsx)(aa,{onSelect:e,shouldDisplayCollapseComments:r}),n[2]=r,n[3]=e,n[4]=t):t=n[4],t}return n[5]!==i||n[6]!==r?(t=(0,a.jsx)(ar,{handleViewMarkersSelection:i,shouldDisplayCollapseComments:r}),n[5]=i,n[6]=r,n[7]=t):t=n[7],t}:function({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}){let{commentingEnabled:n}=ta(),{isSplit:i}=tY(),{viewerData:r}=ta();return n&&r.commentsPreference!==y.sI.Visible?i?(0,a.jsx)(ar,{handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}):(0,a.jsx)(aa,{onSelect:()=>e(),shouldDisplayCollapseComments:t}):null},ar=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(24),{handleViewMarkersSelection:l,shouldDisplayCollapseComments:o}=e,{originalLineHasThreads:c,modifiedLineHasThreads:d,isLeftSide:m}=tY(),{annotations:u}=nB(),f=u.length>0;if(m){let e,t,n;return r[0]!==l||r[1]!==c||r[2]!==o?(e=c&&(0,a.jsx)(al,{text:o?"Collapse comments":"Expand comments",onSelect:()=>l("LEFT")}),r[0]=l,r[1]=c,r[2]=o,r[3]=e):e=r[3],r[4]!==l||r[5]!==f||r[6]!==d||r[7]!==o?(t=(d||f)&&(0,a.jsx)(al,{text:o?"Collapse comments, modified line":"Expand comments, modified line",onSelect:()=>l("RIGHT")}),r[4]=l,r[5]=f,r[6]=d,r[7]=o,r[8]=t):t=r[8],r[9]!==e||r[10]!==t?(n=(0,a.jsxs)(a.Fragment,{children:[e,t]}),r[9]=e,r[10]=t,r[11]=n):n=r[11],n}return r[12]!==l||r[13]!==f||r[14]!==d||r[15]!==o?(t=(d||f)&&(0,a.jsx)(al,{text:o?"Collapse comments":"Expand comments",onSelect:()=>l("RIGHT")}),r[12]=l,r[13]=f,r[14]=d,r[15]=o,r[16]=t):t=r[16],r[17]!==l||r[18]!==c||r[19]!==o?(n=c&&(0,a.jsx)(al,{text:o?"Collapse comments, original line":"Expand comments, original line",onSelect:()=>l("LEFT")}),r[17]=l,r[18]=c,r[19]=o,r[20]=n):n=r[20],r[21]!==t||r[22]!==n?(i=(0,a.jsxs)(a.Fragment,{children:[t,n]}),r[21]=t,r[22]=n,r[23]=i):i=r[23],i}:function({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}){let{originalLineHasThreads:n,modifiedLineHasThreads:i,isLeftSide:r}=tY(),{annotations:l}=nB(),s=l.length>0;return r?(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(al,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e("LEFT")}),(i||s)&&(0,a.jsx)(al,{text:t?"Collapse comments, modified line":"Expand comments, modified line",onSelect:()=>e("RIGHT")})]}):(0,a.jsxs)(a.Fragment,{children:[(i||s)&&(0,a.jsx)(al,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e("RIGHT")}),n&&(0,a.jsx)(al,{text:t?"Collapse comments, original line":"Expand comments, original line",onSelect:()=>e("LEFT")})]})},aa=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(5),{onSelect:r,shouldDisplayCollapseComments:l}=e,{ghostUser:o}=ta(),{diffLine:c}=tY(),{annotations:d}=nB();if(!(c&&tZ(c.threadsData,o).length>0||d.length>0))return null;let m=l?"Collapse comments":"Expand comments";return i[0]!==r?(t=()=>r(),i[0]=r,i[1]=t):t=i[1],i[2]!==m||i[3]!==t?(n=(0,a.jsx)(al,{text:m,onSelect:t}),i[2]=m,i[3]=t,i[4]=n):n=i[4],n}:function({onSelect:e,shouldDisplayCollapseComments:t}){let{ghostUser:n}=ta(),{diffLine:i}=tY(),{annotations:r}=nB();return i&&tZ(i.threadsData,n).length>0||r.length>0?(0,a.jsx)(al,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e()}):null},al=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(4),{onSelect:r,text:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.CommentDiscussionIcon,{})}),i[0]=t):t=i[0],i[1]!==r||i[2]!==l?(n=(0,a.jsxs)(eg.l.Item,{onSelect:r,children:[t,l]}),i[1]=r,i[2]=l,i[3]=n):n=i[3],n}:function({onSelect:e,text:t}){return(0,a.jsxs)(eg.l.Item,{onSelect:e,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.CommentDiscussionIcon,{})}),t]})},as=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(4),{handleCopyCode:l}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.CopyIcon,{})}),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)(rq.U,{keys:"Mod+c"})}),r[1]=n):n=r[1],r[2]!==l?(i=(0,a.jsxs)(eg.l.Item,{onSelect:l,onMouseDown:ao,children:[t,"Copy",n]}),r[2]=l,r[3]=i):i=r[3],i}:function({handleCopyCode:e}){return(0,a.jsxs)(eg.l.Item,{onSelect:e,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.CopyIcon,{})}),"Copy",(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)(rq.U,{keys:"Mod+c"})})]})};function ao(e){window.getSelection()?.toString()!==""&&e.preventDefault()}let ac=(0,l.kw)()?function(){let e,t=(0,s.c)(1),{canExpandStartOfHunk:n,canExpandEndOfHunk:i}=rX(),{previousHunk:r,nextHunk:l}=tY();return n||i||r||l?(t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eg.l.Divider,{}),(0,a.jsx)(ad,{}),(0,a.jsx)(am,{})]}),t[0]=e):e=t[0],e):null}:function(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=rX(),{previousHunk:n,nextHunk:i}=tY();return e||t||n||i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eg.l.Divider,{}),(0,a.jsx)(ad,{}),(0,a.jsx)(am,{})]}):null},ad=(0,l.kw)()?function(){let e,t,n,i=(0,s.c)(9),{canExpandStartOfHunk:r,expandEndOfHunk:l,expandStartOfHunk:o,canExpandEndOfHunk:c}=rX();return i[0]!==r||i[1]!==o?(e=r&&(0,a.jsxs)(eg.l.Item,{onSelect:o,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.FoldUpIcon,{})}),"Expand above"]}),i[0]=r,i[1]=o,i[2]=e):e=i[2],i[3]!==c||i[4]!==l?(t=c&&(0,a.jsxs)(eg.l.Item,{onSelect:l,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.FoldDownIcon,{})}),"Expand below"]}),i[3]=c,i[4]=l,i[5]=t):t=i[5],i[6]!==e||i[7]!==t?(n=(0,a.jsxs)(a.Fragment,{children:[e,t]}),i[6]=e,i[7]=t,i[8]=n):n=i[8],n}:function(){let{canExpandStartOfHunk:e,expandEndOfHunk:t,expandStartOfHunk:n,canExpandEndOfHunk:i}=rX();return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsxs)(eg.l.Item,{onSelect:n,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.FoldUpIcon,{})}),"Expand above"]}),i&&(0,a.jsxs)(eg.l.Item,{onSelect:t,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.FoldDownIcon,{})}),"Expand below"]})]})},am=(0,l.kw)()?function(){let e,t,n,i,r,l=(0,s.c)(13),{previousHunk:o,nextHunk:c}=tY(),{fileAnchor:d}=tY(),m=!!o,u=!!c;l[0]!==d?(e=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${d}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},l[0]=d,l[1]=e):e=l[1];let h=e;l[2]!==d?(t=()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${d}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},l[2]=d,l[3]=t):t=l[3];let p=t;return l[4]!==h||l[5]!==u?(n=u?(0,a.jsxs)(eg.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:h,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.MoveToBottomIcon,{})}),"Go to next hunk",(0,a.jsx)(eg.l.TrailingVisual,{children:"Page Down"})]}):null,l[4]=h,l[5]=u,l[6]=n):n=l[6],l[7]!==p||l[8]!==m?(i=m?(0,a.jsxs)(eg.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:p,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.MoveToTopIcon,{})}),"Go to previous hunk",(0,a.jsx)(eg.l.TrailingVisual,{children:"Page Up"})]}):null,l[7]=p,l[8]=m,l[9]=i):i=l[9],l[10]!==n||l[11]!==i?(r=(0,a.jsxs)(a.Fragment,{children:[n,i]}),l[10]=n,l[11]=i,l[12]=r):r=l[12],r}:function(){let{previousHunk:e,nextHunk:t}=tY(),{fileAnchor:n}=tY();return(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsxs)(eg.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.MoveToBottomIcon,{})}),"Go to next hunk",(0,a.jsx)(eg.l.TrailingVisual,{children:"Page Down"})]}):null,e?(0,a.jsxs)(eg.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.MoveToTopIcon,{})}),"Go to previous hunk",(0,a.jsx)(eg.l.TrailingVisual,{children:"Page Up"})]}):null]})};try{r6.displayName||(r6.displayName="CellContextMenu")}catch{}try{r7.displayName||(r7.displayName="CopyAnchorLink")}catch{}try{r9.displayName||(r9.displayName="EmptyCellContextMenu")}catch{}try{at.displayName||(at.displayName="SelectAllListItem")}catch{}try{an.displayName||(an.displayName="MarkerListItems")}catch{}try{ai.displayName||(ai.displayName="ViewMarkerListItems")}catch{}try{ar.displayName||(ar.displayName="SplitDiffMarkersListItems")}catch{}try{aa.displayName||(aa.displayName="UnifiedDiffMarkerListItem")}catch{}try{al.displayName||(al.displayName="MarkerListItem")}catch{}try{as.displayName||(as.displayName="CopyContentListItems")}catch{}try{ac.displayName||(ac.displayName="HunkListItems")}catch{}try{ad.displayName||(ad.displayName="ExpandHunksListItems")}catch{}try{am.displayName||(am.displayName="JumpToHunkListItems")}catch{}var au=n(17998);let af="InProgressCommentIndicator-module__InProgressCommentIndicatorBackground--zV0pN",ah="InProgressCommentIndicator-module__InProgressCommentIndicatorContainer--HrW1B",ap=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(7),{authorAvatarUrl:r,authorLogin:l,lineSpacingPreference:o,sx:c}=e,d="compact"===o?18:20,m=`${l}'s avatar image with pending indicator`;return i[0]!==c?(t={...c},i[0]=c,i[1]=t):t=i[1],i[2]!==r||i[3]!==d||i[4]!==m||i[5]!==t?(n=(0,a.jsx)(au.k,{altText:m,icon:f.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:d,src:r,sx:t,backgroundClassName:af,className:ah}),i[2]=r,i[3]=d,i[4]=m,i[5]=t,i[6]=n):n=i[6],n}:function({authorAvatarUrl:e,authorLogin:t,lineSpacingPreference:n,sx:i}){return(0,a.jsx)(au.k,{altText:`${t}'s avatar image with pending indicator`,icon:f.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:"compact"===n?18:20,src:e,sx:{...i},backgroundClassName:af,className:ah})};try{ap.displayName||(ap.displayName="InProgressCommentIndicator")}catch{}function ag({ref:e,authorAvatarUrl:t,authorLogin:n,cellId:i,cellRef:r,showStartConversation:l,hasDraftComment:s,copilotChatReference:o,handleCopyCode:c,onOpenInLineThread:d,shouldDisplayCollapseComments:m,toggleViewingMarkers:h}){let p=(0,u.useRef)(null),g=(0,u.useRef)(null),{commentingEnabled:x,viewerData:{lineSpacingPreference:b,commentsPreference:j}}=ta(),{diffLine:C}=tY(),v=(0,u.useRef)(null),N=p.current?p:g;(0,rH.T)(e,N);let w=C.threadsData?.totalCommentsCount||0,S=C.annotationsData?.totalCount||0,{isActionBarFocused:L,handleActionBarBlur:_,handleActionBarFocusCapture:k,handleActionBarKeydownCapture:I}=r$({cellRef:r}),{annotations:D,isContextMenuOpen:T,startNewConversation:A,startNewConversationWithSuggestedChange:R,anyMenuOpen:$,threads:O,toggleContextMenu:P,toggleContextMenuFromActionBar:M}=rR({cellId:i,actionBarRef:v,onOpenInLineThread:d}),F=x&&w+S>0&&j===y.sI.Collapsed,B=x&&l,H={onBlur:_,onFocusCapture:k,onKeyDownCapture:I};return(0,a.jsxs)(a.Fragment,{children:[B&&(0,a.jsx)("div",{"aria-hidden":!L,className:(0,E.$)("d-flex","flex-row","ActionBar-module__left-action-bar--B2Plj"),children:(0,a.jsx)(a.Fragment,{children:s?(0,a.jsx)(U.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,E.$)("py-0","compact"===b?"ActionBar-module__left-action-bar-draft-compact--ru7MJ":"ActionBar-module__left-action-bar-draft-relaxed--nHQ2x",rz),onClick:A,...H,children:(0,a.jsx)(ap,{lineSpacingPreference:b,authorAvatarUrl:t,authorLogin:n})}):(0,a.jsx)(U.Q,{icon:f.PlusIcon,"aria-label":"Add comment",ref:g,size:"small",className:(0,E.$)("fgColor-muted","bgColor-accent-emphasis","fgColor-onEmphasis","px-0","ActionBar-module__left-action-bar-new--Emc9g","ActionBar-module__addCommentButtonNew--EgyyF",rz,"ActionBar-module__actionBarStartCommentWidth--f77cS"),onClick:A,...H})})}),(0,a.jsx)("div",{"aria-hidden":!L,className:(0,E.$)("d-flex","flex-row","ActionBar-module__action-bar-position--INpbt"),children:(0,a.jsxs)(iJ.A,{className:"ActionBar-module__action-bar-button-group--mW855",...H,children:[F&&(0,a.jsx)(U.Q,{ref:p,"aria-expanded":$,"aria-label":"View comments",size:"small",className:(0,E.$)("py-0","px-1",rz),onClick:e=>{(1===O.length||1===D.length)&&e.preventDefault(),h?.()},children:(0,a.jsx)(rW,{lineSpacingPreference:b})}),(0,a.jsxs)(nV.W,{anchorRef:v,open:T,onOpenChange:P,children:[(0,a.jsx)(nV.W.Anchor,{children:(0,a.jsx)(U.Q,{ref:v,"aria-haspopup":"true","aria-label":"More actions",icon:f.TriangleDownIcon,size:"small",className:(0,E.$)("fgColor-muted","ActionBar-module__actionBarArrowSizing--Fp2kh"),onClick:M})}),(0,a.jsx)(nV.W.Overlay,{width:"medium",children:(0,a.jsx)(eg.l,{children:(0,a.jsx)(r6,{shouldDisplayCollapseComments:m,copilotChatReference:o,showStartConversation:l,handleCopyCode:c,handleViewMarkersSelection:h,startConversationCurrentLine:A,startConversationWithSuggestedChange:R})})})]})]})})]})}ag.displayName="ActionBar";let ax="DiffHighlightedOverlay-module__visibilityHidden--OT0yL",ab="DiffHighlightedOverlay-module__userSelectNone--ubGdL";function ay({searchResults:e,focusedSearchResult:t,className:n,styleObject:i}){let r=0,l=e[0]?.text??"",s=e[0]?.diffLineNumIndex??-1,o=`overlay-${s}-${l}`;return(0,a.jsxs)("span",{className:(0,E.$)(n,"position-absolute",ab,!e[0].isHunk&&"DiffHighlightedOverlay-module__nonHunkStyles--JFK7K"),style:{...i},children:[e.map(e=>{var n,i;let s=e.indexWithinPathDigest===t,o=(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:(0,E.$)(ax,ab),children:l.substring(r,e.column)}),(0,a.jsx)("span",{className:(0,E.$)(ab,s&&"DiffHighlightedOverlay-module__focusedResultStyles--JG6X3",!s&&"DiffHighlightedOverlay-module__nonFocusedResultStyles--JUCld"),children:(0,a.jsx)("span",{className:(0,E.$)(!s&&ax),id:(n=e.indexWithinPathDigest,i=e.pathDigest,`match-${i}-${n}`),children:l.substring(e.column,e.columnEnd)})})]},`find-match-${e.diffLineNumIndex}-${e.column}`);return r=e.columnEnd,o}),(0,a.jsx)("span",{className:(0,E.$)(ax,ab),children:l.substring(r)})]},o)}try{ay.displayName||(ay.displayName="DiffHighlightedOverlay")}catch{}function aj(e){let t=(e.annotationsData?.annotations??[]).length>0,n=(e.threadsData?.threads??[]).length>0;switch(!0){case t&&n:return"Code has comments and alerts. Press enter to view.";case n:return"Code has comments. Press enter to view.";case t:return"Code has alerts. Press enter to view.";default:return""}}let aC=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(4),{diffLine:r}=e;i[0]!==r?(t=aj(r),i[0]=r,i[1]=t):t=i[1];let l=t;return l?(i[2]!==l?(n=(0,a.jsx)("span",{className:"sr-only user-select-none",children:l}),i[2]=l,i[3]=n):n=i[3],n):null}:function({diffLine:e}){let t=aj(e);return t?(0,a.jsx)("span",{className:"sr-only user-select-none",children:t}):null};try{aC.displayName||(aC.displayName="DiffLineScreenReaderSummary")}catch{}let av=["CONTEXT","INJECTED_CONTEXT"],aN=(0,l.kw)()?function(e){let t,n=(0,s.c)(3),{rowId:i}=tY();if(i)return n[0]!==e||n[1]!==i?(t=tx(i,e),n[0]=e,n[1]=i,n[2]=t):t=n[2],t}:function(e){let{rowId:t}=tY();if(t)return tx(t,e)},aw=(0,l.kw)()?function(e){let t,n,i,r,a,l,o,c=(0,s.c)(17),[d,m]=(0,u.useState)(!1),[f,h]=(0,u.useState)(!1),p=d?0:-1;c[0]!==e?(t=t=>{e.current&&e.current.contains(t.relatedTarget)||m(!1)},c[0]=e,c[1]=t):t=c[1];let g=t;c[2]!==e?(n=()=>{e.current===document.activeElement&&m(!0)},c[2]=e,c[3]=n):n=c[3];let x=n;c[4]!==e?(i=t=>{e.current&&!e.current.contains(t.relatedTarget)&&m(!1),h(!1)},c[4]=e,c[5]=i):i=c[5];let b=i;c[6]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{e.stopPropagation(),h(!0)},c[6]=r):r=c[6];let y=r;c[7]!==g||c[8]!==x?(a={onFocus:x,onBlur:g},c[7]=g,c[8]=x,c[9]=a):a=c[9];let j=a,C=!f;c[10]!==p||c[11]!==b||c[12]!==C?(l={"aria-hidden":C,tabIndex:p,onBlur:b,onFocusCapture:y,onKeyDownCapture:aS},c[10]=p,c[11]=b,c[12]=C,c[13]=l):l=c[13];let v=l;return c[14]!==v||c[15]!==j?(o=[j,v],c[14]=v,c[15]=j,c[16]=o):o=c[16],o}:function(e){let[t,n]=(0,u.useState)(!1),[i,r]=(0,u.useState)(!1),a=(0,u.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]);return[{onFocus:(0,u.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),onBlur:a},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:(0,u.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),r(!1)},[e]),onFocusCapture:(0,u.useCallback)(e=>{e.stopPropagation(),r(!0)},[]),onKeyDownCapture:(0,u.useCallback)(e=>{n_(e.key)&&e.stopPropagation()},[])}]};function aS(e){n_(e.key)&&e.stopPropagation()}let aL=(0,l.kw)()?function(e,t,n){let i,r=(0,s.c)(1),{selectedDiffRowRange:a}=tA(),l=!!a&&a.startLineNumber!==a.endLineNumber;if(a&&l&&n){let e;r[0]===Symbol.for("react.memo_cache_sentinel")?(e={left:"L",right:"R"},r[0]=e):e=r[0];let t=e,n=t[a.startOrientation],l=t[a.endOrientation];i="Add a comment on"+(a.startLineNumber!==a.endLineNumber?` lines ${n}${a.startLineNumber} to ${l}${a.endLineNumber}`:` line ${n}${a.startLineNumber}`)}else{let n=t&&!ty(e)?"L":"R";i=`Add a comment on line ${n}${e.blobLineNumber}`}return i}:function(e,t,n){let{selectedDiffRowRange:i}=tA();return(0,u.useMemo)(()=>{let r="Add a comment on",a=!!i&&i.startLineNumber!==i.endLineNumber;if(i&&a&&n){let e={left:"L",right:"R"},t=e[i.startOrientation],n=e[i.endOrientation];r+=i.startLineNumber!==i.endLineNumber?` lines ${t}${i.startLineNumber} to ${n}${i.endLineNumber}`:` line ${t}${i.startLineNumber}`}else{let n=t&&!ty(e)?"L":"R";r+=` line ${n}${e.blobLineNumber}`}return r},[e,t,i,n])};function a_({ref:e,children:t,ContextMenu:n,className:i,columnIndex:r,handleDiffCellClick:l,handleDiffCellMouseDown:s,handleExitDialogMode:o,handleHideMarkersFromFocus:c,handleDiffSideCellSelectionBlocking:d,handleStartConversation:m,handleUserClosedMarkersDialog:f,lineAnchor:h,firstLineNumberSelection:p,commentDialogOpen:g,enterDialogMode:x,hasThreads:b,...y}){let{diffLine:j,fileAnchor:C,isRowSelected:v,isLeftSide:N}=tY(),S=(0,u.useRef)(null);(0,u.useImperativeHandle)(e,()=>S.current,[]);let[L,_]=(0,u.useState)(!1),{selectedDiffRowRange:k}=tA(),{disableInlineCommentDialogMode:E,isInDialogMode:I}=nA(),D=(0,u.useRef)(null),T=(0,nz.U)(e=>{if(!e.target)return;let t=e.target;if(!L||D.current?.contains(t)||S.current?.contains(t)||2!==e.button?S.current?.contains(t)&&e.target.closest("button")?.contains(t)&&_(!1):_(!1),I){let t=!e.target.closest("[data-inline-markers]"),n=!e.target.closest("#__primerPortalRoot__");t&&n&&E()}});(0,u.useEffect)(()=>(w.XC?.addEventListener("mousedown",T),()=>w.XC?.removeEventListener("mousedown",T)),[T]),(0,u.useEffect)(()=>()=>w.XC?.removeEventListener("mousedown",T),[]);let A=(0,u.useCallback)(()=>{let e=tw({line:j,range:k,fileAnchor:C});e&&(0,nH.D)(e)},[C,j,k]),R=(0,u.useCallback)(()=>{p?.current&&(p.current=null)},[p]),$=(0,u.useCallback)(e=>{let t=e.target?.closest("td"),n=t?.classList.contains("diff-line-number");e.shiftKey?e.preventDefault():n?s?.():p&&(p.current=null),p&&n&&(p.current=N?j.left:j.right),d?.(e)},[d]),O=(0,u.useCallback)(()=>{S.current?.focus(),E(),o?.(),f?.()},[E,o,f]),P=rP({fileAnchor:C}),M=(0,u.useCallback)(async e=>{if(e.target===S.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault(),await P();return}if(e.target===S.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key)return void A();if(S.current?.contains(e.target)&&e?.key==="Escape")return void O();if(S.current?.contains(e.target)&&"true"===e.target.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),S.current?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(S.current?.contains(e.target)&&"true"===e.target.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),S.current?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}e.target===S.current&&"Enter"===e.key&&(x?.(),!1===b&&m?.(),e.preventDefault())},[P,A,O,x,b,m]),F=`inline-dialog-heading-${(0,u.useId)()}`;return(0,a.jsxs)("td",{ref:S,"data-grid-cell-id":aN(r),"data-line-anchor":h,"data-selected":v,role:I?"dialog":"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:i?`focusable-grid-cell ${i} ${r<3?"left-side":""}`:"focusable-grid-cell",onKeyDown:M,onBlur:e=>e.target.ariaSelected="false",onClick:l,onFocus:e=>e.target.ariaSelected="true",onMouseDown:$,onMouseUp:R,"aria-labelledby":I?F:void 0,...y,children:[I&&(0,a.jsx)("h1",{id:F,className:"sr-only",children:"Comment view"}),t,n&&L&&(0,a.jsx)(nV.W,{anchorRef:S,open:!0,onOpenChange:_,children:(0,a.jsx)(nV.W.Overlay,{width:t?"medium":"small",children:(0,a.jsx)(eg.l,{children:n})})})]})}let ak=(0,l.kw)()?function(){let e,t,n,i=(0,s.c)(5),{isSplit:r}=tY(),l=!r&&"hunk-kebab-icon-unified";return i[0]!==l?(e=(0,E.$)("hunk-kebab-icon pr-2 pb-1",l),i[0]=l,i[1]=e):e=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(f.KebabHorizontalIcon,{}),i[2]=t):t=i[2],i[3]!==e?(n=(0,a.jsx)("div",{className:e,children:t}),i[3]=e,i[4]=n):n=i[4],n}:function(){let{isSplit:e}=tY();return(0,a.jsx)("div",{className:(0,E.$)("hunk-kebab-icon pr-2 pb-1",!e&&"hunk-kebab-icon-unified"),children:(0,a.jsx)(f.KebabHorizontalIcon,{})})};function aE({ref:e,searchResultsForLine:t,focusedSearchResult:n,columnIndex:i,lineAnchor:r,firstLineNumberSelection:l,handleDiffCellClick:s,handleDiffSideCellSelectionBlocking:o,filePath:c,copilotChatReference:d}){let{diffLine:m,fileAnchor:h,isLeftSide:p,isRowSelected:g}=tY(),x=(0,M.u)("react_diff_line_type_character_correction"),[b,j]=tj(m.html,m.type,x),C=j&&["+","-"].includes(j),[v,N]=(0,u.useState)(""),{isActionBarVisible:S,hideActionBar:L,anyMenuOpen:_}=nB(),{selectedDiffRowRange:k,selectedDiffLines:I}=tA(),{commentBatchPending:D,commentingEnabled:T,commentingImplementation:A,initialExpandedThreadId:R,markerNavigationImplementation:$,repositoryId:O,subjectId:P,subject:B,viewerData:U}=ta(),{hasPersistedComment:H}=iA({diffSide:p?"LEFT":"RIGHT",filePath:c,line:m.blobLineNumber,subjectId:P,fileLevelComment:!1}),{isInDialogMode:z,enableInlineCommentDialogMode:V,disableInlineCommentDialogMode:G}=nA(),W=(0,u.useRef)(null),K=(0,u.useRef)(null);(0,u.useImperativeHandle)(e,()=>K.current,[]);let q=!!m.threadsData?.threads?.length||!!m.annotationsData?.annotations?.length,X=function({hasThreads:e}){return e?"80px":"24px"}({hasThreads:q&&U.commentsPreference===y.sI.Collapsed}),Q=aL(m,!!p,g),J=aN(i),{handleCellBlur:Y,handleCellFocus:Z,handleCellMouseEnter:ee,handleCellMouseLeave:et}=r$({cellRef:K});(0,u.useEffect)(()=>{if(S&&K.current)return function(e){let{element:t}=e;if(!t)return()=>{};let n={...e,pendingExit:!1};return rk.add(n),!rE&&w.XC&&(w.XC.addEventListener("pointermove",rD),w.XC.addEventListener("scroll",rT,!0),rE=!0),()=>{rk.delete(n),rA()}}({element:K.current,shouldIgnore:()=>{let e,t;return _||(e=w.XC?.activeElement,!!(t=K.current)&&!!e&&(t===e||t.contains(e)))},onPointerExit:L})},[_,L,S]);let en=(0,u.useRef)(null),[ei,er]=rF(U.commentsPreference),ea=(0,u.useCallback)((e=!0)=>{K.current?.classList.contains("diff-text-cell")&&(V(),er("USER_EXPANDED_MARKERS"),e&&setTimeout(()=>{K.current?.querySelector('[data-first-marker="true"]')?.focus()},0))},[er,V]),el=(0,u.useCallback)(()=>{setTimeout(()=>K.current?.focus()),G(),er("USER_MINIMIZED_MARKERS")},[G,er]),es=(0,u.useCallback)(()=>{U.commentsPreference===y.sI.Collapsed&&ei.showMarkers?el():ea()},[el,ea,ei.showMarkers,U.commentsPreference]),{annotations:eo,isNewConversationDialogOpen:ec,shouldStartNewConversationWithSuggestedChange:ed,startNewConversation:em,startNewConversationWithSuggestedChange:eu,selectAnnotation:ef,selectThread:eh,closeNewConversation:ep,closeMarkerListDialog:eg,returnFocusRef:ex,optimizedSelectedAnnotationId:eb,optimizedSelectedThreadId:ey,threads:ej}=rR({cellId:J,actionBarRef:W,onOpenInLineThread:ea}),eC=(0,u.useMemo)(()=>{var e;return!ec&&(e=U.viewerCanComment,T&&e&&((e,t)=>{if(!e)return!1;let n=t.leftLines.concat(t.rightLines);return n.length>0&&n.includes(e)?n.every(e=>!tb(e)&&t_.includes(e.type)):!tb(e)&&t_.includes(e.type)})(m,I))},[ec,T,U.viewerCanComment,m,I]);(0,u.useEffect)(()=>{A&&R&&ey!==R&&ej.map(e=>e.id).includes(R)&&eh(R,{skipLineSelection:!0})},[R]),(0,u.useEffect)(()=>{if(!$)return;let{activeGlobalMarkerID:e}=$;if(e){let t=ej.map(e=>e.id),n=eo.map(e=>e.id);t.includes(e)?eh(e,{skipLineSelection:!0}):n.includes(e)&&ef(e,{skipLineSelection:!0})}},[eh,ej,$,eo,ef]);let ev=rB(A?.suggestedChangesEnabled,m,ed),eN=(0,u.useCallback)(()=>{ea?.(),em?.()},[ea,em]),ew=(0,u.useCallback)(()=>{z||0!==(K.current?.querySelectorAll(":focus")??[]).length||G()},[G,z]),eS=(0,u.useRef)(!0),{ghostUser:eL}=ta(),e_=rP({fileAnchor:h}),ek=(0,u.useMemo)(()=>q&&U.commentsPreference===y.sI.Collapsed?!ei.userMinimized:(!!ec||!!q)&&!!T&&(U.commentsPreference===y.sI.Collapsed&&(!!ec||!!z)||U.commentsPreference===y.sI.Visible&&(!!q||!!ec||!!ei.showMarkers)||!1),[T,q,z,ec,ei.showMarkers,ei.userMinimized,U.commentsPreference]),eE=(0,u.useMemo)(()=>!!(m.text.length<1&&("CONTEXT"===m.type||"INJECTED_CONTEXT"===m.type)||("DELETION"===m.type||"ADDITION"===m.type)&&1===m.text.length&&["+","-"].includes(m.text.charAt(0))),[m]);return(0,a.jsxs)(a_,{ref:K,columnIndex:i,commentDialogOpen:ec,handleDiffCellClick:s,enterDialogMode:ea,handleDiffSideCellSelectionBlocking:o,handleExitDialogMode:()=>er("USER_EXITED_MARKERS_DIALOG"),handleUserClosedMarkersDialog:()=>er("USER_MINIMIZED_MARKERS"),lineAnchor:r,firstLineNumberSelection:l,handleStartConversation:eN,hasThreads:q,ContextMenu:(0,a.jsx)(r6,{shouldDisplayCollapseComments:ek,copilotChatReference:d,showStartConversation:eC,handleViewMarkersSelection:es,startConversationCurrentLine:eN,startConversationWithSuggestedChange:eu}),className:(0,E.$)(`diff-text-cell ${p?"left-side-diff-cell":"right-side-diff-cell"} ${eE?"pt-4":""}`,{"border-right":p&&"HUNK"!==m.type}),style:{backgroundColor:tI(m.type,!1,g),paddingRight:X},onBlur:e=>{Y(e),ew()},onFocus:Z,onMouseEnter:ee,onMouseLeave:et,children:[(0,a.jsxs)("code",{className:(0,E.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===m.type,deletion:"DELETION"===m.type}),children:[C&&(0,a.jsx)("span",{className:"diff-text-marker",children:j}),t&&t.length>0&&(0,a.jsx)(ay,{searchResults:t,focusedSearchResult:n,className:(0,E.$)("diff-text-inner",{"color-fg-muted":"HUNK"===m.type})}),(0,a.jsx)(F.$6,{html:b,className:(0,E.$)("diff-text-inner",{"color-fg-muted":"HUNK"===m.type})})]}),m.displayNoNewLineWarning&&(0,a.jsx)(f.NoEntryIcon,{size:16,className:"fgColor-danger"}),S&&(0,a.jsx)(ag,{shouldDisplayCollapseComments:ei.showMarkers,copilotChatReference:d,authorAvatarUrl:U.avatarUrl,authorLogin:U.login,ref:W,cellId:J,cellRef:K,hasDraftComment:H,showStartConversation:eC,onOpenInLineThread:ea,handleCopyCode:e_,toggleViewingMarkers:es}),A&&$&&(0,a.jsx)(a.Fragment,{children:ek?(0,a.jsx)(rj,{gutterSizeOffset:X,inlineMarkersRef:en,manuallyUpdateCommentsWithThisThreadId:v,annotations:eo,enterDialogMode:ea,batchPending:D,batchingEnabled:A.batchingEnabled,commentingImplementation:{...A,deleteComment:({onCompleted:e,...t})=>{A&&m&&A.deleteComment({...t,onCompleted:()=>{e?.(),ej.length<=1&&setTimeout(()=>K.current?.focus())},filePath:c})}},conversationListThreads:ej,fileAnchor:h,filePath:c,onCloseFocusMode:el,isMarkerListOpen:!!K.current?.classList.contains("diff-text-cell")&&ej.length>0,isRowSelected:g,lineType:m.type,repositoryId:O,returnFocusRef:ex,selectedAnnotationId:eb,selectedThreadId:ey||(K.current?.classList.contains("diff-text-cell")&&ej.length>0?ej[0]?.id:null),subjectId:P,subject:B,suggestedChangesConfig:ev,onCloseConversationList:eg,onAnnotationSelected:ef,onThreadSelected:eh,viewerData:U,ghostUser:eL,children:ec&&(0,a.jsx)("div",{className:(0,E.$)(" border rounded-2 color-border-default",(ej.length,"mt-2 mb-1")),children:(0,a.jsx)(rL,{isDialog:!1,addCommentDialogTitle:Q,anchorRef:K,batchPending:D,batchingEnabled:A.batchingEnabled,commentBoxSubject:A.commentBoxSubject,filePath:c,isLeftSide:!!p,isOpen:ec,lineNumber:g?k?.endLineNumber:m.blobLineNumber,repositoryId:O,returnFocusRef:ex,startLineNumber:g?k?.startLineNumber:void 0,subjectId:P,suggestedChangesConfig:ev,viewerData:U,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!A||!m)return;let{leftLines:i,rightLines:r}=I;if(k){var a;let e="left"===k.endOrientation?i:r,n=e[e.length-1];n&&(a=n)&&a!==tf&&n.threadsData?.__id&&(t=n.threadsData?.__id)}A.addThread({...n,diffLine:m,isLeftSide:p,isLineSelected:g,selectedDiffRowRange:k,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),eh(t),N(t)}})},onCloseCommentDialog:()=>{el(),ep()}})})}):null}),!S&&U.commentsPreference===y.sI.Collapsed&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===U.lineSpacingPreference?"-1px":"-2px"},className:(0,E.$)("position-absolute top-0 d-flex user-select-none","DiffLineTableCellParts-module__in-progress-comment-indicator--DmbGA"),children:H&&(0,a.jsx)(ap,{lineSpacingPreference:U.lineSpacingPreference,authorAvatarUrl:U.avatarUrl,authorLogin:U.login})}),(0,a.jsx)("div",{"aria-hidden":"true",className:(0,E.$)("position-absolute top-0 d-flex user-select-none","DiffLineTableCellParts-module__comment-indicator--EOzeT"),children:(0,a.jsx)(rW,{shouldAnimateRef:eS,lineSpacingPreference:U.lineSpacingPreference})})]}),(0,a.jsx)(aC,{diffLine:m})]})}let aI=(0,u.memo)(aE),aD=(0,u.memo)(aA),aT=(0,l.kw)();function aA(e){return aT?function(e){let t,n,i,r,l,o,c,d,m,f,h,p,g,x=(0,s.c)(40);if(x[0]!==e){let{children:a,columnIndex:s,handleDiffCellClick:c,handleDiffSideCellSelectionBlocking:d,firstLineNumberSelection:m,filePath:u,copilotChatReference:f,contentRef:h,...p}=e;t=a,n=s,r=c,l=d,i=m,o=p,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=r,x[5]=l,x[6]=o}else t=x[1],n=x[2],i=x[3],r=x[4],l=x[5],o=x[6];let b=(0,u.useRef)(null),{diffLine:y,fileAnchor:j,isLeftSide:C,isRowSelected:v}=tY(),{updateSelectedDiffRowRange:N}=tA();x[7]!==j||x[8]!==i||x[9]!==C||x[10]!==y.left||x[11]!==y.right||x[12]!==N?(c=()=>{i&&null!==i.current&&N(j,C?y.left:y.right,C?"left":"right",!0,!0)},x[7]=j,x[8]=i,x[9]=C,x[10]=y.left,x[11]=y.right,x[12]=N,x[13]=c):c=x[13];let w=c;x[14]!==j||x[15]!==C||x[16]!==y.left||x[17]!==y.right||x[18]!==N?(d=()=>{N(j,C?y.left:y.right,C?"left":"right",!1,!0)},x[14]=j,x[15]=C,x[16]=y.left,x[17]=y.right,x[18]=N,x[19]=d):d=x[19];let S=d;return x[20]!==y.type?(m=(0,E.$)("diff-line-number position-relative",av.includes(y.type)&&"diff-line-number-neutral"),x[20]=y.type,x[21]=m):m=x[21],x[22]!==v||x[23]!==y.type?(f=tI(y.type,!0,v),x[22]=v,x[23]=y.type,x[24]=f):f=x[24],x[25]!==f?(h={backgroundColor:f,textAlign:"center"},x[25]=f,x[26]=h):h=x[26],x[27]!==t?(p=(0,a.jsx)("code",{children:t}),x[27]=t,x[28]=p):p=x[28],x[29]!==n||x[30]!==i||x[31]!==r||x[32]!==l||x[33]!==S||x[34]!==w||x[35]!==o||x[36]!==m||x[37]!==h||x[38]!==p?(g=(0,a.jsx)(a_,{ref:b,className:m,columnIndex:n,handleDiffCellClick:r,handleDiffSideCellSelectionBlocking:l,firstLineNumberSelection:i,style:h,handleDiffCellMouseDown:S,onMouseEnter:w,...o,children:p}),x[29]=n,x[30]=i,x[31]=r,x[32]=l,x[33]=S,x[34]=w,x[35]=o,x[36]=m,x[37]=h,x[38]=p,x[39]=g):g=x[39],g}(e):function({children:e,columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:i,firstLineNumberSelection:r,filePath:l,copilotChatReference:s,contentRef:o,...c}){let d=(0,u.useRef)(null),{diffLine:m,fileAnchor:f,isLeftSide:h,isRowSelected:p}=tY(),{updateSelectedDiffRowRange:g}=tA(),x=(0,u.useCallback)(()=>{r&&null!==r.current&&g(f,h?m.left:m.right,h?"left":"right",!0,!0)},[f,h,m.left,m.right,r,g]),b=(0,u.useCallback)(()=>{g(f,h?m.left:m.right,h?"left":"right",!1,!0)},[f,h,m.left,m.right,g]);return(0,a.jsx)(a_,{ref:d,className:(0,E.$)("diff-line-number position-relative",av.includes(m.type)&&"diff-line-number-neutral"),columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:i,firstLineNumberSelection:r,style:{backgroundColor:tI(m.type,!0,p),textAlign:"center"},handleDiffCellMouseDown:b,onMouseEnter:x,...c,children:(0,a.jsx)("code",{children:e})})}(e)}let aR=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d=(0,s.c)(20),{ContextMenu:m,renderHunkButton:f,searchResultsForLine:h,focusedSearchResult:p}=e,g=(0,u.useRef)(null),[x,b]=aw(g),{diffLine:y}=tY();d[0]===Symbol.for("react.memo_cache_sentinel")?(t={backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},d[0]=t):t=d[0],d[1]!==b||d[2]!==f?(n=f?.(b)??(0,a.jsx)(ak,{}),d[1]=b,d[2]=f,d[3]=n):n=d[3],d[4]!==p||d[5]!==y.type||d[6]!==h?(i=h&&h.length>0&&(0,a.jsx)(ay,{searchResults:h,focusedSearchResult:p,className:(0,E.$)("diff-text-inner",{"color-fg-muted":"HUNK"===y.type})}),d[4]=p,d[5]=y.type,d[6]=h,d[7]=i):i=d[7];let j=y.html;return d[8]!==j?(r=(0,a.jsx)(F.$6,{className:"diff-text-inner color-fg-muted",html:j}),d[8]=j,d[9]=r):r=d[9],d[10]!==i||d[11]!==r?(l=(0,a.jsxs)("code",{className:"diff-text-cell hunk",children:[i,r]}),d[10]=i,d[11]=r,d[12]=l):l=d[12],d[13]!==n||d[14]!==l?(o=(0,a.jsxs)("div",{className:"d-flex flex-row",children:[n,l]}),d[13]=n,d[14]=l,d[15]=o):o=d[15],d[16]!==m||d[17]!==x||d[18]!==o?(c=(0,a.jsx)(a_,{ref:g,ContextMenu:m,colSpan:4,columnIndex:0,style:t,...x,className:"diff-hunk-cell",children:o}),d[16]=m,d[17]=x,d[18]=o,d[19]=c):c=d[19],c}:function({ContextMenu:e,renderHunkButton:t,searchResultsForLine:n,focusedSearchResult:i}){let r=(0,u.useRef)(null),[l,s]=aw(r),{diffLine:o}=tY();return(0,a.jsx)(a_,{ref:r,ContextMenu:e,colSpan:4,columnIndex:0,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...l,className:"diff-hunk-cell",children:(0,a.jsxs)("div",{className:"d-flex flex-row",children:[t?.(s)??(0,a.jsx)(ak,{}),(0,a.jsxs)("code",{className:"diff-text-cell hunk",children:[n&&n.length>0&&(0,a.jsx)(ay,{searchResults:n,focusedSearchResult:i,className:(0,E.$)("diff-text-inner",{"color-fg-muted":"HUNK"===o.type})}),(0,a.jsx)(F.$6,{className:"diff-text-inner color-fg-muted",html:o.html})]})]})})},a$=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(6),{columnIndex:l,showRightBorder:o}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(r9,{}),r[0]=t):t=r[0],r[1]!==o?(n=(0,E.$)("empty-diff-line",{"border-right":o}),r[1]=o,r[2]=n):n=r[2],r[3]!==l||r[4]!==n?(i=(0,a.jsx)(a_,{ContextMenu:t,className:n,columnIndex:l}),r[3]=l,r[4]=n,r[5]=i):i=r[5],i}:function({columnIndex:e,showRightBorder:t}){return(0,a.jsx)(a_,{ContextMenu:(0,a.jsx)(r9,{}),className:(0,E.$)("empty-diff-line",{"border-right":t}),columnIndex:e})};try{a_.displayName||(a_.displayName="Cell")}catch{}try{ak.displayName||(ak.displayName="HunkKebabIcon")}catch{}try{aE.displayName||(aE.displayName="ContentCellUnmemoized")}catch{}try{aI.displayName||(aI.displayName="ContentCell")}catch{}try{aD.displayName||(aD.displayName="LineNumberCell")}catch{}try{aA.displayName||(aA.displayName="LineNumberCellUnmemoized")}catch{}try{aR.displayName||(aR.displayName="HunkCell")}catch{}try{a$.displayName||(a$.displayName="EmptyCell")}catch{}let aO=(0,l.kw)()?e=>{let t,n,i,r,l,o,c,d,m,f,h,p=(0,s.c)(60),{resultsForLine:g,focusedSearchResult:x,handleDiffSideCellSelectionBlocking:b,handleDiffRowClick:y,lineAnchor:j,filePath:C,copilotChatReference:v,firstLineNumberSelection:N}=e,{diffLine:w,hasHiddenUnicodeCharacters:S,isLeftSide:L,isSplit:_,setInGridMode:k}=tY(),E=(0,u.useRef)(null),I="ADDITION"!==w.type,D=!_||L,T=D&&!I,A="DELETION"!==w.type,R=!_||!L,$=R&&!A;p[0]!==y||p[1]!==w.left?(t=e=>{w.left&&y(e,w.left,"left",e.shiftKey,!0)},p[0]=y,p[1]=w.left,p[2]=t):t=p[2];let O=t;p[3]!==y||p[4]!==w.left?(n=e=>{w.left&&y(e,w.left,"left",e.shiftKey,!1)},p[3]=y,p[4]=w.left,p[5]=n):n=p[5];let P=n;p[6]!==y||p[7]!==w.right?(i=e=>{w.right&&y(e,w.right,"right",e.shiftKey,!0)},p[6]=y,p[7]=w.right,p[8]=i):i=p[8];let M=i;p[9]!==y||p[10]!==w.right?(r=e=>{w.right&&y(e,w.right,"right",e.shiftKey,!1)},p[9]=y,p[10]=w.right,p[11]=r):r=p[11];let F=r;p[12]!==b?(l=()=>{b&&b("left")},p[12]=b,p[13]=l):l=p[13];let B=l;p[14]!==b?(o=()=>{b&&b("right")},p[14]=b,p[15]=o):o=p[15];let U=o;p[16]!==v||p[17]!==T||p[18]!==C||p[19]!==N||p[20]!==O||p[21]!==U||p[22]!==M||p[23]!==S||p[24]!==w.left||p[25]!==I||p[26]!==D||p[27]!==A?(c=D&&(0,a.jsxs)(aD,{copilotChatReference:v,columnIndex:0,filePath:C,handleDiffCellClick:T?M:O,handleDiffSideCellSelectionBlocking:U,firstLineNumberSelection:N,contentRef:E,children:[S&&!A&&(0,a.jsx)(aM,{children:(0,a.jsx)(nI.o,{})}),I&&w.left]}),p[16]=v,p[17]=T,p[18]=C,p[19]=N,p[20]=O,p[21]=U,p[22]=M,p[23]=S,p[24]=w.left,p[25]=I,p[26]=D,p[27]=A,p[28]=c):c=p[28],p[29]!==v||p[30]!==$||p[31]!==C||p[32]!==N||p[33]!==O||p[34]!==M||p[35]!==B||p[36]!==S||p[37]!==_||p[38]!==w.right||p[39]!==A||p[40]!==R?(d=R&&(0,a.jsxs)(aD,{copilotChatReference:v,columnIndex:_?2:1,filePath:C,handleDiffCellClick:$?O:M,handleDiffSideCellSelectionBlocking:B,firstLineNumberSelection:N,contentRef:E,children:[S&&A&&(0,a.jsx)(aM,{children:(0,a.jsx)(nI.o,{})}),A&&w.right]}),p[29]=v,p[30]=$,p[31]=C,p[32]=N,p[33]=O,p[34]=M,p[35]=B,p[36]=S,p[37]=_,p[38]=w.right,p[39]=A,p[40]=R,p[41]=d):d=p[41];let H=_?L?1:3:2,z=L?P:F,V=L?U:B;return p[42]!==v||p[43]!==C||p[44]!==N||p[45]!==x||p[46]!==j||p[47]!==g||p[48]!==z||p[49]!==V||p[50]!==H?(m=(0,a.jsx)(aI,{copilotChatReference:v,columnIndex:H,filePath:C,handleDiffCellClick:z,lineAnchor:j,handleDiffSideCellSelectionBlocking:V,searchResultsForLine:g,focusedSearchResult:x,firstLineNumberSelection:N,ref:E}),p[42]=v,p[43]=C,p[44]=N,p[45]=x,p[46]=j,p[47]=g,p[48]=z,p[49]=V,p[50]=H,p[51]=m):m=p[51],p[52]!==k||p[53]!==m?(f=(0,a.jsx)(nT,{enableDiffGridMode:k,children:m}),p[52]=k,p[53]=m,p[54]=f):f=p[54],p[55]!==w||p[56]!==f||p[57]!==c||p[58]!==d?(h=(0,a.jsxs)(nF,{line:w,children:[c,d,f]}),p[55]=w,p[56]=f,p[57]=c,p[58]=d,p[59]=h):h=p[59],h}:({resultsForLine:e,focusedSearchResult:t,handleDiffSideCellSelectionBlocking:n,handleDiffRowClick:i,lineAnchor:r,filePath:l,copilotChatReference:s,firstLineNumberSelection:o})=>{let{diffLine:c,hasHiddenUnicodeCharacters:d,isLeftSide:m,isSplit:f,setInGridMode:h}=tY(),p=(0,u.useRef)(null),g="ADDITION"!==c.type,x=!f||m,b=x&&!g,y="DELETION"!==c.type,j=!f||!m,C=j&&!y,v=(0,u.useCallback)(e=>{c.left&&i(e,c.left,"left",e.shiftKey,!0)},[i,c.left]),N=(0,u.useCallback)(e=>{c.left&&i(e,c.left,"left",e.shiftKey,!1)},[i,c.left]),w=(0,u.useCallback)(e=>{c.right&&i(e,c.right,"right",e.shiftKey,!0)},[i,c.right]),S=(0,u.useCallback)(e=>{c.right&&i(e,c.right,"right",e.shiftKey,!1)},[i,c.right]),L=(0,u.useCallback)(()=>{n&&n("left")},[n]),_=(0,u.useCallback)(()=>{n&&n("right")},[n]);return(0,a.jsxs)(nF,{line:c,children:[x&&(0,a.jsxs)(aD,{copilotChatReference:s,columnIndex:0,filePath:l,handleDiffCellClick:b?w:v,handleDiffSideCellSelectionBlocking:_,firstLineNumberSelection:o,contentRef:p,children:[d&&!y&&(0,a.jsx)(aM,{children:(0,a.jsx)(nI.o,{})}),g&&c.left]}),j&&(0,a.jsxs)(aD,{copilotChatReference:s,columnIndex:f?2:1,filePath:l,handleDiffCellClick:C?v:w,handleDiffSideCellSelectionBlocking:L,firstLineNumberSelection:o,contentRef:p,children:[d&&y&&(0,a.jsx)(aM,{children:(0,a.jsx)(nI.o,{})}),y&&c.right]}),(0,a.jsx)(nT,{enableDiffGridMode:h,children:(0,a.jsx)(aI,{copilotChatReference:s,columnIndex:f?m?1:3:2,filePath:l,handleDiffCellClick:m?N:S,lineAnchor:r,handleDiffSideCellSelectionBlocking:m?_:L,searchResultsForLine:e,focusedSearchResult:t,firstLineNumberSelection:o,ref:p})})]})},aP=(0,l.kw)()?e=>{let t,n=(0,s.c)(23),{resultsForLine:i,focusedSearchResult:r,fileAnchor:l,filePath:o,handleDiffRowClick:c,handleDiffSideCellSelectionBlocking:d,copilotChatReference:m,firstLineNumberSelection:u}=e,{diffLine:f,isLeftSide:h}=tY();if(tb(f)){let e,t,i,r=2*!h;n[0]!==r?(e=(0,a.jsx)(a$,{columnIndex:r}),n[0]=r,n[1]=e):e=n[1];let l=h?1:3;return n[2]!==h||n[3]!==l?(t=(0,a.jsx)(a$,{columnIndex:l,showRightBorder:h}),n[2]=h,n[3]=l,n[4]=t):t=n[4],n[5]!==e||n[6]!==t?(i=(0,a.jsxs)(a.Fragment,{children:[e,t]}),n[5]=e,n[6]=t,n[7]=i):i=n[7],i}if(n[8]!==f.left||n[9]!==f.right||n[10]!==f.type||n[11]!==l||n[12]!==h){let e=h?"left":(0,e6.XU)(f.type),i="left"===e?f.left:f.right;t=(0,e6.IQ)(l,e,i??0),n[8]=f.left,n[9]=f.right,n[10]=f.type,n[11]=l,n[12]=h,n[13]=t}else t=n[13];let p=t;switch(f.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":{let e;return n[14]!==m||n[15]!==o||n[16]!==u||n[17]!==r||n[18]!==c||n[19]!==d||n[20]!==p||n[21]!==i?(e=(0,a.jsx)(aB,{copilotChatReference:m,filePath:o,handleDiffRowClick:c,handleDiffSideCellSelectionBlocking:d,lineAnchor:p,resultsForLine:i,focusedSearchResult:r,firstLineNumberSelection:u}),n[14]=m,n[15]=o,n[16]=u,n[17]=r,n[18]=c,n[19]=d,n[20]=p,n[21]=i,n[22]=e):e=n[22],e}default:throw Error(`cannot handle type ${f.type}`)}}:({resultsForLine:e,focusedSearchResult:t,fileAnchor:n,filePath:i,handleDiffRowClick:r,handleDiffSideCellSelectionBlocking:l,copilotChatReference:s,firstLineNumberSelection:o})=>{let{diffLine:c,isLeftSide:d}=tY();if(tb(c))return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(a$,{columnIndex:2*!d}),(0,a.jsx)(a$,{columnIndex:d?1:3,showRightBorder:d})]});let m=d?"left":(0,e6.XU)(c.type),u="left"===m?c.left:c.right,f=(0,e6.IQ)(n,m,u??0);switch(c.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,a.jsx)(aB,{copilotChatReference:s,filePath:i,handleDiffRowClick:r,handleDiffSideCellSelectionBlocking:l,lineAnchor:f,resultsForLine:e,focusedSearchResult:t,firstLineNumberSelection:o});default:throw Error(`cannot handle type ${c.type}`)}},aM=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(3),{children:r}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={left:"-1px",zIndex:"1"},i[0]=t):t=i[0],i[1]!==r?(n=(0,a.jsx)("span",{className:"position-absolute",style:t,children:r}),i[1]=r,i[2]=n):n=i[2],n}:function({children:e}){return(0,a.jsx)("span",{className:"position-absolute",style:{left:"-1px",zIndex:"1"},children:e})},aF=u.memo(aP),aB=u.memo(aO);try{aO.displayName||(aO.displayName="CodeDiffLineUnmemoized")}catch{}try{aP.displayName||(aP.displayName="DiffLineSideUnmemoized")}catch{}try{aM.displayName||(aM.displayName="DiffCodeAlert")}catch{}try{aF.displayName||(aF.displayName="DiffLineSide")}catch{}try{aB.displayName||(aB.displayName="CodeDiffLine")}catch{}let aU="ExpandableHunkHeaderDiffLine-module__expand-button-line--iUeM1",aH="ExpandableHunkHeaderDiffLine-module__expand-up-and-down--_W5im",az="ExpandableHunkHeaderDiffLine-module__expand-button-unified--zEXxI",aV=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,u,f,h=(0,s.c)(23);h[0]!==e?({direction:l,icon:t,label:o,onClick:c,ariaLabel:i,className:r,...n}=e,h[0]=e,h[1]=t,h[2]=n,h[3]=i,h[4]=r,h[5]=l,h[6]=o,h[7]=c):(t=h[1],n=h[2],i=h[3],r=h[4],l=h[5],o=h[6],c=h[7]);let{sendAnalyticsEvent:p}=(0,id.s)(),{isSplit:g}=tY();h[8]!==c||h[9]!==p?(d=()=>{c(),p("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},h[8]=c,h[9]=p,h[10]=d):d=h[10];let x=!g&&az;h[11]!==r||h[12]!==x?(m=(0,E.$)("Button Button--iconOnly Button--invisible",aU,x,r),h[11]=r,h[12]=x,h[13]=m):m=h[13];let b=i??o;return h[14]!==t?(u=(0,a.jsx)(t,{}),h[14]=t,h[15]=u):u=h[15],h[16]!==n||h[17]!==l||h[18]!==d||h[19]!==m||h[20]!==b||h[21]!==u?(f=(0,a.jsx)("button",{onClick:d,className:m,"aria-label":b,"data-direction":l,...n,children:u}),h[16]=n,h[17]=l,h[18]=d,h[19]=m,h[20]=b,h[21]=u,h[22]=f):f=h[22],f}:function({direction:e,icon:t,label:n,onClick:i,ariaLabel:r,className:l,...s}){let{sendAnalyticsEvent:o}=(0,id.s)(),{isSplit:c}=tY();return(0,a.jsx)("button",{onClick:()=>{i(),o("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,E.$)("Button Button--iconOnly Button--invisible",aU,!c&&az,l),"aria-label":r??n,"data-direction":e,...s,children:(0,a.jsx)(t,{})})},aG=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,u,h,p,g=(0,s.c)(29),{nextLine:x,prevLine:b,resultsForLine:y,focusedSearchResult:j}=e,{fileLineCount:C,diffLine:v}=tY(),{expandStartOfHunk:N,expandEndOfPreviousHunk:w}=rX(),S=!b,L=!x,_=0===v.blobLineNumber,k=S||L,E=L&&v.blobLineNumber===C;e:{if(k||v.blobLineNumber<=0){t=!1;break e}if(v.blobLineNumber-b.blobLineNumber<=20||x.blobLineNumber-v.blobLineNumber>=20){t=!0;break e}t=!1}let I=t;t:{if(k||E){n=!1;break t}if(v.blobLineNumber-b.blobLineNumber>20){n=!0;break t}n=!1}let D=n;n:{if(v.blobLineNumber<=0||_){i=!1;break n}if(S){i=!0;break n}i=!1}let T=i;i:{if(S||E){r=!1;break i}if(L){r=!0;break i}r=!1}let A=r;r:{switch(!0){case I:l="expand-all";break r;case D:l="expand-up-and-down";break r;case T:l="expand-up";break r;case A:l="expand-down";break r}l=void 0}let R=l;g[0]!==N?(o=()=>N(),g[0]=N,g[1]=o):o=g[1];let $=o;g[2]!==w?(c=()=>w(),g[2]=w,g[3]=c):c=g[3];let O=c;g[4]!==N?(d=()=>N(),g[4]=N,g[5]=d):d=g[5];let P=d;g[6]!==v.html||g[7]!==v.type?(m=()=>{let[e]=tj(tv(v.html),v.type);(0,nH.D)(e)},g[6]=v.html,g[7]=v.type,g[8]=m):m=g[8];let M=m;g[9]!==R||g[10]!==$||g[11]!==P||g[12]!==O||g[13]!==x?.blobLineNumber||g[14]!==b?.blobLineNumber?(u=e=>{switch(R){case"expand-all":return(0,a.jsx)(aV,{...e,direction:"all",icon:f.UnfoldIcon,label:`Expand file from line ${b?.blobLineNumber||""} to line ${x?.blobLineNumber||""}`,onClick:P});case"expand-up-and-down":return(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)(aV,{...e,direction:"down",icon:f.FoldDownIcon,label:`Expand file down from line ${b?.blobLineNumber||""}`,className:aH,onClick:O}),(0,a.jsx)(aV,{...e,direction:"up",icon:f.FoldUpIcon,label:`Expand file up from line ${x?.blobLineNumber||""}`,className:aH,onClick:$})]});case"expand-up":return(0,a.jsx)(aV,{...e,direction:"up",icon:f.FoldUpIcon,label:`Expand file up from line ${x?.blobLineNumber||""}`,onClick:$});case"expand-down":return(0,a.jsx)(aV,{...e,direction:"down",icon:f.FoldDownIcon,label:`Expand file down from line ${b?.blobLineNumber||""}`,onClick:O});default:return null}},g[9]=R,g[10]=$,g[11]=P,g[12]=O,g[13]=x?.blobLineNumber,g[14]=b?.blobLineNumber,g[15]=u):u=g[15];let F=u,B=!!v.html,U=D||T,H=D||A;return g[16]!==M||g[17]!==$||g[18]!==P||g[19]!==O||g[20]!==B||g[21]!==U||g[22]!==H?(h=(0,a.jsx)(aW,{handleCopyContent:M,handleExpandAbove:$,handleExpandAll:P,handleExpandBelow:O,shouldCopyContent:B,shouldExpandAbove:U,shouldExpandBelow:H}),g[16]=M,g[17]=$,g[18]=P,g[19]=O,g[20]=B,g[21]=U,g[22]=H,g[23]=h):h=g[23],g[24]!==j||g[25]!==F||g[26]!==y||g[27]!==h?(p=(0,a.jsx)(aR,{searchResultsForLine:y,focusedSearchResult:j,renderHunkButton:F,ContextMenu:h}),g[24]=j,g[25]=F,g[26]=y,g[27]=h,g[28]=p):p=g[28],p}:function({nextLine:e,prevLine:t,resultsForLine:n,focusedSearchResult:i}){let{fileLineCount:r,diffLine:l}=tY(),{expandStartOfHunk:s,expandEndOfPreviousHunk:o}=rX(),c=!t,d=!e,m=0===l.blobLineNumber,h=c||d,p=d&&l.blobLineNumber===r,g=(0,u.useMemo)(()=>!h&&!(l.blobLineNumber<=0)&&(!!(l.blobLineNumber-t.blobLineNumber<=20)||!!(e.blobLineNumber-l.blobLineNumber>=20)),[h,l,e,t]),x=(0,u.useMemo)(()=>!h&&!p&&l.blobLineNumber-t.blobLineNumber>20,[h,p,l,t]),b=(0,u.useMemo)(()=>!(l.blobLineNumber<=0)&&!m&&!!c,[c,m,l]),y=(0,u.useMemo)(()=>!c&&!p&&!!d,[c,d,p]),j=(0,u.useMemo)(()=>{switch(!0){case g:return"expand-all";case x:return"expand-up-and-down";case b:return"expand-up";case y:return"expand-down"}},[g,x,b,y]),C=()=>s(),v=()=>o(),N=()=>s();return(0,a.jsx)(aR,{searchResultsForLine:n,focusedSearchResult:i,renderHunkButton:n=>{switch(j){case"expand-all":return(0,a.jsx)(aV,{...n,direction:"all",icon:f.UnfoldIcon,label:`Expand file from line ${t?.blobLineNumber||""} to line ${e?.blobLineNumber||""}`,onClick:N});case"expand-up-and-down":return(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)(aV,{...n,direction:"down",icon:f.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,className:aH,onClick:v}),(0,a.jsx)(aV,{...n,direction:"up",icon:f.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,className:aH,onClick:C})]});case"expand-up":return(0,a.jsx)(aV,{...n,direction:"up",icon:f.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,onClick:C});case"expand-down":return(0,a.jsx)(aV,{...n,direction:"down",icon:f.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,onClick:v});default:return null}},ContextMenu:(0,a.jsx)(aW,{handleCopyContent:()=>{let[e]=tj(tv(l.html),l.type);(0,nH.D)(e)},handleExpandAbove:C,handleExpandAll:N,handleExpandBelow:v,shouldCopyContent:!!l.html,shouldExpandAbove:x||b,shouldExpandBelow:x||y})})},aW=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,u,h=(0,s.c)(31),{shouldExpandBelow:p,shouldExpandAbove:g,shouldCopyContent:x,handleExpandAll:b,handleExpandBelow:y,handleExpandAbove:j,handleCopyContent:C}=e;if(h[0]!==C||h[1]!==j||h[2]!==b||h[3]!==y||h[4]!==x||h[5]!==g||h[6]!==p){let e,s,m={includeShiftKey:!0,key:"["},u={key:"]"},v={key:"["},N={key:"C"};n=nV.W.Overlay,d="medium",t=eg.l,h[15]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.UnfoldIcon,{})}),h[15]=e):e=h[15],h[16]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${tS(m)}`})}),h[16]=s):s=h[16],h[17]!==b?(i=(0,a.jsxs)(eg.l.Item,{"aria-keyshortcuts":tL(m),onSelect:b,children:[e,"Expand all",s]}),h[17]=b,h[18]=i):i=h[18],r=g?(0,a.jsxs)(eg.l.Item,{"aria-keyshortcuts":tL(u),onSelect:j,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.FoldUpIcon,{})}),"Expand above",(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${tS(u)}`})})]}):null,l=p?(0,a.jsxs)(eg.l.Item,{"aria-keyshortcuts":tL(v),onSelect:y,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.FoldDownIcon,{})}),"Expand below",(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${tS(v)}`})})]}):null,h[19]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(am,{}),h[19]=o):o=h[19],c=x?(0,a.jsxs)(eg.l.Item,{"aria-keyshortcuts":tL(N),onSelect:C,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.CopyIcon,{})}),"Copy",(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${tS(N)}`})})]}):null,h[0]=C,h[1]=j,h[2]=b,h[3]=y,h[4]=x,h[5]=g,h[6]=p,h[7]=t,h[8]=n,h[9]=i,h[10]=r,h[11]=l,h[12]=o,h[13]=c,h[14]=d}else t=h[7],n=h[8],i=h[9],r=h[10],l=h[11],o=h[12],c=h[13],d=h[14];return h[20]!==t||h[21]!==i||h[22]!==r||h[23]!==l||h[24]!==o||h[25]!==c?(m=(0,a.jsxs)(t,{children:[i,r,l,o,c]}),h[20]=t,h[21]=i,h[22]=r,h[23]=l,h[24]=o,h[25]=c,h[26]=m):m=h[26],h[27]!==n||h[28]!==d||h[29]!==m?(u=(0,a.jsx)(n,{width:d,children:m}),h[27]=n,h[28]=d,h[29]=m,h[30]=u):u=h[30],u}:function({shouldExpandBelow:e,shouldExpandAbove:t,shouldCopyContent:n,handleExpandAll:i,handleExpandBelow:r,handleExpandAbove:l,handleCopyContent:s}){let o={includeShiftKey:!0,key:"["},c={key:"]"},d={key:"["},m={key:"C"};return(0,a.jsx)(nV.W.Overlay,{width:"medium",children:(0,a.jsxs)(eg.l,{children:[(0,a.jsxs)(eg.l.Item,{"aria-keyshortcuts":tL(o),onSelect:i,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.UnfoldIcon,{})}),"Expand all",(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${tS(o)}`})})]}),t?(0,a.jsxs)(eg.l.Item,{"aria-keyshortcuts":tL(c),onSelect:l,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.FoldUpIcon,{})}),"Expand above",(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${tS(c)}`})})]}):null,e?(0,a.jsxs)(eg.l.Item,{"aria-keyshortcuts":tL(d),onSelect:r,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.FoldDownIcon,{})}),"Expand below",(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${tS(d)}`})})]}):null,(0,a.jsx)(am,{}),n?(0,a.jsxs)(eg.l.Item,{"aria-keyshortcuts":tL(m),onSelect:s,children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.CopyIcon,{})}),"Copy",(0,a.jsx)(eg.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${tS(m)}`})})]}):null]})})};try{aV.displayName||(aV.displayName="ExpandButtonLine")}catch{}try{aG.displayName||(aG.displayName="ExpandableHunkHeaderDiffLine")}catch{}try{aW.displayName||(aW.displayName="HunkContextMenu")}catch{}let aK=(0,u.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:i,diffEntryId:r,diffHasHiddenUnicodeCharacters:l,diffLines:s,fileAnchor:o,fileLineCount:c,filePath:d,handleDiffRowClick:m,handleDiffSideCellSelectionBlocking:f,replaceSelectedDiffRowRangeFromGridCells:h,selectedDiffRowRange:p,setInGridMode:g,showHiddenUnicode:x,tableRef:b,updateDiffLines:y,copilotChatReference:j,inGridMode:C,firstLineNumberSelection:v}){let{leftLines:N,rightLines:w}=function(e){let t=e.reduce((e,t)=>e+(t.threadsData?.totalCount??0),0)??0,{leftLines:n,rightLines:i}=(0,u.useMemo)(()=>(function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(tf);for(;n.length<t.length;)n.push(tf)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":var r;i();let[e,l]=[{...r=a,threadsData:void 0,annotationsData:void 0},{...r,threadsData:r.threadsData?{...r.threadsData,threads:r.threadsData.threads,totalCommentsCount:r.threadsData.totalCommentsCount,totalCount:r.threadsData.totalCount}:void 0}];t.push(e),n.push(l);break;case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}})(e),[e,t]);return{leftLines:n,rightLines:i}}(s),{ghostUser:S}=ta();nk({clearSelectedDiffRowRange:i,containerRef:b,fileAnchor:o,isSplitDiff:!0,leftLines:N,replaceSelectedDiffRowRangeFromGridCells:h,rightLines:w,disabled:!C});let L=(0,u.useMemo)(()=>{if(p)return tD({selectedDiffRowRange:p,leftLines:N,rightLines:w,isNumberCell:!0})},[p,N,w]);(0,u.useEffect)(()=>{y(o,s)},[s,o,y]);let _=(0,u.useMemo)(()=>tH(N),[N]),k=new Map,E=new Map,I=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(k.has(n.leftLineNumber)?k.get(n.leftLineNumber)?.push(n):-1!==n.leftLineNumber&&k.set(n.leftLineNumber,[n]),I.has(n.hunkLineNumber)?I.get(n.hunkLineNumber)?.push(n):n.isHunk&&I.set(n.hunkLineNumber,[n]),E.has(n.rightLineNumber)?E.get(n.rightLineNumber)?.push(n):-1!==n.rightLineNumber&&E.set(n.rightLineNumber,[n]))}let D=e=>{let t=!1;return l&&!tb(e)&&(t=(0,e8.Y)(e.text),x&&t&&(e=e.html?{...e,html:(0,tX.Gx)(e.html)??e.html}:{...e,text:(0,e8.TA)(e.text)})),[e,t]},T=[];for(let e=0;e<N.length;e++){let i=N[e],l=w[e],s=N[e-1],[u,h]=D(i),[p,x]=D(l),b=tb(N[e+1])?w[e+1]:N[e+1],y=!!u&&u!==tf&&"HUNK"===u.type,C=tg(o,u,p),A=tb(u)?tb(p)?void 0:p:u;if(!A)continue;let R=tb(u)?void 0:u.threadsData,$=tb(p)?void 0:p.threadsData,{currentHunk:O,nextHunk:P,previousHunk:M}=tU(A,_),F=k.get(tb(u)?-2:u.left??-2),B=E.get(tb(p)?-2:p.right??-2),U=I.get(A.blobLineNumber),H=U?.[0]?.rightLineNumber===p?.right?n:void 0,z=F?.[0]?.leftLineNumber===u?.left?n:void 0,V=B?.[0]?.rightLineNumber===p?.right?n:void 0,G=tZ($,S),W=tZ(R,S),K={currentHunk:O,diffEntryId:r,fileAnchor:o,fileLineCount:c,filePath:d,isRowSelected:(L?.isRowSelected(i)||L?.isRowSelected(l))??!1,nextHunk:P,previousHunk:M,rowId:C,isSplit:!0,diffContext:t,setInGridMode:g};T.push((0,a.jsx)("tr",{className:"diff-line-row",children:y?(0,a.jsx)(tJ,{...K,hasHiddenUnicodeCharacters:h||x,diffLine:A,modifiedLineThreads:G,originalLineThreads:W,children:(0,a.jsx)(aG,{nextLine:b,prevLine:s,focusedSearchResult:H,resultsForLine:U})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tJ,{...K,diffLine:u,hasHiddenUnicodeCharacters:h,isLeftSide:!0,modifiedLineThreads:G,originalLineThreads:W,children:(0,a.jsx)(aF,{copilotChatReference:j,fileAnchor:o,filePath:d,handleDiffRowClick:m,handleDiffSideCellSelectionBlocking:f,resultsForLine:F,focusedSearchResult:z,firstLineNumberSelection:v})}),(0,a.jsx)(tJ,{...K,diffLine:p,hasHiddenUnicodeCharacters:x,modifiedLineThreads:G,originalLineThreads:W,children:(0,a.jsx)(aF,{copilotChatReference:j,fileAnchor:o,filePath:d,handleDiffRowClick:m,handleDiffSideCellSelectionBlocking:f,resultsForLine:B,focusedSearchResult:V,firstLineNumberSelection:v})})]})},C))}return(0,a.jsx)(a.Fragment,{children:T})});try{aK.displayName||(aK.displayName="SplitDiffLines")}catch{}let aq=(0,u.memo)((0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m=(0,s.c)(38),{searchResults:f,diffContext:h,focusedSearchResult:p,clearSelectedDiffRowRange:g,diffEntryId:x,diffHasHiddenUnicodeCharacters:b,diffLines:y,fileLineCount:j,fileAnchor:C,filePath:v,tableRef:N,selectedDiffRowRange:w,showHiddenUnicode:S,handleDiffRowClick:L,updateDiffLines:_,replaceSelectedDiffRowRangeFromGridCells:k,copilotChatReference:E,setInGridMode:I,inGridMode:D,firstLineNumberSelection:T}=e,A=void 0===h?"pr":h,R=!D;m[0]!==g||m[1]!==C||m[2]!==k||m[3]!==y||m[4]!==R||m[5]!==N?(t={clearSelectedDiffRowRange:g,containerRef:N,fileAnchor:C,isSplitDiff:!1,leftLines:y,replaceSelectedDiffRowRangeFromGridCells:k,disabled:R},m[0]=g,m[1]=C,m[2]=k,m[3]=y,m[4]=R,m[5]=N,m[6]=t):t=m[6],nk(t);e:{let e;if(!w){n=void 0;break e}m[7]!==y||m[8]!==w?(e=tD({selectedDiffRowRange:w,leftLines:y,isNumberCell:!0}),m[7]=y,m[8]=w,m[9]=e):e=m[9],n=e}let $=n;m[10]!==y?(i=tH(y.map(aX)),m[10]=y,m[11]=i):i=m[11];let O=i;if(m[12]!==y||m[13]!==C||m[14]!==_?(r=()=>{_(C,y)},l=[y,C,_],m[12]=y,m[13]=C,m[14]=_,m[15]=r,m[16]=l):(r=m[15],l=m[16]),(0,u.useEffect)(r,l),m[17]!==f){o=new Map;for(let e=0;e<(f?.length??0);e++){let t=f?.[e];t&&(f&&o.has(t.diffLineNumIndex)?o.get(t.diffLineNumIndex)?.push(t):f&&o.set(t.diffLineNumIndex,[t]))}m[17]=f,m[18]=o}else o=m[18];m[19]!==E||m[20]!==A||m[21]!==x||m[22]!==b||m[23]!==y||m[24]!==$||m[25]!==C||m[26]!==j||m[27]!==v||m[28]!==T||m[29]!==p||m[30]!==L||m[31]!==O||m[32]!==o||m[33]!==I||m[34]!==S?(c=y.map((e,t)=>{let n=e,i=y[t+1],r=y[t-1],l="HUNK"===e.type,s=(0,e6.IQ)(C,(0,e6.XU)(n.type),n.blobLineNumber),{currentHunk:c,nextHunk:d,previousHunk:m}=tU(n,O),u=o.get(t),f=t===u?.[0]?.diffLineNumIndex?p:void 0,h=$?.isRowSelected(e)??!1,g=tg(C,n,n),N=b&&(0,e8.Y)(n.text);S&&N&&(n=n.html?{...n,html:(0,tX.Gx)(n.html)??n.html}:{...n,text:(0,e8.TA)(n.text)});let w={diffEntryId:x,diffLine:n,currentHunk:c,fileAnchor:C,fileLineCount:j,filePath:v,hasHiddenUnicodeCharacters:N,isLeftSide:"DELETION"===n.type,isRowSelected:h,isSplit:!1,nextHunk:d,previousHunk:m,diffContext:A,rowId:g,setInGridMode:I};return(0,a.jsx)("tr",{className:"diff-line-row",children:(0,a.jsx)(tJ,{...w,children:l?(0,a.jsx)(aG,{nextLine:i,prevLine:r,focusedSearchResult:f,resultsForLine:u}):(0,a.jsx)(aB,{filePath:v,copilotChatReference:E,handleDiffRowClick:L,firstLineNumberSelection:T,lineAnchor:s,resultsForLine:u,focusedSearchResult:f})})},g)}),m[19]=E,m[20]=A,m[21]=x,m[22]=b,m[23]=y,m[24]=$,m[25]=C,m[26]=j,m[27]=v,m[28]=T,m[29]=p,m[30]=L,m[31]=O,m[32]=o,m[33]=I,m[34]=S,m[35]=c):c=m[35];let P=c;return m[36]!==P?(d=(0,a.jsx)(a.Fragment,{children:P}),m[36]=P,m[37]=d):d=m[37],d}:function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:i,diffEntryId:r,diffHasHiddenUnicodeCharacters:l,diffLines:s,fileLineCount:o,fileAnchor:c,filePath:d,tableRef:m,selectedDiffRowRange:f,showHiddenUnicode:h,handleDiffRowClick:p,updateDiffLines:g,replaceSelectedDiffRowRangeFromGridCells:x,copilotChatReference:b,setInGridMode:y,inGridMode:j,firstLineNumberSelection:C}){nk({clearSelectedDiffRowRange:i,containerRef:m,fileAnchor:c,isSplitDiff:!1,leftLines:s,replaceSelectedDiffRowRangeFromGridCells:x,disabled:!j});let v=(0,u.useMemo)(()=>{if(f)return tD({selectedDiffRowRange:f,leftLines:s,isNumberCell:!0})},[f,s]),N=(0,u.useMemo)(()=>tH(s.map(e=>e)),[s]);(0,u.useEffect)(()=>{g(c,s)},[s,c,g]);let w=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(e&&w.has(n.diffLineNumIndex)?w.get(n.diffLineNumIndex)?.push(n):e&&w.set(n.diffLineNumIndex,[n]))}let S=s.map((e,i)=>{let m=e,u=s[i+1],f=s[i-1],g="HUNK"===e.type,x=(0,e6.IQ)(c,(0,e6.XU)(m.type),m.blobLineNumber),{currentHunk:j,nextHunk:S,previousHunk:L}=tU(m,N),_=w.get(i),k=i===_?.[0]?.diffLineNumIndex?n:void 0,E=v?.isRowSelected(e)??!1,I=tg(c,m,m),D=l&&(0,e8.Y)(m.text);h&&D&&(m=m.html?{...m,html:(0,tX.Gx)(m.html)??m.html}:{...m,text:(0,e8.TA)(m.text)});let T={diffEntryId:r,diffLine:m,currentHunk:j,fileAnchor:c,fileLineCount:o,filePath:d,hasHiddenUnicodeCharacters:D,isLeftSide:"DELETION"===m.type,isRowSelected:E,isSplit:!1,nextHunk:S,previousHunk:L,diffContext:t,rowId:I,setInGridMode:y};return(0,a.jsx)("tr",{className:"diff-line-row",children:(0,a.jsx)(tJ,{...T,children:g?(0,a.jsx)(aG,{nextLine:u,prevLine:f,focusedSearchResult:k,resultsForLine:_}):(0,a.jsx)(aB,{filePath:d,copilotChatReference:b,handleDiffRowClick:p,firstLineNumberSelection:C,lineAnchor:x,resultsForLine:_,focusedSearchResult:k})})},I)});return(0,a.jsx)(a.Fragment,{children:S})});try{aq.displayName||(aq.displayName="UnifiedDiffLines")}catch{}function aX(e){return e}let aQ=(0,l.kw)()?function(e){let t,n=(0,s.c)(3),{diffAnchor:i,children:r}=e;return n[0]!==r||n[1]!==i?(t=(0,a.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":i,children:r}),n[0]=r,n[1]=i,n[2]=t):t=n[2],t}:function({diffAnchor:e,children:t}){return(0,a.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})},aJ=(0,u.memo)((0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,u,f,h,p=(0,s.c)(54);p[0]!==e?({searchResults:m,diffContext:u,focusedSearchResult:o,diffEntryData:r,diffLinesManuallyUnhidden:l,baseHelpUrl:t,onHandleLoadDiff:d,copilotChatReference:n,hasExpandedAllRanges:c,...i}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=i,p[4]=r,p[5]=l,p[6]=o,p[7]=c,p[8]=d,p[9]=m,p[10]=u):(t=p[1],n=p[2],i=p[3],r=p[4],l=p[5],o=p[6],c=p[7],d=p[8],m=p[9],u=p[10]);let g=void 0===u?"pr":u,x=`diff-${r.pathDigest}`;if(r.isBinary){let e;return p[11]!==x?(e=(0,a.jsx)(aQ,{diffAnchor:x,children:"Binary file not shown."}),p[11]=x,p[12]=e):e=p[12],e}if((0,eQ.dK)(r)){let e;return p[13]!==x?(e=(0,a.jsx)(aQ,{diffAnchor:x,children:"File renamed without changes."}),p[13]=x,p[14]=e):e=p[14],e}if((0,eQ.Jc)(r)){let e;return p[15]!==x?(e=(0,a.jsx)(aQ,{diffAnchor:x,children:"File copied without changes."}),p[15]=x,p[16]=e):e=p[16],e}if((0,eQ.Sn)(r,r.status,r.oldTreeEntry?.mode,r.newTreeEntry?.mode)){let e;return p[17]!==x?(e=(0,a.jsx)(aQ,{diffAnchor:x,children:"File mode changed."}),p[17]=x,p[18]=e):e=p[18],e}if(!l&&(0,eQ.HI)(r)){let e,t,n=r.truncatedReason;return p[19]!==n?(e=(0,eQ.l_)(n),p[19]=n,p[20]=e):e=p[20],p[21]!==x||p[22]!==d||p[23]!==e?(t=(0,a.jsx)(tq,{diffAnchor:x,onLoadDiff:d,children:e}),p[21]=x,p[22]=d,p[23]=e,p[24]=t):t=p[24],t}if((0,eQ.s8)(r)){let e;return p[25]!==x?(e=(0,a.jsx)(aQ,{diffAnchor:x,children:"Whitespace-only changes."}),p[25]=x,p[26]=e):e=p[26],e}if(!l&&(0,eQ.lO)(r)){let e;return p[27]!==x||p[28]!==d?(e=(0,a.jsx)(tq,{diffAnchor:x,onLoadDiff:d,children:"This file was deleted."}),p[27]=x,p[28]=d,p[29]=e):e=p[29],e}if(!l&&(0,eQ.xW)(r)){let e,n=`${t}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`;return p[30]!==x||p[31]!==d||p[32]!==n?(e=(0,a.jsxs)(tq,{diffAnchor:x,helpText:"customizing how changed files appear on GitHub.",helpUrl:n,onLoadDiff:d,children:["Some generated files are not rendered by default. Learn more about"," "]}),p[30]=x,p[31]=d,p[32]=n,p[33]=e):e=p[33],e}if(r.isTooBig&&0===r.diffLines.length)if(l){let e,n,i=`${t}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`;return p[34]!==i?(e=(0,a.jsx)(H.A,{inline:!0,href:i,children:"check out this pull request locally."}),p[34]=i,p[35]=e):e=p[35],p[36]!==x||p[37]!==e?(n=(0,a.jsxs)(aQ,{diffAnchor:x,children:["Diff is too big to render. To view,"," ",e]}),p[36]=x,p[37]=e,p[38]=n):n=p[38],n}else{let e;return p[39]!==x||p[40]!==d?(e=(0,a.jsx)(tq,{diffAnchor:x,onLoadDiff:d,children:"Large diffs are not rendered by default."}),p[39]=x,p[40]=d,p[41]=e):e=p[41],e}return r.diffLines?(p[42]!==n||p[43]!==x||p[44]!==g||p[45]!==i.viewerData||p[46]!==r||p[47]!==o||p[48]!==c||p[49]!==m?(f=(0,a.jsx)(tP,{children:(0,a.jsx)(aY,{diffAnchor:x,diffContext:g,diffEntryData:r,viewerData:i.viewerData,focusedSearchResult:o,searchResults:m,copilotChatReference:n,hasExpandedAllRanges:c})}),p[42]=n,p[43]=x,p[44]=g,p[45]=i.viewerData,p[46]=r,p[47]=o,p[48]=c,p[49]=m,p[50]=f):f=p[50],p[51]!==i||p[52]!==f?(h=(0,a.jsx)(tr,{...i,children:f}),p[51]=i,p[52]=f,p[53]=h):h=p[53],h):null}:function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,diffEntryData:i,diffLinesManuallyUnhidden:r,baseHelpUrl:l,onHandleLoadDiff:s,copilotChatReference:o,hasExpandedAllRanges:c,...d}){let m=`diff-${i.pathDigest}`;if(i.isBinary)return(0,a.jsx)(aQ,{diffAnchor:m,children:"Binary file not shown."});if((0,eQ.dK)(i))return(0,a.jsx)(aQ,{diffAnchor:m,children:"File renamed without changes."});if((0,eQ.Jc)(i))return(0,a.jsx)(aQ,{diffAnchor:m,children:"File copied without changes."});if((0,eQ.Sn)(i,i.status,i.oldTreeEntry?.mode,i.newTreeEntry?.mode))return(0,a.jsx)(aQ,{diffAnchor:m,children:"File mode changed."});if(!r&&(0,eQ.HI)(i))return(0,a.jsx)(tq,{diffAnchor:m,onLoadDiff:s,children:(0,eQ.l_)(i.truncatedReason)});if((0,eQ.s8)(i))return(0,a.jsx)(aQ,{diffAnchor:m,children:"Whitespace-only changes."});if(!r&&(0,eQ.lO)(i))return(0,a.jsx)(tq,{diffAnchor:m,onLoadDiff:s,children:"This file was deleted."});if(!r&&(0,eQ.xW)(i))return(0,a.jsxs)(tq,{diffAnchor:m,helpText:"customizing how changed files appear on GitHub.",helpUrl:`${l}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:s,children:["Some generated files are not rendered by default. Learn more about"," "]});if(i.isTooBig&&0===i.diffLines.length)if(r)return(0,a.jsxs)(aQ,{diffAnchor:m,children:["Diff is too big to render. To view,"," ",(0,a.jsx)(H.A,{inline:!0,href:`${l}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});else return(0,a.jsx)(tq,{diffAnchor:m,onLoadDiff:s,children:"Large diffs are not rendered by default."});return i.diffLines?(0,a.jsx)(tr,{...d,children:(0,a.jsx)(tP,{children:(0,a.jsx)(aY,{diffAnchor:m,diffContext:t,diffEntryData:i,viewerData:d.viewerData,focusedSearchResult:n,searchResults:e,copilotChatReference:o,hasExpandedAllRanges:c})})}):null}),aY=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,f,h,p,g,x,b,y,C,v,N,S,L,_=(0,s.c)(73),{diffAnchor:k,viewerData:I,diffEntryData:D,searchResults:T,focusedSearchResult:A,copilotChatReference:R,diffContext:$,hasExpandedAllRanges:O}=e,P=(0,u.useRef)(null),[M,F]=(0,u.useState)(!0),[B,U]=(0,u.useState)(null),[H,z]=(0,u.useState)(!1),V=D.newTreeEntry?.lineCount??D.oldTreeEntry?.lineCount??0;e:{let e=D.diffLines[D.diffLines.length-1];if(e?.blobLineNumber&&e.blobLineNumber<V){let n;_[0]!==D.diffLines||_[1]!==e.blobLineNumber?(n=D.diffLines.concat({__id:tF,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}),_[0]=D.diffLines,_[1]=e.blobLineNumber,_[2]=n):n=_[2],t=n;break e}t=D.diffLines}let G=t,{diffViewPreference:W,lineSpacingPreference:K,tabSizePreference:q}=I,{selectedDiffRowRange:X,replaceSelectedDiffRowRange:Q,replaceSelectedDiffRowRangeFromGridCells:J,clearSelectedDiffRowRange:Y,updateDiffLines:Z,updateSelectedDiffRowRange:ee}=tA();_[3]!==Y?(n=e=>{if(!P.current||!e.target)return;let t=e.target,n=t.closest("td.diff-line-number"),i=P.current.contains(t);n&&!i&&(Y(),eo.current=null)},_[3]=Y,_[4]=n):n=_[4];let et=n;_[5]!==et?(i=()=>(w.XC?.addEventListener("mousedown",et),()=>{w.XC?.removeEventListener("mousedown",et)}),r=[et],_[5]=et,_[6]=i,_[7]=r):(i=_[6],r=_[7]),(0,u.useEffect)(i,r);let en=k===X?.diffAnchor;t:{let e,t=D.status,n=D.oldTreeEntry?.path,i=D.newTreeEntry?.path;if(!n&&!i){l=void 0;break t}e="RENAMED"===t?`${n} renamed to ${i}`:"DELETED"===t||"REMOVED"===t?n:i,l=`Diff for: ${e}`}let ei=l;_[8]!==G||_[9]!==en||_[10]!==Q||_[11]!==X?(o=()=>{if(!en)return;let e=tp(X,G);e&&e!==X&&Q(e)},c=[G,X,en,Q],_[8]=G,_[9]=en,_[10]=Q,_[11]=X,_[12]=o,_[13]=c):(o=_[12],c=_[13]),(0,u.useEffect)(o,c);let er=w.cg?.location.search;n:{if("split"===new URLSearchParams(er).get("diff")){d=!0;break n}d="split"===W}let ea=d;_[14]!==G?(m=(0,e6.c7)(G),_[14]=G,_[15]=m):m=_[15];let el=m;_[16]===Symbol.for("react.memo_cache_sentinel")?(f=e=>{U(e)},_[16]=f):f=_[16];let es=f,eo=(0,u.useRef)(null);_[17]!==D.path||_[18]!==O||_[19]!==M?(h=e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!O&&M&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${D.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},_[17]=D.path,_[18]=O,_[19]=M,_[20]=h):h=_[20];let ec=h;_[21]!==k||_[22]!==ee?(p=(e,t,n,i,r)=>{tz(e.target)||!e.defaultPrevented&&r&&ee(k,t,n,i,r)},_[21]=k,_[22]=ee,_[23]=p):p=_[23];let ed=p;_[24]!==B||_[25]!==ea?(g=e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${ea?`, ${"left"===B?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else 1===t.rangeCount?n.push(t.toString()):n.push(i.textContent)}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},_[24]=B,_[25]=ea,_[26]=g):g=_[26];let em=g;_[27]!==G?(x=G.some(aZ),_[27]=G,_[28]=x):x=_[28];let eu=x,ef=en?X:null;_[29]!==Y||_[30]!==R||_[31]!==k||_[32]!==$||_[33]!==D.objectId||_[34]!==D.path||_[35]!==eu||_[36]!==G||_[37]!==V||_[38]!==A||_[39]!==ed||_[40]!==M||_[41]!==J||_[42]!==T||_[43]!==H||_[44]!==ef||_[45]!==Z||_[46]!==ee?(b={searchResults:T,diffContext:$,focusedSearchResult:A,clearSelectedDiffRowRange:Y,diffEntryId:D.objectId,diffHasHiddenUnicodeCharacters:eu,diffLines:G,fileAnchor:k,fileLineCount:V,filePath:D.path,handleDiffRowClick:ed,handleDiffSideCellSelectionBlocking:es,replaceSelectedDiffRowRangeFromGridCells:J,selectedDiffRowRange:ef,showHiddenUnicode:H,tableRef:P,updateDiffLines:Z,updateSelectedDiffRowRange:ee,copilotChatReference:R,setInGridMode:F,inGridMode:M,firstLineNumberSelection:eo},_[29]=Y,_[30]=R,_[31]=k,_[32]=$,_[33]=D.objectId,_[34]=D.path,_[35]=eu,_[36]=G,_[37]=V,_[38]=A,_[39]=ed,_[40]=M,_[41]=J,_[42]=T,_[43]=H,_[44]=ef,_[45]=Z,_[46]=ee,_[47]=b):b=_[47];let eh=b;_[48]!==eu||_[49]!==H?(y=eu&&(0,a.jsx)(e7.a,{isShown:H,toggleShowHiddenCharacters:()=>z(!H)}),_[48]=eu,_[49]=H,_[50]=y):y=_[50];let ep="compact"===K;_[51]!==ep?(C=(0,E.$)("tab-size","width-full",tV,{[tG]:ep}),_[51]=ep,_[52]=C):C=_[52];let eg=`${el}px`,ex=`${2*parseFloat(el)}px`;return _[53]!==eg||_[54]!==ex?(v={"--line-number-cell-width":eg,"--line-number-cell-width-unified":ex},_[53]=eg,_[54]=ex,_[55]=v):v=_[55],_[56]!==eh||_[57]!==ea||_[58]!==el?(N=ea?(0,a.jsx)(j.wj,{lineWidth:el,children:(0,a.jsx)(aK,{...eh})}):(0,a.jsx)(j.Qe,{lineWidth:el,children:(0,a.jsx)(aq,{...eh})}),_[56]=eh,_[57]=ea,_[58]=el,_[59]=N):N=_[59],_[60]!==k||_[61]!==B||_[62]!==ec||_[63]!==em||_[64]!==C||_[65]!==v||_[66]!==N||_[67]!==q||_[68]!==ei?(S=(0,a.jsx)("table",{"aria-label":ei,onKeyDown:ec,ref:P,className:C,"data-block-diff-cell-selection":B,"data-diff-anchor":k,"data-tab-size":q,"data-paste-markdown-skip":!0,onCopy:em,role:"grid",style:v,children:N}),_[60]=k,_[61]=B,_[62]=ec,_[63]=em,_[64]=C,_[65]=v,_[66]=N,_[67]=q,_[68]=ei,_[69]=S):S=_[69],_[70]!==y||_[71]!==S?(L=(0,a.jsxs)(a.Fragment,{children:[y,S]}),_[70]=y,_[71]=S,_[72]=L):L=_[72],L}:function({diffAnchor:e,viewerData:t,diffEntryData:n,searchResults:i,focusedSearchResult:r,copilotChatReference:l,diffContext:s,hasExpandedAllRanges:o}){let c=(0,u.useRef)(null),[d,m]=(0,u.useState)(!0),[f,h]=(0,u.useState)(null),[p,g]=(0,u.useState)(!1),x=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,b=(0,u.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<x?n.diffLines.concat({__id:tF,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,x]),{diffViewPreference:y,lineSpacingPreference:C,tabSizePreference:v}=t,{selectedDiffRowRange:N,replaceSelectedDiffRowRange:S,replaceSelectedDiffRowRangeFromGridCells:L,clearSelectedDiffRowRange:_,updateDiffLines:k,updateSelectedDiffRowRange:I}=tA(),D=(0,u.useCallback)(e=>{if(!c.current||!e.target)return;let t=e.target,n=t.closest("td.diff-line-number"),i=c.current.contains(t);n&&!i&&(_(),M.current=null)},[_,c]);(0,u.useEffect)(()=>(w.XC?.addEventListener("mousedown",D),()=>{w.XC?.removeEventListener("mousedown",D)}),[D]);let T=e===N?.diffAnchor,A=(0,u.useMemo)(()=>{let e,t=n.status,i=n.oldTreeEntry?.path,r=n.newTreeEntry?.path;if(i||r)return e="RENAMED"===t?`${i} renamed to ${r}`:"DELETED"===t||"REMOVED"===t?i:r,`Diff for: ${e}`},[n]);(0,u.useEffect)(()=>{if(!T)return;let e=tp(N,b);e&&e!==N&&S(e)},[b,N,T,S]);let R=w.cg?.location.search,$=(0,u.useMemo)(()=>"split"===new URLSearchParams(R).get("diff")||"split"===y,[R,y]),O=(0,e6.c7)(b),P=(0,u.useCallback)(e=>{h(e)},[h]),M=(0,u.useRef)(null),F=(0,u.useCallback)(e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!o&&d&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${n.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},[o,d,n.path]),B=(0,u.useCallback)((t,n,i,r,a)=>{tz(t.target)||!t.defaultPrevented&&a&&I(e,n,i,r,a)},[e,I]),U=(0,u.useCallback)(e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${$?`, ${"left"===f?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else 1===t.rangeCount?n.push(t.toString()):n.push(i.textContent)}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},[f,$]),H=(0,u.useMemo)(()=>b.some(e=>(0,e8.Y)(e.text)),[b]),z={searchResults:i,diffContext:s,focusedSearchResult:r,clearSelectedDiffRowRange:_,diffEntryId:n.objectId,diffHasHiddenUnicodeCharacters:H,diffLines:b,fileAnchor:e,fileLineCount:x,filePath:n.path,handleDiffRowClick:B,handleDiffSideCellSelectionBlocking:P,replaceSelectedDiffRowRangeFromGridCells:L,selectedDiffRowRange:T?N:null,showHiddenUnicode:p,tableRef:c,updateDiffLines:k,updateSelectedDiffRowRange:I,copilotChatReference:l,setInGridMode:m,inGridMode:d,firstLineNumberSelection:M};return(0,a.jsxs)(a.Fragment,{children:[H&&(0,a.jsx)(e7.a,{isShown:p,toggleShowHiddenCharacters:()=>g(!p)}),(0,a.jsx)("table",{"aria-label":A,onKeyDown:F,ref:c,className:(0,E.$)("tab-size","width-full",tV,{[tG]:"compact"===C}),"data-block-diff-cell-selection":f,"data-diff-anchor":e,"data-tab-size":v,"data-paste-markdown-skip":!0,onCopy:U,role:"grid",style:{"--line-number-cell-width":`${O}px`,"--line-number-cell-width-unified":`${2*parseFloat(O)}px`},children:$?(0,a.jsx)(j.wj,{lineWidth:O,children:(0,a.jsx)(aK,{...z})}):(0,a.jsx)(j.Qe,{lineWidth:O,children:(0,a.jsx)(aq,{...z})})})]})};function aZ(e){return(0,e8.Y)(e.text)}try{aQ.displayName||(aQ.displayName="PlainTextStatus")}catch{}try{aJ.displayName||(aJ.displayName="DiffLines")}catch{}try{aY.displayName||(aY.displayName="CodeDiffLines")}catch{}var a0=n(78049);let a1="SubmoduleDiff-module__filesActionList--bnkEy",a2="SubmoduleDiff-module__fileRowLinkItem--B6ZhJ",a3="SubmoduleDiff-module__path--M3Bxi",a4="SubmoduleDiff-module__fileRow--HYQLm",a5="SubmoduleDiff-module__linesAdded--db7oX",a6="SubmoduleDiff-module__linesDeleted--zx_Ak",a7=(0,l.kw)()?function(e){let t,n,i,r,l,o,c=(0,s.c)(28),{submodule:d}=e,{basePath:m,changedFiles:u,contentsUrl:h,newCommitOid:p,oldCommitOid:g,status:x,submoduleUrl:b}=d,y=d.summary.length>0&&d.contentsUrl&&"MODIFIED"===x;switch(x){case"ADDED":{let e;c[0]!==h||c[1]!==p?(e=(0,a.jsx)(le,{commitOid:p,contentsUrl:h,type:"added"}),c[0]=h,c[1]=p,c[2]=e):e=c[2],t=e;break}case"DELETED":case"REMOVED":{let e;c[3]!==h||c[4]!==g?(e=(0,a.jsx)(le,{commitOid:g,contentsUrl:h,type:"deleted"}),c[3]=h,c[4]=g,c[5]=e):e=c[5],t=e;break}default:{let e;c[6]!==u||c[7]!==h||c[8]!==p||c[9]!==g?(e=(0,a.jsx)(lt,{newCommitOid:p,oldCommitOid:g,changedFiles:u,contentsUrl:h}),c[6]=u,c[7]=h,c[8]=p,c[9]=g,c[10]=e):e=c[10],t=e}}let j=t,C=`px-3 py-2 ${y?"border-bottom bgColor-muted":""}`;return c[11]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(f.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),c[11]=n):n=c[11],c[12]!==m||c[13]!==b?(i=(0,a.jsx)(a8,{basePath:m,submoduleUrl:b}),c[12]=m,c[13]=b,c[14]=i):i=c[14],c[15]!==j||c[16]!==C||c[17]!==i?(r=(0,a.jsxs)("div",{className:C,children:[n,i,j]}),c[15]=j,c[16]=C,c[17]=i,c[18]=r):r=c[18],c[19]!==h||c[20]!==p||c[21]!==g||c[22]!==y||c[23]!==d.summary?(l=y&&(0,a.jsx)(eg.l,{className:a1,showDividers:!0,variant:"full",children:d.summary.map(e=>(0,a.jsx)(ln,{compareUrl:`${h}/compare/${g}...${p}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))}),c[19]=h,c[20]=p,c[21]=g,c[22]=y,c[23]=d.summary,c[24]=l):l=c[24],c[25]!==r||c[26]!==l?(o=(0,a.jsxs)("div",{children:[r,l]}),c[25]=r,c[26]=l,c[27]=o):o=c[27],o}:function({submodule:e}){let{basePath:t,changedFiles:n,contentsUrl:i,newCommitOid:r,oldCommitOid:l,status:s,submoduleUrl:o}=e,c=e.summary.length>0&&e.contentsUrl&&"MODIFIED"===s,d=(0,u.useMemo)(()=>{switch(s){case"ADDED":return(0,a.jsx)(le,{commitOid:r,contentsUrl:i,type:"added"});case"DELETED":case"REMOVED":return(0,a.jsx)(le,{commitOid:l,contentsUrl:i,type:"deleted"});default:return(0,a.jsx)(lt,{newCommitOid:r,oldCommitOid:l,changedFiles:n,contentsUrl:i})}},[r,l,s,n,i]);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:`px-3 py-2 ${c?"border-bottom bgColor-muted":""}`,children:[(0,a.jsx)(f.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),(0,a.jsx)(a8,{basePath:t,submoduleUrl:o}),d]}),c&&(0,a.jsx)(eg.l,{className:a1,showDividers:!0,variant:"full",children:e.summary.map(e=>(0,a.jsx)(ln,{compareUrl:`${i}/compare/${l}...${r}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))})]})},a8=(0,l.kw)()?function(e){let t,n,i=(0,s.c)(5),{basePath:r,submoduleUrl:l}=e;return i[0]!==r||i[1]!==l?(t=l?(0,a.jsx)(H.A,{inline:!0,href:l,children:r}):r,i[0]=r,i[1]=l,i[2]=t):t=i[2],i[3]!==t?(n=(0,a.jsxs)(a.Fragment,{children:["Submodule"," ",t," "]}),i[3]=t,i[4]=n):n=i[4],n}:function({basePath:e,submoduleUrl:t}){return(0,a.jsxs)(a.Fragment,{children:["Submodule"," ",t?(0,a.jsx)(H.A,{inline:!0,href:t,children:e}):e," "]})};function a9(e){return e.slice(0,7)}let le=(0,l.kw)()?function(e){let t=(0,s.c)(13),{commitOid:n,contentsUrl:i,type:r}=e,l=void 0===n?"":n,o="added"===r?"added at":"deleted from";if(i){let e,n,r,s=`${i}/tree/${l}`;return t[0]!==l?(e=a9(l),t[0]=l,t[1]=e):e=t[1],t[2]!==s||t[3]!==e?(n=(0,a.jsx)(H.A,{inline:!0,href:s,children:e}),t[2]=s,t[3]=e,t[4]=n):n=t[4],t[5]!==n||t[6]!==o?(r=(0,a.jsxs)(a.Fragment,{children:[o," ",n]}),t[5]=n,t[6]=o,t[7]=r):r=t[7],r}{let e,n;return t[8]!==l?(e=a9(l),t[8]=l,t[9]=e):e=t[9],t[10]!==e||t[11]!==o?(n=(0,a.jsxs)(a.Fragment,{children:[o," ",e]}),t[10]=e,t[11]=o,t[12]=n):n=t[12],n}}:function({commitOid:e="",contentsUrl:t,type:n}){let i="added"===n?"added at":"deleted from";return t?(0,a.jsxs)(a.Fragment,{children:[i," ",(0,a.jsx)(H.A,{inline:!0,href:`${t}/tree/${e}`,children:a9(e)})]}):(0,a.jsxs)(a.Fragment,{children:[i," ",a9(e)]})},lt=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(12),{newCommitOid:l,oldCommitOid:o,changedFiles:c,contentsUrl:d}=e,m=void 0===l?"":l,u=void 0===o?"":o,f=void 0===c?0:c;r[0]!==f||r[1]!==d||r[2]!==m||r[3]!==u?(t=f>0&&d?`${f} ${1===f?"file":"files"}`:`from ${a9(u)} to ${a9(m)}`,r[0]=f,r[1]=d,r[2]=m,r[3]=u,r[4]=t):t=r[4];let h=t;return r[5]!==h||r[6]!==d||r[7]!==m||r[8]!==u?(n=d?(0,a.jsx)(H.A,{inline:!0,href:`${d}/compare/${u}...${m}`,children:h}):h,r[5]=h,r[6]=d,r[7]=m,r[8]=u,r[9]=n):n=r[9],r[10]!==n?(i=(0,a.jsxs)(a.Fragment,{children:["updated"," ",n]}),r[10]=n,r[11]=i):i=r[11],i}:function({newCommitOid:e="",oldCommitOid:t="",changedFiles:n=0,contentsUrl:i}){let r=n>0&&i?`${n} ${1===n?"file":"files"}`:`from ${a9(t)} to ${a9(e)}`;return(0,a.jsxs)(a.Fragment,{children:["updated"," ",i?(0,a.jsx)(H.A,{inline:!0,href:`${i}/compare/${t}...${e}`,children:r}):r]})},ln=(0,l.kw)()?function(e){let t,n,i,r,l,o,c=(0,s.c)(16),{compareUrl:d,linesAdded:m,linesDeleted:u,path:f,pathDigest:h,status:p}=e,g=`${d}#diff-${h}`;return c[0]!==p?(t=(0,a.jsx)(a0.E,{status:p}),c[0]=p,c[1]=t):t=c[1],c[2]!==f?(n=(0,a.jsx)("span",{className:a3,children:f}),c[2]=f,c[3]=n):n=c[3],c[4]!==m||c[5]!==u?(i=(m>0||u>0)&&(0,a.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,a.jsx)("div",{className:a5,children:m>0&&(0,a.jsxs)(eX.C,{isAddition:!0,children:["+",li(m)]})}),(0,a.jsx)("div",{className:a6,children:u>0&&(0,a.jsxs)(eX.C,{isAddition:!1,children:["-",li(u)]})})]}),c[4]=m,c[5]=u,c[6]=i):i=c[6],c[7]!==n||c[8]!==i?(r=(0,a.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[n,i]}),c[7]=n,c[8]=i,c[9]=r):r=c[9],c[10]!==t||c[11]!==r?(l=(0,a.jsxs)(P.B,{gap:"condensed",direction:"horizontal",align:"center",className:a4,children:[t,r]}),c[10]=t,c[11]=r,c[12]=l):l=c[12],c[13]!==g||c[14]!==l?(o=(0,a.jsx)(eg.l.LinkItem,{href:g,className:a2,children:l}),c[13]=g,c[14]=l,c[15]=o):o=c[15],o}:function({compareUrl:e,linesAdded:t,linesDeleted:n,path:i,pathDigest:r,status:l}){return(0,a.jsx)(eg.l.LinkItem,{href:`${e}#diff-${r}`,className:a2,children:(0,a.jsxs)(P.B,{gap:"condensed",direction:"horizontal",align:"center",className:a4,children:[(0,a.jsx)(a0.E,{status:l}),(0,a.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[(0,a.jsx)("span",{className:a3,children:i}),(t>0||n>0)&&(0,a.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,a.jsx)("div",{className:a5,children:t>0&&(0,a.jsxs)(eX.C,{isAddition:!0,children:["+",li(t)]})}),(0,a.jsx)("div",{className:a6,children:n>0&&(0,a.jsxs)(eX.C,{isAddition:!1,children:["-",li(n)]})})]})]})]})})};function li(e){return e>999?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}try{a7.displayName||(a7.displayName="SubmoduleDiff")}catch{}try{a8.displayName||(a8.displayName="SubmodulePath")}catch{}try{le.displayName||(le.displayName="SubmoduleCommitChange")}catch{}try{lt.displayName||(lt.displayName="SubmoduleModified")}catch{}try{ln.displayName||(ln.displayName="SubmoduleFileRow")}catch{}function lr(e,t){let n=new Map;for(let t of e){let e=`${t.left}-${t.right}`;n.set(e,t)}return t.map(e=>{let t=`${e.left}-${e.right}`,i=n.get(t);return i?{...e,position:i.position}:{...e,position:null,threadsData:void 0}})}var la=n(78252);let ll=(0,l.kw)()?function(e){let t,n,i,r,l,o,c=(0,s.c)(15),{oid:d,path:m,repo:u,isViewable:h,copilotDiffChatProps:p}=e;c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(nV.W.Anchor,{children:(0,a.jsx)("button",{className:"Button Button--iconOnly Button--invisible","aria-label":"More options",children:(0,a.jsx)(f.KebabHorizontalIcon,{})})}),c[0]=t):t=c[0],c[1]!==d||c[2]!==m||c[3]!==u.name||c[4]!==u.ownerLogin?(n=(0,v.nD_)({repo:u.name,owner:u.ownerLogin,filePath:m,commitish:d}),c[1]=d,c[2]=m,c[3]=u.name,c[4]=u.ownerLogin,c[5]=n):n=c[5];let g=void 0===h||h?void 0:"Action unavailable";return c[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.EyeIcon,{})}),c[6]=i):i=c[6],c[7]!==n||c[8]!==g?(r=(0,a.jsxs)(eg.l.LinkItem,{href:n,inactiveText:g,children:[i,"View file"]}),c[7]=n,c[8]=g,c[9]=r):r=c[9],c[10]!==p?(l=p&&(0,a.jsx)(la.$,{...p}),c[10]=p,c[11]=l):l=c[11],c[12]!==r||c[13]!==l?(o=(0,a.jsxs)(nV.W,{children:[t,(0,a.jsx)(nV.W.Overlay,{children:(0,a.jsxs)(eg.l,{children:[r,l]})})]}),c[12]=r,c[13]=l,c[14]=o):o=c[14],o}:function({oid:e,path:t,repo:n,isViewable:i=!0,copilotDiffChatProps:r}){return(0,a.jsxs)(nV.W,{children:[(0,a.jsx)(nV.W.Anchor,{children:(0,a.jsx)("button",{className:"Button Button--iconOnly Button--invisible","aria-label":"More options",children:(0,a.jsx)(f.KebabHorizontalIcon,{})})}),(0,a.jsx)(nV.W.Overlay,{children:(0,a.jsxs)(eg.l,{children:[(0,a.jsxs)(eg.l.LinkItem,{href:(0,v.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:i?void 0:"Action unavailable",children:[(0,a.jsx)(eg.l.LeadingVisual,{children:(0,a.jsx)(f.EyeIcon,{})}),"View file"]}),r&&(0,a.jsx)(la.$,{...r})]})})]})};try{ll.displayName||(ll.displayName="BlobActionsMenu")}catch{}let ls=(0,l.kw)()?function(e,t,n,i){let r,a,l,c,d=(0,s.c)(12),m=!!t.proseDiffHtml||!!t.fileRendererInfo||!!i,f=(0,o.t)(),[h,p]=(0,u.useState)(m),[g,x]=(0,u.useState)(t);d[0]!==e||d[1]!==n||d[2]!==f.name||d[3]!==f.ownerLogin?(r=async()=>{let t=await (0,eT.lS)(`${(0,v.$Qz)({owner:f.ownerLogin,repo:f.name,commitish:e})}/rich_diff/${encodeURIComponent(n)}`);t.ok&&x(await t.json()),p(!0)},d[0]=e,d[1]=n,d[2]=f.name,d[3]=f.ownerLogin,d[4]=r):r=d[4];let b=r;return d[5]!==m||d[6]!==b?(a=()=>{m||b()},l=[m,b],d[5]=m,d[6]=b,d[7]=a,d[8]=l):(a=d[7],l=d[8]),(0,u.useEffect)(a,l),d[9]!==h||d[10]!==g?(c={loaded:h,richDiffData:g},d[9]=h,d[10]=g,d[11]=c):c=d[11],c}:function(e,t,n,i){let r=!!t.proseDiffHtml||!!t.fileRendererInfo||!!i,a=(0,o.t)(),[l,s]=(0,u.useState)(r),[c,d]=(0,u.useState)(t),m=(0,u.useCallback)(async()=>{let t=await (0,eT.lS)(`${(0,v.$Qz)({owner:a.ownerLogin,repo:a.name,commitish:e})}/rich_diff/${encodeURIComponent(n)}`);t.ok&&d(await t.json()),s(!0)},[e,n,a]);return(0,u.useEffect)(()=>{r||m()},[r,m]),{loaded:l,richDiffData:c}};var lo=n(33671),lc=n(8934);let ld=(0,l.kw)()?function(e){let t=(0,s.c)(9),{dependencyDiffPath:n,fileRendererInfo:i,proseDiffHtml:r,loading:l}=e;if(l){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,a.jsx)(tW.A,{size:"large"})}),t[0]=e):e=t[0],e}if(r){let e;return t[1]!==r?(e=(0,a.jsx)("div",{className:"prose-diff position-relative",children:(0,a.jsx)(F.vb,{html:r})}),t[1]=r,t[2]=e):e=t[2],e}if(i){let e;return t[3]!==i?(e=(0,a.jsx)(lo.default,{...i}),t[3]=i,t[4]=e):e=t[4],e}if(n){let e,i;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)("div",{className:"text-center py-3",children:[(0,a.jsx)(tW.A,{size:"medium"}),(0,a.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]}),t[5]=e):e=t[5],t[6]!==n?(i=(0,a.jsx)(lc.x,{src:n,children:e}),t[6]=n,t[7]=i):i=t[7],i}{let e;return t[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."}),t[8]=e):e=t[8],e}}:function({dependencyDiffPath:e,fileRendererInfo:t,proseDiffHtml:n,loading:i}){return i?(0,a.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,a.jsx)(tW.A,{size:"large"})}):n?(0,a.jsx)("div",{className:"prose-diff position-relative",children:(0,a.jsx)(F.vb,{html:n})}):t?(0,a.jsx)(lo.default,{...t}):e?(0,a.jsx)(lc.x,{src:e,children:(0,a.jsxs)("div",{className:"text-center py-3",children:[(0,a.jsx)(tW.A,{size:"medium"}),(0,a.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})}):(0,a.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})};try{ld.displayName||(ld.displayName="RichDiff")}catch{}let lm=(0,u.memo)((0,l.kw)()?function(e){let t,n,i=(0,s.c)(8),{commitOid:r,path:l,proseDiffHtml:o,fileRendererInfo:c,dependencyDiffPath:d}=e;i[0]!==c||i[1]!==o?(t={proseDiffHtml:o,fileRendererInfo:c},i[0]=c,i[1]=o,i[2]=t):t=i[2];let{loaded:m,richDiffData:u}=ls(r,t,l,d),f=!m;return i[3]!==d||i[4]!==u.fileRendererInfo||i[5]!==u.proseDiffHtml||i[6]!==f?(n=(0,a.jsx)(ld,{dependencyDiffPath:d,fileRendererInfo:u.fileRendererInfo,loading:f,proseDiffHtml:u.proseDiffHtml}),i[3]=d,i[4]=u.fileRendererInfo,i[5]=u.proseDiffHtml,i[6]=f,i[7]=n):n=i[7],n}:function({commitOid:e,path:t,proseDiffHtml:n,fileRendererInfo:i,dependencyDiffPath:r}){let{loaded:l,richDiffData:s}=ls(e,{proseDiffHtml:n,fileRendererInfo:i},t,r);return(0,a.jsx)(ld,{dependencyDiffPath:r,fileRendererInfo:s.fileRendererInfo,loading:!l,proseDiffHtml:s.proseDiffHtml})});try{lm.displayName||(lm.displayName="CommitRichDiff")}catch{}let lu={isInMergeQueue:!1,state:"OPEN"},lf=u.memo(lh);function lh({diffMatches:e,focusedSearchResult:t,diffEntryData:n,contextLinePathURL:i,recalcTotalHeightOfVirtualWindow:r,onOptionCollapseToggle:l,helpUrl:s,headerStickyOffset:o=0,repo:d,oid:m,index:f,ignoreWhitespace:h,virtualizerScrollTo:p}){let g=(0,c.i)(),{data:x}=(0,b.ID)();void 0===x&&(x=b.aX);let y=e3(),j=eY(),{getThreadDataByPathAndPosition:C,getInlineCommentInfoByPathAndPosition:v,updateInlineCommentMapWithNewComment:N,initialExpandedThreadId:w}=(0,eJ.B)(),{commentBoxSubject:S}=(0,eZ.X)(),L=e1(S,v,N),[_,k]=(0,u.useState)(lp(n.current[f],C)),E=(0,u.useCallback)(e=>{k(lp(e,C))},[C]),[I,D]=(0,u.useState)(_.collapsed),[T,A]=(0,u.useState)(_.defaultToRichDiff),R=_.isSubmodule&&!!_.submodule,$=!R&&!T,[O,P]=(0,u.useState)(_.diffManuallyExpanded),M=(0,u.useRef)(!1);(0,u.useEffect)(()=>{D(_.collapsed)},[_.collapsed]);let F=(0,u.useRef)([]),B=(0,u.useCallback)(async e=>{F.current.push(e);let t=await e4(F.current,i,_.pathDigest);if(void 0!==t){let e={..._};e.diffLines=lr(e.diffLines,t.diffEntryWithContext),E(e),n.current[f]=e,r()}},[i,n,_,f]),U=async()=>{F.current=[],M.current||((_.newTreeEntry?.lineCount??0)<5e3?F.current.push({start:1,end:Math.max(_.oldTreeEntry?.lineCount??0,_.newTreeEntry?.lineCount??0)}):F.current=function(e,t){let n=[];for(let t=0;t<e.length;t++)if("HUNK"===e[t].type){let i=e[t-1>=0?t-1:0],r=e[t+1<e.length?t+1:e.length-1],a=i?.blobLineNumber,l=r?.blobLineNumber;a&&l&&(n.push({start:a,end:a+40}),n.push({start:Math.max(l-40,1),end:l}))}let i=e[e.length-1].blobLineNumber;return i<t&&n.push({start:i,end:i+40}),n}(_.diffLines,_.newTreeEntry?.lineCount??0)),M.current=!M.current;let e=await e4(F.current,i,_.pathDigest);if(void 0!==e){let t={..._};t.diffLines=lr(t.diffLines,e.diffEntryWithContext),E(t),n.current[f]=t,r()}},H=(0,u.useCallback)(async()=>{if(0===_.diffLines.length){let e;try{e=await e5({repo:d,sha1:_.oldOid,sha2:_.newOid,entry:_.diffNumber.toString()})}catch{throw Error("Error fetching diff lines")}let t={..._};t.diffLines=e,E(t),n.current[f]=t}_.diffManuallyExpanded=!0,n.current[f].diffManuallyExpanded=!0,P(!0),r(),requestAnimationFrame(()=>{p?.(f,{align:"center"})})},[n,_,f,r]);(0,u.useEffect)(()=>{E(n.current[f]),F.current=[]},[h,f,n,m,d.name,d.ownerLogin,_.path,E]);let z=(0,u.useMemo)(()=>{if(_.isBinary||_.isSubmodule||(0,eQ.dK)(_))return!1;if(M.current||(n.current[f]?.diffLines?.[1]?.blobLineNumber||0)>1)return!0;let e=n.current[f]?.diffLines?.length||0,t=n.current[f]?.diffLines?.[e-1]?.blobLineNumber||0,i=n.current[f]?.newTreeEntry?.lineCount||0;return!!(t<i)||!!(e-1<i)},[n.current[f]?.diffLines,n.current[f]?.newTreeEntry?.lineCount,f,n,_]),V=(0,u.useMemo)(()=>({avatarUrl:g?.avatarURL??"",diffViewPreference:x.splitPreference,isSiteAdmin:!1,commentsPreference:x.commentsPreference,login:g?.login??"",lineSpacingPreference:x.lineSpacing,tabSizePreference:g?.tabSize??4,viewerCanComment:j.canComment,viewerCanApplySuggestion:!1}),[g?.avatarURL,g,g?.login,g?.tabSize,x]),G=(0,u.useMemo)(()=>{if(_.copilotChatReference)return{copilotChatReference:_.copilotChatReference}},[_]),W=(0,u.useId)(),K=`heading-${W}`;return(0,a.jsxs)("div",{role:"region","aria-labelledby":K,className:"position-relative",style:{contain:"layout"},children:[(0,a.jsx)("div",{className:"Diff-module__diffHeaderWrapper--DiwLD",style:{"--header-sticky-offset":`${o}px`},children:(0,a.jsx)(eX.B,{areLinesExpanded:M.current,canExpandOrCollapseLines:z,fileLinkHref:`#diff-${_.pathDigest}`,isCollapsed:I,isBinary:_.isBinary,isSubmodule:R,headingId:K,size:_.diffSize,canToggleRichDiff:_.canToggleRichDiff,linesAdded:_.linesAdded,linesChanged:_.linesChanged,linesDeleted:_.linesDeleted,newMode:_.newTreeEntry?.mode,newPath:_.newTreeEntry?.path,oldMode:_.oldTreeEntry?.mode,oldPath:_.oldTreeEntry?.path,patchStatus:_.status,path:_.path,onToggleExpandAllLines:U,onToggleFileCollapsed:e=>{e.altKey?l(!I):(_.collapsed=!I,n.current[f].collapsed=!I,D(!I))},onToggleDiffDisplay:e=>A(e),rightSideContent:(0,a.jsx)(ll,{oid:"REMOVED"===_.status&&_.deletedSha?_.deletedSha:m,path:_.path,repo:d,isViewable:!_.isSubmodule,copilotDiffChatProps:G}),showRichDiff:T})}),I?null:(0,a.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[R&&_.submodule&&(0,a.jsx)(a7,{submodule:_.submodule}),T&&(0,a.jsx)(lm,{commitOid:m,path:_.path,proseDiffHtml:_.proseDifffHtml,fileRendererInfo:_.renderInfo,dependencyDiffPath:_.dependencyDiffPath}),$&&(0,a.jsx)(aJ,{diffContext:"commit",copilotChatReference:_.copilotChatReference,searchResults:e,focusedSearchResult:t,diffEntryData:_,baseHelpUrl:s,commentingEnabled:!0,commentBatchPending:!1,repositoryId:d.id.toString(),subject:lu,subjectId:m,viewerData:V,newCommitOid:_.newOid,oldCommitOid:_.oldOid,addInjectedContextLines:B,commentingImplementation:L,markerNavigationImplementation:y,diffLinesManuallyUnhidden:O,onHandleLoadDiff:H,initialExpandedThreadId:w})]})]},`${_.pathDigest}_${_.diffLines.length}`)}function lp(e,t){for(let n of e?.diffLines??[]){let i=t(e.path,n.position);i?n.threadsData={totalCommentsCount:i.count,totalCount:i.count,threads:(i.threads??[]).map(e=>({id:e.id,diffSide:e.diffSide,commentsData:e.commentsData,line:n.blobLineNumber,isOutdated:!1}))}:n.threadsData=void 0}return e}try{lf.displayName||(lf.displayName="Diff")}catch{}try{lh.displayName||(lh.displayName="DiffUnmemoized")}catch{}var lg=n(27028);let lx=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(6),[a,l]=(0,u.useState)(!1);r[0]!==a?(t=e=>{let t=e[e.length-1].intersectionRatio<1;t!==a&&l(t)},r[0]=a,r[1]=t):t=r[1];let o=t;return r[2]!==e||r[3]!==o?(n=()=>{let t=e.current,n=new IntersectionObserver(o,{root:t?.ownerDocument,threshold:[1],rootMargin:"-1px 0px 0px 0px"});return e.current&&n.observe(e.current),()=>{t&&n.unobserve(t)}},i=[e,o],r[2]=e,r[3]=o,r[4]=n,r[5]=i):(n=r[4],i=r[5]),(0,u.useEffect)(n,i),a}:function(e){let[t,n]=(0,u.useState)(!1),i=(0,u.useCallback)(e=>{let i=e[e.length-1].intersectionRatio<1;i!==t&&n(i)},[t,n]);return(0,u.useEffect)(()=>{let t=e.current,n=new IntersectionObserver(i,{root:t?.ownerDocument,threshold:[1],rootMargin:"-1px 0px 0px 0px"});return e.current&&n.observe(e.current),()=>{t&&n.unobserve(t)}},[e,i]),t},lb=(0,u.memo)(lj),ly=(0,l.kw)();function lj(e){return ly?function(e){let t,n,i,r,l,o,c,d,m,f,h,p=(0,s.c)(31),{treeToggleElement:g,headerInfo:x,searchBox:b,ignoreWhitespace:y,userNotices:j}=e,C=(0,u.useRef)(null),v=lx(C),N=v?"d-none d-sm-flex":"";p[0]===Symbol.for("react.memo_cache_sentinel")?(t={zIndex:2},p[0]=t):t=p[0];let w=x.filesChanged>1?"s":"";p[1]!==x.filesChangedString||p[2]!==w?(n=(0,a.jsxs)(rw.A,{as:"h2",className:"mx-2 f4",children:[x.filesChangedString," file",w," changed"]}),p[1]=x.filesChangedString,p[2]=w,p[3]=n):n=p[3],p[4]!==x.additions||p[5]!==N?(i=(0,a.jsxs)(eX.C,{className:N,isAddition:!0,children:["+",x.additions]}),p[4]=x.additions,p[5]=N,p[6]=i):i=p[6],p[7]!==x.deletions||p[8]!==N?(r=(0,a.jsxs)(eX.C,{className:N,isAddition:!1,children:["-",x.deletions]}),p[7]=x.deletions,p[8]=N,p[9]=r):r=p[9];let S=`${N} ml-2 fgColor-muted text-small`;p[10]===Symbol.for("react.memo_cache_sentinel")?(l={whiteSpace:"nowrap"},p[10]=l):l=p[10],p[11]!==S?(o=(0,a.jsx)("span",{className:S,style:l,children:"lines changed"}),p[11]=S,p[12]=o):o=p[12],p[13]!==n||p[14]!==i||p[15]!==r||p[16]!==o||p[17]!==g?(c=(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[g,n,i,r,o]}),p[13]=n,p[14]=i,p[15]=r,p[16]=o,p[17]=g,p[18]=c):c=p[18],p[19]!==v?(d=v&&(0,a.jsx)(lC,{}),p[19]=v,p[20]=d):d=p[20];let L=void 0!==b&&b;return p[21]!==y||p[22]!==j?(m=(0,a.jsx)(lg.G,{reloadOnWhitespaceChange:!0,defaultHideWhitespace:y,userNotices:j}),p[21]=y,p[22]=j,p[23]=m):m=p[23],p[24]!==d||p[25]!==L||p[26]!==m?(f=(0,a.jsxs)("div",{className:"d-flex gap-2 flex-items-center",children:[d,L,m]}),p[24]=d,p[25]=L,p[26]=m,p[27]=f):f=p[27],p[28]!==f||p[29]!==c?(h=(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between gap-2 pt-3 pt-lg-4 pb-2 position-sticky top-0 color-bg-default",style:t,ref:C,children:[c,f]}),p[28]=f,p[29]=c,p[30]=h):h=p[30],h}(e):function({treeToggleElement:e,headerInfo:t,searchBox:n,ignoreWhitespace:i,userNotices:r}){let l=(0,u.useRef)(null),s=lx(l),o=s?"d-none d-sm-flex":"";return(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between gap-2 pt-3 pt-lg-4 pb-2 position-sticky top-0 color-bg-default",style:{zIndex:2},ref:l,children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[e,(0,a.jsxs)(rw.A,{as:"h2",className:"mx-2 f4",children:[t.filesChangedString," file",t.filesChanged>1?"s":""," changed"]}),(0,a.jsxs)(eX.C,{className:o,isAddition:!0,children:["+",t.additions]}),(0,a.jsxs)(eX.C,{className:o,isAddition:!1,children:["-",t.deletions]}),(0,a.jsx)("span",{className:`${o} ml-2 fgColor-muted text-small`,style:{whiteSpace:"nowrap"},children:"lines changed"})]}),(0,a.jsxs)("div",{className:"d-flex gap-2 flex-items-center",children:[s&&(0,a.jsx)(lC,{}),void 0!==n&&n,(0,a.jsx)(lg.G,{reloadOnWhitespaceChange:!0,defaultHideWhitespace:i,userNotices:r})]})]})}(e)}let lC=(0,l.kw)()?()=>{let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(U.Q,{leadingVisual:f.ArrowUpIcon,variant:"invisible",className:"fgColor-default px-2 f6 gap-1",onClick:lv,children:"Top"}),t[0]=e):e=t[0],e}:()=>(0,a.jsx)(U.Q,{leadingVisual:f.ArrowUpIcon,variant:"invisible",className:"fgColor-default px-2 f6 gap-1",onClick:e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},children:"Top"});try{lb.displayName||(lb.displayName="DiffsHeader")}catch{}try{lj.displayName||(lj.displayName="DiffsHeaderUnmemoized")}catch{}try{lC.displayName||(lC.displayName="GoToTopButton")}catch{}function lv(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}let lN=u.memo(lS),lw=(0,l.kw)();function lS(){let e,t,n;if(!lw)return(0,a.jsx)("div",{className:"pt-3",children:(0,a.jsxs)("div",{className:"border borderColor-muted rounded-top-2",children:[(0,a.jsx)("div",{className:"gap-2 p-3 border-bottom borderColor-muted bgColor-muted rounded-top-2",children:(0,a.jsx)(Z.O,{height:"sm",variant:"rounded",width:"140px"})}),(0,a.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",children:[(0,a.jsx)(Z.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)(Z.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)(Z.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)(Z.O,{height:"sm",variant:"rounded",width:"random"})]})]})});return(n=(0,s.c)(2))[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:"gap-2 p-3 border-bottom borderColor-muted bgColor-muted rounded-top-2",children:(0,a.jsx)(Z.O,{height:"sm",variant:"rounded",width:"140px"})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("div",{className:"pt-3",children:(0,a.jsxs)("div",{className:"border borderColor-muted rounded-top-2",children:[e,(0,a.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",children:[(0,a.jsx)(Z.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)(Z.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)(Z.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)(Z.O,{height:"sm",variant:"rounded",width:"random"})]})]})}),n[1]=t):t=n[1],t}try{lN.displayName||(lN.displayName="LoadingContentBlock")}catch{}try{lS.displayName||(lS.displayName="LoadingContentBlockUnmemoized")}catch{}let lL=(0,l.kw)()?function(e){let t,n,i,r,l=(0,s.c)(16),{diffEntryData:o,contextLinePathURL:c,repo:d,oid:f,treeToggleElement:h,headerInfo:p,totalFileCount:g}=e,x=(0,u.useRef)(o),b=(0,eE.X)(),y=g>40,j=(0,m.B)();return l[0]!==y?(t=y&&(0,a.jsx)(eq,{}),l[0]=y,l[1]=t):t=l[1],l[2]!==p||l[3]!==h?(n=(0,a.jsx)(lb,{treeToggleElement:h,headerInfo:p}),l[2]=p,l[3]=h,l[4]=n):n=l[4],l[5]!==j||l[6]!==c||l[7]!==o||l[8]!==f||l[9]!==b||l[10]!==d?(i=o.map((e,t)=>t>=10?null:(0,a.jsx)("div",{className:0===t?"pt-0":"pt-3",children:(0,a.jsx)(lf,{onOptionCollapseToggle:ek.l,diffEntryData:x,index:t,helpUrl:b.helpUrl,contextLinePathURL:c,recalcTotalHeightOfVirtualWindow:ek.l,repo:d,ignoreWhitespace:j.ignoreWhitespace,oid:f})},e.pathDigest)),l[5]=j,l[6]=c,l[7]=o,l[8]=f,l[9]=b,l[10]=d,l[11]=i):i=l[11],l[12]!==t||l[13]!==n||l[14]!==i?(r=(0,a.jsxs)("div",{"data-hpc":!0,children:[t,n,i]}),l[12]=t,l[13]=n,l[14]=i,l[15]=r):r=l[15],r}:function({diffEntryData:e,contextLinePathURL:t,repo:n,oid:i,treeToggleElement:r,headerInfo:l,totalFileCount:s}){let o=(0,u.useRef)(e),c=(0,eE.X)(),d=(0,m.B)();return(0,a.jsxs)("div",{"data-hpc":!0,children:[s>40&&(0,a.jsx)(eq,{}),(0,a.jsx)(lb,{treeToggleElement:r,headerInfo:l}),e.map((e,r)=>r>=10?null:(0,a.jsx)("div",{className:0===r?"pt-0":"pt-3",children:(0,a.jsx)(lf,{onOptionCollapseToggle:ek.l,diffEntryData:o,index:r,helpUrl:c.helpUrl,contextLinePathURL:t,recalcTotalHeightOfVirtualWindow:ek.l,repo:n,ignoreWhitespace:d.ignoreWhitespace,oid:i})},e.pathDigest))]})};try{lL.displayName||(lL.displayName="SSRDiffs")}catch{}let l_=(0,u.memo)(lk);function lk({totalFileCount:e,diffEntryData:t,contextLinePathURL:n,unselectedFileExtensions:i,repo:r,oid:l,ignoreWhitespace:s,filterTerm:o,searchTerm:c,setSearchTerm:d,setCanFocusComments:f,isTreeExpanded:h,treeToggleElement:p,headerInfo:g}){let x=eW(),{data:y}=(0,b.ID)();void 0===y&&(y=b.aX);let j=y.lineSpacing,C=(0,b.Qn)(s),N=(0,m.B)(),S=(0,u.useCallback)(()=>_({}),[]),[L,_]=(0,u.useState)({}),k=(0,u.useRef)(t),{findInDiffWorkerPath:E}=(0,W.D)(),D=(0,u.useRef)(t),T=(0,u.useRef)(e>40),A=(0,u.useRef)(null),[R,$]=(0,u.useState)(C),O=(0,u.useRef)(0),P=(0,u.useRef)(e),[M,F]=(0,u.useState)(l),{focusedSearchResult:B,setFocusedSearchResult:U,searchResults:H,currentIndex:z,setCurrentIndex:V}=function(e,t,n,i){let[r,a]=(0,u.useState)(new Map),[l,s]=(0,u.useState)(void 0),[o,c]=(0,u.useState)(0),d=u.useRef(null);!d.current&&t&&(d.current=new eH.N(new eU.z(n,ez),200,e=>1!==e.query.length));let m=(0,u.useRef)(t);m.current=t;let f=(0,u.useRef)("");(0,u.useEffect)(()=>function(){d.current?.terminate()},[]);let h=(0,u.useRef)([]);return d.current&&e!==h.current&&(d.current.onResponse=e=>{e.query===m.current&&(a(e.matchingDiffs),f.current=m.current)},h.current=e),(0,u.useEffect)(()=>{if(!e||!d.current||!f.current||""===f.current){a(new Map),s(void 0);return}a(new Map),s(void 0),d.current.post({query:f.current,diffEntryInfo:e,currentDiffEntryData:void 0})},[e?.length,e]),(0,u.useEffect)(()=>{if(e&&d.current)if(""===t)a(new Map),s(void 0),c(0),f.current="";else{var n;if(!((n=t).length>0&&n.length<=1e3))return;let i=f.current.length>0&&t.startsWith(f.current);d.current.post({query:t,diffEntryInfo:e,currentDiffEntryData:i?r:void 0}),c(0)}},[t,i]),{focusedSearchResult:l,setFocusedSearchResult:s,searchResults:r,currentIndex:o,setCurrentIndex:c}}(k.current,c,E,L);function G(e){for(let t of k.current)t.collapsed=e;S()}(0,u.useEffect)(()=>{if(i&&i.size>0?k.current=D.current.filter(e=>!i.has((0,e_.QC)(e.path))):k.current=D.current,o&&(k.current=k.current.filter(e=>e.path.toLowerCase().includes(o.toLowerCase()))),P.current!==k.current.length||0===k.current.length){let e=k.current.length;!function(e,t=0){if(void 0===w.XC)return;let n=w.XC.getElementById("screenReaderAnnouncementDiv")??void 0;if(n||(n=function(){if(void 0===w.XC)return;let e=w.XC.createElement("div");return e.classList.add("sr-only","mt-n1"),e.id="screenReaderAnnouncementDiv",e.setAttribute("role","alert"),e.setAttribute("data-testid","screenReaderAnnouncement"),e.setAttribute("aria-live","assertive"),w.XC.body.appendChild(e),e}()),!n)return;let i=n.textContent===e?`${e}\u00A0`:e;setTimeout(()=>{n&&(n.textContent=i)},t)}(0===e?"There are no files selected for viewing":`${e} file${1===e?"":"s"} remain${1===e?"s":""}`,150)}P.current=k.current.length,T.current=k.current.length>40,S()},[i?.size,o]),(0,u.useEffect)(()=>{k.current=t,D.current=t,T.current=e>40,S(),$(s),F(l)},[N.path]);let K=(0,eE.X)(),q=(0,v.VWf)({owner:N.repo.ownerLogin,repo:N.repo.name,sha1:N.commit.sha1,sha2:N.commit.sha2,oid:N.commit.oid}),X=function(e,t,n,i,r,a){let[l,s]=(0,u.useState)(eA),o=(0,u.useRef)([]),c=(0,u.useRef)(n);return(0,u.useEffect)(()=>{if(!i||!r)return;let a=!1,l=async(e,t,n)=>{s(eA);let r=await (0,eT.lS)(`${i}&start_entry=${e}&bytes=${t}&lines=${n}`);if(!a)try{if(r.ok){let e=await r.json();e&&(e.loading=e.loadMore,o.current=o.current.concat(e.extraDiffEntries),e.extraDiffEntries=o.current,e.loadMore&&c.current!==e.asyncDiffLoadInfo.startIndex?(c.current=e.asyncDiffLoadInfo.startIndex,s(e),setTimeout(()=>l(e.asyncDiffLoadInfo.startIndex,e.asyncDiffLoadInfo.byteCount,e.asyncDiffLoadInfo.lineShownCount),0)):(c.current===e.asyncDiffLoadInfo.startIndex?e.error=!0:e.error=!1,e.loading=!1,s(e)))}else s(e=>({...e,loading:!1,error:!0,extraDiffEntries:o.current}))}catch{s(e=>({...e,loading:!1,error:!0,extraDiffEntries:o.current}))}};return l(n,e,t),function(){a=!0}},[e,t,r,n,i,a]),(0,u.useEffect)(()=>{o.current=[],c.current=n},[i,n,a]),l}(N.asyncDiffLoadInfo.byteCount,N.asyncDiffLoadInfo.lineShownCount,N.asyncDiffLoadInfo.startIndex,q,N.moreDiffsToLoad,s);(0,u.useEffect)(()=>{X.loading||f(!0)},[X.loading,f]),(0,u.useEffect)(()=>{let e=t.concat(X.extraDiffEntries);i&&i.size>0?k.current=e.filter(e=>!i.has((0,e_.QC)(e.path))):k.current=e,o&&(k.current=k.current.filter(e=>e.path.toLowerCase().includes(o.toLowerCase()))),D.current=e,S()},[X.extraDiffEntries.length]);let Q=(0,u.useRef)(null),[J,Y]=(0,u.useState)(0);(0,u.useLayoutEffect)(()=>{Y(Q.current?.offsetTop??0)},[]);let Z=(0,eI.XW)({count:h?0:k.current.length,estimateSize:(0,u.useCallback)(e=>{var t;let n;if(!T.current)return 0;let i=(t=k.current[e],n=57,t?.collapsed?n:t?.newTreeEntry?.isGenerated&&!t?.diffManuallyExpanded?199:t?.isTooBig?104:(t?.diffLines&&("compact"===j?n+=20*t.diffLines.length:n+=25*t.diffLines.length),t?.newTreeEntry?.lineCount&&t.newTreeEntry.lineCount>(t?.diffLines[t?.diffLines.length-1]?.right??0)&&(n+=32),n));return 0===e&&(i-=16),i},[j]),overscan:3,scrollMargin:J,rangeExtractor(e){if(!T.current)return(0,eD.vp)(e);let t=eP(w.fV.hash.substring(1)),n=document.querySelector("[data-path-digest]:focus-within")?.getAttribute("data-path-digest"),i=k.current.findIndex(e=>e.pathDigest===n),r=k.current.findIndex(e=>t?.endsWith(e.pathDigest));return i<0&&r<0?(0,eD.vp)(e):Array.from(new Set([...(0,eD.vp)(e),...[i,r].filter(e=>e>-1)])).sort((e,t)=>e-t)}});(0,u.useEffect)(()=>{let e=x.includes("R"),t=x.includes("L"),n=t||e,i=n?t?x.split("L")[0]:x.split("R")[0]:x,r=lE(i??x,k.current);if(-1===r){if(X.error&&null!==A){let e=A.current?.childNodes[0];e?.focus(),e?.scrollIntoView({block:"center"})}return}if(T.current)Z.scrollToIndex(r,{align:"center"}),requestAnimationFrame(()=>{if(n&&lI(Q,x));else{let e=Q.current?.querySelectorAll(`[aria-label="collapse file: ${k.current[r]?.path}"]`);e&&1===e.length&&e[0].focus()}});else if(n&&lI(Q,x));else{let e=Q.current?.querySelectorAll(`[data-diff-anchor=diff-${i}]`);if(e&&1===e.length){let t=e[0].getBoundingClientRect().top+(w.cg?.scrollY??0)-57-60;w.cg?.scrollTo(0,t);let n=Q.current?.querySelectorAll(`[aria-label="collapse file: ${k.current[r]?.path}"]`);n&&1===n.length&&n[0].focus()}}},[x,X]);let ee=(0,a.jsx)(e$,{currentPathDigestIndex:O,searchTerm:c,focusedSearchResult:B,currentIndex:z,setCurrentIndex:V,setFocusedSearchResult:U,setSearchTerm:d,searchResults:H,scrollDiffCellIntoView:e=>{let t=lE(e?.pathDigest??"",k.current);-1!==t&&(Z.scrollToIndex(t,{align:"center"}),requestAnimationFrame(()=>{var t,n;let i;t=e?.indexWithinDigest??0,n=e?.pathDigest??"",(i=w.XC?.getElementById(`match-${n}-${t}`))&&i.scrollIntoView({block:"center"})}))}});return(0,a.jsxs)("div",{"data-hpc":!0,ref:Q,children:[T.current&&(0,a.jsx)(eq,{}),(0,a.jsx)(lb,{treeToggleElement:p,headerInfo:g,searchBox:ee,ignoreWhitespace:R,userNotices:N?.userNotices}),!T.current&&k.current.map((e,t)=>{let i,l;return H.has(e?.pathDigest??"")&&(i=H.get(e?.pathDigest??"")??[]),B&&e?.pathDigest===B?.pathDigest&&(l=B?.indexWithinDigest??-1),(0,a.jsx)("div",{style:{paddingTop:16*(0!==t),left:3,right:3},children:(0,a.jsx)(lf,{diffEntryData:k,diffMatches:i,focusedSearchResult:l,onOptionCollapseToggle:G,index:t,contextLinePathURL:n,recalcTotalHeightOfVirtualWindow:ek.l,repo:r,helpUrl:K.helpUrl,oid:M,ignoreWhitespace:R})},e.pathDigest)}),T.current&&(0,a.jsx)("div",{style:{height:Z.getTotalSize(),width:"100%",position:"relative"},children:Z.getVirtualItems().map(e=>{let t,i,l=k.current[e.index];return(H.has(l?.pathDigest??"")&&(t=H.get(l?.pathDigest??"")??[]),B&&l?.pathDigest===B?.pathDigest&&(i=B?.indexWithinDigest??-1),l)?(0,a.jsx)("div",{ref:Z.measureElement,"data-index":e.index,style:{position:"absolute",paddingTop:16*(0!==e.index),left:3,right:3,transform:`translateY(${e.start-Z.options.scrollMargin}px)`},children:(0,a.jsx)(lf,{diffMatches:t,focusedSearchResult:i,diffEntryData:k,index:e.index,contextLinePathURL:n,onOptionCollapseToggle:G,recalcTotalHeightOfVirtualWindow:S,headerStickyOffset:-(e.start-Z.options.scrollMargin),helpUrl:K.helpUrl,repo:r,oid:M,ignoreWhitespace:R,virtualizerScrollTo:Z.scrollToIndex})},l.pathDigest):null})}),N.moreDiffsToLoad&&(0,a.jsxs)(a.Fragment,{children:[X.loading&&(0,a.jsx)(lN,{}),X.error&&(0,a.jsx)("div",{style:{justifyContent:"center",paddingTop:"16px"},ref:A,children:(0,a.jsx)(I.A,{variant:"danger",tabIndex:0,children:(0,a.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"There was a problem loading the remainder of the diff."})})})]})]})}function lE(e,t){for(let n=0;n<t.length;n++)if(e===t[n]?.pathDigest)return n;return -1}function lI(e,t){let n=e.current?.querySelectorAll(`[data-line-anchor=diff-${t}]`);return!!n&&1===n.length&&(n[0].focus(),!0)}try{l_.displayName||(l_.displayName="Diffs")}catch{}try{lk.displayName||(lk.displayName="DiffsUnmemoized")}catch{}var lD=n(70170),lT=n(56051),lA=n(60569),lR=n(25556),l$=n(34535),lO=n(61583),lP=n(77046);let lM=(0,u.memo)(function(e){let t,n=(0,s.c)(3),{changeType:i,isSymlink:r}=e;return n[0]!==i||n[1]!==r?(t=(0,a.jsx)(a0.E,{status:i,isSymlink:r}),n[0]=i,n[1]=r,n[2]=t):t=n[2],t});lM.displayName="FileStatusIconItem";let lF=(0,u.memo)(function(e){let t,n,i,r,l,o,c,d,m,h,p,g=(0,s.c)(41),{file:x,depth:b,hash:y,onSelect:j}=e,C=(0,u.useRef)(null),v=(0,u.useRef)(null),N=`#diff-${x.diff.pathDigest}`;g[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:C,mouseRowRef:C},g[0]=t):t=g[0];let S=(0,l$.Z)(t),L=x.diff.totalCommentsCount??0,_=x.diff.highestAnnotationLevel,k=x.fileName??"This file",E=null;switch(L>0&&(k+=` has ${L<10?L:"9+"} ${L>1?"comments":"comment"}`),_){case"WARNING":{let e;k+=`${L>0?" and":""} has warning annotations`,g[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:"pl-1 fgColor-attention",children:(0,a.jsx)(f.AlertIcon,{})}),g[1]=e):e=g[1],E=e;break}case"NOTICE":{let e;k+=`${L>0?" and":""} has notice annotations`,g[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:"pl-1 fgColor-default",children:(0,a.jsx)(f.InfoIcon,{})}),g[2]=e):e=g[2],E=e;break}case"FAILURE":{let e;k+=`${L>0?" and":""} has failure annotations`,g[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:"pl-1 fgColor-danger",children:(0,a.jsx)(f.XCircleFillIcon,{})}),g[3]=e):e=g[3],E=e}}g[4]!==E||g[5]!==k?(n={screenReaderText:k,annotationElement:E},g[4]=E,g[5]=k,g[6]=n):n=g[6];let{screenReaderText:I,annotationElement:D}=n;g[7]!==x.diff.pathDigest||g[8]!==y?(i=()=>{if(C.current&&x.diff.pathDigest===y){let e=window.setTimeout(()=>{let e=w.XC?.getElementById("diff_file_tree")?.parentElement,t=C.current.offsetTop,n=w.cg?.innerHeight??0;e&&(e.scrollTop=t-n/2)},0);return()=>{window.clearTimeout(e)}}},r=[x.diff.pathDigest,y],g[7]=x.diff.pathDigest,g[8]=y,g[9]=i,g[10]=r):(i=g[9],r=g[10]),(0,u.useEffect)(i,r),g[11]!==N?(l=e=>{if(e.metaKey||e.ctrlKey||1===e.button){e.preventDefault(),window.open(N,"_blank");return}},g[11]=N,g[12]=l):l=g[12];let T=l;g[13]!==T||g[14]!==j?(o=e=>{if(e.nativeEvent instanceof KeyboardEvent){if(C?.current!==document.activeElement)return void e.preventDefault();if("Enter"===e.key||" "===e.key){e.preventDefault(),j?.(),v?.current?.click();return}}if(e.nativeEvent instanceof MouseEvent){if(e.metaKey||e.ctrlKey||1===e.button){e.preventDefault(),T(e);return}j?.(),v?.current?.click()}},g[13]=T,g[14]=j,g[15]=o):o=g[15];let A=o,R=x.fileName??"";g[16]!==N||g[17]!==R||g[18]!==T?(c=(0,a.jsx)(H.A,{href:N,muted:!0,ref:v,role:"presentation",className:"fgColor-default",tabIndex:-1,onClick:T,children:R}),g[16]=N,g[17]=R,g[18]=T,g[19]=c):c=g[19];let $=c,O=x.diff.pathDigest===y;return g[20]!==x.diff.changeType||g[21]!==x.diff.isSymlink?(d=(0,a.jsx)(lA.G.LeadingVisual,{children:(0,a.jsx)(lM,{changeType:x.diff.changeType,isSymlink:x.diff.isSymlink})}),g[20]=x.diff.changeType,g[21]=x.diff.isSymlink,g[22]=d):d=g[22],g[23]!==$||g[24]!==R||g[25]!==S?(m=S?(0,a.jsx)(im.m,{text:R,direction:"ne",children:$}):$,g[23]=$,g[24]=R,g[25]=S,g[26]=m):m=g[26],g[27]!==D||g[28]!==_||g[29]!==L?(h=(!!L||_)&&(0,a.jsx)(lA.G.TrailingVisual,{children:(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-row",children:[!!L&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.CommentIcon,{}),(0,a.jsx)("div",{className:"ml-1 text-bold fgColor-default f6",children:L<10?L:"9+"})]}),D]})}),g[27]=D,g[28]=_,g[29]=L,g[30]=h):h=g[30],g[31]!==b||g[32]!==x.diff.path||g[33]!==x.diff.pathDigest||g[34]!==A||g[35]!==I||g[36]!==m||g[37]!==h||g[38]!==O||g[39]!==d?(p=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(lA.G.Item,{defaultExpanded:!0,"aria-label":I,"aria-level":b,current:O,id:x.diff.path,onSelect:A,ref:C,className:lP.A["file-tree-row"],children:[d,m,h]},x.diff.pathDigest)}),g[31]=b,g[32]=x.diff.path,g[33]=x.diff.pathDigest,g[34]=A,g[35]=I,g[36]=m,g[37]=h,g[38]=O,g[39]=d,g[40]=p):p=g[40],p}),lB=(0,u.memo)(function e({directory:t,depth:n=0,leadingPath:i="",sortByDiffOrder:r,onSelect:l,hash:s,fileNodeRenderer:o}){let c=i?`${i}/`:"",d=(0,u.useRef)(null),m=(0,u.useRef)(null),f=(0,l$.Z)({focusRowRef:m,mouseRowRef:d});if(!t.files.length&&1===t.directories.length)return(0,a.jsx)(a.Fragment,{children:t.directories.map(i=>(0,a.jsx)(e,{depth:0===n?1:n,directory:i,leadingPath:`${c}${t.name}`,sortByDiffOrder:r,onSelect:l,hash:s,fileNodeRenderer:o},i.path))});function h(){return(0,a.jsx)(lU,{directory:t,depth:n,sortByDiffOrder:r,onSelect:l,hash:s,fileNodeRenderer:o})}return 0===n?h():(0,a.jsxs)(lA.G.Item,{ref:m,defaultExpanded:!0,id:t.path,children:[(0,a.jsx)(lA.G.LeadingVisual,{children:(0,a.jsx)(lA.G.DirectoryIcon,{})}),(0,a.jsx)("span",{ref:d,children:`${c}${t.name}`}),f&&(0,a.jsx)(lR.m,{"data-testid":`${t.name}-directory-item-tooltip`,id:`${t.name}-directory-item-tooltip`,contentRef:m,"aria-label":`${c}${t.name}`,open:!0,direction:"ne"}),(0,a.jsx)(lA.G.SubTree,{children:h()})]},t.path)}),lU=(0,u.memo)(function(e){let t,n,i,r=(0,s.c)(19),{directory:l,fileNodeRenderer:o,sortByDiffOrder:c,depth:d,onSelect:m,hash:u}=e,f=void 0===d?0:d;r[0]!==l.directories||r[1]!==l.files||r[2]!==c?(t=l.files.map(lz).concat(l.directories.map(lV)),c?t.sort(lG):t.sort(lW),r[0]=l.directories,r[1]=l.files,r[2]=c,r[3]=t):t=r[3];let h=t;if(r[4]!==f||r[5]!==o||r[6]!==u||r[7]!==h||r[8]!==m||r[9]!==c){let e;r[11]!==f||r[12]!==o||r[13]!==u||r[14]!==m||r[15]!==c?(e=e=>"file"!==e.pathType?(0,a.jsx)(lB,{depth:f+1,directory:e.node,fileNodeRenderer:o,sortByDiffOrder:c,onSelect:m,hash:u},e.path):o?o({onSelect:m,hash:u,file:e.node,depth:f+1}):(0,a.jsx)(lF,{depth:f+1,file:e.node,onSelect:m,hash:u},e.path),r[11]=f,r[12]=o,r[13]=u,r[14]=m,r[15]=c,r[16]=e):e=r[16],n=h.map(e),r[4]=f,r[5]=o,r[6]=u,r[7]=h,r[8]=m,r[9]=c,r[10]=n}else n=r[10];return r[17]!==n?(i=(0,a.jsx)(a.Fragment,{children:n}),r[17]=n,r[18]=i):i=r[18],i}),lH=(0,u.memo)(function(e){let t,n,i,r=(0,s.c)(11),{diffs:l,fileNodeRenderer:o,sortByDiffOrder:c,className:d,onSelect:m}=e;r[0]!==l?(t=(0,e_.xY)(l),r[0]=l,r[1]=t):t=r[1];let f=t,{selectedPathDigest:h}=function(){let e,t,n,i,r=(0,s.c)(6),[a,l]=(0,u.useState)("");r[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{l(((0,lO.pd)(w.fV.hash??"")??"").replace("diff-",""))},r[0]=e):e=r[0];let o=e;r[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>(window.addEventListener("hashchange",o),o(),()=>{window.removeEventListener("hashchange",o)}),n=[o],r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,u.useEffect)(t,n);let c=a?`diff-${a}`:"";return r[3]!==a||r[4]!==c?(i={selectedPathDigest:a,selectedFullDiffHash:c},r[3]=a,r[4]=c,r[5]=i):i=r[5],i}();return r[2]!==o||r[3]!==f||r[4]!==m||r[5]!==h||r[6]!==c?(n=(0,a.jsx)(lB,{directory:f,fileNodeRenderer:o,sortByDiffOrder:c,onSelect:m,hash:h}),r[2]=o,r[3]=f,r[4]=m,r[5]=h,r[6]=c,r[7]=n):n=r[7],r[8]!==d||r[9]!==n?(i=(0,a.jsx)(lA.G,{"aria-label":"File Tree",className:d,children:n}),r[8]=d,r[9]=n,r[10]=i):i=r[10],i});try{lF.displayName||(lF.displayName="File")}catch{}try{lB.displayName||(lB.displayName="Directory")}catch{}try{lU.displayName||(lU.displayName="DirectoryRendering")}catch{}try{lH.displayName||(lH.displayName="DiffFileTree")}catch{}function lz(e){return{path:e.filePath,pathType:"file",node:e,sortOrder:e.sortOrder}}function lV(e){return{path:e.path,pathType:"directory",node:e,sortOrder:e.sortOrder}}function lG(e,t){return e.sortOrder-t.sortOrder}function lW(e,t){return(0,e_.wH)(e.path,t.path)}var lK=n(39467);let lq="diff_file_tree",lX=(0,u.memo)(lJ),lQ=(0,l.kw)();function lJ(e){return lQ?function(e){let t,n,i,r,l,o,c,d,m,f,h,p,g=(0,s.c)(40),{contentId:x,diffs:b,onFileSelected:y,diffsHeader:j,unselectedFileExtensions:C,onFilterTextChange:v,onFileExtensionsChange:N}=e,[w,L]=(0,u.useState)(""),{getCommentCountByPath:_}=(0,eJ.B)(),k=(0,u.useRef)(null),E=(0,u.useRef)(null),I=(0,u.useRef)(null);g[0]!==b?(t=(0,e_.s2)(b),g[0]=b,g[1]=t):t=g[1];let D=t,T=b;if(C&&C.size>0){let e;if(g[2]!==T||g[3]!==C){let t;g[5]!==C?(t=e=>!C.has((0,e_.QC)(e.path)),g[5]=C,g[6]=t):t=g[6],e=T.filter(t),g[2]=T,g[3]=C,g[4]=e}else e=g[4];T=e}if(g[7]!==w||g[8]!==T?(n=w?T.filter(e=>e.path.toLowerCase().includes(w.toLowerCase())):T,g[7]=w,g[8]=T,g[9]=n):n=g[9],g[10]!==_||g[11]!==n){let e;g[13]!==_?(e=e=>{let t=_(e.path);return{...e,totalCommentsCount:t??0}},g[13]=_,g[14]=e):e=g[14],i=n.map(e),g[10]=_,g[11]=n,g[12]=i}else i=g[12];let A=i;g[15]!==y?(r=()=>{y((0,lK.nn)(window.innerWidth)<=lK.Gy.medium?"close_tree":void 0)},g[15]=y,g[16]=r):r=g[16];let R=r;g[17]!==v?(l=e=>{L(e),v(e)},g[17]=v,g[18]=l):l=g[18];let $=l;g[19]!==x?(o=function(){let e=document.getElementById(x),t=document.getElementById(lq),n=!1;if(e?.contains(document.activeElement)&&(n=!0),n){let n=I.current||t;E.current=e?.contains(document.activeElement)?document.activeElement:null,n?.focus()}else{let n=E.current||e;I.current=t?.contains(document.activeElement)?document.activeElement:null,n?.focus()}},g[19]=x,g[20]=o):o=g[20];let O=o;return g[21]!==O?(c=(0,a.jsx)(S.ak,{commands:{"pull-requests-diff-file-tree:focus-file-tree":O}}),g[21]=O,g[22]=c):c=g[22],g[23]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)("h2",{className:"sr-only",children:"File tree"}),g[23]=d):d=g[23],g[24]!==j?(m=(0,a.jsx)("div",{className:"d-md-none",ref:k,children:j}),g[24]=j,g[25]=m):m=g[25],g[26]!==D||g[27]!==w||g[28]!==N||g[29]!==$||g[30]!==C?(f=(0,a.jsx)(lY,{filterText:w,onFilterTextChange:$,fileExtensions:D,unselectedFileExtensions:C,onFileExtensionsChange:N}),g[26]=D,g[27]=w,g[28]=N,g[29]=$,g[30]=C,g[31]=f):f=g[31],g[32]!==A||g[33]!==R?(h=(0,a.jsx)(lH,{diffs:A,onSelect:R,sortByDiffOrder:!1}),g[32]=A,g[33]=R,g[34]=h):h=g[34],g[35]!==f||g[36]!==h||g[37]!==c||g[38]!==m?(p=(0,a.jsxs)("div",{className:"d-flex flex-column gap-2",id:lq,tabIndex:-1,children:[c,d,m,f,h]}),g[35]=f,g[36]=h,g[37]=c,g[38]=m,g[39]=p):p=g[39],p}(e):function({contentId:e,diffs:t,onFileSelected:n,diffsHeader:i,unselectedFileExtensions:r,onFilterTextChange:l,onFileExtensionsChange:s}){let[o,c]=(0,u.useState)(""),{getCommentCountByPath:d}=(0,eJ.B)(),m=(0,u.useRef)(null),f=(0,u.useRef)(null),h=(0,u.useRef)(null),p=(0,u.useMemo)(()=>(0,e_.s2)(t),[t]),g=t;r&&r.size>0&&(g=g.filter(e=>!r.has((0,e_.QC)(e.path))));let x=(o?g.filter(e=>e.path.toLowerCase().includes(o.toLowerCase())):g).map(e=>{let t=d(e.path);return{...e,totalCommentsCount:t??0}});return(0,a.jsxs)("div",{className:"d-flex flex-column gap-2",id:lq,tabIndex:-1,children:[(0,a.jsx)(S.ak,{commands:{"pull-requests-diff-file-tree:focus-file-tree":function(){let t=document.getElementById(e),n=document.getElementById(lq),i=!1;if(t?.contains(document.activeElement)&&(i=!0),i){let e=h.current||n;f.current=t?.contains(document.activeElement)?document.activeElement:null,e?.focus()}else{let e=f.current||t;h.current=n?.contains(document.activeElement)?document.activeElement:null,e?.focus()}}}}),(0,a.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,a.jsx)("div",{className:"d-md-none",ref:m,children:i}),(0,a.jsx)(lY,{filterText:o,onFilterTextChange:e=>{c(e),l(e)},fileExtensions:p,unselectedFileExtensions:r,onFileExtensionsChange:s}),(0,a.jsx)(lH,{diffs:x,onSelect:()=>{n((0,lK.nn)(window.innerWidth)<=lK.Gy.medium?"close_tree":void 0)},sortByDiffOrder:!1})]})}(e)}let lY=(0,l.kw)()?function(e){let t,n,i,r,l=(0,s.c)(10),{filterText:o,onFilterTextChange:c,fileExtensions:d,unselectedFileExtensions:m,onFileExtensionsChange:f}=e;l[0]!==c?(t=(0,lD.s)(e=>c(e),250),l[0]=c,l[1]=t):t=l[1];let h=(0,u.useRef)(t);l[2]!==f?(n=(e,t)=>{f(e,t.extension)},l[2]=f,l[3]=n):n=l[3];let p=n;return l[4]===Symbol.for("react.memo_cache_sentinel")?(i=e=>h.current(e),l[4]=i):i=l[4],l[5]!==d||l[6]!==o||l[7]!==p||l[8]!==m?(r=(0,a.jsx)(lT.kF,{filterText:o,fileExtensions:d,unselectedFileExtensions:m,onFilterTextChange:i,onFilterChange:p}),l[5]=d,l[6]=o,l[7]=p,l[8]=m,l[9]=r):r=l[9],r}:function({filterText:e,onFilterTextChange:t,fileExtensions:n,unselectedFileExtensions:i,onFileExtensionsChange:r}){let l=(0,u.useRef)((0,lD.s)(e=>t(e),250));return(0,a.jsx)(lT.kF,{filterText:e,fileExtensions:n,unselectedFileExtensions:i,onFilterTextChange:e=>l.current(e),onFilterChange:(e,t)=>{r(e,t.extension)}})};try{lX.displayName||(lX.displayName="FileTree")}catch{}try{lJ.displayName||(lJ.displayName="FileTreeUnmemoized")}catch{}try{lY.displayName||(lY.displayName="FileFilter")}catch{}var lZ=n(21935);let l0=(0,l.kw)()?function(e,t){let n,i,r,a=(0,s.c)(7),[l,o]=(0,u.useState)(void 0),[c,d]=(0,u.useState)("initial");return a[0]!==t||a[1]!==e?(n=()=>{let n;o(void 0),d("loading");let i=w.cg?.location.hash;i&&/^#commitcomment-\d+$/.test(i)&&(n=i.replace("#commitcomment-","")),(async()=>{try{let i=await l1({repo:e,commitOid:t,untilCommentId:n});o(i),d("loaded")}catch{d("error")}})()},i=[t,e],a[0]=t,a[1]=e,a[2]=n,a[3]=i):(n=a[2],i=a[3]),(0,u.useEffect)(n,i),a[4]!==l||a[5]!==c?(r={deferredCommentData:l,state:c},a[4]=l,a[5]=c,a[6]=r):r=a[6],r}:function(e,t){let[n,i]=(0,u.useState)(void 0),[r,a]=(0,u.useState)("initial");return(0,u.useEffect)(()=>{let n;i(void 0),a("loading");let r=w.cg?.location.hash;r&&/^#commitcomment-\d+$/.test(r)&&(n=r.replace("#commitcomment-","")),(async()=>{try{let r=await l1({repo:e,commitOid:t,untilCommentId:n});i(r),a("loaded")}catch{a("error")}})()},[t,e]),{deferredCommentData:n,state:r}};async function l1({repo:e,commitOid:t,untilCommentId:n}){let i=await (0,eT.Sr)((0,v.clg)({owner:e.ownerLogin,repo:e.name,commitOid:t,untilCommentId:n}));if(i.ok)return await i.json();throw Error("Failed to fetch comment data")}let l2=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(6),a=(0,o.t)();r[0]===Symbol.for("react.memo_cache_sentinel")?(t={branches:[],tags:[],loading:!0},r[0]=t):t=r[0];let[l,c]=(0,u.useState)(t);return r[1]!==e||r[2]!==a.name||r[3]!==a.ownerLogin?(n=()=>{let t=!1;return(async()=>{c({branches:[],tags:[],loading:!0});let n=await (0,eT.lS)((0,v.jnS)({owner:a.ownerLogin,repo:a.name,commitish:e}));if(!t)try{if(n.ok){let e=await n.json();e.loading=!1,e&&c({...e,loading:!1})}else c({branches:[],tags:[],loading:!1})}catch{c({branches:[],tags:[],loading:!1})}})(),function(){t=!0}},i=[a.ownerLogin,a.name,e],r[1]=e,r[2]=a.name,r[3]=a.ownerLogin,r[4]=n,r[5]=i):(n=r[4],i=r[5]),(0,u.useEffect)(n,i),l}:function(e){let t=(0,o.t)(),[n,i]=(0,u.useState)({branches:[],tags:[],loading:!0});return(0,u.useEffect)(()=>{let n=!1;return(async()=>{i({branches:[],tags:[],loading:!0});let r=await (0,eT.lS)((0,v.jnS)({owner:t.ownerLogin,repo:t.name,commitish:e}));if(!n)try{if(r.ok){let e=await r.json();e.loading=!1,e&&i({...e,loading:!1})}else i({branches:[],tags:[],loading:!1})}catch{i({branches:[],tags:[],loading:!1})}})(),function(){n=!0}},[t.ownerLogin,t.name,e]),n};var l3=n(8624),l4=n(71833);let l5={sm:lK.Gy.small,md:lK.Gy.medium,lg:lK.Gy.large},l6={size:"medium",mobileBreakpoint:"md"},l7=(0,l.kw)()?function(e,t,n,i){let r,l,o,c,d,m,f,h,p,g,x,b=(0,s.c)(44);b[0]!==i?(r={...l6,...i},b[0]=i,b[1]=r):r=b[1];let y=r;b[2]===Symbol.for("react.memo_cache_sentinel")?(l=[],b[2]=l):l=b[2];let[j]=(0,L.I)(l8,!0,l),C=(0,u.useRef)(null),v=(0,u.useRef)(null),N=l5[y.mobileBreakpoint??"md"],[w,S]=(0,u.useState)(t),[_,k]=(0,u.useState)(!1);b[3]!==n||b[4]!==N?(o=()=>{(0,lK.nn)(window.innerWidth)<=N?(k(!0),requestAnimationFrame(()=>v.current?.focus())):(S(!0),(0,l4.B)(!0,n),requestAnimationFrame(()=>C.current?.focus()))},b[3]=n,b[4]=N,b[5]=o):o=b[5];let E=o;b[6]!==n||b[7]!==N?(c=()=>{(0,lK.nn)(window.innerWidth)<=N?(k(!1),requestAnimationFrame(()=>v.current?.focus())):(S(!1),(0,l4.B)(!1,n),requestAnimationFrame(()=>C.current?.focus()))},b[6]=n,b[7]=N,b[8]=c):c=b[8];let I=c,D=w?"Collapse file tree":"Expand file tree";b[9]!==I||b[10]!==E||b[11]!==w?(d=()=>{w?I():E()},b[9]=I,b[10]=E,b[11]=w,b[12]=d):d=b[12];let T=`d-none d-${y.mobileBreakpoint}-flex position-relative`;b[13]!==y.size||b[14]!==e||b[15]!==w||b[16]!==D||b[17]!==d||b[18]!==T?(m=(0,a.jsx)(l3.L,{expanded:w,alignment:"left",ariaLabel:D,tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:C,onToggleExpanded:d,className:T,size:y.size}),b[13]=y.size,b[14]=e,b[15]=w,b[16]=D,b[17]=d,b[18]=T,b[19]=m):m=b[19];let A=m,R=_?"Collapse file tree":"Expand file tree";b[20]!==I||b[21]!==E||b[22]!==_?(f=()=>{_?I():E()},b[20]=I,b[21]=E,b[22]=_,b[23]=f):f=b[23];let $=`d-${y.mobileBreakpoint}-none position-relative`;b[24]!==y.size||b[25]!==e||b[26]!==_||b[27]!==$||b[28]!==R||b[29]!==f?(h=(0,a.jsx)(l3.L,{expanded:_,alignment:"left",ariaLabel:R,tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:v,onToggleExpanded:f,className:$,size:y.size}),b[24]=y.size,b[25]=e,b[26]=_,b[27]=$,b[28]=R,b[29]=f,b[30]=h):h=b[30];let O=h;b[31]!==O||b[32]!==A?(p=(0,a.jsxs)(a.Fragment,{children:[O,A]}),b[31]=O,b[32]=A,b[33]=p):p=b[33];let P=p,M=j&&!t;return b[34]!==_?(g={narrow:_,regular:!1},b[34]=_,b[35]=g):g=b[35],b[36]!==I||b[37]!==E||b[38]!==_||b[39]!==w||b[40]!==M||b[41]!==g||b[42]!==P?(x={splitPagePaneHidden:M,splitPageContentHidden:g,isTreeExpanded:w,isMobileTreeExpanded:_,expandTree:E,collapseTree:I,treeToggleElement:P,treeToggleRef:C},b[36]=I,b[37]=E,b[38]=_,b[39]=w,b[40]=M,b[41]=g,b[42]=P,b[43]=x):x=b[43],x}:function(e,t,n,i){let r={...l6,...i},[l]=(0,L.I)(()=>!1,!0,[]),s=(0,u.useRef)(null),o=(0,u.useRef)(null),c=l5[r.mobileBreakpoint??"md"],[d,m]=(0,u.useState)(t),[f,h]=(0,u.useState)(!1),p=(0,u.useCallback)(()=>{(0,lK.nn)(window.innerWidth)<=c?(h(!0),requestAnimationFrame(()=>o.current?.focus())):(m(!0),(0,l4.B)(!0,n),requestAnimationFrame(()=>s.current?.focus()))},[c,n]),g=(0,u.useCallback)(()=>{(0,lK.nn)(window.innerWidth)<=c?(h(!1),requestAnimationFrame(()=>o.current?.focus())):(m(!1),(0,l4.B)(!1,n),requestAnimationFrame(()=>s.current?.focus()))},[c,n]),x=(0,u.useMemo)(()=>(0,a.jsx)(l3.L,{expanded:d,alignment:"left",ariaLabel:d?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:s,onToggleExpanded:()=>{d?g():p()},className:`d-none d-${r.mobileBreakpoint}-flex position-relative`,size:r.size}),[d,e,r.mobileBreakpoint,r.size,g,p]),b=(0,u.useMemo)(()=>(0,a.jsx)(l3.L,{expanded:f,alignment:"left",ariaLabel:f?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:o,onToggleExpanded:()=>{f?g():p()},className:`d-${r.mobileBreakpoint}-none position-relative`,size:r.size}),[f,e,r.mobileBreakpoint,r.size,g,p]);return{splitPagePaneHidden:l&&!t,splitPageContentHidden:{narrow:f,regular:!1},isTreeExpanded:d,isMobileTreeExpanded:f,expandTree:p,collapseTree:g,treeToggleElement:(0,u.useMemo)(()=>(0,a.jsxs)(a.Fragment,{children:[b,x]}),[b,x]),treeToggleRef:s}};function l8(){return!1}let l9=(0,u.createContext)({diffFindOpen:!1,setDiffFindOpen:()=>void 0}),se=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(9),{children:l,searchTerm:o,setSearchTerm:c}=e,d=(0,u.useRef)(""),[m,f]=(0,u.useState)(!1);r[0]!==o||r[1]!==c?(t=e=>{e&&""===o&&""!==d.current?c(d.current):e||""===o||(d.current=o,c("")),f(e)},r[0]=o,r[1]=c,r[2]=t):t=r[2];let h=t;r[3]!==m||r[4]!==h?(n={diffFindOpen:m,setDiffFindOpen:h},r[3]=m,r[4]=h,r[5]=n):n=r[5];let p=n;return r[6]!==l||r[7]!==p?(i=(0,a.jsx)(l9,{value:p,children:l}),r[6]=l,r[7]=p,r[8]=i):i=r[8],i}:function({children:e,searchTerm:t,setSearchTerm:n}){let i=(0,u.useRef)(""),[r,l]=(0,u.useState)(!1),s=(0,u.useCallback)(e=>{e&&""===t&&""!==i.current?n(i.current):e||""===t||(i.current=t,n("")),l(e)},[t,n]),o=(0,u.useMemo)(()=>({diffFindOpen:r,setDiffFindOpen:s}),[r,s]);return(0,a.jsx)(l9,{value:o,children:e})};(0,l.kw)();try{l9.displayName||(l9.displayName="DiffFindOpenContext")}catch{}try{se.displayName||(se.displayName="DiffFindOpenProvider")}catch{}function st(e){let t=e.findIndex(e=>void 0===e.oldOid)-1;return[-2===t?e:e.slice(0,t+1),e.map(e=>({path:e.path,changeType:e.status,pathDigest:e.pathDigest}))]}let sn="Commit-module__SplitPageLayout_Content--uy_M4",si="Commit-module__HiddenPane--CH19B",sr="Commit-module__Pane--jjRPV",sa="Commit-module__MobileExpanded--TvGDJ",sl="Commit-module__TreeExpanded--mn5GU",ss=(0,N.E7)(),so="diff-content-parent",sc=(0,l.kw)()?function(){let e,t,n,i,r,l,o,c,f,h,p,g,I,D,T,A,R,P,M,F,B,U,H,z,V,G,W,K,q,X,Q,J,Y=(0,s.c)(113);(0,_.L)(!0);let Z=(0,m.B)(),{splitPagePaneHidden:ee,splitPageContentHidden:et,treeToggleElement:en,collapseTree:ei,isMobileTreeExpanded:er,isTreeExpanded:ea}=l7(lq,Z.fileTreeExpanded,Z.currentUser),[el,es]=(0,u.useState)(sh);Y[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],Y[0]=e):e=Y[0];let[eo]=(0,L.I)(sf,!0,e),[ec,ed]=(0,u.useState)(""),[em,eu]=(0,u.useState)("");(0,u.useState)(!1),Y[1]!==ei?(t=e=>{"close_tree"===e&&ei()},Y[1]=ei,Y[2]=t):t=Y[2];let ef=t,eh=l2(Z.commit.oid);Y[3]!==Z.commit.oid||Y[4]!==Z.repo.name||Y[5]!==Z.repo.ownerLogin?(n=(0,v.t0c)({owner:Z.repo.ownerLogin,repo:Z.repo.name,commitish:Z.commit.oid}),Y[3]=Z.commit.oid,Y[4]=Z.repo.name,Y[5]=Z.repo.ownerLogin,Y[6]=n):n=Y[6];let ep=n;Y[7]===Symbol.for("react.memo_cache_sentinel")?(i={onSuccess:su,onError:sm},Y[7]=i):i=Y[7];let{mutate:eg}=(0,x.U)(i),ex=(0,b.C0)(Z.splitViewPreference);Y[8]!==Z.commentsPreference||Y[9]!==Z.diffLineSpacingPreference||Y[10]!==ex?(r={splitPreference:ex,lineSpacing:Z.diffLineSpacingPreference,commentsPreference:Z.commentsPreference},Y[8]=Z.commentsPreference,Y[9]=Z.diffLineSpacingPreference,Y[10]=ex,Y[11]=r):r=Y[11];let eb=r,{data:ey}=(0,b.ID)(eb);Y[12]!==ey?.commentsPreference||Y[13]!==eg?(l=()=>{eg({commentsPreference:ey?.commentsPreference===y.sI.Visible?y.sI.Collapsed:y.sI.Visible})},Y[12]=ey?.commentsPreference,Y[13]=eg,Y[14]=l):l=Y[14],ey?.commentsPreference;let ej=l;Y[15]!==el?(o=(e,t)=>{let n=new Set(el);"selectFileExtension"===e?n.delete(t):"unselectFileExtension"===e&&n.add(t),es(n)},Y[15]=el,Y[16]=o):o=Y[16];let ev=o;Y[17]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{es(new Set)},Y[17]=c):c=Y[17],Y[18]!==Z.commit?(f=[Z.commit],Y[18]=Z.commit,Y[19]=f):f=Y[19],(0,u.useEffect)(c,f),Y[20]!==Z.path?(h=[Z.path],Y[20]=Z.path,Y[21]=h):h=Y[21],(0,u.useEffect)(sd,h);let{deferredCommentData:eN,state:ew}=l0(Z.repo,Z.commit.oid),eL=eN?.threadMarkers,e_=eN?.inlineComments,[ek,eE]=(0,u.useState)(!Z.moreDiffsToLoad),[eI,eD]=(0,u.useState)(void 0);if(Y[22]!==ek||Y[23]!==eN||Y[24]!==ew?(p=()=>{if("loaded"===ew&&ek){let e=w.cg?.location.hash.slice(1);if(e&&eN){if(/^commitcomment-\d+$/.test(e))eN?.discussionComments.comments.find(t=>t.urlFragment===e)&&w.cg?.requestAnimationFrame(()=>{let t=document.getElementById(e??"");t&&(t.scrollIntoView({block:"center"}),t.focus())});else if(/^r\d+$/.test(e)){let t=e.replace("r","");for(let e of eN.threadMarkers)if(e.threads){for(let n of e.threads)if(n.commentsData.comments){for(let e of n.commentsData.comments)if(e&&e.id&&e.id.toString()===t)return void eD(n.id)}}}}}},g=[ek,eN,ew],Y[22]=ek,Y[23]=eN,Y[24]=ew,Y[25]=p,Y[26]=g):(p=Y[25],g=Y[26]),(0,u.useEffect)(p,g),Z.unavailableReason){let e;return Y[27]!==eh||Y[28]!==Z.commit||Y[29]!==Z.unavailableReason?(e=(0,a.jsx)(eS,{commit:Z.commit,commitInfo:eh,unavailableReason:Z.unavailableReason}),Y[27]=eh,Y[28]=Z.commit,Y[29]=Z.unavailableReason,Y[30]=e):e=Y[30],e}Y[31]!==Z.diffEntryData?(I=st(Z.diffEntryData),Y[31]=Z.diffEntryData,Y[32]=I):I=Y[32];let[eT,eA]=I;Y[33]!==Z.commit.oid||Y[34]!==Z.repo.name||Y[35]!==Z.repo.ownerLogin?(D=()=>{let e=(0,v.$Qz)({owner:Z.repo.ownerLogin,repo:Z.repo.name,commitish:Z.commit.oid});(0,C.kd)(e)},Y[33]=Z.commit.oid,Y[34]=Z.repo.name,Y[35]=Z.repo.ownerLogin,Y[36]=D):D=Y[36];let eR=D;Y[37]!==ej||Y[38]!==eR?(T=(0,a.jsx)(S.ak,{commands:{"commit-diff-view:create-permalink":eR,"commit-diff-view:collapse-expand-comments":ej}}),Y[37]=ej,Y[38]=eR,Y[39]=T):T=Y[39],Y[40]!==eh||Y[41]!==Z.commit.oid||Y[42]!==Z.repo?(A=(0,a.jsx)($,{commitBranchState:eh,oid:Z.commit.oid,repo:Z.repo}),Y[40]=eh,Y[41]=Z.commit.oid,Y[42]=Z.repo,Y[43]=A):A=Y[43],Y[44]!==eh||Y[45]!==Z.commit||Y[46]!==Z.repo?(R=(0,a.jsx)(eC,{commit:Z.commit,commitInfo:eh,repo:Z.repo}),Y[44]=eh,Y[45]=Z.commit,Y[46]=Z.repo,Y[47]=R):R=Y[47],Y[48]!==A||Y[49]!==R?(P=(0,a.jsxs)(k.O7.Header,{children:[A,R]}),Y[48]=A,Y[49]=R,Y[50]=P):P=Y[50],Y[51]===Symbol.for("react.memo_cache_sentinel")?(M={regular:"line",narrow:"none"},Y[51]=M):M=Y[51];let e$=ee?si:sr,eO=er&&sa,eP=ea&&sl;Y[52]!==e$||Y[53]!==eO||Y[54]!==eP?(F=(0,E.$)(e$,eO,eP),Y[52]=e$,Y[53]=eO,Y[54]=eP,Y[55]=F):F=Y[55],Y[56]===Symbol.for("react.memo_cache_sentinel")?(B=(0,a.jsx)("span",{children:"File tree failed to load."}),Y[56]=B):B=Y[56],Y[57]!==Z.headerInfo||Y[58]!==en?(U=(0,a.jsx)(lb,{treeToggleElement:en,headerInfo:Z.headerInfo}),Y[57]=Z.headerInfo,Y[58]=en,Y[59]=U):U=Y[59],Y[60]!==eA||Y[61]!==ev||Y[62]!==ef||Y[63]!==U||Y[64]!==el?(H=(0,a.jsx)(d.t,{fallback:B,children:(0,a.jsx)(lX,{contentId:so,diffs:eA,onFileSelected:ef,unselectedFileExtensions:el,diffsHeader:U,onFileExtensionsChange:ev,onFilterTextChange:ed})}),Y[60]=eA,Y[61]=ev,Y[62]=ef,Y[63]=U,Y[64]=el,Y[65]=H):H=Y[65],Y[66]!==F||Y[67]!==H?(z=(0,a.jsx)(k.O7.Pane,{position:"start",sticky:!0,divider:M,widthStorageKey:"diff-tree-pane-width",resizable:!0,className:F,children:H}),Y[66]=F,Y[67]=H,Y[68]=z):z=Y[68],Y[69]!==eT||Y[70]!==ep||Y[71]!==ec||Y[72]!==er||Y[73]!==eo||Y[74]!==Z.commit.oid||Y[75]!==Z.diffEntryData?.length||Y[76]!==Z.headerInfo||Y[77]!==Z.ignoreWhitespace||Y[78]!==Z.repo||Y[79]!==em||Y[80]!==en||Y[81]!==el?(V=eo?(0,a.jsx)(lL,{diffEntryData:eT,contextLinePathURL:ep,repo:Z.repo,oid:Z.commit.oid,treeToggleElement:en,headerInfo:Z.headerInfo,totalFileCount:Z.diffEntryData?.length??0}):(0,a.jsx)(se,{searchTerm:em,setSearchTerm:eu,children:(0,a.jsx)(l_,{totalFileCount:Z.diffEntryData?.length??0,treeToggleElement:en,headerInfo:Z.headerInfo,isTreeExpanded:er,searchTerm:em,setSearchTerm:eu,setCanFocusComments:eE,ignoreWhitespace:Z.ignoreWhitespace,diffEntryData:eT,contextLinePathURL:ep,filterTerm:ec,unselectedFileExtensions:el,repo:Z.repo,oid:Z.commit.oid})}),Y[69]=eT,Y[70]=ep,Y[71]=ec,Y[72]=er,Y[73]=eo,Y[74]=Z.commit.oid,Y[75]=Z.diffEntryData?.length,Y[76]=Z.headerInfo,Y[77]=Z.ignoreWhitespace,Y[78]=Z.repo,Y[79]=em,Y[80]=en,Y[81]=el,Y[82]=V):V=Y[82];let eM=eN?.discussionComments?.comments,eF=eN?.discussionComments?.count,eB=eN?.discussionComments?.canLoadMore,eU=eN?.subscribed;return Y[83]!==Z.commentInfo||Y[84]!==Z.commit||Y[85]!==Z.repoOwnerGlobalRelayId?(G=(0,a.jsx)(O.$,{commit:Z.commit,commentInfo:Z.commentInfo,repoOwnerGlobalRelayId:Z.repoOwnerGlobalRelayId}),Y[83]=Z.commentInfo,Y[84]=Z.commit,Y[85]=Z.repoOwnerGlobalRelayId,Y[86]=G):G=Y[86],Y[87]!==Z.commit.oid||Y[88]!==Z.repo||Y[89]!==ew||Y[90]!==eM||Y[91]!==eF||Y[92]!==eB||Y[93]!==eU||Y[94]!==G?(W=(0,a.jsx)(lZ.c,{comments:eM,commentCount:eF,canLoadMore:eB,subscribed:eU,providerState:ew,repo:Z.repo,commitOid:Z.commit.oid,children:G}),Y[87]=Z.commit.oid,Y[88]=Z.repo,Y[89]=ew,Y[90]=eM,Y[91]=eF,Y[92]=eB,Y[93]=eU,Y[94]=G,Y[95]=W):W=Y[95],Y[96]===Symbol.for("react.memo_cache_sentinel")?(K=(0,a.jsx)(j.nq,{}),Y[96]=K):K=Y[96],Y[97]!==V||Y[98]!==W?(q=(0,a.jsxs)("div",{id:so,tabIndex:-1,children:[V,W,K]}),Y[97]=V,Y[98]=W,Y[99]=q):q=Y[99],Y[100]!==et||Y[101]!==q?(X=(0,a.jsx)(k.O7.Content,{as:"div",width:"full",hidden:et,padding:"none",className:sn,children:q}),Y[100]=et,Y[101]=q,Y[102]=X):X=Y[102],Y[103]!==P||Y[104]!==z||Y[105]!==X?(Q=(0,a.jsxs)(k.O7,{children:[P,z,X]}),Y[103]=P,Y[104]=z,Y[105]=X,Y[106]=Q):Q=Y[106],Y[107]!==e_||Y[108]!==eI||Y[109]!==T||Y[110]!==Q||Y[111]!==eL?(J=(0,a.jsx)(N.mf,{environment:ss,children:(0,a.jsxs)(eJ.r,{initialInlineComments:e_,initialFiles:eL,initialExpandedThreadId:eI,children:[T,Q]})}),Y[107]=e_,Y[108]=eI,Y[109]=T,Y[110]=Q,Y[111]=eL,Y[112]=J):J=Y[112],J}:function(){(0,_.L)(!0);let e=(0,m.B)(),{splitPagePaneHidden:t,splitPageContentHidden:n,treeToggleElement:i,collapseTree:r,isMobileTreeExpanded:l,isTreeExpanded:s}=l7(lq,e.fileTreeExpanded,e.currentUser),[o,c]=(0,u.useState)(()=>new Set),[f]=(0,L.I)(()=>!1,!0,[]),[h,p]=(0,u.useState)(""),[g,I]=(0,u.useState)(""),[D,T]=(0,u.useState)(!1),A=(0,u.useCallback)(e=>{"close_tree"===e&&r()},[r]),R=l2(e.commit.oid),P=(0,v.t0c)({owner:e.repo.ownerLogin,repo:e.repo.name,commitish:e.commit.oid}),{mutate:M}=(0,x.U)({onSuccess:()=>{},onError:()=>{}}),F=(0,b.C0)(e.splitViewPreference),B=(0,u.useMemo)(()=>({splitPreference:F,lineSpacing:e.diffLineSpacingPreference,commentsPreference:e.commentsPreference}),[e.commentsPreference,e.diffLineSpacingPreference,F]),{data:U}=(0,b.ID)(B),H=(0,u.useCallback)(()=>{M({commentsPreference:U?.commentsPreference===y.sI.Visible?y.sI.Collapsed:y.sI.Visible})},[U?.commentsPreference,M]),z=(0,u.useCallback)((e,t)=>{let n=new Set(o);"selectFileExtension"===e?n.delete(t):"unselectFileExtension"===e&&n.add(t),c(n)},[o]);(0,u.useEffect)(()=>{c(new Set)},[e.commit]),(0,u.useEffect)(()=>{(w.cg?.scrollY??0)>0&&w.cg?.scrollTo(0,0)},[e.path]);let{deferredCommentData:V,state:G}=l0(e.repo,e.commit.oid),W=V?.threadMarkers,K=V?.inlineComments,[q,X]=(0,u.useState)(!e.moreDiffsToLoad),[Q,J]=(0,u.useState)(void 0);if((0,u.useEffect)(()=>{if("loaded"===G&&q){let e=w.cg?.location.hash.slice(1);if(e&&V){if(/^commitcomment-\d+$/.test(e))V?.discussionComments.comments.find(t=>t.urlFragment===e)&&w.cg?.requestAnimationFrame(()=>{let t=document.getElementById(e??"");t&&(t.scrollIntoView({block:"center"}),t.focus())});else if(/^r\d+$/.test(e)){let t=e.replace("r","");for(let e of V.threadMarkers)if(e.threads){for(let n of e.threads)if(n.commentsData.comments){for(let e of n.commentsData.comments)if(e&&e.id&&e.id.toString()===t)return void J(n.id)}}}}}},[q,V,G]),e.unavailableReason)return(0,a.jsx)(eS,{commit:e.commit,commitInfo:R,unavailableReason:e.unavailableReason});let[Y,Z]=st(e.diffEntryData);return(0,a.jsx)(N.mf,{environment:ss,children:(0,a.jsxs)(eJ.r,{initialInlineComments:K,initialFiles:W,initialExpandedThreadId:Q,children:[(0,a.jsx)(S.ak,{commands:{"commit-diff-view:create-permalink":()=>{let t=(0,v.$Qz)({owner:e.repo.ownerLogin,repo:e.repo.name,commitish:e.commit.oid});(0,C.kd)(t)},"commit-diff-view:collapse-expand-comments":H}}),(0,a.jsxs)(k.O7,{children:[(0,a.jsxs)(k.O7.Header,{children:[(0,a.jsx)($,{commitBranchState:R,oid:e.commit.oid,repo:e.repo}),(0,a.jsx)(eC,{commit:e.commit,commitInfo:R,repo:e.repo})]}),(0,a.jsx)(k.O7.Pane,{position:"start",sticky:!0,divider:{regular:"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:!0,className:(0,E.$)(t?si:sr,l&&sa,s&&sl),children:(0,a.jsx)(d.t,{fallback:(0,a.jsx)("span",{children:"File tree failed to load."}),children:(0,a.jsx)(lX,{contentId:so,diffs:Z,onFileSelected:A,unselectedFileExtensions:o,diffsHeader:(0,a.jsx)(lb,{treeToggleElement:i,headerInfo:e.headerInfo}),onFileExtensionsChange:z,onFilterTextChange:p})})}),(0,a.jsx)(k.O7.Content,{as:"div",width:"full",hidden:n,padding:"none",className:sn,children:(0,a.jsxs)("div",{id:so,tabIndex:-1,children:[f?(0,a.jsx)(lL,{diffEntryData:Y,contextLinePathURL:P,repo:e.repo,oid:e.commit.oid,treeToggleElement:i,headerInfo:e.headerInfo,totalFileCount:e.diffEntryData?.length??0}):(0,a.jsx)(se,{searchTerm:g,setSearchTerm:I,children:(0,a.jsx)(l_,{totalFileCount:e.diffEntryData?.length??0,treeToggleElement:i,headerInfo:e.headerInfo,isTreeExpanded:l,searchTerm:g,setSearchTerm:I,setCanFocusComments:X,ignoreWhitespace:e.ignoreWhitespace,diffEntryData:Y,contextLinePathURL:P,filterTerm:h,unselectedFileExtensions:o,repo:e.repo,oid:e.commit.oid})}),(0,a.jsx)(lZ.c,{comments:V?.discussionComments?.comments,commentCount:V?.discussionComments?.count,canLoadMore:V?.discussionComments?.canLoadMore,subscribed:V?.subscribed,providerState:G,repo:e.repo,commitOid:e.commit.oid,children:(0,a.jsx)(O.$,{commit:e.commit,commentInfo:e.commentInfo,repoOwnerGlobalRelayId:e.repoOwnerGlobalRelayId})}),(0,a.jsx)(j.nq,{})]})})]})]})})};function sd(){(w.cg?.scrollY??0)>0&&w.cg?.scrollTo(0,0)}function sm(){}function su(){}function sf(){return!1}function sh(){return new Set}try{sc.displayName||(sc.displayName="Commit")}catch{}var sp=n(69599);let sg=(0,l.kw)()?function(e){let t,n=(0,s.c)(2),{url:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"color-fg-muted f6 mt-4",children:["Seeing something unexpected? Take a look at the",(0,a.jsxs)(H.A,{inline:!0,href:i,children:[" ","GitHub commits guide"]}),"."]})}),n[0]=i,n[1]=t):t=n[1],t}:function({url:e}){return(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"color-fg-muted f6 mt-4",children:["Seeing something unexpected? Take a look at the",(0,a.jsxs)(H.A,{inline:!0,href:e,children:[" ","GitHub commits guide"]}),"."]})})};try{sg.displayName||(sg.displayName="CommitHelpMessage")}catch{}let sx=(0,u.createContext)({since:null,until:null,author:null,currentBlobPath:"",pagination:{hasNextPage:!1,hasPreviousPage:!1,endCursor:"",startCursor:""},newPath:null,originalBranch:null}),sb=(0,l.kw)()?function(e){let t,n=(0,s.c)(3),{filters:i,children:r}=e;return n[0]!==r||n[1]!==i?(t=(0,a.jsx)(sx,{value:i,children:r}),n[0]=r,n[1]=i,n[2]=t):t=n[2],t}:function({filters:e,children:t}){return(0,a.jsx)(sx,{value:e,children:t})},sy=(0,l.kw)()?function(){return(0,u.useContext)(sx)}:function(){return(0,u.useContext)(sx)};try{sx.displayName||(sx.displayName="FilterContext")}catch{}try{sb.displayName||(sb.displayName="FilterProvider")}catch{}var sj=n(34745),sC=n(4095);let sv="FileHistory-module__TimelineRow--IgQLc";var sN=n(89830);let sw=(0,l.kw)()?function(){let e=sS(),t=sy();return!e&&!t.pagination.hasPreviousPage}:function(){let e=sS(),t=sy();return!e&&!t.pagination.hasPreviousPage},sS=(0,l.kw)()?function(){let e=sy();return e.newPath&&e.originalBranch}:function(){let e=sy();return e.newPath&&e.originalBranch},sL=(0,l.kw)()?function(){let e,t,n,i,r=(0,s.c)(12),l=(0,o.t)(),c=sy();if(!sS())return null;let d=`Renamed to ${c.newPath}`;return r[0]!==d?(e=(0,a.jsx)(sN.s.Heading,{as:"h3",title:d,"data-testid":"commit-note-title"}),r[0]=d,r[1]=e):e=r[1],r[2]!==c.newPath||r[3]!==c.originalBranch||r[4]!==l.name||r[5]!==l.ownerLogin?(t=(0,v.GpY)({owner:l.ownerLogin,repo:l.name,ref:c.originalBranch,path:c.newPath}),r[2]=c.newPath,r[3]=c.originalBranch,r[4]=l.name,r[5]=l.ownerLogin,r[6]=t):t=r[6],r[7]!==t?(n=(0,a.jsx)(eu.N,{to:t,children:"(Browse History)"}),r[7]=t,r[8]=n):n=r[8],r[9]!==e||r[10]!==n?(i=(0,a.jsx)(sN.s,{className:sv,children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline",children:[e,n]})}),r[9]=e,r[10]=n,r[11]=i):i=r[11],i}:function(){let e=(0,o.t)(),t=sy();return sS()?(0,a.jsx)(sN.s,{className:sv,children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline",children:[(0,a.jsx)(sN.s.Heading,{as:"h3",title:`Renamed to ${t.newPath}`,"data-testid":"commit-note-title"}),(0,a.jsx)(eu.N,{to:(0,v.GpY)({owner:e.ownerLogin,repo:e.name,ref:t.originalBranch,path:t.newPath}),children:"(Browse History)"})]})}):null},s_=(0,l.kw)()?function(){let e,t,n,i=(0,s.c)(7),r=(0,sC.ej)();if(!r?.hasRenameCommits)return null;let l=`Renamed from ${r?.oldName}`;i[0]!==l?(e=(0,a.jsx)(sN.s.Heading,{as:"h3",title:l,"data-testid":"commit-note-title"}),i[0]=l,i[1]=e):e=i[1];let o=r?.historyUrl;return i[2]!==o?(t=(0,a.jsx)(eu.N,{to:o,children:"(Browse History)"}),i[2]=o,i[3]=t):t=i[3],i[4]!==e||i[5]!==t?(n=(0,a.jsx)(sN.s,{children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline",children:[e,t]})}),i[4]=e,i[5]=t,i[6]=n):n=i[6],n}:function(){let e=(0,sC.ej)();return e?.hasRenameCommits?(0,a.jsx)(sN.s,{children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline",children:[(0,a.jsx)(sN.s.Heading,{as:"h3",title:`Renamed from ${e?.oldName}`,"data-testid":"commit-note-title"}),(0,a.jsx)(eu.N,{to:e?.historyUrl,children:"(Browse History)"})]})}):null},sk=(0,l.kw)()?function(){let e,t=(0,s.c)(1),n=(0,sC.ej)();return n?.hasRenameCommits?null:(t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(sN.s,{clipTimeline:"bottom",children:(0,a.jsx)(sN.s.Heading,{as:"h3",title:"End of commit history for this file","data-testid":"commit-note-title"})}),t[0]=e):e=t[0],e)}:function(){let e=(0,sC.ej)();return e?.hasRenameCommits?null:(0,a.jsx)(sN.s,{clipTimeline:"bottom",children:(0,a.jsx)(sN.s.Heading,{as:"h3",title:"End of commit history for this file","data-testid":"commit-note-title"})})},sE=(0,l.kw)()?function(){let e,t,n,i=(0,s.c)(7),r=sy(),l=(0,sC.xs)();return!r.currentBlobPath||r.currentBlobPath&&r.pagination.hasNextPage?null:(i[0]!==l?(e=l&&(0,a.jsx)(sN.s,{leadingVisual:(0,a.jsx)(tW.A,{size:"small"})}),i[0]=l,i[1]=e):e=i[1],i[2]!==l?(t=!l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s_,{}),(0,a.jsx)(sk,{})]}),i[2]=l,i[3]=t):t=i[3],i[4]!==e||i[5]!==t?(n=(0,a.jsxs)(a.Fragment,{children:[e,t]}),i[4]=e,i[5]=t,i[6]=n):n=i[6],n)}:function(){let e=sy(),t=(0,sC.xs)();return!e.currentBlobPath||e.currentBlobPath&&e.pagination.hasNextPage?null:(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(sN.s,{leadingVisual:(0,a.jsx)(tW.A,{size:"small"})}),!t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s_,{}),(0,a.jsx)(sk,{})]})]})};try{sL.displayName||(sL.displayName="RenamedToHistory")}catch{}try{s_.displayName||(s_.displayName="RenamedFromHistory")}catch{}try{sk.displayName||(sk.displayName="EndOfFileHistory")}catch{}try{sE.displayName||(sE.displayName="EndOfFile")}catch{}let sI=(0,l.kw)()?function(e){let t,n,i,r,l=(0,s.c)(10),{commitGroups:c,deferredDataUrl:d,softNavToCommit:m}=e,u=sy(),f=(0,o.t)(),h=(0,K.wu)(d);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(rw.A,{as:"h2",className:"sr-only",children:"Commit History"}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(sL,{}),l[1]=n):n=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(sE,{}),l[2]=i):i=l[2];let p=sw();return l[3]!==c||l[4]!==h||l[5]!==u.currentBlobPath||l[6]!==f||l[7]!==m||l[8]!==p?(r=(0,a.jsxs)("div",{className:"mb-3","data-hpc":!0,children:[t,(0,a.jsx)(sj.f,{leadingContent:n,commitGroups:c,trailingContent:i,repository:f,deferredCommitData:h,shouldClipTimeline:p,currentBlobPath:u.currentBlobPath,softNavToCommit:m})]}),l[3]=c,l[4]=h,l[5]=u.currentBlobPath,l[6]=f,l[7]=m,l[8]=p,l[9]=r):r=l[9],r}:function({commitGroups:e,deferredDataUrl:t,softNavToCommit:n}){let i=sy(),r=(0,o.t)(),l=(0,K.wu)(t);return(0,a.jsxs)("div",{className:"mb-3","data-hpc":!0,children:[(0,a.jsx)(rw.A,{as:"h2",className:"sr-only",children:"Commit History"}),(0,a.jsx)(sj.f,{leadingContent:(0,a.jsx)(sL,{}),commitGroups:e,trailingContent:(0,a.jsx)(sE,{}),repository:r,deferredCommitData:l,shouldClipTimeline:sw(),currentBlobPath:i.currentBlobPath,softNavToCommit:n})]})};try{sI.displayName||(sI.displayName="CommitList")}catch{}var sD=n(92130),sT=n(4817),sA=n(54589),sR=n(62935);let s$="CopilotCommitRecapPanel-module__Box--FD5ej",sO="CopilotCommitRecapPanel-module__Box_1--nhXX2",sP="CopilotCommitRecapPanel-module__Box_2--xtWb6",sM="CopilotCommitRecapPanel-module__Octicon--mL7Wb",sF="CopilotCommitRecapPanel-module__Heading--xNRxb",sB="CopilotCommitRecapPanel-module__Box_3--j9Ce0",sU="CopilotCommitRecapPanel-module__Box_4--G1Y8S",sH="CopilotCommitRecapPanel-module__Text--M5_1P",sz="CopilotCommitRecapPanel-module__Box_5--iXw2r",sV="CopilotCommitRecapPanel-module__Box_6--_r4Ho",sG="CopilotCommitRecapPanel-module__Box_7--C0btw",sW="CopilotCommitRecapPanel-module__Text_1--SYCkI",sK="CopilotCommitRecapPanel-module__Box_8--ETSez",sq="CopilotCommitRecapPanel-module__Text_2--B03jL",sX="CopilotCommitRecapPanel-module__fadeInAuthor--sP6yf",sQ="CopilotCommitRecapPanel-module__avatarLink--o9oMm",sJ="CopilotCommitRecapPanel-module__headerContainer--DVfrh",sY="CopilotCommitRecapPanel-module__authorNameLink--iNSl5",sZ="CopilotCommitRecapPanel-module__authorNameText--GppXf",s0="CopilotCommitRecapPanel-module__prLink--zm2QK",s1="CopilotCommitRecapPanel-module__commitMetadataContainer--zl5sU",s2="CopilotCommitRecapPanel-module__commitCountLink--OK0QX",s3="CopilotCommitRecapPanel-module__commitCountText--Ym2YE",s4="CopilotCommitRecapPanel-module__Footer--MlgKD",s5="CopilotCommitRecapPanel-module__FeedbackButtons--fU6am",s6="CopilotCommitRecapPanel-module__isHidden--XMEtq",s7="CopilotCommitRecapPanel-module__relativeTime--dlXGT",s8="https://docs.google.com/forms/d/e/1FAIpQLSeKJgUAL0ENwW13Qy-QuiihzSfXfs81vzP0Jc5FZX-CCNDJnQ/viewform",s9=(0,l.kw)()?e=>{let t,n=(0,s.c)(3),{size:i}=e,r=function(e){switch(e.toUpperCase()){case"XS":case"S":return"success";case"M":return"attention";case"L":return"severe";case"XL":return"danger";default:return"secondary"}}(i);return n[0]!==i||n[1]!==r?(t=(0,a.jsxs)(V.A,{className:"ml-2",variant:r,size:"small",children:["size: ",i]}),n[0]=i,n[1]=r,n[2]=t):t=n[2],t}:({size:e})=>(0,a.jsxs)(V.A,{className:"ml-2",variant:(e=>{switch(e.toUpperCase()){case"XS":case"S":return"success";case"M":return"attention";case"L":return"severe";case"XL":return"danger";default:return"secondary"}})(e),size:"small",children:["size: ",e]}),oe=(0,l.kw)()?e=>{let t,n,i=(0,s.c)(4),{initials:r}=e;return i[0]!==r?(t=r.toUpperCase(),i[0]=r,i[1]=t):t=i[1],i[2]!==t?(n=(0,a.jsx)("div",{className:s$,children:t}),i[2]=t,i[3]=n):n=i[3],n}:({initials:e})=>(0,a.jsx)("div",{className:s$,children:e.toUpperCase()}),ot=(0,l.kw)()?e=>{let t,n=(0,s.c)(8),{login:i,avatarUrl:r,name:l,repoOwner:o,repoName:c,refName:d}=e,m=function(e){let t=e.trim();if(!t)return"??";let n=t.split(/\s+/).filter(oc);return n.length>=2?(n[0]?.charAt(0)||"")+(n[n.length-1]?.charAt(0)||""):t.charAt(0)+(t.charAt(1)||"")}(i||l);if(r&&i){let e,t,l=`/${encodeURIComponent(o)}/${encodeURIComponent(c)}/commits${d?`/${encodeURIComponent(d)}`:""}?author=${encodeURIComponent(i)}`,s=`@${i}`;return n[0]!==r||n[1]!==s?(e=(0,a.jsx)(n0.r,{src:r,size:24,alt:s}),n[0]=r,n[1]=s,n[2]=e):e=n[2],n[3]!==l||n[4]!==e?(t=(0,a.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer nofollow",className:sQ,children:e}),n[3]=l,n[4]=e,n[5]=t):t=n[5],t}return n[6]!==m?(t=(0,a.jsx)(oe,{initials:m}),n[6]=m,n[7]=t):t=n[7],t}:({login:e,avatarUrl:t,name:n,repoOwner:i,repoName:r,refName:l})=>{let s=(e=>{let t=e.trim();if(!t)return"??";let n=t.split(/\s+/).filter(e=>e.length>0);return n.length>=2?(n[0]?.charAt(0)||"")+(n[n.length-1]?.charAt(0)||""):t.charAt(0)+(t.charAt(1)||"")})(e||n);if(t&&e){let n=`/${encodeURIComponent(i)}/${encodeURIComponent(r)}/commits${l?`/${encodeURIComponent(l)}`:""}?author=${encodeURIComponent(e)}`;return(0,a.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer nofollow",className:sQ,children:(0,a.jsx)(n0.r,{src:t,size:24,alt:`@${e}`})})}return(0,a.jsx)(oe,{initials:s})},on=(0,l.kw)()?e=>{let t,n=(0,s.c)(7),{author:i,repoOwner:r,repoName:l,refName:o,className:c}=e;if(i.login){let e,t=`/${encodeURIComponent(r)}/${encodeURIComponent(l)}/commits${o?`/${encodeURIComponent(o)}`:""}?author=${encodeURIComponent(i.login)}`,s=`${c} ${sY}`;return n[0]!==i.name||n[1]!==t||n[2]!==s?(e=(0,a.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer nofollow",className:s,children:i.name}),n[0]=i.name,n[1]=t,n[2]=s,n[3]=e):e=n[3],e}let d=`${c} ${sZ}`;return n[4]!==i.name||n[5]!==d?(t=(0,a.jsx)("span",{className:d,children:i.name}),n[4]=i.name,n[5]=d,n[6]=t):t=n[6],t}:({author:e,repoOwner:t,repoName:n,refName:i,className:r})=>{if(e.login){let l=`/${encodeURIComponent(t)}/${encodeURIComponent(n)}/commits${i?`/${encodeURIComponent(i)}`:""}?author=${encodeURIComponent(e.login)}`;return(0,a.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer nofollow",className:`${r} ${sY}`,children:e.name})}return(0,a.jsx)("span",{className:`${r} ${sZ}`,children:e.name})},oi=(0,l.kw)()?e=>{let t,n,i,r,l,o,c=(0,s.c)(13),{pr:d,repoOwner:m,repoName:u}=e;c[0]!==d.state?(t=()=>"merged"===d.state?"var(--fgColor-done)":"var(--fgColor-open)",c[0]=d.state,c[1]=t):t=c[1];let h=t,p=`/${encodeURIComponent(m)}/${encodeURIComponent(u)}/pull/${encodeURIComponent(d.number)}`,g=h();return c[2]!==g?(n={color:g},c[2]=g,c[3]=n):n=c[3],c[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(f.GitPullRequestIcon,{size:16}),c[4]=i):i=c[4],c[5]!==n?(r=(0,a.jsx)("span",{style:n,children:i}),c[5]=n,c[6]=r):r=c[6],c[7]!==d.number?(l=(0,a.jsxs)("span",{children:["#",d.number]}),c[7]=d.number,c[8]=l):l=c[8],c[9]!==p||c[10]!==r||c[11]!==l?(o=(0,a.jsxs)("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:s0,children:[r,l]}),c[9]=p,c[10]=r,c[11]=l,c[12]=o):o=c[12],o}:({pr:e,repoOwner:t,repoName:n})=>{let i=`/${encodeURIComponent(t)}/${encodeURIComponent(n)}/pull/${encodeURIComponent(e.number)}`;return(0,a.jsxs)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:s0,children:[(0,a.jsx)("span",{style:{color:"merged"===e.state?"var(--fgColor-done)":"var(--fgColor-open)"},children:(0,a.jsx)(f.GitPullRequestIcon,{size:16})}),(0,a.jsxs)("span",{children:["#",e.number]})]})},or=(0,l.kw)()?e=>{let t,n,i,r,l,o,c=(0,s.c)(19),{pr:d,commits:m,size:u,repoOwner:h,repoName:p}=e;c[0]!==m||c[1]!==p||c[2]!==h?(t=(()=>{if(1===m.length&&m[0])return(0,v.$Qz)({owner:h,repo:p,commitish:m[0].oid});if(m.length>=2){let e=m.filter(od);if(e.length>=2){let t=[...e].sort(om);if(t.length>=2){let e=t[0],n=t[t.length-1];if(e&&n)return`/${encodeURIComponent(h)}/${encodeURIComponent(p)}/compare/${e.oid}^...${n.oid}`}}}return null})(),c[0]=m,c[1]=p,c[2]=h,c[3]=t):t=c[3];let g=t,x=m.length;return c[4]!==x||c[5]!==g?(n=g?(0,a.jsxs)("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:s2,children:[(0,a.jsx)(f.GitCommitIcon,{size:16}),1===x?"1 commit":`${x} commits`]}):(0,a.jsxs)("span",{className:s3,children:[(0,a.jsx)(f.GitCommitIcon,{size:16}),1===x?"1 commit":`${x} commits`]}),c[4]=x,c[5]=g,c[6]=n):n=c[6],c[7]!==u?(i=u&&(0,a.jsx)(s9,{size:u}),c[7]=u,c[8]=i):i=c[8],c[9]!==n||c[10]!==i?(r=(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[n,i]}),c[9]=n,c[10]=i,c[11]=r):r=c[11],c[12]!==d||c[13]!==p||c[14]!==h?(l=d&&(0,a.jsx)(oi,{pr:d,repoOwner:h,repoName:p}),c[12]=d,c[13]=p,c[14]=h,c[15]=l):l=c[15],c[16]!==r||c[17]!==l?(o=(0,a.jsxs)("div",{className:s1,children:[r,l]}),c[16]=r,c[17]=l,c[18]=o):o=c[18],o}:({pr:e,commits:t,size:n,repoOwner:i,repoName:r})=>{let l=(()=>{if(1===t.length&&t[0])return(0,v.$Qz)({owner:i,repo:r,commitish:t[0].oid});if(t.length>=2){let e=t.filter(e=>e.author?.date&&""!==e.author.date.trim());if(e.length>=2){let t=[...e].sort((e,t)=>new Date(e.author.date).getTime()-new Date(t.author.date).getTime());if(t.length>=2){let e=t[0],n=t[t.length-1];if(e&&n)return`/${encodeURIComponent(i)}/${encodeURIComponent(r)}/compare/${e.oid}^...${n.oid}`}}}return null})(),s=t.length;return(0,a.jsxs)("div",{className:s1,children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[l?(0,a.jsxs)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:s2,children:[(0,a.jsx)(f.GitCommitIcon,{size:16}),1===s?"1 commit":`${s} commits`]}):(0,a.jsxs)("span",{className:s3,children:[(0,a.jsx)(f.GitCommitIcon,{size:16}),1===s?"1 commit":`${s} commits`]}),n&&(0,a.jsx)(s9,{size:n})]}),e&&(0,a.jsx)(oi,{pr:e,repoOwner:i,repoName:r})]})},oa=[],ol=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,h,p,g,x,b,y,j=(0,s.c)(50),{isVisible:C,isLoading:v,analysis:N,repoOwner:w,repoName:S,refName:L,onClose:_,commitGroups:k}=e,E=void 0===k?oa:k,T=(0,u.useRef)(null),A=(0,u.useRef)(null),{sendClickAnalyticsEvent:R}=(0,id.S)(),[$,O]=(0,u.useState)(!1),P=N.analysisData,M=N.errorMessage;if(j[0]!==P){for(let e of(t=new Map,P))t.set(e.oid,{summary:e.summary,size:e.size});j[0]=P,j[1]=t}else t=j[1];let F=t;e:{let e;if(!E||0===E.length){let e;j[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],j[2]=e):e=j[2],n=e;break e}j[3]!==E?(e=E.map(oo),j[3]=E,j[4]=e):e=j[4],n=e}let B=n,U=!!M;j[5]!==L||j[6]!==R?(i=e=>{R({category:"copilot.commit-recap",action:`feedback-${e}`,refName:L||""}),O(!0)},j[5]=L,j[6]=R,j[7]=i):i=j[7];let H=i;j[8]!==_||j[9]!==L||j[10]!==R?(r=()=>{R({category:"copilot.commit-recap",action:"panel-closed",refName:L||""}),_?.()},j[8]=_,j[9]=L,j[10]=R,j[11]=r):r=j[11];let V=r;if(j[12]!==L||j[13]!==R?(l=()=>{let e=A.current;if(!e)return;let t=e=>{let t=e.target.closest("a");t&&t.href&&R({category:"copilot.commit-recap",action:"link-clicked",refName:L||"",href:t.href})};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}},j[12]=L,j[13]=R,j[14]=l):l=j[14],j[15]!==P||j[16]!==C||j[17]!==L||j[18]!==R?(o=[C,L,P,R],j[15]=P,j[16]=C,j[17]=L,j[18]=R,j[19]=o):o=j[19],(0,u.useEffect)(l,o),!C)return null;let G=0===P.length&&!U;return j[20]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsxs)("div",{className:sJ,children:[(0,a.jsx)(D.A,{icon:f.CopilotIcon,className:sM}),(0,a.jsx)(rw.A,{as:"h3",className:sF,children:"Commit recap"}),(0,a.jsx)(sA.X,{className:"pl-2"})]}),j[20]=c):c=j[20],j[21]!==V||j[22]!==_?(d=_&&(0,a.jsx)(z.K,{"aria-label":"Close commit recap",icon:f.XIcon,size:"small",variant:"invisible",onClick:V}),j[21]=V,j[22]=_,j[23]=d):d=j[23],j[24]!==d?(m=(0,a.jsxs)("div",{className:sP,children:[c,d]}),j[24]=d,j[25]=m):m=j[25],j[26]!==G?(h=G&&(0,a.jsxs)("div",{className:sB,children:[(0,a.jsx)("div",{className:sU,children:(0,a.jsx)(sD.A,{})}),(0,a.jsx)("span",{className:sH,children:"Analyzing recent commits..."})]}),j[26]=G,j[27]=h):h=j[27],j[28]!==M||j[29]!==U?(p=U&&(0,a.jsx)(I.A,{variant:"danger",className:sU,children:M}),j[28]=M,j[29]=U,j[30]=p):p=j[30],j[31]!==P.length||j[32]!==F||j[33]!==B||j[34]!==U||j[35]!==v||j[36]!==L||j[37]!==S||j[38]!==w?(g=P.length>0&&!U&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{ref:T,className:`${sz} ${sX}`,children:B.map((e,t)=>{let n=e.commits[0]?.oid,i=n?F.get(n):void 0,r=e.authors,l=e.commits.reduce(os,new Date(0));return i?(0,a.jsxs)("div",{className:sV,children:[r.length>0&&(0,a.jsxs)("div",{className:sG,children:[r.slice(0,3).map((e,n)=>(0,a.jsx)("div",{className:`${sX} ${v&&t===B.length-1?s6:""}`,style:{animationDelay:`${200*t+100*n}ms`},children:(0,a.jsx)(ot,{login:e.login,avatarUrl:e.avatarUrl,name:e.name,repoOwner:w,repoName:S,refName:L})},e.login||e.name)),r.length>3&&(0,a.jsxs)("span",{className:sW,children:["+",r.length-3]})]}),(0,a.jsxs)("div",{className:`${sK} ${sX}`,style:{animationDelay:`${200*t}ms`},children:[r.length>0&&(0,a.jsxs)("span",{children:[r.map((e,t)=>(0,a.jsxs)("span",{children:[(0,a.jsx)(on,{author:e,repoOwner:w,repoName:S,refName:L,className:sX}),t<r.length-1&&", "]},e.login||e.name)),(0,a.jsx)(sR.A,{className:`${sX} ${s7}`,date:l})]}),(0,a.jsx)(sT.To,{markdown:i.summary,isStreaming:!1,openLinksInCurrentTab:!1})]}),e&&(0,a.jsx)("div",{className:`${sX} ${v&&t===B.length-1?s6:""}`,style:{animationDelay:`${200*t+300}ms`},children:(0,a.jsx)(or,{pr:e.pr,commits:e.commits,size:e.commits.length>0&&e.commits[0]?.oid?F.get(e.commits[0].oid)?.size:void 0,repoOwner:w,repoName:S})})]},`commitGroup-${e.groupIndex}`):null})})}),j[31]=P.length,j[32]=F,j[33]=B,j[34]=U,j[35]=v,j[36]=L,j[37]=S,j[38]=w,j[39]=g):g=j[39],j[40]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)("span",{className:sq,children:"AI-generated content may be inaccurate. Please verify important information."}),j[40]=x):x=j[40],j[41]!==$||j[42]!==H?(b=(0,a.jsxs)("div",{className:s4,children:[x,$?(0,a.jsxs)("span",{className:sq,children:["Thank you. This feature is under development and ",(0,a.jsx)("a",{href:s8,children:"detailed feedback"})," is appreciated!"]}):(0,a.jsxs)("div",{className:s5,children:[(0,a.jsx)(z.K,{"aria-label":"Good summary",icon:f.ThumbsupIcon,size:"small",variant:"invisible",onClick:()=>H("positive")}),(0,a.jsx)(z.K,{"aria-label":"Bad summary",icon:f.ThumbsdownIcon,size:"small",variant:"invisible",onClick:()=>H("negative")})]})]}),j[41]=$,j[42]=H,j[43]=b):b=j[43],j[44]!==h||j[45]!==p||j[46]!==g||j[47]!==b||j[48]!==m?(y=(0,a.jsxs)("div",{className:sO,ref:A,children:[m,h,p,g,b]}),j[44]=h,j[45]=p,j[46]=g,j[47]=b,j[48]=m,j[49]=y):y=j[49],y}:function({isVisible:e,isLoading:t,analysis:n,repoOwner:i,repoName:r,refName:l,onClose:s,commitGroups:o=oa}){let c=(0,u.useRef)(null),d=(0,u.useRef)(null),{sendClickAnalyticsEvent:m}=(0,id.S)(),[h,p]=(0,u.useState)(!1),g=n.analysisData,x=n.errorMessage,b=(0,u.useMemo)(()=>{let e=new Map;for(let t of g)e.set(t.oid,{summary:t.summary,size:t.size});return e},[g]),y=(0,u.useMemo)(()=>o&&0!==o.length?o.map((e,t)=>{let n=new Map;for(let t of e.commits)if(t.author){let e=t.author.login||t.author.name;n.has(e)||n.set(e,{login:t.author.login,avatarUrl:t.author.avatar_url,name:t.author.name})}return{groupIndex:t,authors:Array.from(n.values()),commitCount:e.commits.length,commits:e.commits,pr:e.pr}}):[],[o]),j=!!x,C=(0,u.useCallback)(e=>{m({category:"copilot.commit-recap",action:`feedback-${e}`,refName:l||""}),p(!0)},[m,l]),v=(0,u.useCallback)(()=>{m({category:"copilot.commit-recap",action:"panel-closed",refName:l||""}),s?.()},[s,m,l]);if((0,u.useEffect)(()=>{let e=d.current;if(!e)return;let t=e=>{let t=e.target.closest("a");t&&t.href&&m({category:"copilot.commit-recap",action:"link-clicked",refName:l||"",href:t.href})};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}},[e,l,g,m]),!e)return null;let N=0===g.length&&!j;return(0,a.jsxs)("div",{className:sO,ref:d,children:[(0,a.jsxs)("div",{className:sP,children:[(0,a.jsxs)("div",{className:sJ,children:[(0,a.jsx)(D.A,{icon:f.CopilotIcon,className:sM}),(0,a.jsx)(rw.A,{as:"h3",className:sF,children:"Commit recap"}),(0,a.jsx)(sA.X,{className:"pl-2"})]}),s&&(0,a.jsx)(z.K,{"aria-label":"Close commit recap",icon:f.XIcon,size:"small",variant:"invisible",onClick:v})]}),N&&(0,a.jsxs)("div",{className:sB,children:[(0,a.jsx)("div",{className:sU,children:(0,a.jsx)(sD.A,{})}),(0,a.jsx)("span",{className:sH,children:"Analyzing recent commits..."})]}),j&&(0,a.jsx)(I.A,{variant:"danger",className:sU,children:x}),g.length>0&&!j&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{ref:c,className:`${sz} ${sX}`,children:y.map((e,n)=>{let s=e.commits[0]?.oid,o=s?b.get(s):void 0,c=e.authors,d=e.commits.reduce((e,t)=>{let n=new Date(t.author?.date||0);return n>e?n:e},new Date(0));return o?(0,a.jsxs)("div",{className:sV,children:[c.length>0&&(0,a.jsxs)("div",{className:sG,children:[c.slice(0,3).map((e,s)=>(0,a.jsx)("div",{className:`${sX} ${t&&n===y.length-1?s6:""}`,style:{animationDelay:`${200*n+100*s}ms`},children:(0,a.jsx)(ot,{login:e.login,avatarUrl:e.avatarUrl,name:e.name,repoOwner:i,repoName:r,refName:l})},e.login||e.name)),c.length>3&&(0,a.jsxs)("span",{className:sW,children:["+",c.length-3]})]}),(0,a.jsxs)("div",{className:`${sK} ${sX}`,style:{animationDelay:`${200*n}ms`},children:[c.length>0&&(0,a.jsxs)("span",{children:[c.map((e,t)=>(0,a.jsxs)("span",{children:[(0,a.jsx)(on,{author:e,repoOwner:i,repoName:r,refName:l,className:sX}),t<c.length-1&&", "]},e.login||e.name)),(0,a.jsx)(sR.A,{className:`${sX} ${s7}`,date:d})]}),(0,a.jsx)(sT.To,{markdown:o.summary,isStreaming:!1,openLinksInCurrentTab:!1})]}),e&&(0,a.jsx)("div",{className:`${sX} ${t&&n===y.length-1?s6:""}`,style:{animationDelay:`${200*n+300}ms`},children:(0,a.jsx)(or,{pr:e.pr,commits:e.commits,size:e.commits.length>0&&e.commits[0]?.oid?b.get(e.commits[0].oid)?.size:void 0,repoOwner:i,repoName:r})})]},`commitGroup-${e.groupIndex}`):null})})}),(0,a.jsxs)("div",{className:s4,children:[(0,a.jsx)("span",{className:sq,children:"AI-generated content may be inaccurate. Please verify important information."}),h?(0,a.jsxs)("span",{className:sq,children:["Thank you. This feature is under development and ",(0,a.jsx)("a",{href:s8,children:"detailed feedback"})," is appreciated!"]}):(0,a.jsxs)("div",{className:s5,children:[(0,a.jsx)(z.K,{"aria-label":"Good summary",icon:f.ThumbsupIcon,size:"small",variant:"invisible",onClick:()=>C("positive")}),(0,a.jsx)(z.K,{"aria-label":"Bad summary",icon:f.ThumbsdownIcon,size:"small",variant:"invisible",onClick:()=>C("negative")})]})]})]})};function os(e,t){let n=new Date(t.author?.date||0);return n>e?n:e}function oo(e,t){let n=new Map;for(let t of e.commits)if(t.author){let e=t.author.login||t.author.name;n.has(e)||n.set(e,{login:t.author.login,avatarUrl:t.author.avatar_url,name:t.author.name})}return{groupIndex:t,authors:Array.from(n.values()),commitCount:e.commits.length,commits:e.commits,pr:e.pr}}try{s9.displayName||(s9.displayName="SizeBadge")}catch{}try{oe.displayName||(oe.displayName="Monogram")}catch{}try{ot.displayName||(ot.displayName="AuthorAvatar")}catch{}try{on.displayName||(on.displayName="AuthorNameLink")}catch{}try{oi.displayName||(oi.displayName="RichPullRequestLink")}catch{}try{or.displayName||(or.displayName="CommitGroupMetadata")}catch{}try{ol.displayName||(ol.displayName="CopilotCommitRecapPanel")}catch{}function oc(e){return e.length>0}function od(e){return e.author?.date&&""!==e.author.date.trim()}function om(e,t){return new Date(e.author.date).getTime()-new Date(t.author.date).getTime()}var ou=n(66990),of=n(96459),oh=n(40058),op=n(19415),og=n(84929),ox=n(96912),ob=n(5225);async function oy(e){let t=await (0,eT.lS)(e);return t.ok?await t.json():void 0}let oj=new Map,oC=(0,ob.A)(oy,{cache:oj}),ov=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(6),a=(0,o.t)();r[0]===Symbol.for("react.memo_cache_sentinel")?(t={users:[],error:!1,loading:!0},r[0]=t):t=r[0];let[l,c]=(0,u.useState)(t);return r[1]!==e?(n=()=>{let t=!1;return(async()=>{c({users:[],error:!1,loading:!0});let n=await oC(e);if(t)return;let i=[],r=!1;try{n?i=n.authors:r=!0}catch{r=!0}c({users:i,error:r,loading:!1})})(),function(){t=!0}},r[1]=e,r[2]=n):n=r[2],r[3]!==a||r[4]!==e?(i=[a,"",e,"all"],r[3]=a,r[4]=e,r[5]=i):i=r[5],(0,u.useEffect)(n,i),l}:function(e){let t=(0,o.t)(),[n,i]=(0,u.useState)({users:[],error:!1,loading:!0});return(0,u.useEffect)(()=>{let t=!1;return(async()=>{i({users:[],error:!1,loading:!0});let n=await oC(e);if(t)return;let r=[],a=!1;try{n?r=n.authors:a=!0}catch{a=!0}i({users:r,error:a,loading:!1})})(),function(){t=!0}},[t,"",e,"all"]),n};function oN(e,t){let n=new URL(w.fV.origin+w.fV.pathname+w.fV.search,w.fV.origin),i=n.searchParams;for(let e of t)i.has(e)&&i.delete(e);for(let[t,n]of Object.entries(e))i.set(t,n.toString());return n.pathname+n.search}var ow=n(6907);function oS(e){if(e)return{startDate:(0,ow.x)(e.from,{representation:"date"}),endDate:(0,ow.x)(e.to,{representation:"date"})}}let oL="ListHeader-module__calendarIcon--ubuuD",o_="ListHeader-module__breadcrumbItem--UVN4V",ok=(0,u.lazy)(()=>Promise.resolve().then(n.bind(n,83463)).then(e=>({default:e.DatePicker}))),oE=(0,l.kw)()?()=>{let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(D.A,{icon:f.CalendarIcon,className:(0,E.$)("fgColor-muted",oL)}),t[0]=e):e=t[0],e}:()=>(0,a.jsx)(D.A,{icon:f.CalendarIcon,className:(0,E.$)("fgColor-muted",oL)}),oI=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,h,p,g,x,b,y,j,C,N,w,S,L,_,k,E=(0,s.c)(65),{repo:I,refInfo:D,path:T,author:A,contributorsUrl:R,since:$,until:O,showCopilotButton:M,showCopilotPopover:F,onCopilotRecap:B,isLoadingCopilotRecap:H}=e,z=void 0!==M&&M,V=void 0!==F&&F,G=void 0!==H&&H,W=D.name;if(W===D.currentOid){let e;E[0]!==D.currentOid?(e=(0,q.F)(D.currentOid),E[0]=D.currentOid,E[1]=e):e=E[1],W=e}let K=(0,of.Z)(),X=ov(R),[Q,J]=(0,u.useState)(V);E[2]!==V?(t=()=>{J(V)},n=[V],E[2]=V,E[3]=t,E[4]=n):(t=E[3],n=E[4]),u.useEffect(t,n),E[5]===Symbol.for("react.memo_cache_sentinel")?(i=async()=>{J(!1),await (0,eT.DI)("/settings/dismiss-notice/copilot_commit_recap_new_user_popover",{method:"POST"})},E[5]=i):i=E[5];let Y=i;e:{let e,t,n,i;if(E[6]!==$||E[7]!==O?(e=(0,og.H)($??""),n=(0,og.H)(O??""),t=!(0,ox.f)(e)||!(0,ox.f)(n),E[6]=$,E[7]=O,E[8]=e,E[9]=t,E[10]=n):(e=E[8],t=E[9],n=E[10]),t){r=null;break e}E[11]!==e||E[12]!==n?(i={from:e,to:n},E[11]=e,E[12]=n,E[13]=i):i=E[13],r=i}let Z=r;if(E[14]!==T||E[15]!==D.name||E[16]!==W||E[17]!==I){let e=T?.split("/");l=P.B,m="horizontal",h="condensed",o="space-between",c="mb-3",d=T&&(0,a.jsx)("div",{className:"d-flex flex-items-center",children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline flex-column flex-sm-row",children:[(0,a.jsx)(rw.A,{as:"h2",className:"sr-only",children:"Breadcrumbs"}),(0,a.jsx)("span",{className:"fgColor-default no-wrap",children:"History for"}),(0,a.jsxs)(iu.BI,{className:"ml-1",children:[(0,a.jsx)(iu.BI.Item,{href:(0,v.GpY)({owner:I.ownerLogin,repo:I.name}),children:I.name}),e.map((e,t,n)=>{let i=(0,v.GpY)({owner:I.ownerLogin,repo:I.name,ref:D.name,path:n.slice(0,t+1).join("/")}),r=t===n.length-1;return(0,a.jsx)(iu.BI.Item,{sx:{...r?{fontWeight:"bold"}:{}},href:i,selected:r,className:o_,children:e},i)})]}),(0,a.jsxs)("div",{className:"no-wrap",children:[(0,a.jsx)("span",{className:"mr-2 ml-0 ml-sm-2 fgColor-default",children:"on"}),(0,a.jsx)(ee.A,{href:(0,v.IO9)({repo:I,commitish:D.name,action:"tree"}),children:W})]})]})}),E[14]=T,E[15]=D.name,E[16]=W,E[17]=I,E[18]=l,E[19]=o,E[20]=c,E[21]=d,E[22]=m,E[23]=h}else l=E[18],o=E[19],c=E[20],d=E[21],m=E[22],h=E[23];E[24]!==T||E[25]!==D.listCacheKey||E[26]!==D.name||E[27]!==D.refType||E[28]!==I?(p=!T&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rw.A,{as:"h2",className:"sr-only",children:"Branch selector"}),(0,a.jsx)(ou.PI,{cacheKey:D.listCacheKey,canCreate:!1,hotKey:"w",currentCommitish:D.name,getHref:e=>(0,v.GpY)({owner:I.ownerLogin,repo:I.name,ref:e}),selectedRefType:D.refType,defaultBranch:I.defaultBranch,owner:I.ownerLogin,repo:I.name,idEnding:"commits"})]}),E[24]=T,E[25]=D.listCacheKey,E[26]=D.name,E[27]=D.refType,E[28]=I,E[29]=p):p=E[29],E[30]!==Q||E[31]!==G||E[32]!==B||E[33]!==z?(g=z&&(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)(U.Q,{variant:"default",leadingVisual:f.CopilotIcon,disabled:G,onClick:B,children:G?"Analyzing\u2026":"Commit recap"}),Q&&(0,a.jsx)(op.A,{relative:!1,open:!0,caret:"top",className:"mt-2",style:{left:"50%",transform:"translateX(-50%)"},children:(0,a.jsxs)(op.A.Content,{overflow:"visible",className:"p-3",children:[(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("strong",{children:"Introducing the commit recap"})}),(0,a.jsx)("div",{className:"mb-3 text-small",children:"Groups together commits to cut through noise with summarized changes and linked pull requests."}),(0,a.jsx)("div",{className:"d-flex gap-2",children:(0,a.jsx)(U.Q,{size:"small",onClick:Y,children:"OK, got it"})})]})})]}),E[30]=Q,E[31]=G,E[32]=B,E[33]=z,E[34]=g):g=E[34],E[35]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)(rw.A,{as:"h2",className:"sr-only",children:"User selector"}),E[35]=x):x=E[35];let et=A??void 0;return E[36]!==A?.login||E[37]!==K?(b=e=>{e.login!==A?.login&&K(oN({author:e.login},["author","before","after"]))},E[36]=A?.login,E[37]=K,E[38]=b):b=E[38],E[39]!==X||E[40]!==et||E[41]!==b?(y=(0,a.jsx)(oh.T,{defaultText:"All users",width:"medium",usersState:X,showTypedInUser:!0,currentUser:et,onOpenChange:oA,onSelect:b,renderCustomFooter:oT}),E[39]=X,E[40]=et,E[41]=b,E[42]=y):y=E[42],E[43]===Symbol.for("react.memo_cache_sentinel")?(j=(0,a.jsx)(U.Q,{leadingVisual:oE,trailingVisual:f.TriangleDownIcon,children:"All time"}),C=(0,a.jsx)(rw.A,{as:"h2",className:"sr-only",children:"Datepicker"}),E[43]=j,E[44]=C):(j=E[43],C=E[44]),E[45]===Symbol.for("react.memo_cache_sentinel")?(N=new Date(2005,3,7),w=new Date,E[45]=N,E[46]=w):(N=E[45],w=E[46]),E[47]!==K?(S=e=>{if(!e)return void K(oN({},["since","until"]));let t=oS(e);if(!t)return;let{startDate:n,endDate:i}=t;K(oN({since:n,until:i},["before","after"]))},E[47]=K,E[48]=S):S=E[48],E[49]!==S||E[50]!==Z?(L=(0,a.jsxs)(u.Suspense,{fallback:j,children:[C,(0,a.jsx)(ok,{variant:"range",value:Z,minDate:N,maxDate:w,showTodayButton:!0,showClearButton:!0,compressedHeader:!0,onChange:S,placeholder:"All time",anchor:oD})]}),E[49]=S,E[50]=Z,E[51]=L):L=E[51],E[52]!==g||E[53]!==y||E[54]!==L?(_=(0,a.jsxs)("div",{className:"d-flex flex-column flex-sm-row gap-2",children:[g,x,y,L]}),E[52]=g,E[53]=y,E[54]=L,E[55]=_):_=E[55],E[56]!==l||E[57]!==o||E[58]!==c||E[59]!==d||E[60]!==p||E[61]!==_||E[62]!==m||E[63]!==h?(k=(0,a.jsxs)(l,{direction:m,gap:h,justify:o,className:c,children:[d,p,_]}),E[56]=l,E[57]=o,E[58]=c,E[59]=d,E[60]=p,E[61]=_,E[62]=m,E[63]=h,E[64]=k):k=E[64],k}:function({repo:e,refInfo:t,path:n,author:i,contributorsUrl:r,since:l,until:s,showCopilotButton:o=!1,showCopilotPopover:c=!1,onCopilotRecap:d,isLoadingCopilotRecap:m=!1}){let h=t.name;h===t.currentOid&&(h=(0,q.F)(t.currentOid));let p=(0,of.Z)(),g=ov(r),[x,b]=(0,u.useState)(c);u.useEffect(()=>{b(c)},[c]);let y=(0,u.useCallback)(async()=>{b(!1),await (0,eT.DI)("/settings/dismiss-notice/copilot_commit_recap_new_user_popover",{method:"POST"})},[]),j=u.useMemo(()=>{let e=(0,og.H)(l??""),t=(0,og.H)(s??"");return(0,ox.f)(e)&&(0,ox.f)(t)?{from:e,to:t}:null},[l,s]),C=n?.split("/");return(0,a.jsxs)(P.B,{direction:"horizontal",gap:"condensed",justify:"space-between",className:"mb-3",children:[n&&(0,a.jsx)("div",{className:"d-flex flex-items-center",children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline flex-column flex-sm-row",children:[(0,a.jsx)(rw.A,{as:"h2",className:"sr-only",children:"Breadcrumbs"}),(0,a.jsx)("span",{className:"fgColor-default no-wrap",children:"History for"}),(0,a.jsxs)(iu.BI,{className:"ml-1",children:[(0,a.jsx)(iu.BI.Item,{href:(0,v.GpY)({owner:e.ownerLogin,repo:e.name}),children:e.name}),C.map((n,i,r)=>{let l=(0,v.GpY)({owner:e.ownerLogin,repo:e.name,ref:t.name,path:r.slice(0,i+1).join("/")}),s=i===r.length-1;return(0,a.jsx)(iu.BI.Item,{sx:{...s?{fontWeight:"bold"}:{}},href:l,selected:s,className:o_,children:n},l)})]}),(0,a.jsxs)("div",{className:"no-wrap",children:[(0,a.jsx)("span",{className:"mr-2 ml-0 ml-sm-2 fgColor-default",children:"on"}),(0,a.jsx)(ee.A,{href:(0,v.IO9)({repo:e,commitish:t.name,action:"tree"}),children:h})]})]})}),!n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rw.A,{as:"h2",className:"sr-only",children:"Branch selector"}),(0,a.jsx)(ou.PI,{cacheKey:t.listCacheKey,canCreate:!1,hotKey:"w",currentCommitish:t.name,getHref:t=>(0,v.GpY)({owner:e.ownerLogin,repo:e.name,ref:t}),selectedRefType:t.refType,defaultBranch:e.defaultBranch,owner:e.ownerLogin,repo:e.name,idEnding:"commits"})]}),(0,a.jsxs)("div",{className:"d-flex flex-column flex-sm-row gap-2",children:[o&&(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)(U.Q,{variant:"default",leadingVisual:f.CopilotIcon,disabled:m,onClick:d,children:m?"Analyzing\u2026":"Commit recap"}),x&&(0,a.jsx)(op.A,{relative:!1,open:!0,caret:"top",className:"mt-2",style:{left:"50%",transform:"translateX(-50%)"},children:(0,a.jsxs)(op.A.Content,{overflow:"visible",className:"p-3",children:[(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("strong",{children:"Introducing the commit recap"})}),(0,a.jsx)("div",{className:"mb-3 text-small",children:"Groups together commits to cut through noise with summarized changes and linked pull requests."}),(0,a.jsx)("div",{className:"d-flex gap-2",children:(0,a.jsx)(U.Q,{size:"small",onClick:y,children:"OK, got it"})})]})})]}),(0,a.jsx)(rw.A,{as:"h2",className:"sr-only",children:"User selector"}),(0,a.jsx)(oh.T,{defaultText:"All users",width:"medium",usersState:g,showTypedInUser:!0,currentUser:i??void 0,onOpenChange:e=>e,onSelect:e=>{e.login!==i?.login&&p(oN({author:e.login},["author","before","after"]))},renderCustomFooter:()=>(0,a.jsx)("div",{className:"px-2 py-3 border-top border-color-border-default",children:(0,a.jsx)(U.Q,{variant:"link",as:"a",href:oN({},["author"]),block:!0,children:"View commits for all users"})})}),(0,a.jsxs)(u.Suspense,{fallback:(0,a.jsx)(U.Q,{leadingVisual:oE,trailingVisual:f.TriangleDownIcon,children:"All time"}),children:[(0,a.jsx)(rw.A,{as:"h2",className:"sr-only",children:"Datepicker"}),(0,a.jsx)(ok,{variant:"range",value:j,minDate:new Date(2005,3,7),maxDate:new Date,showTodayButton:!0,showClearButton:!0,compressedHeader:!0,onChange:e=>{if(!e)return void p(oN({},["since","until"]));let t=oS(e);if(!t)return;let{startDate:n,endDate:i}=t;p(oN({since:n,until:i},["before","after"]))},placeholder:"All time",anchor:({children:e,...t})=>(0,a.jsx)(U.Q,{...t,"data-testid":"date-picker-commits",leadingVisual:oE,trailingVisual:f.TriangleDownIcon,children:e})})]})]})]})};function oD(e){let{children:t,...n}=e;return(0,a.jsx)(U.Q,{...n,"data-testid":"date-picker-commits",leadingVisual:oE,trailingVisual:f.TriangleDownIcon,children:t})}function oT(){return(0,a.jsx)("div",{className:"px-2 py-3 border-top border-color-border-default",children:(0,a.jsx)(U.Q,{variant:"link",as:"a",href:oN({},["author"]),block:!0,children:"View commits for all users"})})}function oA(e){return e}try{ok.displayName||(ok.displayName="DatePicker")}catch{}try{oE.displayName||(oE.displayName="StyledCalendarIcon")}catch{}try{oI.displayName||(oI.displayName="ListHeader")}catch{}let oR=(0,l.kw)()?function(e){let t,n,i,r,l,o,c,d,m,u=(0,s.c)(22),{paginationInfo:f}=e,h=f.hasPreviousPage,p=f.hasNextPage,g=oP;if(!h&&!p)return null;let x=!h;u[0]!==x?({sx:n,...t}=g(x),u[0]=x,u[1]=t,u[2]=n):(t=u[1],n=u[2]),u[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(rw.A,{as:"h2",className:"sr-only",children:"Pagination"}),u[3]=i):i=u[3],u[4]!==f?(r=oF(f,!1),u[4]=f,u[5]=r):r=u[5];let b=h?oO:null;u[6]!==t||u[7]!==n||u[8]!==r||u[9]!==b?(l=(0,a.jsx)(iu.$n,{as:eu.N,to:r,className:"fgColor-accent text-normal",...t,sx:n,tabIndex:0,variant:"invisible","data-testid":"pagination-prev-button",leadingVisual:b,children:"Previous"}),u[6]=t,u[7]=n,u[8]=r,u[9]=b,u[10]=l):l=u[10],u[11]!==f?(o=oF(f,!0),u[11]=f,u[12]=o):o=u[12];let y=!p;u[13]!==y?(c=g(y),u[13]=y,u[14]=c):c=u[14];let j=p?o$:null;return u[15]!==o||u[16]!==c||u[17]!==j?(d=(0,a.jsx)(iu.$n,{as:eu.N,to:o,className:"fgColor-accent text-normal",...c,tabIndex:0,variant:"invisible","data-testid":"pagination-next-button",trailingVisual:j,children:"Next"}),u[15]=o,u[16]=c,u[17]=j,u[18]=d):d=u[18],u[19]!==d||u[20]!==l?(m=(0,a.jsxs)(a.Fragment,{children:[i,(0,a.jsx)("div",{className:"d-flex flex-justify-center mt-2",children:(0,a.jsxs)(iJ.A,{children:[l,d]})})]}),u[19]=d,u[20]=l,u[21]=m):m=u[21],m}:function({paginationInfo:e}){let t=e.hasPreviousPage,n=e.hasNextPage,i=e=>e?{"aria-disabled":!0,sx:{backgroundColor:"transparent",border:"none",cursor:"default",color:"primer.fg.disabled",fontWeight:"normal"},onClick:e=>e.preventDefault()}:{};if(!t&&!n)return null;let{sx:r,...l}=i(!t);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rw.A,{as:"h2",className:"sr-only",children:"Pagination"}),(0,a.jsx)("div",{className:"d-flex flex-justify-center mt-2",children:(0,a.jsxs)(iJ.A,{children:[(0,a.jsx)(iu.$n,{as:eu.N,to:oF(e,!1),className:"fgColor-accent text-normal",...l,sx:r,tabIndex:0,variant:"invisible","data-testid":"pagination-prev-button",leadingVisual:t?()=>(0,a.jsx)(D.A,{icon:f.ChevronLeftIcon,className:"fgColor-accent"}):null,children:"Previous"}),(0,a.jsx)(iu.$n,{as:eu.N,to:oF(e,!0),className:"fgColor-accent text-normal",...i(!n),tabIndex:0,variant:"invisible","data-testid":"pagination-next-button",trailingVisual:n?()=>(0,a.jsx)(D.A,{icon:f.ChevronRightIcon,className:"fgColor-accent"}):null,children:"Next"})]})})]})};function o$(){return(0,a.jsx)(D.A,{icon:f.ChevronRightIcon,className:"fgColor-accent"})}function oO(){return(0,a.jsx)(D.A,{icon:f.ChevronLeftIcon,className:"fgColor-accent"})}function oP(e){return e?{"aria-disabled":!0,sx:{backgroundColor:"transparent",border:"none",cursor:"default",color:"primer.fg.disabled",fontWeight:"normal"},onClick:oM}:{}}function oM(e){return e.preventDefault()}function oF(e,t){return oN(t?{after:e.endCursor}:{before:e.startCursor},[t?"before":"after"])}try{oR.displayName||(oR.displayName="Pagination")}catch{}var oB=n(53892);let oU="Layout-module__LayoutHeader--pSMxQ",oH=(0,l.kw)()?function(e){let t,n,i,r=(0,s.c)(7),{children:l,title:o}=e;return r[0]!==o?(t=(0,a.jsx)(oB.M.Header,{divider:"line",className:oU,children:(0,a.jsx)("div",{className:"d-flex flex-items-center flex-justify-between",children:(0,a.jsx)(rw.A,{as:"h1",className:"f2 text-normal pb-2",id:"commits-pagehead",children:o})})}),r[0]=o,r[1]=t):t=r[1],r[2]!==l?(n=(0,a.jsx)(oB.M.Content,{as:"div",children:(0,a.jsx)("div",{children:l})}),r[2]=l,r[3]=n):n=r[3],r[4]!==t||r[5]!==n?(i=(0,a.jsxs)(oB.M,{rowGap:"none",children:[t,n]}),r[4]=t,r[5]=n,r[6]=i):i=r[6],i}:function({children:e,title:t}){return(0,a.jsxs)(oB.M,{rowGap:"none",children:[(0,a.jsx)(oB.M.Header,{divider:"line",className:oU,children:(0,a.jsx)("div",{className:"d-flex flex-items-center flex-justify-between",children:(0,a.jsx)(rw.A,{as:"h1",className:"f2 text-normal pb-2",id:"commits-pagehead",children:t})})}),(0,a.jsx)(oB.M.Content,{as:"div",children:(0,a.jsx)("div",{children:e})})]})};try{oH.displayName||(oH.displayName="Layout")}catch{}var oz=n(21067),oV=n(65411),oG=n(25641),oW=n(53419),oK=n(97286);let oq="Failed to generate commit recap";function oX(e,t,n,i,r){let a=i?` at path ${i}`:"";return`Below is a JSON array of metadata for a series of commits in the repository ${e}/${t}${a} on branch ${n}.

${JSON.stringify(r,null,2)}

Each entry in the array represents metadata for a group of commits. These groups represent logical units of work, such as those merged together from a pull request or by the same author in a short timeframe.

You will provide an analysis of each commit group, writing a brief summary and scoring its size in terms of the file.

#### oid

This is the oid value of the first commit in the commit group, used as an identifier to ensure proper ordering.

#### summary

- These are terse, succinct paragraphs of 1-2 sentences, summarizing the work represented by the commit group.
- Focus on the content of the included commit diffEntries as a source of truth.
- Prefer a past-tense imperative "changelog entry" style, in simple, even "telegraphic" terms. Start the first sentence with a verb.
- Avoid directly referencing the author or the pull request that contributed the change.
- Avoid using the file as an object in the sentence, it's self-evident that the changes are being made to the file.
- Consider both the specific structure of the changes (functions/templates/config values/etc) and the general impact on the nature and purpose of the file.
- Descriptive context like the explicit purpose/intent of a change (from the commit message, pull request title, or pull request body) of the change may be used.
- If that context includes links (such as to a GitHub issue) that are NOT the author or pull request, you may include them in markdown format.
- Obvious or implicit intent ("simplify the codebase", "improve maintainability", "resolve syntax error") should not be mentioned.
- Good examples of summaries:
  - "Extracted most of the module to another file as part of Project Tailspin, moving the encoding helpers and deleting some unused functions."
  - "Updated config values for the \`GreatApp\` integration to increase max instances and resolve [incident #49](https://github.com/foo/bar/issues/123).
  - "Removed unused function \`functionName\`."
  - "Fixed typo in a variable name."
- Bad examples of summaries:
  - "Deleted functions \`func1\`, \`func2\`, \`func3\` and \`func4\` from the file, improving the code for readability".
  - "This commit by @monalisa in [pull request #49](https://github.com/foo/bar/pulls/49) adds a new feature to the application, improving the user experience."

#### size
- This is a "t-shirt size" subjectively scoring both the scope and impact of the changes in the commit group.
- Sizes include XS, S, M, L, XL.
- This should be judged entirely from the commit diffEntries and the nature and purpose of the file.
- The cognitive complexity of the changes is more important than the number of lines changed. "Added" is simpler than "updated".
- Examples of XS changes:
  - cleanly deleting a large number of unused functions
  - renaming a variable throughout a file via find-and-replace
  - a simple typo fix
- Examples of S changes:
  - created the file, which is simple and contains a couple helper functions imported elsewhere
  - flipping a couple configuration values
  - adding a new function
  - removing a section of markup to get rid of some HTML content
- Examples of M changes:
  - adding couple new functions that supply a new data field in an existing function
  - updating how one complex function works without changing its interface
- Example of L changes:
  - broke one complex function into several simpler ones, but also changed the initial arguments provided from elsewhere
  - created the file, which contains several API handlers with callbacks, imported dependecies, and dynamic templating
- Example of XL changes:
  - removed one of the two sections of configuraiton encapsulated by this file
  - complete overhaul of a class, fundamentally changing its interface and internal logic

Return your analysis as a JSON array of objects each containing these three fields, corresponding to the order of the provided commit groups:

[
  {
    "oid": "commit_oid_1",
    "summary": "Brief summary of the changes",
    "size": "S"
  },
  {
    "oid": "commit_oid_2",
    "summary": "Brief summary of the changes",
    "size": "M"
  }
]
`}function oQ(e){return Math.ceil(e.length/3)}function oJ(e,t){let{refName:n,blobPath:i,...r}=t;(0,oW.BI)(`copilot.commit-recap.${e}`,{refName:n,blobPath:i||null,...r})}async function oY(e,t,n,i){let r=i.currentBlobPath||"",a=new URLSearchParams;a.append("name",n),i.since&&a.append("since",i.since),i.until&&a.append("until",i.until),i.author&&a.append("author",i.author.login);let l=r?`/${e}/${t}/commit_recap/${encodeURIComponent(r)}?${a}`:`/${e}/${t}/commit_recap.json?${a}`;try{let e=await (0,eT.lS)(l,{headers:{Accept:"application/json"}});if(!e.ok)throw oJ("failed",{refName:n,blobPath:r,reason:"commit_groups_fetch_failed",statusCode:e.status}),Error(`Failed to fetch commit groups: ${e.status}`);let t=await e.json(),a=t.map(e=>e.type).reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{});return oJ("commit-groups-returned",{refName:n,blobPath:r,totalGroups:t.length,groupTypeCounts:a,hasAuthorFilter:!!i.author,hasDateFilters:!!(i.since||i.until)}),t}catch(e){throw oJ("failed",{refName:n,blobPath:r,reason:"commit_groups_fetch_error",errorMessage:e instanceof Error?e.message:String(e)}),e}}async function oZ(e,t,n,i){let r=new URLSearchParams;r.append("name",n);let a=i?`/${e}/${t}/commit_recap_check/${encodeURIComponent(i)}?${r}`:`/${e}/${t}/commit_recap_check.json?${r}`;try{let e=await (0,eT.lS)(a,{headers:{Accept:"application/json"}});if(!e.ok)throw Error(`Failed to check path: ${e.status}`);return await e.json()}catch(e){throw e}}async function o0(e,t,n,i){try{let r=i.currentBlobPath||"",a="pull_request"===n.type&&n.commits.length>0?[n.commits[0]?.oid].filter(Boolean):n.commits.map(e=>e.oid),l=new URLSearchParams;l.append("commit_oids",a.join(","));let s=r?`/${e}/${t}/commit_recap_diffs/${encodeURIComponent(r)}?${l}`:`/${e}/${t}/commit_recap_diffs.json?${l}`,o=await (0,eT.lS)(s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(o.ok){let e=await o.json();return{...n,diffEntries:e.diff_entries||[]}}return{...n,diffEntries:[]}}catch{return{...n,diffEntries:[]}}}function o1({repoOwner:e,repoName:t,refName:n,defaultBranch:i,filters:r}){let[a,l]=(0,u.useState)([]),[s,o]=(0,u.useState)(""),[c,d]=(0,u.useState)(!1),[m,f]=(0,u.useState)(!1),h=(0,u.useRef)(!1),p=(0,u.useRef)(null),g=(0,sp.G7)("copilot_commit_recap"),x=n||i||"main",{data:b,isSuccess:y,isFetching:j,refetch:C}=(0,oK.I)({queryKey:["commit-rollup",e,t,x,r],queryFn:()=>oY(e,t,x,r),enabled:!1}),{data:v,isSuccess:N,refetch:w}=(0,oK.I)({queryKey:["path-check",e,t,x,r.currentBlobPath],queryFn:()=>oZ(e,t,x,r.currentBlobPath||""),enabled:g&&!!r.currentBlobPath}),S=(0,u.useMemo)(()=>b||[],[b]),L=(0,u.useMemo)(()=>!!r.currentBlobPath&&(void 0===v||v?.is_file!==!1),[v,r.currentBlobPath]),_=(0,u.useMemo)(()=>L&&v?.show_popover===!0,[L,v]),k=(0,u.useCallback)(async n=>{if(0!==n.length&&!h.current){h.current=!0,f(!0),l([]),o("");try{let i=r.currentBlobPath||"",a=new oV.JR([]),s=await a.getAuthToken(),o=oQ(oX(e,t,x,i,[])),c=[],d=o;for(let a=0;a<n.length;a++){let m=n[a];if(!m)continue;let u=await o0(e,t,m,r),f=oQ(JSON.stringify(u,null,2));d+f>16e3&&c.length>0?(await o2(c,s,i,e,t,x,l),c=[u],d=o+f):(c.push(u),d+=f)}c.length>0&&await o2(c,s,i,e,t,x,l)}catch{o(oq)}finally{f(!1),h.current=!1}}},[e,t,x,r]);(0,u.useEffect)(()=>{y&&c&&S.length>0&&!h.current&&k(S)},[y,c,S,k]);let E=(0,u.useCallback)(async()=>{if(oJ("requested",{refName:x,blobPath:r.currentBlobPath||"",hasAuthorFilter:!!r.author,hasDateFilters:!!(r.since||r.until)}),l([]),o(""),!r.currentBlobPath){d(!0),y&&0!==S.length||C();return}if(v?.is_file===!0)d(!0),y&&0!==S.length||C();else try{let e=await w();e.data?.is_file===!0?(d(!0),y&&0!==S.length||C()):d(!1)}catch{d(!1)}},[C,w,x,r,y,S,v]),I=(0,u.useCallback)(()=>{d(!1),l([]),o(""),f(!1),h.current=!1},[]);return((0,u.useEffect)(()=>{let e=p.current;if(null===e){p.current=r;return}(e.pagination?.endCursor!==r.pagination?.endCursor||e.pagination?.startCursor!==r.pagination?.startCursor||e.since!==r.since||e.until!==r.until||e.author?.login!==r.author?.login||e.currentBlobPath!==r.currentBlobPath)&&c&&(d(!1),l([]),o(""),f(!1),h.current=!1),p.current=r},[r,c]),g)?{response:{analysisData:a,errorMessage:s},analysisData:a,errorMessage:s,isLoadingCopilotRecap:j||m,triggerAnalysis:k,commitGroups:S,showRecapPanel:c,showRecapButton:L,showRecapPopover:_,handleCopilotRecap:E,handleCloseRecap:I}:{response:{analysisData:[],errorMessage:""},analysisData:[],errorMessage:"",isLoadingCopilotRecap:!1,commitGroups:[],showRecapPanel:!1,showRecapButton:!1,showRecapPopover:!1,handleCopilotRecap:()=>{},handleCloseRecap:()=>{}}}async function o2(e,t,n,i,r,a,l){let s=oX(i,r,a,n,e),o=function(e){let t=e.map(e=>e.type).reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{}),n=new Set,i=new Set;for(let t of e){for(let e of t.commits)e.author?.login&&n.add(e.author.login);t.pr?.number&&i.add(t.pr.number)}return{groupTypeCounts:t,authorsInBatch:n,pullRequestsInBatch:i,hasDiffData:e.some(e=>e.diffEntries&&e.diffEntries.length>0)}}(e);oJ("capi-request-sent",{refName:a,blobPath:n,batchSize:e.length,tokenCount:oQ(s),groupTypeCounts:o.groupTypeCounts,uniqueAuthorsCount:o.authorsInBatch.size,uniquePullRequestsCount:o.pullRequestsInBatch.size,hasDiffData:o.hasDiffData});try{let i=await (0,oG.p)({basePath:(0,oz._$)().copilotApiOverrideUrl||"https://api.githubcopilot.com",body:{messages:[{role:"user",content:s}],model:"gpt-4o-mini",stream:!1,responseFormat:{type:"json_schema",jsonSchema:{name:"CommitGroupAnalysisList",description:"Array of commit group analyses with summaries and size assessments",strict:!0,schema:{type:"array",items:{type:"object",additionalProperties:!1,properties:{oid:{type:"string",description:"The oid value of the first commit in the commit group, used as an identifier to ensure proper ordering."},summary:{type:"string",description:"A brief summary of the work represented by the commit group."},size:{type:"string",enum:["XS","S","M","L","XL"],description:"A t-shirt size scoring both the scope and impact of the changes in the commit group."}},required:["oid","summary","size"]}}}},temperature:.3},path:"/chat/completions",method:"POST",streamingResponse:!1,authToken:t,integrationId:"copilot-directory"});if(i.ok){let t,r=await i.json(),s=r.choices?.[0]?.message?.content;if(!s)throw Error("No analysis content received from Copilot API");if("object"==typeof s)t=s;else try{let e=s;e.startsWith(`\`\`\`json
`)&&e.endsWith(`
\`\`\``)?e=e.slice(8,-4):e.startsWith(`\`\`\`
`)&&e.endsWith(`
\`\`\``)&&(e=e.slice(4,-4)),t=JSON.parse(e)}catch{throw Error("Invalid analysis response format")}let c=new Map(e.filter(e=>e.commits.length>0).map((e,t)=>[e.commits[0]?.oid,t])),d=t?.sort((e,t)=>{let n=c.get(e.oid)??Number.MAX_SAFE_INTEGER,i=c.get(t.oid)??Number.MAX_SAFE_INTEGER;return n-i}),m=d.map(e=>(console.log(`Commit group ${e.oid}: Size ${e.size}`),e.summary)).join(`

`);l(e=>[...e,...d]),oJ("capi-response-received",{refName:a,blobPath:n,batchSize:e.length,responseLength:m.length,linkedAuthorsPercentage:o.authorsInBatch.size>0?function(e,t){let n=0;for(let i of Array.from(t))(e.includes(`@${i}`)||e.includes(i))&&n++;return n}(m,o.authorsInBatch)/o.authorsInBatch.size:0,linkedPullRequestsPercentage:o.pullRequestsInBatch.size>0?function(e,t){let n=0;for(let i of Array.from(t))(e.includes(`#${i}`)||e.includes(`[#${i}]`))&&n++;return n}(m,o.pullRequestsInBatch)/o.pullRequestsInBatch.size:0})}else throw oJ("failed",{refName:a,blobPath:n,reason:"capi_response_not_ok",statusCode:i.status}),Error(oq)}catch(e){throw oJ("failed",{refName:a,blobPath:n,reason:"capi_request_failed",errorMessage:e instanceof Error?e.message:String(e)}),e}}var o3=n(57028);let o4=(0,l.kw)()?function(){let e,t,n,i,r,l,c,d,f,h,p=(0,s.c)(53),g=(0,o.t)(),x=(0,W.D)(),b=(0,m.B)(),y=b.filters,j=b.commitGroups,C=b.metadata?.softNavToCommit||!1;p[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,sp.G7)("copilot_commit_recap"),p[0]=e):e=p[0];let v=e,N=b.refInfo?.name;p[1]!==y||p[2]!==g.defaultBranch||p[3]!==g.name||p[4]!==g.ownerLogin||p[5]!==N?(t={repoOwner:g.ownerLogin,repoName:g.name,refName:N,defaultBranch:g.defaultBranch,filters:y},p[1]=y,p[2]=g.defaultBranch,p[3]=g.name,p[4]=g.ownerLogin,p[5]=N,p[6]=t):t=p[6];let{response:w,isLoadingCopilotRecap:S,commitGroups:L,showRecapPanel:_,showRecapButton:k,showRecapPopover:E,handleCopilotRecap:I,handleCloseRecap:D}=o1(t),T=`There isn't any commit history to show here${null!==y.since||null!==y.until?" for the selected date range":""}`;p[7]!==b.filters.pagination||p[8]!==b.filters.since||p[9]!==b.filters.until?(n=[b.filters.pagination,b.filters.since,b.filters.until],p[7]=b.filters.pagination,p[8]=b.filters.since,p[9]=b.filters.until,p[10]=n):n=p[10],(0,u.useEffect)(o5,n);let A=b.metadata?.deferredContributorUrl||"",R=v&&k;return p[11]!==y.author||p[12]!==y.currentBlobPath||p[13]!==y.since||p[14]!==y.until||p[15]!==I||p[16]!==S||p[17]!==b.refInfo||p[18]!==g||p[19]!==E||p[20]!==A||p[21]!==R?(i=(0,a.jsx)(oI,{repo:g,contributorsUrl:A,since:y.since,until:y.until,author:y.author,refInfo:b.refInfo,path:y.currentBlobPath,showCopilotButton:R,showCopilotPopover:E,onCopilotRecap:I,isLoadingCopilotRecap:S}),p[11]=y.author,p[12]=y.currentBlobPath,p[13]=y.since,p[14]=y.until,p[15]=I,p[16]=S,p[17]=b.refInfo,p[18]=g,p[19]=E,p[20]=A,p[21]=R,p[22]=i):i=p[22],p[23]!==L||p[24]!==w||p[25]!==D||p[26]!==S||p[27]!==b.refInfo?.name||p[28]!==g.name||p[29]!==g.ownerLogin||p[30]!==_?(r=v&&(0,a.jsx)(ol,{isVisible:_,isLoading:S,analysis:w,repoOwner:g.ownerLogin,repoName:g.name,refName:b.refInfo?.name,onClose:D,commitGroups:L}),p[23]=L,p[24]=w,p[25]=D,p[26]=S,p[27]=b.refInfo?.name,p[28]=g.name,p[29]=g.ownerLogin,p[30]=_,p[31]=r):r=p[31],p[32]!==j.length||p[33]!==b.timedOutMessage||p[34]!==T?(l=0===j.length&&(0,a.jsx)(o3.M,{timeoutMessage:b.timedOutMessage,unavailableMessage:T}),p[32]=j.length,p[33]=b.timedOutMessage,p[34]=T,p[35]=l):l=p[35],p[36]!==j||p[37]!==y.pagination||p[38]!==b.metadata?.deferredDataUrl||p[39]!==C?(c=j.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sI,{commitGroups:j,deferredDataUrl:b.metadata?.deferredDataUrl||"",softNavToCommit:C}),(0,a.jsx)(oR,{paginationInfo:y.pagination})]}),p[36]=j,p[37]=y.pagination,p[38]=b.metadata?.deferredDataUrl,p[39]=C,p[40]=c):c=p[40],p[41]!==x||p[42]!==b.metadata?.showProfileHelp?(d=b.metadata?.showProfileHelp&&(0,a.jsx)(sg,{url:`${x.helpUrl}/articles/troubleshooting-commits-on-your-timeline`}),p[41]=x,p[42]=b.metadata?.showProfileHelp,p[43]=d):d=p[43],p[44]!==d||p[45]!==i||p[46]!==r||p[47]!==l||p[48]!==c?(f=(0,a.jsxs)(oH,{title:"Commits",children:[i,r,l,c,d]}),p[44]=d,p[45]=i,p[46]=r,p[47]=l,p[48]=c,p[49]=f):f=p[49],p[50]!==b.filters||p[51]!==f?(h=(0,a.jsx)(sb,{filters:b.filters,children:f}),p[50]=b.filters,p[51]=f,p[52]=h):h=p[52],h}:function(){let e=(0,o.t)(),t=(0,W.D)(),n=(0,m.B)(),i=n.filters,r=n.commitGroups,l=n.metadata?.softNavToCommit||!1,s=(0,sp.G7)("copilot_commit_recap"),{response:c,isLoadingCopilotRecap:d,commitGroups:f,showRecapPanel:h,showRecapButton:p,showRecapPopover:g,handleCopilotRecap:x,handleCloseRecap:b}=o1({repoOwner:e.ownerLogin,repoName:e.name,refName:n.refInfo?.name,defaultBranch:e.defaultBranch,filters:i}),y=`There isn't any commit history to show here${null!==i.since||null!==i.until?" for the selected date range":""}`;return(0,u.useEffect)(()=>{if(!w.fV.hash&&window.scrollY>0){let e=document.querySelector("#commits-pagehead");e?.scrollIntoView()}},[n.filters.pagination,n.filters.since,n.filters.until]),(0,a.jsx)(sb,{filters:n.filters,children:(0,a.jsxs)(oH,{title:"Commits",children:[(0,a.jsx)(oI,{repo:e,contributorsUrl:n.metadata?.deferredContributorUrl||"",since:i.since,until:i.until,author:i.author,refInfo:n.refInfo,path:i.currentBlobPath,showCopilotButton:s&&p,showCopilotPopover:g,onCopilotRecap:x,isLoadingCopilotRecap:d}),s&&(0,a.jsx)(ol,{isVisible:h,isLoading:d,analysis:c,repoOwner:e.ownerLogin,repoName:e.name,refName:n.refInfo?.name,onClose:b,commitGroups:f}),0===r.length&&(0,a.jsx)(o3.M,{timeoutMessage:n.timedOutMessage,unavailableMessage:y}),r.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sI,{commitGroups:r,deferredDataUrl:n.metadata?.deferredDataUrl||"",softNavToCommit:l}),(0,a.jsx)(oR,{paginationInfo:i.pagination})]}),n.metadata?.showProfileHelp&&(0,a.jsx)(sg,{url:`${t.helpUrl}/articles/troubleshooting-commits-on-your-timeline`})]})})};function o5(){if(!w.fV.hash&&window.scrollY>0){let e=document.querySelector("#commits-pagehead");e?.scrollIntoView()}}try{o4.displayName||(o4.displayName="Commits")}catch{}(0,r.o)("commits",()=>({App:g,routes:[(0,i.a)({path:"/:owner/:repo/commits",Component:o4}),(0,i.a)({path:"/:owner/:repo/commits/:ref",Component:o4}),(0,i.a)({path:"/:owner/:repo/commits/:ref/:path/*",Component:o4}),(0,i.a)({path:"/:owner/:repo/commit/:oid",Component:sc}),(0,i.a)({path:"/:owner/:repo/commit/:oid/:path/*",Component:sc}),(0,i.a)({path:"/_view_fragments/Voltron::CommitFragmentsController/show/:owner/:repo/:name/repo_layout",Component:sc})]}))},81945:(e,t,n)=>{n.d(t,{O:()=>c});var i=n(12683),r=n(38267);let a=(0,r.i7)(["0%{transform:translateX(-100%);}50%{transform:translateX(100%);}100%{transform:translateX(100%);}"]),l=(0,r.AH)(["animation:"," 1.5s infinite linear;"],a),s=(0,r.i7)(["0%{opacity:.3;}10%{opacity:1;}100%{opacity:.3;}"]),o=(0,r.AH)(["animation:"," 2s infinite linear;"],s),c=(0,r.Ay)(i.az).withConfig({displayName:"LoadingSkeleton",componentId:"sc-6893f3e-0"})(["position:relative;overflow:hidden;mask-image:radial-gradient(white,black);",";&::after{",";background:linear-gradient(90deg,transparent,",",transparent);content:'';position:absolute;transform:translateX(-100%);bottom:0;left:0;right:0;top:0;}background-color:",";border-radius:",";display:block;height:1.2em;"," width:",";height:",";",""],({animationStyle:e})=>"pulse"===e&&o,({animationStyle:e})=>"pulse"!==e&&l,(0,i.yB)("colors.neutral.subtle"),(0,i.yB)("colors.neutral.subtle"),({theme:e,variant:t})=>{switch(t){case"rounded":return(0,i.yB)("radii.1")(e);case"pill":return"100px";case"elliptical":return"50%";default:return"0"}},({variant:e})=>"elliptical"===e&&{borderRadius:"50%"},({width:e})=>{switch(e){case"random":return`${Math.floor(40*Math.random()+40)}%`;case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},({height:e})=>{switch(e){case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},i.sx);try{c.displayName||(c.displayName="LoadingSkeleton")}catch{}},84363:(e,t,n)=>{n.d(t,{t:()=>r});var i=n(59403);let r=({items:e,filter:t,key:n,secondaryKey:r})=>{let a=e.map(e=>[(0,i.dt)(t,n(e)),e]);return r&&(a=a.map(([e,n])=>[Math.max(e,(0,i.dt)(t,r(n))),n])),a.filter(([e])=>e>i.IP).sort(([e,t],[i,r])=>i===e?n(t).localeCompare(n(r)):i-e).map(([,e])=>e)}},92130:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(74848),r=n(16522),a=n(74807);function l(e){let t,n,l=(0,r.c)(3),{hidden:s}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(a.N,{animationType:a.L.Idle,loopAnimation:!0,size:64}),l[0]=t):t=l[0],l[1]!==s?(n=(0,i.jsx)("div",{"aria-hidden":s,children:t}),l[1]=s,l[2]=n):n=l[2],n}try{l.displayName||(l.displayName="CopilotIconAnimation")}catch{}}},e=>{e.O(0,[3088,43934,82216,67733,97068,913,6488,31475,48775,42892,23832,99418,30587,72471,33915,55229,4712,3086,96537,82081,51220,28546,40420,67602,26744,57026,18312,347,89332,24774,95767,63433,98047,9288,25407,83494,83463,87670,40771,66990,29665,4817,91232,37294,2635,30721,99808,52302,81171,67071,83326,55878,16729,6623,44185,26548,1460,32397,98540],()=>e(e.s=79463)),e.O()}]);
//# sourceMappingURL=commits-c463a45009e9.js.map
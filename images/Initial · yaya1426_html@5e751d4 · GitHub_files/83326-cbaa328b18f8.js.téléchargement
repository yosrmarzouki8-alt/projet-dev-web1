"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[83326],{1214:(e,t,r)=>{r.d(t,{_:()=>MarkdownLine});var n=r(35750),i=r(18150),o=r(85242),l=r(50467),s=r(90519),a=r(78625),d=r(65012),c=r(48749),u=r(3904),f=r(16058),p=new WeakMap,m=new WeakMap,h=new WeakMap;let MarkdownLine=class MarkdownLine{get prefixes(){return(0,o._)(this,h,(0,n._)(this,h)??(0,a.H5)((0,n._)(this,p),this.start,this.end).filter(e=>"delimiter"===e.type&&u.T.has(e.tokenType)))}get lastPrefix(){return this.prefixes.at(-1)}get contentStart(){return this.lastPrefix?.position?.end.offset??this.start}get content(){return(0,n._)(this,m).slice(this.contentStart,this.end)}get isBlank(){return(0,f.Wq)(this.content)||0===this.content.trim().length}previous(){return 0===this.start?null:MarkdownLine.atOffset((0,n._)(this,p),(0,n._)(this,m),this.start-1)}next(){return this.end>=(0,n._)(this,m).length?null:MarkdownLine.atOffset((0,n._)(this,p),(0,n._)(this,m),this.end+1)}overlaps(e,t){return e>=this.start&&e<this.end||t>this.start&&t<=this.end||e<=this.start&&t>=this.end}contains(e){return e>=this.start&&e<this.end}prefixesBefore(e){return this.prefixes.filter(t=>(0,d.z)(t)&&(0,c.h)(t).endOffset<=e)}isOffsetAfterPrefixes(e){return this.lastPrefix===this.prefixesBefore(e).at(-1)}static atOffset(e,t,r){let n=(0,s.WH)(t,r);return n&&new MarkdownLine(e,t,n.start,n.end)}static linesAtRange(e,t,r,n){return(0,s.be)(t,r,n).map(({start:r,end:n})=>new MarkdownLine(e,t,r,n))}constructor(e,t,r,n){(0,l._)(this,"start",void 0),(0,l._)(this,"end",void 0),(0,i._)(this,p,{writable:!0,value:void 0}),(0,i._)(this,m,{writable:!0,value:void 0}),(0,i._)(this,h,{writable:!0,value:null}),(0,o._)(this,p,e),(0,o._)(this,m,t),this.start=r,this.end=n}}},1830:(e,t,r)=>{r.d(t,{c:()=>c,i:()=>f});var n=r(53839),i=r(9445),o=r(16058),l=r(1214),s=r(21210),a=r(90519),d=r(3266);let c=n.YH.define(),u=n.$t.transactionFilter.of(e=>{let t=e.annotation(c);if(!e.isUserEvent("input")||!e.docChanged||e.changes.empty||"all"===t)return e;let r=(0,d.wk)(e.startState),u=e.startState.doc.toString(),f=[];e.changes.iterChanges((n,d,c,p,m)=>{let h=m.toString();if(!h.includes(`
`))return;let g=l._.atOffset(r,u,n),y=(0,i.KR)(g?.prefixesBefore(n)??[],t);if(!g||0===y.length)return;let k=(0,i.z0)(y);if(""===k)return;let x=(0,s.D)(h),v=(0,a.be)(h,0,h.length),b=g.lastPrefix?.tokenType==="listItemPrefix"||g.lastPrefix?.tokenType==="taskListCheck";for(let t=1;t<v.length;t++){let r=v[t];if(r){if(b&&(e.isUserEvent("input.paste")||e.isUserEvent("input.drop"))){let e=l._.atOffset(x,h,r.start),t=e?.prefixes??[],n=(0,o.zE)(c,[...g.prefixes],[...t]);if(n.length>0){f.push(...n);continue}}f.push({from:c+r.start,insert:k});continue}}});let p=n.VR.of(f,e.newDoc.length);return[e,{sequential:!0,changes:p,annotations:[c.of("all")],selection:e.newSelection.map(p,1)}]}),f=[d.YZ,u]},1878:(e,t,r)=>{r.d(t,{g:()=>s});var n=r(74848),i=r(16522),o=r(38621),l=r(64954);function s(e){let t,r=(0,i.c)(2);return r[0]!==e?(t=(0,n.jsx)(l.A.IconButton,{variant:"invisible",icon:o.PaperclipIcon,"aria-label":"Attachment",...e}),r[0]=e,r[1]=t):t=r[1],t}try{s.displayName||(s.displayName="FileUploadButton")}catch{}},3266:(e,t,r)=>{r.d(t,{ih:()=>E,wk:()=>C,ui:()=>P,YZ:()=>N,AT:()=>M});var n=r(53839),i=r(24774),o=r(38106),l=r(16143),s=r(47970),a=r(76814),d=r(7711),c=r(75617),u=r(47601);function f(e){(0,s.YR)(e,"element",e=>{if((0,u.dz)(e,"code")||(0,u.dz)(e,"pre"))return e.properties={...e.properties,spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false"},a._Z})}let p="dataKey";var m=r(65012),h=r(16961),g=r(23144),y=r(78625);function k(e){if(!(0,u.dz)(e,"pre"))return!1;let t=e.children[0];return!!t&&t?.type==="element"&&"codeFencedFence"===t.properties[c.Lm]}var x=r(32964),v=r(63142),b=r(72569);let _=(0,r(36380).A)({},v.j,{allowComments:!0,ancestors:{li:["ol","ul"],dd:["dl"],dt:["dl"],summary:["details"],source:["audio","video","picture"],figcaption:["figure"]},tagNames:["video","picture","source","figure","figcaption"],attributes:{video:["controls","src","preload","playsinline","aria-label"],source:["src","srcset","type","media","sizes","height","width"]}},{attributes:{"*":[p]}},c.JZ,{attributes:{span:[["className",/^hljs-/]]}},x.jr,(e,t)=>Array.isArray(e)&&Array.isArray(t)?e.concat(t):void 0);_.tagNames&&(_.tagNames=_.tagNames.filter(e=>"input"!==e));var w=r(21210);function I(e){let t=e.doc.toString(),r=(0,w.D)(t),n=function(e,t,r=!0){let n,i,v,w,I=(0,l._)(e,{...c.vQ,allowDangerousHtml:!0});if((0,s.YR)(I,"element",e=>{let t=null;for(let r of e.children)if("element"===r.type){if(t&&function(e,t){if(e.tagName!==t.tagName)return!1;if(!e.properties&&!t.properties)return!0;if(!e.properties||!t.properties)return!1;let r=Object.keys(e.properties).filter(e=>e!==p);if(r.length!==Object.keys(t.properties).filter(e=>e!==p).length)return!1;for(let n of r)if(e.properties[n]!==t.properties[n])return!1;return!0}(r,t)){let e="number"==typeof t.properties?.[p]?t.properties[p]:-1;r.properties[p]=e+1}t=r}}),(0,s.YR)(I,"element",e=>{if(!k(e))return;let t=function(e){let t=e.children.find(e=>(0,u.dz)(e,"code"));if(!t||1!==t.children.length)return null;let r=t.children[0];return r?.type==="text"?r:null}(e);t&&(t.value=t.value.trimEnd())}),(0,g.A)({languages:h.l})(I,new d.T(t)),(0,s.YR)(I,"element",e=>{if(k(e)&&(0,m.z)(e)){let r=t.slice(e.position.start.offset,e.position.end.offset),n=`${r.slice(0,r.indexOf(`
`)+1)}`,i=(0,y.On)(e.position.start,n),o=e.children.find(e=>(0,u.dz)(e,"code"));o&&function e(t,r){for(let n of r)if("text"===n.type)t=(0,y.On)(t,n.value);else if("element"===n.type){let r=e(t,n.children);n.position={start:{...t},end:{...r}},t=r}return t}(i,[o])}}),!r||(n=!1,(0,s.YR)(e,"html",()=>(n=!0,a.dc)),!n))return(0,x.vp)(I),f(I),I;let S=(0,o.l)(I,{tagfilter:!0,passThrough:["delimiter"],file:new d.T(t)});i=t.split(`
`),v={column:(i.at(-1)?.length??0)+1,line:i.length+1,offset:t.length},w=-1,(0,a.VG)(S,(e,t)=>{if(t.length<=w)return a.dc;w=t.length,"element"===e.type&&(0,m.z)(e)&&!(e.position.end.offset>=v.offset)&&(e.position.end={...v})},!0);let j=(0,b.a)(S,_);return(0,a.VG)(j,"element",(e,r)=>{let n;if("video"!==e.tagName||!Array.isArray(e.children))return;let i=r[r.length-1];if(!i||!Array.isArray(i.children))return;let o=i.children.indexOf(e);if(-1===o)return;let l="element"===i.type&&"p"===i.tagName,s=l?r[r.length-2]:void 0,a=s&&Array.isArray(s.children)?s:i;if(!Array.isArray(a.children))return;let d=a===i?o:a.children.indexOf(i);if(-1===d)return;let c=e.properties??(e.properties={});t&&e.position&&"number"==typeof e.position.start?.offset&&"number"==typeof e.position.end?.offset&&(n=t.slice(e.position.start.offset,e.position.end.offset));let u=c.controls;void 0===u?c.controls=!0:"false"===u?c.controls=!1:"true"===u&&(c.controls=!0),void 0===c.preload&&(c.preload="metadata");let f="playsinline",p=c[f];void 0===p&&Object.prototype.hasOwnProperty.call(c,"playsInline")&&(p=c[f="playsInline"]);let h=e=>{c.playsinline=e,c.playsInline=e},g="string"==typeof n&&/playsinline\s*=\s*['"]?false['"]?/i.test(n);"string"==typeof n&&/playsinline\s*=\s*['"]?true['"]?/i.test(n),void 0===p?h(!g&&!0):"false"===p||!1===p?h(!1):("true"===p||!0===p)&&h(!0);let y=[];for(let t of e.children)("text"!==t.type||""!==t.value.trim())&&("element"===t.type&&"properties"in t&&t.properties?.dataDelimiter==="htmlTag"||y.push(t));if(e.children=[],y.length>0){let t=y.filter(e=>(0,m.z)(e)).map(e=>({child:e,start:e.position.start})).reduce((e,t)=>e?t.start.offset<e.start.offset?t:e:t,void 0);e.position&&t&&(e.position={...e.position,end:{...t.start}}),a.children.splice(d+1,0,...y)}l&&s&&Array.isArray(s.children)&&s.children.splice(d,1,e)}),(0,x.vp)(j),f(j),j}(r,t);return{markdownTree:r,htmlTree:n}}let S=n.Pe.define(),j=i.Z9.define(e=>{let t=null;return{update:r=>{r.docChanged&&(t&&clearTimeout(t),t=setTimeout(()=>e.dispatch({effects:S.of(I(e.state))})))}}}),T=n.sU.define({create:I,update:(e,t)=>t.effects.find(e=>e.is(S))?.value??e,provide:()=>[j]}),N=T;function C(e){return e.field(T).markdownTree}function E(e){return e.field(T).htmlTree}function M(e){return e.effects.some(e=>e.is(S))}let P=M},3398:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(74848),i=r(12683),o=r(34164);let l=({children:e,disabled:t,required:r,visuallyHidden:l,sx:s,as:a="label",className:d,...c})=>(0,n.jsx)(i.EY,{as:a,sx:{color:t?"fg.muted":"fg.default",cursor:t?"not-allowed":"pointer",...s},className:(0,o.$)(l?(0,o.$)("sr-only",d):d,"InputLabel-module__Text--xY8s7"),...c,children:r?(0,n.jsxs)("span",{className:"InputLabel-module__Box--dyD6H",children:[(0,n.jsx)("div",{className:"InputLabel-module__Box_1--HuT0E",children:e}),(0,n.jsx)("span",{children:"*"})]}):e}),s=l;try{l.displayName||(l.displayName="InputLabel")}catch{}},3904:(e,t,r)=>{r.d(t,{C:()=>c,T:()=>d});var n=r(47970),i=r(76814),o=r(65012);function l(e,t,r){e.children??(e.children=[]),e.children.splice(t,0,r),(0,o.z)(e)&&(0,o.z)(r)&&(r.position.start.offset<e.position.start.offset?Object.assign(e.position.start,r.position.start):r.position.end.offset>e.position.end.offset&&Object.assign(e.position.end,r.position.end))}function s(e,t,r=!1){let n=void 0!==e.children&&(t===e.children.length-1||-1===t),i=e.children?.splice(t,1)[0];if(r&&i&&(0,o.z)(e)&&(0,o.z)(i)){if(0===t){let t=e.children?.[0];t&&Object.assign(e.position.start,t.position?.start)}else if(n){let t=e.children?.at(-1);t&&Object.assign(e.position.end,t.position?.end)}}return i}var a=r(91886);let d=new Set(["listItemIndent","listItemPrefix","blockQuotePrefix","linePrefix","taskListCheck"]);function c(){return{transforms:[u]}}function u(e){(0,i.VG)(e,"list",(e,t)=>{let r=t.at(-1),n=(r?.children?.indexOf(e)??-1)+1;if(!r||0===n)return;let i=e.children.at(-1);for(;i?.type==="delimiter"&&"blockQuotePrefix"===i.tokenType;)!function(e,t=!1){s(e,-1,t)}(e,!0),l(r,n,i),i=e.children.at(-1)}),(0,n.YR)(e,e=>{let t=null;for(let[c,u]of function*(e){if(e.children)for(let t=e.children.length-1;t>=0;t--){let r=e.children[t];r&&(yield[t,r])}}(e)){var r,n,i;if("delimiter"===u.type&&d.has(u.tokenType)&&t&&(r=t,(0,o.z)(u)&&(0,o.z)(r)&&u.position.end.offset===r.position.start.offset)&&(n=t,!a.fD.has(n.type))){s(e,c),l(t,0,u);continue}if("listItem"===u.type)for(;t?.type==="delimiter"&&d.has(t.tokenType);)s(e,c+1),i=t,l(u,u.children?.length??0,i),t=e.children?.[c+1]??null;t=u}})}},9445:(e,t,r)=>{function n(e,t){switch(t){case"escapeBlockquote":return e.slice(0,e.findLastIndex(e=>"blockQuotePrefix"===e.tokenType));case"escapeList":return e.slice(0,e.findLastIndex(e=>"listItemPrefix"===e.tokenType||"listItemIndent"===e.tokenType));case"all":return[];case void 0:return e}}function i(e){return" ".repeat(e.length)}function o(e){return e.map(e=>{switch(e.tokenType){case"listItemPrefix":return i(e.raw);case"taskListCheck":return"";default:return e.raw}}).join("")}r.d(t,{KR:()=>n,cz:()=>i,z0:()=>o})},9880:(e,t,r)=>{r.d(t,{P:()=>p});var n=r(74848),i=r(16522),o=r(59403),l=r(77430),s=r(5524),a=r(74508);let d={triggerChar:"@"},c=e=>({value:e.identifier,render:t=>(0,n.jsxs)(s.l.Item,{...t,children:[e.avatarUrl&&(0,n.jsx)(s.l.LeadingVisual,{children:(0,n.jsx)(l.r,{size:16,src:e.avatarUrl})}),(0,n.jsx)("span",{className:"use-mention-suggestions-module__identifierText--jeSK0",children:e.identifier})," ",(0,n.jsx)(s.l.Description,{truncate:!0,children:e.description})]})}),u=(e,t)=>{let r=Math.max((0,o.dt)(e,t.identifier),(0,o.dt)(e,t.description));return r===o.IP?r:r>0&&t.participant?o.M4:t.participant?r+o.Dx:r},f=(e,t)=>e.participant&&!t.participant?-1:t.participant&&!e.participant?1:e.identifier.localeCompare(t.identifier),p=e=>{let t,r,n=(0,i.c)(4);n[0]!==e?(t=(0,a.C)(e,u,f,c),n[0]=e,n[1]=t):t=n[1];let o=t;return n[2]!==o?(r={calculateSuggestions:o,trigger:d},n[2]=o,n[3]=r):r=n[3],r}},10242:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(74848),i=r(84268);let o=({feedbackUrl:e})=>(0,n.jsx)(i.A,{className:"FeedbackLink-module__link--Ga4DP",href:e,inline:!0,children:"Give feedback"});try{o.displayName||(o.displayName="FeedbackLink")}catch{}},11635:(e,t,r)=>{r.d(t,{f:()=>d,x:()=>c});var n=r(74848),i=r(16522),o=r(38621),l=r(84268),s=r(76720),a=r(33083);let d="https://github-grid.enterprise.slack.com/archives/C08M545RDCN";function c(e){let t,r,c,u,f,p,m=(0,i.c)(8),{onChangeViewMode:h}=e;return m[0]!==h?(t=(0,n.jsx)(a.Y,{onChangeViewMode:h,selectedView:"hybrid"}),m[0]=h,m[1]=t):t=m[1],m[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(s.E.Visual,{children:(0,n.jsx)(o.AlertIcon,{size:"medium"})}),c=(0,n.jsx)(s.E.Heading,{children:"Something went wrong"}),m[2]=r,m[3]=c):(r=m[2],c=m[3]),m[4]===Symbol.for("react.memo_cache_sentinel")?(u={textAlign:"center",maxWidth:"700px"},m[4]=u):u=m[4],m[5]===Symbol.for("react.memo_cache_sentinel")?(f=(0,n.jsxs)(s.E,{children:[r,c,(0,n.jsxs)(s.E.Description,{style:u,children:["The hybrid Markdown editing experience is temporarily unavailable due to an unknown error. Please"," ",(0,n.jsx)(l.A,{inline:!0,href:d,children:"report this error"})," ","to the team along with browser console logs, if possible."]})]}),m[5]=f):f=m[5],m[6]!==t?(p=(0,n.jsxs)(n.Fragment,{children:[t,f]}),m[6]=t,m[7]=p):p=m[7],p}try{c.displayName||(c.displayName="ErrorFallback")}catch{}},13659:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(74848),i=r(26607),o=r(10242),l=r(84174);let s=({children:e="Private preview",feedbackUrl:t,className:r})=>(0,n.jsx)(l.V,{className:r,label:(0,n.jsx)(i.A,{variant:"secondary",children:e}),link:t?(0,n.jsx)(o.A,{feedbackUrl:t}):void 0});try{s.displayName||(s.displayName="AlphaLabel")}catch{}},16049:(e,t,r)=>{r.d(t,{QM:()=>m,fU:()=>g,jw:()=>h,zL:()=>s});var n=r(69599),i=r(51987),o=r(96379),l=r(96540);let s=[".svg",".gif",".jpg",".jpeg",".png",".mov",".mp4",".webm"],a=[".pdf",".docx",".odt",".fodt",".pptx",".odp",".fodp",".xlsx",".ods",".fods",".xls",".csv",".odg",".fodg",".odf",".zip",".gz",".tgz",".patch",".txt",".log",".md",".json",".jsonc",".cpuprofile",".dmp"],d=[".debug",".rtf",".msg",".doc",".eml",".xlsm",".tsv",".py",".yaml",".yml",".css",".xml",".html",".htm",".js",".sql",".java",".c",".cpp",".ipynb",".sh",".php",".ts",".tsx",".cs",".pdb",".drawio",".copilotmd",".bmp",".tif",".tiff",".mp3",".wav"],c=[".webp"];async function u(e,t,r){let n=new FormData,{name:i,size:l,type:s}=e;return t&&n.append("repository_id",t),r&&(n.append("upload_container_type","project"),n.append("upload_container_id",r)),n.append("name",i),n.append("size",l.toString()),n.append("content_type",s),await (0,o.DI)("/upload/policies/assets",{body:n,method:"POST"})}async function f(e,t,r){let{upload_authenticity_token:n,upload_url:i,header:o,form:l,same_origin:s}=e,a=new FormData;for(let e in s&&a.append("authenticity_token",n),l)a.append(e,l[e]);return a.append("file",t),r?await (({url:e,formData:t,headers:r,onProgress:n})=>new Promise((i,o)=>{let l=new XMLHttpRequest;for(let[t,s]of(l.addEventListener("loadstart",()=>n(0)),l.upload.addEventListener("progress",e=>n(e.loaded)),l.addEventListener("loadend",()=>{if(0===l.status)return void o(TypeError("Network request failed"));try{i(new Response(l.response||void 0,{status:l.status,statusText:l.statusText,headers:(e=>{let t=new Headers;for(let r of e.trim().split(/\r?\n/)){if(!r)continue;let e=r.indexOf(":");if(-1===e)continue;let n=r.slice(0,e).trim(),i=r.slice(e+1).trim();n&&t.append(n,i)}return t})(l.getAllResponseHeaders()??"")}))}catch(e){o(e)}}),l.open("POST",e),l.responseType="text",Object.entries(r)))void 0!==s&&l.setRequestHeader(t,s);l.send(t)}))({url:i,formData:a,headers:o,onProgress:r}):await fetch(i,{headers:{...o},method:"post",body:a})}async function p(e,t){let r="string"==typeof e.asset_upload_url?e.asset_upload_url:null,n="string"==typeof e.asset_upload_authenticity_token?e.asset_upload_authenticity_token:null;if(r&&n){let e=new FormData;return e.append("authenticity_token",n),await fetch(r,{method:"PUT",body:e,credentials:"same-origin",headers:{Accept:"application/json",...(0,i.kt)()}})}return t}async function m(e,t,r,n){let i=await u(e,t,r);if(!i.ok)throw Error("Failed to obtain asset policy");let o=await i.json(),l=await f(o,e,n);if(!l.ok)throw Error("Failed to upload file to storage");let s=await p(o,l);if(!s.ok)throw Error("Failed to register file upload completion");let{href:a}=await s.json();if("string"!=typeof a)throw Error("Received invalid file URL");return n?.(e.size),{url:a,file:e}}function h(e){let t=[...s,...(0,n.G7)("webp_support")?c:[],...a,...(0,n.G7)("issues_expanded_file_types")?d:[]],r=[...s,...(0,n.G7)("webp_support")?c:[]];return e?t:r}function g(e,t){return(0,l.useCallback)(async(r,n)=>m(r,e,t,n),[e,t])}},16058:(e,t,r)=>{r.d(t,{DN:()=>m,Hg:()=>h,LY:()=>u,Ts:()=>f,WJ:()=>y,Wq:()=>g,el:()=>p,xM:()=>b,zE:()=>v,zJ:()=>c});var n=r(47970),i=r(76814),o=r(9445);let l={first:{prefix:"",digits:1,suffix:". "},parse(e){let t=e.match(/^(?<prefix>\s*)(?<digits>\d{1,9})(?<suffix>[.)]\s*)$/)?.groups;return t?{...t,digits:parseInt(t.digits,10)}:void 0},serialize:e=>`${e.prefix}${e.digits}${e.suffix}`,increment:e=>({...e,digits:Math.min(e.digits+1,0x3b9ac9ff)}),reset:e=>({...e,digits:1})},s={prefix:"[",value:"x",suffix:"] "},a={prefix:"[",value:" ",suffix:"] "},d=e=>e.match(/^(?<prefix>\[)(?<value>[ xX])(?<suffix>\]\s*)$/)?.groups;function c(e){return d(e)}function u(e){let t=l.parse(e);return t?l.serialize(l.increment(t)):e}function f(e){let t=l.parse(e);return t?l.serialize(l.reset(t)):e}function p(e){return e?l.serialize(l.first):"* "}function m(e){let t;return t=e?s:a,`${t.prefix}${t.value}${t.suffix}`}function h(e,t,r=""){let n=d(t),i=n?n.suffix.slice(1):"",o=0!==i.length||0!==r.length&&/\s/.test(r)?i:" ";return`[${e?"x":" "}]${o}`}function g(e){return void 0!==d(e)}function y(e){return d(e)?.value.toLowerCase()==="x"}function k(e,t){if(t<0)return 0;let r=e.find(e=>"linePrefix"===e.tokenType);return r?Math.floor(r.raw.length/2):e.slice(0,t).filter(e=>"listItemPrefix"===e.tokenType||"listItemIndent"===e.tokenType).length}function x(e,t){return e.slice(t).find(e=>"taskListCheck"===e.tokenType)}function v(e,t,r){let n=r.findLast(e=>"listItemPrefix"===e.tokenType),i=r[0]?.position?.start.offset,l=r.at(-1)?.position?.end.offset;if(!n||void 0===i||void 0===l)return[];let s=function(e,t){let r=e.findLastIndex(e=>"listItemPrefix"===e.tokenType),n=t.findLastIndex(e=>"listItemPrefix"===e.tokenType),i=x(e,r),l=x(t,n),s=k(e,r);if(k(t,n)===s){let t=(0,o.z0)(e.slice(0,r))+e[r]?.raw;return i?t+(l?.raw??m(!1)):t}return t.map(e=>e.raw).join("")}(t,r);return s?[{from:e+i,to:e+l,insert:s}]:[]}function b(e){let t={};return(0,n.YR)(e,e=>t.listItemPrefix?("delimiter"===e.type&&"taskListCheck"===e.tokenType&&(t.taskListPrefix=e),i.dc):("delimiter"===e.type&&"listItemPrefix"===e.tokenType&&(t.listItemPrefix=e),"list"===e.type)?i._Z:void 0),t}},21210:(e,t,r)=>{r.d(t,{D:()=>_});var n=r(86350),i=r(81529),o=r(84600),l=r(78625),s=r(65012);function a(e){return{type:"blankLine",position:{start:e,end:e},data:{hProperties:{dataBlankLine:!0}}}}var d=r(3904);let c=["blockQuotePrefix","strongSequence","emphasisSequence","codeTextSequence","codeTextPadding","strikethroughSequence","thematicBreakSequence","codeFencedFence","atxHeadingSequence","whitespace","setextHeadingLine","labelMarker","labelImageMarker","resource","resourceDestination","linePrefix","listItemIndent","listItemPrefix","taskListCheck","tableCellDivider","tableDelimiterRow","tableDelimiter","autolinkMarker","hardBreakEscape","escapeMarker","characterReference"];function u(e){if(e.data.delimiterStack?.length)return e.data.delimiterStack.at(-1);let t=e.stack.at(-1);if(t?.type==="fragment"){let t=e.stack.at(-2);if(t&&"value"in t)return t}return t}let f=function(e){let t={type:"delimiter",tokenType:e.type,raw:this.sliceSerialize(e),position:{start:e.start,end:e.end}},r=u(this);if(r){var n;r.children??(r.children=[]),r.children.push(t),(n=this.data).delimiterStack??(n.delimiterStack=[]),this.data.delimiterStack.push(t)}return!1},p=function(e){let t=this.data.delimiterStack?.pop();if(t?.tokenType!==e.type)throw Error(`Expected open '${e.type}' delimiter on stack`);return this.data.lastExitedDelimiterToken=e,!1},m=function(e){let t=u(this),r=t?.children?.at(-1);return e.end.offset-e.start.offset==1&&r?.type==="delimiter"&&"listItemPrefix"===r.tokenType&&(0,s.z)(r)&&e.start.offset===r.position.end.offset?(r.position.end={...e.end},r.raw+=this.sliceSerialize(e)):f.call(this,e),!1},h=function(e){let t=u(this);return t?.type==="delimiter"&&"linePrefix"===t.tokenType&&p.call(this,e),!1},g=function(e){var t;let r=this.stack.at(-1);if(r?.type==="heading"&&!((t=r.children[1])&&"delimiter"===t.type&&"whitespace"===t.tokenType)){this.exit(e);let t=this.stack.at(-1);t.children.pop(),t.children.push({type:"paragraph",position:r.position,children:[]});return}return!1};var y=r(76814),k=r(73189),x=r(14674);function v(e){(0,y.VG)(e,"html",(e,t)=>{let r=t.at(-1),n=r.children.indexOf(e);r.children.splice(n,1,...(0,s.z)(e)?(function(e){let t=[],r=null;function n(e,n){if(!n)return;let i={column:n.endCol,line:n.endLine,offset:n.endOffset};if("text"===e&&r?.type==="text"){r.position.end=i;return}let o={type:e,position:{start:{column:n.startCol,line:n.startLine,offset:n.startOffset},end:i}};t.push(o),r=o}return new x._F({sourceCodeLocationInfo:!0},{onCharacter:({location:e})=>n("text",e),onWhitespaceCharacter:({location:e})=>n("text",e),onNullCharacter:({location:e})=>n("text",e),onStartTag:({location:e})=>n("startTag",e),onEndTag:({location:e})=>n("endTag",e),onDoctype:({location:e})=>n("doctype",e),onComment:({location:e})=>n("comment",e),onEof:k.l,onParseError:k.l}).write(e,!0),t})(e.value).flatMap(t=>{let r=e.value.slice(t.position.start.offset,t.position.end.offset),n={start:(0,l.z0)(e.position.start,t.position.start),end:(0,l.z0)(e.position.start,t.position.end)};switch(t.type){case"text":return[{type:"text",value:r,position:n}];case"endTag":return[{type:"delimiter",tokenType:"htmlTag",raw:r,position:n},{type:"html",value:r,position:n}];case"startTag":return[{type:"html",value:r,position:n},{type:"delimiter",tokenType:"htmlTag",raw:r,position:n}];case"comment":case"doctype":return[{type:"html",value:r,position:n}]}}):[])},!0)}let b={enabledExtensions:{delimiters:!0,containDelimiters:!0,splitHtml:!0,skipEmptyHeadings:!0,blankLines:!0}};function _(e,{enabledExtensions:t=b.enabledExtensions}=b){return(0,n.Y)(e,"utf-8",{extensions:[(0,o.T)()],mdastExtensions:[(0,i.C)(),t.delimiters?{enter:{...Object.fromEntries(c.map(e=>[e,f])),linePrefix:m},exit:{...Object.fromEntries(c.map(e=>[e,p])),linePrefix:h}}:[],t.containDelimiters?(0,d.C)():[],t.splitHtml?{transforms:[v]}:[],t.skipEmptyHeadings?{exit:{atxHeading:g}}:[],t.blankLines?{transforms:[t=>{let r=[],n={column:0,line:0,offset:-1};function i(e){r.push(e),n=e.position.end}for(let e of t.children)if((0,s.z)(e)){for(;n.offset+1<e.position.start.offset;)i(a((0,l.On)(n,`
`)));i(e)}for(;n.offset+1<e.length;)i(a((0,l.On)(n,`
`)));t.children=r}]}:[]]})}},26076:(e,t,r)=>{r.d(t,{G:()=>g});var n=r(74848),i=r(96540),o=r(21513),l=r(69726),s=r(73017),a=r(42931),d=r(80752),c=r(50463);let u=e=>{let t=e.match(/^ {0,3}(`{3,}|~{3,})[^`]*$/);return t?t[1]:null},f=(e,t)=>RegExp(`^ {0,3}${t}${t[0]}* *$`).test(e),p=e=>"string"==typeof e?.taskBox,m=e=>({...e,taskBox:"[ ]"===e.taskBox?"[x]":"[ ]"});var h=r(34164);function g({ref:e=null,verifiedHTML:t,loading:r=!1,markdownValue:g="",onChange:y,disabled:k=!1,onLinkClick:x,openLinksInNewTab:v=!1,teamHovercardsEnabled:b=!1,className:_}){let[w,I]=(0,i.useState)(null),S=(0,i.useRef)(null);(0,o.T)(e,S);let j=(0,i.useCallback)(e=>{S.current=e,I(e)},[]);return(({htmlContainer:e,markdownValue:t,onChange:r,disabled:n=!1,dependencies:o=[]})=>{let l=(0,i.useRef)(t);(0,c.A)(()=>{l.current=t},[t]);let s=(0,i.useCallback)(e=>()=>{let t=l.current.split(/\r?\n/),n=null;for(let i=0,o=0;i<t.length;i++){let s=t[i];if(n){if(f(s,n)){n=null;continue}}else n=u(s);if(n)continue;let a=(0,d.VB)(s);if(p(a)){if(o===e){let e=(0,d.a1)(m(a));t.splice(i,1,e);let n=t.join(`
`);l.current=n,r(n);return}o++}}},[r]),[a,h]=(0,i.useState)([]);(0,i.useEffect)(()=>{h(Array.from(e?.querySelectorAll("input[type=checkbox].task-list-item-checkbox")??[]))},[e,...o]),(0,i.useEffect)(function(){let e=a.map(e=>{let t=e.disabled;return e.disabled=n,()=>{e.disabled=t}});return()=>{for(let t of e)t()}},[a,n]),(0,i.useEffect)(function(){let e=new AbortController;for(let[t,r]of a.entries()){let n=s(t);r.addEventListener("change",n,{signal:e.signal})}return()=>{e.abort()}},[a,s])})({onChange:(0,i.useCallback)(async e=>{try{await y?.(e)}catch{w&&(w.innerHTML=t)}},[y,w,t]),disabled:k||!y,htmlContainer:w??void 0,markdownValue:g,dependencies:[t]}),(0,a.O)({htmlContainer:w??void 0,onLinkClick:x,openLinksInNewTab:v}),(0,i.useMemo)(()=>r?(0,n.jsx)("div",{className:"MarkdownViewer-module__MarkdownViewerContainer--h7BF_",children:(0,n.jsx)(l.A,{"aria-label":"Loading content..."})}):(0,n.jsx)(s.vb,{ref:j,className:(0,h.$)("markdown-body",_),sx:_?{}:{fontSize:1,maxWidth:"100%","& > div > :last-child":{mb:0}},html:t,...b?{"data-team-hovercards-enabled":!0}:{}}),[_,r,b,t,j])}try{g.displayName||(g.displayName="MarkdownViewer")}catch{}},32964:(e,t,r)=>{r.d(t,{Al:()=>o,jr:()=>s,vp:()=>l});var n=r(47970),i=r(47601);let o="dataVideoCandidate";function l(e){(0,n.YR)(e,"element",(e,t,r)=>{if(!r||"number"!=typeof t||!(0,i.dz)(e,"p"))return;let n=e.children.filter(e=>"element"===e.type||"text"===e.type&&""!==e.value.trim());if(1!==n.length)return;let l=n[0];l?.type==="element"&&(0,i.dz)(l,"a")&&(l.properties[o]=!0)})}let s={attributes:{"*":[o]}}},33083:(e,t,r)=>{r.d(t,{Y:()=>s});var n=r(74848),i=r(16522),o=r(13659),l=r(93039);function s(e){let t,r,s,a,d=(0,i.c)(10),{onChangeViewMode:c,selectedView:u,children:f}=e,p=void 0===u?"hybrid":u;d[0]!==f?(t=(0,n.jsx)("div",{className:"Header-module__content--jYBUU",children:f}),d[0]=f,d[1]=t):t=d[1],d[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(o.Z,{}),d[2]=r):r=d[2];let m=!c;return d[3]!==c||d[4]!==p||d[5]!==m?(s=(0,n.jsx)(l.m,{selectedView:p,onViewSelect:c,disabled:m}),d[3]=c,d[4]=p,d[5]=m,d[6]=s):s=d[6],d[7]!==t||d[8]!==s?(a=(0,n.jsxs)("div",{className:"Header-module__header--Sdz_S",children:[t,r,s]}),d[7]=t,d[8]=s,d[9]=a):a=d[9],a}try{s.displayName||(s.displayName="Header")}catch{}},38939:(e,t,r)=>{r.d(t,{A:()=>o,u:()=>l});var n=r(77695),i=r(55220);let o=e=>{let t=e?.children?.some(e=>"delimiter"===e.type&&"labelMarker"===e.tokenType),r=e?.children?.some(e=>"delimiter"===e.type&&"resource"===e.tokenType);return t&&r},l=e=>{let t,r,l;e.hasFocus||e.focus();let s=e.state.selection.main,a=(0,i.rx)(e,"link");if(a&&o(a))return(0,i.JB)(e,a),!0;let{start:d,end:c}=(0,n.Jr)(e.state)?{start:s.from,end:s.to}:(0,n.cL)(e.state.doc.toString(),s.anchor);return a?(t="[](",r=")",l=d+1):(t="[",r="]()",l=c+3),e.dispatch({changes:[{from:d,insert:t},{from:c,insert:r}],selection:{anchor:l},userEvent:"input",scrollIntoView:!0}),!0}},39603:(e,t,r)=>{r.d(t,{Ci:()=>d,Ec:()=>a});var n=r(74848),i=r(16522),o=r(53419),l=r(96540);let s=(0,l.createContext)({trackViewSwitch:()=>{},trackToolbarInteraction:()=>{},trackKeyboardShortcut:()=>{},trackAutocompleteShown:()=>{},trackAutocompleteSelected:()=>{},trackFileUpload:()=>{}});function a(){return(0,l.use)(s)}function d(e){let t,r,l=(0,i.c)(5),{options:a,children:d}=e;l[0]!==a?(t=function({featureFlagEnabled:e,editorId:t,surface:r}){let n={feature_flag_markdown_experience_hybrid_editor:e};t&&(n.editor_id=t),r&&(n.surface=r);let i=(e,t)=>{let r={...n,...t};try{(0,o.BI)(e,r)}catch(e){if(e instanceof ReferenceError&&"string"==typeof e.message&&e.message.includes("telemetry"))return;throw e}},l=(e,t)=>{i(`hybrid_markdown_editor.${e}`,t)};return{trackViewSwitch:({from:e,to:t,trigger:r})=>{i("markdown_editor.select_view",{mode:t,from_mode:e??"unknown",trigger:r,did_change:!e||e!==t})},trackToolbarInteraction:({control:e,action:t,trigger:r,isActive:n,keybinding:i,handled:o})=>{l("toolbar_interaction",{control:e,action:t,trigger:r,is_active:n??null,keybinding:i,handled:o??null})},trackKeyboardShortcut:({commandId:e,shortcut:t,handled:r})=>{l("keyboard_shortcut",{command:e,shortcut:t,handled:r})},trackAutocompleteShown:({triggerChar:e,queryLength:t,suggestionState:r,suggestionCount:n})=>{l("autocomplete_shown",{trigger_char:e,query_length:t,suggestion_state:r,suggestion_count:n??null})},trackAutocompleteSelected:({triggerChar:e,insertedLength:t,multiStep:r,suggestionKind:n})=>{l("autocomplete_selected",{trigger_char:e,inserted_length:t,multi_step:r,suggestion_kind:n})},trackFileUpload:({phase:e,mimeType:t,sizeBytes:r,mediaKind:n,errorType:i})=>{l("file_upload",{phase:e,mime_type:t,size_bytes:r,media_kind:n??"other",error_type:i??null})}}}(a),l[0]=a,l[1]=t):t=l[1];let c=t;return l[2]!==d||l[3]!==c?(r=(0,n.jsx)(s,{value:c,children:d}),l[2]=d,l[3]=c,l[4]=r):r=l[4],r}try{s.displayName||(s.displayName="HybridEditorTelemetryContext")}catch{}try{d.displayName||(d.displayName="HybridEditorTelemetryProvider")}catch{}},42306:(e,t,r)=>{r.d(t,{dT:()=>d,hO:()=>a,mM:()=>s});var n=r(16058),i=r(78625),o=r(65012),l=r(3266);function s(e,t,r){let i=[];for(let l of e.children.slice(t+1))if("listItem"===l.type){let e=(0,n.xM)(l).listItemPrefix;if(!e||!(0,o.z)(e))continue;let t=null===r?(0,n.Ts)(e.raw):(0,n.LY)(r);i.push({from:e.position.start.offset,to:e.position.end.offset,insert:t}),r=t}return i}function a(e){return e.filter(e=>"listItem"===e.type&&(0,o.z)(e))}function d(e){if(1!==e.selection.ranges.length)return null;let t=e.selection.main.from,r=e.selection.main.to,n=(0,i.v5)((0,l.wk)(e),t,r),o=n.findLastIndex(e=>"list"===e.type),s=n[o];if(!s)return null;let d=a((0,i.aI)(s,t,r));if(0===d.length)return null;let c=n.slice(0,o),u=[];for(let e of c)if("listItem"===e.type){let t=u.at(-1);t&&(t.item=e)}else"list"===e.type&&u.push({list:e,item:void 0});return{list:s,selectedItems:d,parents:u}}},42931:(e,t,r)=>{r.d(t,{O:()=>i});var n=r(96540);let i=({htmlContainerRef:e,htmlContainer:t,onLinkClick:r,openLinksInNewTab:i})=>{(0,n.useEffect)(()=>{let n=e?.current||t;if(!n)return;let o=e=>{let t=e.target.closest("a");t&&(r?.(e),!e.defaultPrevented&&i&&t.href&&(window.open(t.href,"_blank","noopener noreferrer"),e.preventDefault()))};return n.addEventListener("click",o),()=>{n?.removeEventListener("click",o)}},[t,e,r,i])}},43346:(e,t,r)=>{function n(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}r.d(t,{XT:()=>i,c5:()=>n,gU:()=>l});let i=()=>(...e)=>new Set(e);function o(e){return e.endsWith("/")?e.slice(0,e.length-1):e}function l(e){try{let t=new URL(e);return o(t.href).trim()===o(e).trim()}catch{return!1}}},45007:(e,t,r)=>{r.d(t,{S:()=>o});var n=r(54571),i=r(96540);let o=({disabled:e,minHeightLines:t,maxHeightLines:r,elementRef:o,value:l})=>{let[s,a]=(0,i.useState)(void 0),[d]=(0,n.I)(()=>CSS.supports("field-sizing","content"),!0),c=(0,i.useCallback)(()=>{if(e)return;let t=o.current;if(!t||d||!l)return;let r=getComputedStyle(t);a(`calc(${t.scrollHeight}px - ${r.paddingTop} - ${r.paddingBottom})`)},[e,o,d,l]);return(0,i.useLayoutEffect)(c,[c]),(0,i.useEffect)(c,[]),{height:s,minHeight:t?`${t}lh`:void 0,maxHeight:r?`${r}lh`:void 0,boxSizing:"content-box",fieldSizing:"content",overflowWrap:"anywhere"}}},45580:(e,t,r)=>{r.d(t,{S:()=>i,t:()=>n});let n={strong:"**",emphasis:"_",inlineCode:"`",delete:"~"},i={"*":"*",_:"_",$:"$","~":"~","[":"]","(":")","`":"`"}},46530:(e,t,r)=>{r.d(t,{n:()=>eD,v:()=>eM});var n=r(74848),i=r(16522),o=r(21373),l=r(96540);let s=(0,l.createContext)({disabled:!1,required:!1,formattingToolsRef:{current:null},uploadButtonProps:null,fileDraggedOver:!1,previewMode:!1});try{s.displayName||(s.displayName="MarkdownEditorContext")}catch{}let a=e=>{let t,r=(0,i.c)(2),{children:o}=e;return r[0]!==o?(t=(0,n.jsx)(n.Fragment,{children:o}),r[0]=o,r[1]=t):t=r[1],t};a.displayName="MarkdownEditor.Actions";let d=e=>{let t,r,a,d=(0,i.c)(7);d[0]!==e?({ref:r,...t}=e,d[0]=e,d[1]=t,d[2]=r):(t=d[1],r=d[2]);let{disabled:c}=(0,l.use)(s);return d[3]!==c||d[4]!==t||d[5]!==r?(a=(0,n.jsx)(o.Q,{disabled:c,...t,ref:r}),d[3]=c,d[4]=t,d[5]=r,d[6]=a):a=d[6],a};d.displayName="MarkdownEditor.ActionButton";var c=r(38621),u=r(57919);let f=e=>{let t,r,o,l,s,a,d=(0,i.c)(11),{children:c}=e;d[0]===Symbol.for("react.memo_cache_sentinel")?(t={footerButtons:m},d[0]=t):t=d[0];let[f,p]=(0,u.H)(c,t);return d[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(h,{}),d[1]=r):r=d[1],d[2]!==f.footerButtons?(o=f.footerButtons&&(0,n.jsx)("div",{className:"Footer-module__footerButtonWrapper--TedKn",children:f.footerButtons}),d[2]=f.footerButtons,d[3]=o):o=d[3],d[4]!==o?(l=(0,n.jsxs)("div",{className:"Footer-module__footerWrapper--ObMEq",children:[r,o]}),d[4]=o,d[5]=l):l=d[5],d[6]!==p?(s=(0,n.jsx)("div",{className:"Footer-module__childrenStyling--cH0iq",children:p}),d[6]=p,d[7]=s):s=d[7],d[8]!==l||d[9]!==s?(a=(0,n.jsxs)("div",{className:"Footer-module__footer--rjRmQ","data-testid":"markdown-editor-footer",children:[l,s]}),d[8]=l,d[9]=s,d[10]=a):a=d[10],a},p=e=>{let t,r=(0,i.c)(2),{children:o}=e;return r[0]!==o?(t=(0,n.jsx)(f,{children:o}),r[0]=o,r[1]=t):t=r[1],t};p.displayName="MarkdownEditor.Footer";let m=e=>{let t,r,a,d=(0,i.c)(7);d[0]!==e?({ref:r,...t}=e,d[0]=e,d[1]=t,d[2]=r):(t=d[1],r=d[2]);let{disabled:c}=(0,l.use)(s);return d[3]!==c||d[4]!==t||d[5]!==r?(a=(0,n.jsx)(o.Q,{size:"small",disabled:c,...t,ref:r}),d[3]=c,d[4]=t,d[5]=r,d[6]=a):a=d[6],a};m.displayName="MarkdownEditor.FooterButton";let h=(0,l.memo)(()=>{let e,t=(0,i.c)(3),{uploadButtonProps:r,fileDraggedOver:o}=(0,l.use)(s);return t[0]!==o||t[1]!==r?(e=r?(0,n.jsx)(g,{fileDraggedOver:o,...r}):null,t[0]=o,t[1]=r,t[2]=e):e=t[2],e});h.displayName="MarkdownEditor.DefaultFooterButtons";let g=(0,l.memo)(e=>{let t,r,a,d,u,f=(0,i.c)(12);f[0]!==e?({fileDraggedOver:t,...r}=e,f[0]=e,f[1]=t,f[2]=r):(t=f[1],r=f[2]);let{disabled:p,fileUploadProgress:m}=(0,l.use)(s),h=m?.[0],g=m?.[1],k=!!g,x=1===g?"Uploading your file...":`Uploading your files... (${h}/${g})`,v=k?x:void 0;f[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("span",{className:"Footer-module__condensed--o9bUn",children:"Add Files"}),f[3]=a):a=f[3];let b=t?"Drop to add files":"Paste, drop, or click to add files";return f[4]!==b?(d=(0,n.jsx)("span",{className:"Footer-module__spacious--VlAKA",children:b}),f[4]=b,f[5]=d):d=f[5],f[6]!==p||f[7]!==k||f[8]!==r||f[9]!==v||f[10]!==d?(u=(0,n.jsxs)(o.Q,{variant:"invisible",loadingAnnouncement:v,leadingVisual:c.PaperclipIcon,loading:k,size:"small",className:"Footer-module__footerButton--zxnP6",onMouseDown:y,disabled:p,...r,children:[a,d]}),f[6]=p,f[7]=k,f[8]=r,f[9]=v,f[10]=d,f[11]=u):u=f[11],u});g.displayName="MarkdownEditor.FileUploadButton";try{f.displayName||(f.displayName="CoreFooter")}catch{}function y(e){e.preventDefault()}var k=r(3398);let x=e=>{let t,r,o=(0,i.c)(6);o[0]!==e?({...t}=e,o[0]=e,o[1]=t):t=o[1];let{disabled:a,required:d}=(0,l.use)(s);return o[2]!==a||o[3]!==t||o[4]!==d?(r=(0,n.jsx)(k.A,{as:"legend",disabled:a,required:d,className:"Label-module__inputLabel--EMji4",...t}),o[2]=a,o[3]=t,o[4]=d,o[5]=r):r=o[5],r};x.displayName="MarkdownEditor.Label";let v=e=>{let t,r=(0,i.c)(2);return r[0]!==e?(t=(0,n.jsx)(x,{...e}),r[0]=e,r[1]=t):t=r[1],t};var b=r(69599),_=r(75202),w=r(11635),I=r(90670),S=r(34164),j=r(1878),T=r(33083),N=r(81285);function C(e){let t,r,o,l,s=(0,i.c)(7),{value:a,placeholder:d}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(T.Y,{selectedView:"hybrid",children:(0,n.jsx)(N.M,{view:null,fileUploadButton:(0,n.jsx)(j.g,{disabled:!0})})}),r=(0,S.$)("cm-editor","cm-content","SuspenseFallback-module__container--lkjVZ"),s[0]=t,s[1]=r):(t=s[0],r=s[1]),s[2]!==d||s[3]!==a?(o=a||(0,n.jsx)("div",{className:"SuspenseFallback-module__placeholder--rtvCC",children:d}),s[2]=d,s[3]=a,s[4]=o):o=s[4],s[5]!==o?(l=(0,n.jsxs)(n.Fragment,{children:[t,(0,n.jsx)("div",{className:r,children:o})]}),s[5]=o,s[6]=l):l=s[6],l}try{C.displayName||(C.displayName="SuspenseFallback")}catch{}var E=r(39603);let M=(0,l.lazy)(async()=>({default:(await Promise.all([r.e(3088),r.e(15874),r.e(45230),r.e(31164),r.e(73048),r.e(38591)]).then(r.bind(r,60972))).CodeMirrorEditor}));function P(e){let t,r,o,s,a,d,c,u,f,p,m,h=(0,i.c)(24);return h[0]!==e?({onChangeViewMode:t,value:a,placeholder:r,ref:o,...s}=e,h[0]=e,h[1]=t,h[2]=r,h[3]=o,h[4]=s,h[5]=a):(t=h[1],r=h[2],o=h[3],s=h[4],a=h[5]),h[6]!==t?(d=(0,n.jsx)(w.x,{onChangeViewMode:t}),h[6]=t,h[7]=d):d=h[7],h[8]===Symbol.for("react.memo_cache_sentinel")?(c={featureFlagEnabled:(0,b.G7)("markdown_experience_hybrid_editor")},h[8]=c):c=h[8],h[9]!==r||h[10]!==a?(u=(0,n.jsx)(C,{value:a,placeholder:r}),h[9]=r,h[10]=a,h[11]=u):u=h[11],h[12]!==t||h[13]!==r||h[14]!==o||h[15]!==s||h[16]!==a?(f=(0,n.jsx)(M,{ref:o,onChangeViewMode:t,value:a,placeholder:r,...s}),h[12]=t,h[13]=r,h[14]=o,h[15]=s,h[16]=a,h[17]=f):f=h[17],h[18]!==u||h[19]!==f?(p=(0,n.jsx)(E.Ci,{options:c,children:(0,n.jsx)(l.Suspense,{fallback:u,children:f})}),h[18]=u,h[19]=f,h[20]=p):p=h[20],h[21]!==d||h[22]!==p?(m=(0,n.jsx)("div",{className:I.A.container,children:(0,n.jsx)(_.t,{fallback:d,children:p})}),h[21]=d,h[22]=p,h[23]=m):m=h[23],m}try{M.displayName||(M.displayName="CodeMirrorEditor")}catch{}try{P.displayName||(P.displayName="HybridMarkdownEditor")}catch{}var L=r(93039),A=r(53419),O=r(26076),R=r(73189),V=r(16643),$=r(72511);let F=(0,l.memo)(e=>{let t,r=(0,i.c)(2),{children:o}=e;return r[0]!==o?(t=(0,n.jsx)($.A,{variant:"danger",full:!0,className:"ErrorMessage-module__flash--Fb4_Y",children:o}),r[0]=o,r[1]=t):t=r[1],t});F.displayName="MarkdownEditor.ErrorMessage";let z=e=>(0,A.BI)("markdown_editor.format",{tool:e}),B=({ref:e,forInputId:t})=>{(0,l.useEffect)(()=>{r.e(78143).then(r.bind(r,78143))},[]);let i=(0,l.useRef)(null),o=(0,l.useRef)(null),s=(0,l.useRef)(null),a=(0,l.useRef)(null),d=(0,l.useRef)(null),c=(0,l.useRef)(null),u=(0,l.useRef)(null),f=(0,l.useRef)(null),p=(0,l.useRef)(null),m=(0,l.useRef)(null),h=(0,l.useRef)(null);return(0,l.useImperativeHandle)(e,()=>({header:()=>{i.current?.click(),z("header")},bold:()=>{o.current?.click(),z("bold")},italic:()=>{s.current?.click(),z("italic")},quote:()=>{a.current?.click(),z("quote")},code:()=>{d.current?.click(),z("code")},link:()=>{c.current?.click(),z("link")},unorderedList:()=>{u.current?.click(),z("unorderedList")},orderedList:()=>{f.current?.click(),z("orderedList")},taskList:()=>{p.current?.click(),z("taskList")},mention:()=>{m.current?.click(),z("mention")},reference:()=>{h.current?.click(),z("reference")}})),(0,n.jsxs)("markdown-toolbar",{for:t,style:{display:"none"},children:[(0,n.jsx)("md-header",{ref:i}),(0,n.jsx)("md-bold",{ref:o}),(0,n.jsx)("md-italic",{ref:s}),(0,n.jsx)("md-quote",{ref:a}),(0,n.jsx)("md-code",{ref:d}),(0,n.jsx)("md-link",{ref:c}),(0,n.jsx)("md-unordered-list",{ref:u}),(0,n.jsx)("md-ordered-list",{ref:f}),(0,n.jsx)("md-task-list",{ref:p}),(0,n.jsx)("md-mention",{ref:m}),(0,n.jsx)("md-ref",{ref:h})]})};B.displayName="MarkdownEditor.FormattingTools";let D="MarkdownEditor-module__fullHeight--No1e6";r(90204);var H=r(44358),U=r(51112),q=r(66964),W=r(45007),K=r(21513),Y=r(10576),G=r(40090),Q=r(65826),J=r(9880),Z=r(97673);let X=[],ee=e=>{let t,r,o,s,a,d,c,u,f,p,m,h,g,y,k,x,v,b,_,w,I,j,T,N,C,E,M,P,L,O,R,V,$,F,z,B,D,ee,et,er,en,ei=(0,i.c)(90);ei[0]!==e?({ref:a,value:T,onChange:x,onInput:v,disabled:r,placeholder:w,id:u,maxLength:h,onKeyDown:b,fullHeight:d,isDraggedOver:f,emojiSuggestions:o,emojiTone:s,mentionSuggestions:g,referenceSuggestions:j,labelledBy:p,minHeightLines:y,maxHeightLines:m,visible:N,monospace:k,pasteUrlsAsPlainText:_,className:t,generatingText:c,...I}=e,ei[0]=e,ei[1]=t,ei[2]=r,ei[3]=o,ei[4]=s,ei[5]=a,ei[6]=d,ei[7]=c,ei[8]=u,ei[9]=f,ei[10]=p,ei[11]=m,ei[12]=h,ei[13]=g,ei[14]=y,ei[15]=k,ei[16]=x,ei[17]=v,ei[18]=b,ei[19]=_,ei[20]=w,ei[21]=I,ei[22]=j,ei[23]=T,ei[24]=N):(t=ei[1],r=ei[2],o=ei[3],s=ei[4],a=ei[5],d=ei[6],c=ei[7],u=ei[8],f=ei[9],p=ei[10],m=ei[11],h=ei[12],g=ei[13],y=ei[14],k=ei[15],x=ei[16],v=ei[17],b=ei[18],_=ei[19],w=ei[20],I=ei[21],j=ei[22],T=ei[23],N=ei[24]),ei[25]!==s?(C={tone:s},ei[25]=s,ei[26]=C):C=ei[26];let eo=C,{trigger:el,calculateSuggestions:es}=(0,Q.xf)(o??X,eo),{trigger:ea,calculateSuggestions:ed}=(0,J.P)(g??X),{trigger:ec,calculateSuggestions:eu}=(0,Z.k)(j??X);ei[27]!==es||ei[28]!==el?(E={trigger:el,suggestionsCalculator:es},ei[27]=es,ei[28]=el,ei[29]=E):E=ei[29],ei[30]!==ed||ei[31]!==ea?(M={trigger:ea,suggestionsCalculator:ed},ei[30]=ed,ei[31]=ea,ei[32]=M):M=ei[32],ei[33]!==eu||ei[34]!==ec?(P={trigger:ec,suggestionsCalculator:eu},ei[33]=eu,ei[34]=ec,ei[35]=P):P=ei[35],ei[36]!==E||ei[37]!==M||ei[38]!==P?(L=[E,M,P],ei[36]=E,ei[37]=M,ei[38]=P,ei[39]=L):L=ei[39];let ef=L,{triggers:ep,suggestions:em,setSuggestionEvent:eh}=(0,q.f)(ef),eg=(0,l.useRef)(null);(0,K.T)(a,eg),ei[40]!==_?(O=()=>{let e=eg.current&&(0,H.B1)(eg.current,{defaultPlainTextPaste:{urlLinks:_}});return e?.unsubscribe},R=[_],ei[40]=_,ei[41]=O,ei[42]=R):(O=ei[41],R=ei[42]),(0,l.useEffect)(O,R);let ey=d||!N;ei[43]!==m||ei[44]!==y||ei[45]!==ey||ei[46]!==T?(V={disabled:ey,maxHeightLines:m,minHeightLines:y,elementRef:eg,value:T},ei[43]=m,ei[44]=y,ei[45]=ey,ei[46]=T,ei[47]=V):V=ei[47];let ek=(0,W.S)(V);ei[48]!==T?($=()=>{eg.current&&(eg.current.value=T)},ei[48]=T,ei[49]=$):$=ei[49],(0,l.useEffect)($),ei[50]!==eh||ei[51]!==em?(F=e=>{em||(0,A.BI)("markdown_editor.show_autocomplete_suggestions",{trigger:e.trigger.triggerChar}),eh(e)},ei[50]=eh,ei[51]=em,ei[52]=F):F=ei[52],ei[53]!==eh?(z=()=>eh(null),ei[53]=eh,ei[54]=z):z=ei[54],ei[55]===Symbol.for("react.memo_cache_sentinel")?(B={flex:"auto"},ei[55]=B):B=ei[55];let ex=p?void 0:"Markdown value",ev=!N&&"MarkdownInput-module__displayNone--tQubM",eb=d&&"MarkdownInput-module__fullHeight--HWXka",e_=k&&"MarkdownInput-module__monospace--ktxaS",ew=f&&"MarkdownInput-module__isDraggedOver--hTZEP",eI=c&&"MarkdownInput-module__generatingText--fuCZ6";return ei[56]!==t||ei[57]!==ev||ei[58]!==eb||ei[59]!==e_||ei[60]!==ew||ei[61]!==eI?(D=(0,S.$)(t,"MarkdownInput-module__textArea--kLNLR",ev,eb,e_,ew,eI),ei[56]=t,ei[57]=ev,ei[58]=eb,ei[59]=e_,ei[60]=ew,ei[61]=eI,ei[62]=D):D=ei[62],ei[63]!==r||ei[64]!==ek||ei[65]!==u||ei[66]!==p||ei[67]!==h||ei[68]!==y||ei[69]!==x||ei[70]!==v||ei[71]!==b||ei[72]!==w||ei[73]!==I||ei[74]!==ex||ei[75]!==D||ei[76]!==T?(ee=(0,n.jsx)(Y.Ay,{id:u,ref:eg,placeholder:w,maxLength:h,onKeyDown:b,disabled:r,"aria-label":ex,"aria-labelledby":p,onChange:x,onInput:v,value:T,className:D,rows:y,style:ek,...I}),ei[63]=r,ei[64]=ek,ei[65]=u,ei[66]=p,ei[67]=h,ei[68]=y,ei[69]=x,ei[70]=v,ei[71]=b,ei[72]=w,ei[73]=I,ei[74]=ex,ei[75]=D,ei[76]=T,ei[77]=ee):ee=ei[77],ei[78]!==em||ei[79]!==F||ei[80]!==z||ei[81]!==ee||ei[82]!==ep?(et=(0,n.jsx)(U.a,{triggers:ep,suggestions:em,onShowSuggestions:F,onHideSuggestions:z,style:B,tabInsertsSuggestions:!0,children:ee}),ei[78]=em,ei[79]=F,ei[80]=z,ei[81]=ee,ei[82]=ep,ei[83]=et):et=ei[83],ei[84]!==c||ei[85]!==N?(er=c&&N&&(0,n.jsx)("div",{className:"MarkdownInput-module__skeletonOverlay--FXuMG",children:(0,n.jsx)(G.r,{lines:5,"aria-label":"Generating text"})}),ei[84]=c,ei[85]=N,ei[86]=er):er=ei[86],ei[87]!==et||ei[88]!==er?(en=(0,n.jsxs)("div",{className:"MarkdownInput-module__inputWrapper--fDOeo",children:[et,er]}),ei[87]=et,ei[88]=er,ei[89]=en):en=ei[89],en};ee.displayName="MarkdownInput";var et=r(71315),er=r(5839),en=r(26108);let ei=e=>{let t,r,o,a=(0,i.c)(7);a[0]!==e?({ref:r,...t}=e,a[0]=e,a[1]=t,a[2]=r):(t=a[1],r=a[2]);let{disabled:d}=(0,l.use)(s);return a[3]!==d||a[4]!==t||a[5]!==r?(o=(0,n.jsx)(en.K,{ref:r,variant:"invisible",disabled:d,onMouseDown:eo,...t,className:"ToolbarButton-module__iconButton--o0jFl"}),a[3]=d,a[4]=t,a[5]=r,a[6]=o):o=a[6],o};function eo(e){return e.preventDefault()}ei.displayName="MarkdownEditor.ToolbarButton";let el=(0,l.createContext)(null),es=()=>{let e,t,r,o,s,a,d=(0,i.c)(18),c=(0,l.use)(el),[u,f]=(0,l.useState)(!1),[p,m]=(0,l.useState)("");d[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>({openMenu:()=>{f(!0)}}),d[0]=e):e=d[0],(0,l.useImperativeHandle)(c?.ref,e),d[1]!==c?.savedReplies||d[2]!==p?(t=c?.savedReplies.filter(e=>{let{name:t}=e;return t.toLowerCase().includes(p.toLowerCase())}).map(ea),d[1]=c?.savedReplies,d[2]=p,d[3]=t):t=d[3];let h=t;d[4]!==c?(r=e=>{f(!1);let t=c?.savedReplies.find(t=>{let{name:r}=t;return r===e?.text});t&&c?.onSelect(t)},d[4]=c,d[5]=r):r=d[5];let g=r;d[6]!==h||d[7]!==g?(o=e=>{let t=parseInt(e.key,10);h&&e.ctrlKey&&!Number.isNaN(t)&&t>=1&&t<=9&&(e.stopPropagation(),e.preventDefault(),g(h[t-1]))},d[6]=h,d[7]=g,d[8]=o):o=d[8];let y=o;d[9]!==c?(s=e=>{f(e),e?((0,A.BI)("markdown_editor.open_saved_replies"),c?.onOpen()):m("")},d[9]=c,d[10]=s):s=d[10];let k=s;return d[11]!==p||d[12]!==h||d[13]!==y||d[14]!==k||d[15]!==g||d[16]!==u?(a=h?(0,n.jsx)(er.X,{renderAnchor:ed,open:u,onOpenChange:k,items:h,filterValue:p,onFilterChange:m,placeholderText:"Search saved replies",selected:void 0,onSelectedChange:e=>{g(Array.isArray(e)?e[0]:e)},overlayProps:{width:"small",maxHeight:"small",anchorSide:"outside-right",onKeyDown:y},secondaryAction:(0,n.jsx)(er.X.SecondaryActionLink,{href:`${et.fV.origin}/settings/replies`,children:"Create new"})}):(0,n.jsx)(n.Fragment,{}),d[11]=p,d[12]=h,d[13]=y,d[14]=k,d[15]=g,d[16]=u,d[17]=a):a=d[17],a};try{el.displayName||(el.displayName="SavedRepliesContext")}catch{}try{es.displayName||(es.displayName="SavedRepliesButton")}catch{}function ea(e,t){return{id:t,text:e.name,description:e.content,descriptionVariant:"block",trailingVisual:t<9?`Ctrl + ${t+1}`:void 0,className:"SavedReplies-module__SavedReplies--K6yeB"}}function ed(e){return(0,n.jsx)(ei,{...e,icon:c.ReplyIcon,"aria-label":"Saved replies","aria-labelledby":void 0})}var ec=r(97068),eu=r(45800);let ef="Toolbar-module__divider--Kctb6",ep="Toolbar-module__group--dOhAD",em=(0,l.memo)(()=>{let e,t,r,o,a,d,u,f,p,m,h,g,y,k,x,v,b,_,w,I,S=(0,i.c)(46),{formattingToolsRef:j}=(0,l.use)(s);return S[0]!==j?(e=(0,n.jsx)(ei,{onClick:()=>j.current?.header(),icon:c.HeadingIcon,"aria-label":"Heading"}),S[0]=j,S[1]=e):e=S[1],S[2]!==j?(t=(0,n.jsx)(ei,{onClick:()=>j.current?.bold(),icon:c.BoldIcon,"aria-label":"Bold"}),S[2]=j,S[3]=t):t=S[3],S[4]!==j?(r=(0,n.jsx)(ei,{onClick:()=>j.current?.italic(),icon:c.ItalicIcon,"aria-label":"Italic"}),S[4]=j,S[5]=r):r=S[5],S[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)("div",{className:ef}),S[6]=o):o=S[6],S[7]!==e||S[8]!==t||S[9]!==r?(a=(0,n.jsxs)("div",{className:ep,children:[e,t,r,o]}),S[7]=e,S[8]=t,S[9]=r,S[10]=a):a=S[10],S[11]!==j?(d=(0,n.jsx)(ei,{onClick:()=>j.current?.quote(),icon:c.QuoteIcon,"aria-label":"Quote"}),S[11]=j,S[12]=d):d=S[12],S[13]!==j?(u=(0,n.jsx)(ei,{onClick:()=>j.current?.code(),icon:c.CodeIcon,"aria-label":"Code"}),S[13]=j,S[14]=u):u=S[14],S[15]!==j?(f=(0,n.jsx)(ei,{onClick:()=>j.current?.link(),icon:c.LinkIcon,"aria-label":"Link"}),S[15]=j,S[16]=f):f=S[16],S[17]===Symbol.for("react.memo_cache_sentinel")?(p=(0,n.jsx)("div",{className:ef}),S[17]=p):p=S[17],S[18]!==d||S[19]!==u||S[20]!==f?(m=(0,n.jsxs)("div",{className:ep,children:[d,u,f,p]}),S[18]=d,S[19]=u,S[20]=f,S[21]=m):m=S[21],S[22]!==j?(h=(0,n.jsx)(ei,{onClick:()=>j.current?.unorderedList(),icon:c.ListUnorderedIcon,"aria-label":"Unordered list"}),S[22]=j,S[23]=h):h=S[23],S[24]!==j?(g=(0,n.jsx)(ei,{onClick:()=>j.current?.orderedList(),icon:c.ListOrderedIcon,"aria-label":"Numbered list"}),S[24]=j,S[25]=g):g=S[25],S[26]!==j?(y=(0,n.jsx)(ei,{onClick:()=>j.current?.taskList(),icon:c.TasklistIcon,"aria-label":"Task list"}),S[26]=j,S[27]=y):y=S[27],S[28]===Symbol.for("react.memo_cache_sentinel")?(k=(0,n.jsx)("div",{className:ef}),S[28]=k):k=S[28],S[29]!==h||S[30]!==g||S[31]!==y?(x=(0,n.jsxs)("div",{className:ep,children:[h,g,y,k]}),S[29]=h,S[30]=g,S[31]=y,S[32]=x):x=S[32],S[33]!==j?(v=(0,n.jsx)(ei,{onClick:()=>j.current?.mention(),icon:c.MentionIcon,"aria-label":"Mention"}),S[33]=j,S[34]=v):v=S[34],S[35]!==j?(b=(0,n.jsx)(ei,{onClick:()=>j.current?.reference(),icon:c.CrossReferenceIcon,"aria-label":"Reference"}),S[35]=j,S[36]=b):b=S[36],S[37]!==v||S[38]!==b?(_=(0,n.jsxs)("div",{className:ep,children:[v,b]}),S[37]=v,S[38]=b,S[39]=_):_=S[39],S[40]===Symbol.for("react.memo_cache_sentinel")?(w=(0,n.jsx)(es,{}),S[40]=w):w=S[40],S[41]!==x||S[42]!==_||S[43]!==a||S[44]!==m?(I=(0,n.jsxs)(n.Fragment,{children:[a,m,x,_,w]}),S[41]=x,S[42]=_,S[43]=a,S[44]=m,S[45]=I):I=S[45],I});em.displayName="MarkdownEditor.DefaultToolbarButtons";let eh=e=>{let t,r,o=(0,i.c)(3),{children:s}=e,a=(0,l.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(t={containerRef:a,focusInStrategy:"closest",bindKeys:ec.z0.ArrowHorizontal|ec.z0.HomeAndEnd,focusOutBehavior:"wrap"},o[0]=t):t=o[0],(0,eu.G)(t),o[1]!==s?(r=(0,n.jsx)("div",{ref:a,"aria-label":"Formatting tools",role:"toolbar",className:"Toolbar-module__toolbar--TBvFM",children:s}),o[1]=s,o[2]=r):r=o[2],r},eg=e=>{let t,r=(0,i.c)(2),{children:o}=e;return r[0]!==o?(t=(0,n.jsx)(eh,{children:o}),r[0]=o,r[1]=t):t=r[1],t};eg.displayName="MarkdownEditor.Toolbar";try{eh.displayName||(eh.displayName="CoreToolbar")}catch{}var ey=r(88567);let ek=/^(?:\t| ? ?)(.*)/;var ex=r(8625);function ev(e){return e+1}var eb=r(80752);let e_="```suggestion",ew=RegExp(`${e_}(?:.*)
`,"i"),eI=RegExp(`\`\`\`(
|$)`);function eS(e,t,r=0){let n=t.substring(r,t.length),i=e.exec(n);return i?i.index+r:-1}var ej=r(98211),eT=r(38102),eN=r(95863);let eC=e=>(0,ey.nf)(`Uploading "${e.name}"...`),eE=()=>{},eM=({emitChange:e,value:t,inputRef:r,disabled:i,onUploadFile:o,acceptedFileTypes:s,onFilesRejected:a})=>{let[d,c]=(0,l.useState)(void 0),u=(0,l.useRef)(!1);(0,l.useEffect)(()=>{if(d){u.current=!1;let e=setTimeout(()=>u.current=!0,1e3);return()=>clearTimeout(e)}},[d]),(0,l.useEffect)(()=>{u.current&&c(void 0)},[t]);let f=(0,ej.U)(e=>{let t=new Set(e.map(({name:e})=>{let t=e.split(".");return t.length>1?`.${t.at(-1)}`:""}).filter(e=>""!==e));if(t.size>0){let r=[...t].join(", ");c((0,n.jsxs)(n.Fragment,{children:["File type",t.size>1?"s":""," ",r," not supported. See the"," ",(0,n.jsx)("a",{href:"https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/attaching-files",children:"documentation"})," ","for supported file types."]})),a?.(e)}}),[p,m]=(0,l.useState)(void 0),h=(0,ej.U)(()=>m(void 0)),g=(0,l.useCallback)(t=>{if(!r?.current)return;let n=function(e,t){if(0===t||`
`===e[t-1]&&(1===t||`
`===e[t-2]))return"";let r=e.lastIndexOf(`
`,t-1);return/\S/.test(e.substring(r,t))?`

`:`
`}(r.current.value,r.current.selectionStart),i=function(e,t){if(e.length===t||`
`===e[t]&&(t===e.length-1||`
`===e[t+1]))return"";let r=e.indexOf(`
`,t);return/\S/.test(e.substring(t,r))?`

`:`
`}(r.current.value,r.current.selectionEnd);e(`${n}${t.map(eC).join(`
`)}${i}`)},[r,e]),y=(0,ej.U)(({file:t,url:n},i)=>{m(e=>e&&[e[0]+1,e[1]]),((t,n,i)=>{if(!r?.current)return;let o=eC(t),l=r.current.value.indexOf(o);-1!==l&&e(n?t.type.startsWith("video/")?n:t.type.startsWith("image/")&&!["image/bmp","image/tiff"].includes(t.type)?(0,ey.TG)(i||{width:0,height:0,ppi:1},n,"Image"):(0,ey.iQ)(t.name,n):(0,ey.nf)(`Failed to upload "${t.name}"`),[l,l+o.length])})(t,n,i)}),k=(0,l.useCallback)(e=>e.map(async e=>{let t={url:null,file:e},r=null;try{t=await o?.(e)??{file:e,url:null}}catch{t={file:e,url:null}}if(t.url)try{r=await (0,ey.pF)(e)}catch{r={width:0,height:0,ppi:1},(0,eT.N7)("Failed to get image size from file",{message:"Failed to get image size from file",reactAppName:"markdown-editor"})}y(t,r)}),[o,y]),x=(0,l.useCallback)(async(e,t)=>{e.length>0&&(m([1,e.length]),g(e),await Promise.all(k(e)),h()),f(t)},[f,g,k,h]),v=(0,eN.wd)({acceptedFileTypes:s,multi:!0,onSelect:x});return i&&(v={clickTargetProps:{onClick:eE},dropTargetProps:{onDragEnter:eE,onDragLeave:eE,onDrop:eE,onDragOver:eE},pasteTargetProps:{onPaste:eE},isDraggedOver:!1}),o?{...v,errorMessage:d,uploadProgress:p}:null};var eP=r(13659),eL=r(1481);let eA="ViewSwitch-module__tabNavLink--PdqAj",eO="ViewSwitch-module__active--kUKgZ",eR=e=>{let t,r,o,l,s,a,d,c,u,f,p,m,h=(0,i.c)(35),{selectedView:g,onViewSelect:y,onLoadPreview:k,disabled:x}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,b.G7)("markdown_experience_hybrid_editor"),h[0]=t):t=h[0];let v=!!t;h[1]!==y||h[2]!==g?(r=e=>{(0,A.BI)("markdown_editor.select_view",{mode:e,from_mode:g,trigger:"view_switcher",did_change:g!==e,feature_flag_markdown_experience_hybrid_editor:v}),y?.(e)},h[1]=y,h[2]=g,h[3]=r):r=h[3];let _=r,w="edit"===g,I="edit"===g&&eO;h[4]!==I?(o=(0,S.$)(eA,I),h[4]=I,h[5]=o):o=h[5],h[6]!==_?(l=()=>_?.("edit"),h[6]=_,h[7]=l):l=h[7],h[8]!==x||h[9]!==w||h[10]!==o||h[11]!==l?(s=(0,n.jsx)(eL.A.Link,{as:"button",selected:w,disabled:x,className:o,onClick:l,children:"Write"}),h[8]=x,h[9]=w,h[10]=o,h[11]=l,h[12]=s):s=h[12];let j="preview"===g,T="preview"===g&&eO;return h[13]!==T?(a=(0,S.$)(eA,T),h[13]=T,h[14]=a):a=h[14],h[15]!==_?(d=()=>_?.("preview"),h[15]=_,h[16]=d):d=h[16],h[17]!==k?(c=()=>k?.(),u=()=>k?.(),h[17]=k,h[18]=c,h[19]=u):(c=h[18],u=h[19]),h[20]!==x||h[21]!==a||h[22]!==d||h[23]!==c||h[24]!==u||h[25]!==j?(f=(0,n.jsx)(eL.A.Link,{as:"button",selected:j,disabled:x,className:a,onClick:d,onMouseOver:c,onFocus:u,children:"Preview"}),h[20]=x,h[21]=a,h[22]=d,h[23]=c,h[24]=u,h[25]=j,h[26]=f):f=h[26],h[27]!==x||h[28]!==_||h[29]!==g?(p=v&&(0,n.jsxs)(eL.A.Link,{as:"button",selected:"hybrid"===g,disabled:x,className:(0,S.$)(eA,"hybrid"===g&&eO),onClick:()=>_?.("hybrid"),children:["Hybrid",(0,n.jsx)(eP.Z,{className:"ViewSwitch-module__lifecycleLabel--GDgv5"})]}),h[27]=x,h[28]=_,h[29]=g,h[30]=p):p=h[30],h[31]!==f||h[32]!==p||h[33]!==s?(m=(0,n.jsx)("div",{className:"ViewSwitch-module__viewSwitch--qZjLs",children:(0,n.jsxs)(eL.A,{"aria-label":"View mode",children:[s,f,p]})}),h[31]=f,h[32]=p,h[33]=s,h[34]=m):m=h[34],m};try{eR.displayName||(eR.displayName="ViewSwitch")}catch{}let eV=Symbol(),e$=[],eF=e=>{let t,r,o,a,d,f,p,m,h,g,y,k,x,v,_,w,I,j,T,N,C,E,M,P,z,H,U,q,W,K,Y,G,Q,J=(0,i.c)(141),{ref:Z,value:X,onInputFocus:et,disabled:er,placeholder:en,maxLength:ei,"aria-describedby":eo,labelledBy:es,fullHeight:ea,onRenderPreview:ed,className:ec,onPrimaryAction:eu,viewMode:ef,onChangeViewMode:ep,minHeightLines:eT,maxHeightLines:eN,emojiSuggestions:eC,emojiTone:eE,mentionSuggestions:eP,referenceSuggestions:eL,monospace:eA,required:eO,name:eF,children:ez,savedReplies:eB,pasteUrlsAsPlainText:eD,teamHovercardsEnabled:eH,onSavedRepliesOpen:eU,errorMessage:eq,containerRef:eW,onChange:eK,onUploadFile:eY,acceptedFileTypes:eG,onFilesRejected:eQ,footer:eJ,generatingText:eZ}=e,eX=void 0!==er&&er,e0=void 0===eT?5:eT,e1=void 0===eN?35:eN,e2=void 0!==eA&&eA,e3=void 0!==eO&&eO,e4=void 0!==eD&&eD,e5=void 0!==eH&&eH,e6=void 0===eU?R.l:eU;J[0]===Symbol.for("react.memo_cache_sentinel")?(t={toolbar:eg},J[0]=t):t=J[0];let[e8]=(0,u.H)(ez,t),e7=(0,l.useId)(),e9=(0,b.G7)("mardown_editor_use_on_input");J[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,b.G7)("markdown_experience_hybrid_editor"),J[1]=r):r=J[1];let te=r,{inputRef:tt,inputKey:tr,reset:tn,emitChange:ti,onInputChange:to}=function(e){let t,r,n,o,s=(0,i.c)(11),a=(0,l.useRef)(null),[d,c]=(0,l.useState)(1);s[0]!==e?(t=t=>{e(t.target.value)},s[0]=e,s[1]=t):t=s[1];let u=t;s[2]!==e?(r=()=>{e(""),c(ev)},s[2]=e,s[3]=r):r=s[3];let f=r;s[4]!==u?(n={inputRef:a,fallbackEventHandler:u},s[4]=u,s[5]=n):n=s[5];let p=(0,ex.H)(n);return s[6]!==p||s[7]!==d||s[8]!==u||s[9]!==f?(o={inputRef:a,inputKey:d,onInputChange:u,reset:f,emitChange:p},s[6]=p,s[7]=d,s[8]=u,s[9]=f,s[10]=o):o=s[10],o}(eK),{html:tl,loadPreview:ts,previewStale:ta}=function(e,t){let r,n,o,s,a=(0,i.c)(10),[d,c]=(0,l.useState)(null),u=(0,ej.U)(c),f=(0,l.useRef)(!0);a[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{f.current=!0},a[0]=r):r=a[0],a[1]!==e?(n=[e],a[1]=e,a[2]=n):n=a[2],(0,l.useEffect)(r,n),a[3]!==t||a[4]!==u||a[5]!==e?(o=async()=>{f.current&&(f.current=!1,u(null),u(await t(e)))},a[3]=t,a[4]=u,a[5]=e,a[6]=o):o=a[6];let p=o;return a[7]!==d||a[8]!==p?(s={html:d,setHtml:c,loadPreview:p,previewStale:f},a[7]=d,a[8]=p,a[9]=s):s=a[9],s}(X,ed);J[2]!==ts||J[3]!==ta||J[4]!==ef?(o=()=>{"preview"===ef&&ta.current&&ts()},J[2]=ts,J[3]=ta,J[4]=ef,J[5]=o):o=J[5],(0,l.useEffect)(o);let[td,tc]=(0,l.useState)(0);J[6]!==tt||J[7]!==ef?(a=()=>{let e=tt.current;if(!e||"edit"!==ef)return;tc(e.offsetHeight);let t=new ResizeObserver(e=>{let[t]=e;t&&tc(t.contentRect.height)});return t.observe(e),()=>t.disconnect()},d=[tt,ef],J[6]=tt,J[7]=ef,J[8]=a,J[9]=d):(a=J[8],d=J[9]),(0,l.useLayoutEffect)(a,d),J[10]!==eW||J[11]!==tt||J[12]!==tn?(f=()=>({focus:e=>tt.current?.focus(e),moveCursorToEnd:()=>{if(tt.current){let e=tt.current.value.length;tt.current.setSelectionRange(e,e)}},scrollIntoView:e=>eW.current?.scrollIntoView(e),reset:()=>tn(),inputRef:tt,[eV]:void 0}),p=[eW,tt,tn],J[10]=eW,J[11]=tt,J[12]=tn,J[13]=f,J[14]=p):(f=J[13],p=J[14]),(0,l.useImperativeHandle)(Z,f,p),J[15]!==eQ?(m=e=>{let t=[];for(let r of e){let e=r.name.includes(".")?`.${r.name.split(".").pop()}`:"no-extension";(0,A.BI)("markdown_editor.file_upload.rejected_file_type",{rejected_file_type:e,mime_type:r.type||"unknown"}),t.push(e)}eQ?.(e,t)},J[15]=eQ,J[16]=m):m=J[16];let tu=m;J[17]!==eG||J[18]!==eX||J[19]!==ti||J[20]!==tu||J[21]!==tt||J[22]!==eY||J[23]!==X?(h={emitChange:ti,value:X,inputRef:tt,disabled:eX,onUploadFile:eY,acceptedFileTypes:eG,onFilesRejected:tu},J[17]=eG,J[18]=eX,J[19]=ti,J[20]=tu,J[21]=tt,J[22]=eY,J[23]=X,J[24]=h):h=J[24];let tf=eM(h),tp=tf?.uploadProgress!==void 0;J[25]!==ti?(g={emitChange:ti},J[25]=ti,J[26]=g):g=J[26];let tm=(0,eb.KI)(g);J[27]!==ti?(y={emitChange:ti},J[27]=ti,J[28]=y):y=J[28];let th=(e=>{let t,r,n=(0,i.c)(4),{emitChange:o}=e;n[0]!==o?(t=e=>{let t=e.currentTarget;if(e.defaultPrevented||"Tab"!==e.key||t.selectionEnd-t.selectionStart==0)return;e.preventDefault();let[r,n]=(0,ey.ty)(t),i=t.value.slice(r,n).split(/\r?\n/).map(t=>e.shiftKey?ek.exec(t)?.[1]??"":`  ${t}`).join(`
`);o(i,[r,n],[r,r+i.length])},n[0]=o,n[1]=t):t=n[1];let l=t;return n[2]!==l?(r={onKeyDown:l},n[2]=l,n[3]=r):r=n[3],r})(y);J[29]!==ti?(k={emitChange:ti},J[29]=ti,J[30]=k):k=J[30];let tg=(e=>{let t,r,n=(0,i.c)(4),{emitChange:o}=e;n[0]!==o?(t=e=>{if("Enter"===e.key){let t=e.currentTarget,r=t.selectionStart;if(r!==t.selectionEnd)return;let{output:n,newCursorIndex:i}=function(e){var t;let r,n,i=e.selectionStart;if(!function(e,t){let r=[],n=0,i=-1;for(;(i=eS(ew,e,n))>-1;){let t=eS(eI,e,n=i+e_.length);if(-1===t)return!1;n=t+3,r.push([i,t])}return r.some(e=>t>e[0]&&t<e[1])}(e.value,i))return{output:"",newCursorIndex:0};let o=(t=e.value,r=t.slice(0,i).split(`
`),t.split(`
`)[r.length-1]);if(null===o)return{output:"",newCursorIndex:0};let l=(n=/^(\s+)/.exec(o))&&n[0]||"",s=`
${l}`,a=i+s.length;return{output:s,newCursorIndex:a}}(t);""!==n&&(e.preventDefault(),o(n,[r,r],[i,i]))}},n[0]=o,n[1]=t):t=n[1];let l=t;return n[2]!==l?(r={onKeyDown:l},n[2]=l,n[3]=r):r=n[3],r})(k),ty=(0,l.useRef)(null);J[31]!==ti||J[32]!==e6||J[33]!==eB?(x=eB?{savedReplies:eB,onSelect:e=>{requestAnimationFrame(()=>ti(e.content))},onOpen:e6,ref:ty}:null,J[31]=ti,J[32]=e6,J[33]=eB,J[34]=x):x=J[34];let tk=x;J[35]!==eX||J[36]!==th||J[37]!==tp||J[38]!==tm||J[39]!==ep||J[40]!==eu||J[41]!==tg?(v=e=>{let t=tb.current;if(!eX)if(e.ctrlKey&&"."===e.key)ty.current?.openMenu(),e.preventDefault(),e.stopPropagation();else if((0,ey.VL)(e)){if("Enter"!==e.key||tp)if("b"===e.key)t?.bold();else if("i"===e.key)t?.italic();else if(e.shiftKey&&"."===e.key)t?.quote();else if("e"===e.key)t?.code();else if("k"===e.key)t?.link();else if("8"===e.key)t?.unorderedList();else if(e.shiftKey&&"7"===e.key)t?.orderedList();else if(e.shiftKey&&["l","L"].includes(e.key))t?.taskList();else{if(!(e.shiftKey&&["p","P"].includes(e.key)))return;ep?.("preview")}else eu?.();e.preventDefault(),e.stopPropagation()}else tm.onKeyDown(e),th.onKeyDown(e),tg.onKeyDown(e)},J[35]=eX,J[36]=th,J[37]=tp,J[38]=tm,J[39]=ep,J[40]=eu,J[41]=tg,J[42]=v):v=J[42];let tx=(0,V._)(v),tv=(0,l.useRef)(ep);J[43]!==ep?(_=()=>{tv.current=ep},J[43]=ep,J[44]=_):_=J[44],(0,l.useEffect)(_),J[45]!==e7||J[46]!==tt||J[47]!==ef?(w=()=>{if("preview"===ef){e$.push(e7);let e=e=>{!e.defaultPrevented&&e$.at(-1)===e7&&(0,ey.VL)(e)&&e.shiftKey&&"p"===e.key&&(tv.current?.("edit"),setTimeout(()=>tt.current?.focus()),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e),e$=e$.filter(e=>e!==e7)}}},I=[ef,e7,tt],J[45]=e7,J[46]=tt,J[47]=ef,J[48]=w,J[49]=I):(w=J[48],I=J[49]),(0,l.useEffect)(w,I);let tb=(0,l.useRef)(null);J[50]!==eX||J[51]!==tf?.clickTargetProps||J[52]!==tf?.errorMessage||J[53]!==tf?.isDraggedOver||J[54]!==tf?.uploadProgress||J[55]!==e3||J[56]!==ef?(tf?.isDraggedOver,tf?.uploadProgress,tf?.clickTargetProps,tf?.errorMessage,j={disabled:eX,formattingToolsRef:tb,required:e3,fileDraggedOver:tf?.isDraggedOver??!1,fileUploadProgress:tf?.uploadProgress,uploadButtonProps:tf?.clickTargetProps??null,errorMessage:tf?.errorMessage,previewMode:"preview"===ef},J[50]=eX,J[51]=tf?.clickTargetProps,J[52]=tf?.errorMessage,J[53]=tf?.isDraggedOver,J[54]=tf?.uploadProgress,J[55]=e3,J[56]=ef,J[57]=j):j=J[57];let t_=j;J[58]!==e7?(T=(0,n.jsx)(B,{ref:tb,forInputId:e7}),J[58]=e7,J[59]=T):T=J[59],J[60]!==eq?(N=eq&&(0,n.jsxs)($.A,{variant:"danger",className:"mb-2",children:[(0,n.jsx)(c.StopIcon,{}),eq]}),J[60]=eq,J[61]=N):N=J[61];let tw="edit"===ef?"MarkdownEditor-module__inputWrapper--L6JTI":"MarkdownEditor-module__previewWrapper--Bfk_2",tI=eX&&"MarkdownEditor-module__disabled--jxhXI",tS=ea&&D;J[62]!==ec||J[63]!==tw||J[64]!==tI||J[65]!==tS?(C=(0,S.$)(ec,tw,tI,tS),J[62]=ec,J[63]=tw,J[64]=tI,J[65]=tS,J[66]=C):C=J[66],J[67]===Symbol.for("react.memo_cache_sentinel")?(E=(0,S.$)("MarkdownEditor-module__header--OuWiJ"),J[67]=E):E=J[67],J[68]!==tf?.uploadProgress||J[69]!==ts||J[70]!==ep||J[71]!==ef?(M=!te&&(0,n.jsxs)("div",{className:"MarkdownEditor-module__viewSwitchWrapper--oQoLo",children:[(0,n.jsx)(eR,{selectedView:ef,onViewSelect:ep,disabled:tf?.uploadProgress!==void 0,onLoadPreview:ts}),(0,n.jsx)("div",{className:"MarkdownEditor-module__viewSwitchBorder--S43Dz"})]}),J[68]=tf?.uploadProgress,J[69]=ts,J[70]=ep,J[71]=ef,J[72]=M):M=J[72],J[73]!==e8||J[74]!==ef?(P="edit"===ef?e8.toolbar??(0,n.jsx)(eh,{children:(0,n.jsx)(em,{})}):(0,n.jsx)("div",{style:{flex:1}}),J[73]=e8,J[74]=ef,J[75]=P):P=J[75],J[76]!==tk||J[77]!==P?(z=(0,n.jsx)(el,{value:tk,children:P}),J[76]=tk,J[77]=P,J[78]=z):z=J[78],J[79]!==tf?.uploadProgress||J[80]!==ts||J[81]!==ep||J[82]!==ef?(H=te&&(0,n.jsx)("div",{className:"MarkdownEditor-module__hybridViewSwitchWrapper--Urx4K",children:(0,n.jsx)(L.m,{selectedView:ef,onViewSelect:ep,disabled:tf?.uploadProgress!==void 0,onLoadPreview:ts})}),J[79]=tf?.uploadProgress,J[80]=ts,J[81]=ep,J[82]=ef,J[83]=H):H=J[83],J[84]!==M||J[85]!==z||J[86]!==H?(U=(0,n.jsxs)("div",{className:E,children:[M,z,H]}),J[84]=M,J[85]=z,J[86]=H,J[87]=U):U=J[87];let tj=e9?void 0:to,tT=e9?to:void 0,tN=tf?.isDraggedOver??!1,tC="edit"===ef,tE=tf?.pasteTargetProps,tM=tf?.dropTargetProps;return J[88]!==eo||J[89]!==eX||J[90]!==eC||J[91]!==eE||J[92]!==ea||J[93]!==eZ||J[94]!==e7||J[95]!==tx||J[96]!==tr||J[97]!==tt||J[98]!==es||J[99]!==e1||J[100]!==ei||J[101]!==eP||J[102]!==e0||J[103]!==e2||J[104]!==eF||J[105]!==et||J[106]!==e4||J[107]!==en||J[108]!==eL||J[109]!==e3||J[110]!==tj||J[111]!==tT||J[112]!==tN||J[113]!==tC||J[114]!==tE||J[115]!==tM||J[116]!==X?(q=(0,n.jsx)(ee,{value:X,onChange:tj,onInput:tT,onFocus:et,emojiSuggestions:eC,emojiTone:eE,mentionSuggestions:eP,referenceSuggestions:eL,disabled:eX,placeholder:en,labelledBy:es,"aria-describedby":eo,id:e7,maxLength:ei,ref:tt,fullHeight:ea,isDraggedOver:tN,minHeightLines:e0,maxHeightLines:e1,visible:tC,monospace:e2,required:e3,name:eF,pasteUrlsAsPlainText:e4,generatingText:eZ,...tx,...tE,...tM},tr),J[88]=eo,J[89]=eX,J[90]=eC,J[91]=eE,J[92]=ea,J[93]=eZ,J[94]=e7,J[95]=tx,J[96]=tr,J[97]=tt,J[98]=es,J[99]=e1,J[100]=ei,J[101]=eP,J[102]=e0,J[103]=e2,J[104]=eF,J[105]=et,J[106]=e4,J[107]=en,J[108]=eL,J[109]=e3,J[110]=tj,J[111]=tT,J[112]=tN,J[113]=tC,J[114]=tE,J[115]=tM,J[116]=X,J[117]=q):q=J[117],J[118]!==tf||J[119]!==ef?(W="edit"===ef&&tf?.errorMessage?(0,n.jsx)(F,{children:tf.errorMessage}):null,J[118]=tf,J[119]=ef,J[120]=W):W=J[120],J[121]!==W?(K=(0,n.jsx)("div",{role:"alert",children:W}),J[121]=W,J[122]=K):K=J[122],J[123]!==ea||J[124]!==tl||J[125]!==td||J[126]!==e5||J[127]!==ef?(Y="preview"===ef&&(0,n.jsxs)("div",{"aria-live":"polite",tabIndex:-1,className:(0,S.$)("MarkdownEditor-module__previewViewerWrapper--rhH_h",ea&&D),style:{minHeight:td},children:[(0,n.jsx)("h2",{className:"MarkdownEditor-module__previewHeader--ktZV6",children:"Rendered Markdown Preview"}),(0,n.jsx)(O.G,{verifiedHTML:tl||"Nothing to preview",loading:null===tl,teamHovercardsEnabled:e5,openLinksInNewTab:!0})]}),J[123]=ea,J[124]=tl,J[125]=td,J[126]=e5,J[127]=ef,J[128]=Y):Y=J[128],J[129]!==C||J[130]!==U||J[131]!==q||J[132]!==K||J[133]!==Y?(G=(0,n.jsxs)("div",{className:C,children:[U,q,K,Y]}),J[129]=C,J[130]=U,J[131]=q,J[132]=K,J[133]=Y,J[134]=G):G=J[134],J[135]!==t_||J[136]!==eJ||J[137]!==T||J[138]!==N||J[139]!==G?(Q=(0,n.jsxs)(s,{value:t_,children:[T,N,G,eJ]}),J[135]=t_,J[136]=eJ,J[137]=T,J[138]=N,J[139]=G,J[140]=Q):Q=J[140],Q};eF.displayName="ClassicMarkdownEditor";let ez=e=>{let t,r,o,a,d,c,u,f,p,m,h=(0,i.c)(18);h[0]!==e?({ref:r,...t}=e,h[0]=e,h[1]=t,h[2]=r):(t=h[1],r=h[2]),h[3]!==t?({footer:o,...a}=t,h[3]=t,h[4]=o,h[5]=a):(o=h[4],a=h[5]);let g=t.disabled??!1,y=t.required??!1;h[6]===Symbol.for("react.memo_cache_sentinel")?(d={current:null},h[6]=d):d=h[6],h[7]!==g||h[8]!==y?(c={disabled:g,required:y,formattingToolsRef:d,uploadButtonProps:null,fileDraggedOver:!1,previewMode:!1},h[7]=g,h[8]=y,h[9]=c):c=h[9];let k=c,x=(0,l.useRef)(null),v=(0,l.useRef)(null);return h[10]===Symbol.for("react.memo_cache_sentinel")?(u=()=>({focus:()=>x.current?.focus(),moveCursorToEnd:()=>x.current?.moveCursorToEnd(),reset:()=>x.current?.reset(),scrollIntoView:e=>x.current?.scrollIntoView(e),inputRef:v,[eV]:void 0}),f=[],h[10]=u,h[11]=f):(u=h[10],f=h[11]),(0,l.useImperativeHandle)(r,u,f),h[12]!==a?(p=(0,n.jsx)(P,{ref:x,...a}),h[12]=a,h[13]=p):p=h[13],h[14]!==k||h[15]!==o||h[16]!==p?(m=(0,n.jsxs)(s,{value:k,children:[p,o]}),h[14]=k,h[15]=o,h[16]=p,h[17]=m):m=h[17],m};ez.displayName="HybridMarkdownEditorWithFooter";let eB=e=>{let t,r,o,s,d,c,m,h,g=(0,i.c)(21),{ref:y,...k}=e,{disabled:x,"aria-describedby":_,fullHeight:w,viewMode:I,onChangeViewMode:j,children:T}=k,N=void 0!==x&&x;g[0]===Symbol.for("react.memo_cache_sentinel")?(t={toolbar:eg,actions:a,label:v,footer:p},g[0]=t):t=g[0];let[C,E]=(0,u.H)(T,t),[M,P]=(0,l.useState)("edit"),[L,O]=void 0===I?[M,P]:[I,j],R=(h=(0,b.G7)("markdown_experience_hybrid_editor"),"hybrid"===L&&h?"hybrid":"classic"),V=(0,l.useId)();g[1]!==C.actions||g[2]!==C.footer?(r=C.footer??(0,n.jsx)(f,{children:(0,l.isValidElement)(C.actions)&&C.actions.props.children}),g[1]=C.actions,g[2]=C.footer,g[3]=r):r=g[3];let $=r,F=_?`${V} ${_}`:V;g[4]!==$||g[5]!==F?(o={footer:$,"aria-describedby":F},g[4]=$,g[5]=F,g[6]=o):o=g[6];let z=o;(0,l.useEffect)(()=>(0,A.BI)("markdown_editor.mount",{editorType:R}),[R]);let B=(0,l.useRef)(null),H="hybrid"===R?(0,n.jsx)(ez,{...k,ref:y,onChangeViewMode:O,...z}):(0,n.jsx)(eF,{...k,viewMode:"hybrid"===L?"edit":L,onChangeViewMode:O,ref:y,containerRef:B,...z,children:C.toolbar}),U=(0,S.$)("MarkdownEditor-module__fieldSet--QLrYu",w&&D);g[7]!==E?(s=(0,n.jsx)("div",{className:"MarkdownEditor-module__hidden--tMY1v",children:E}),g[7]=E,g[8]=s):s=g[8];let q=`Markdown input: ${"hybrid"===L?"hybrid mode selected.":"preview"===L?" preview mode selected.":" edit mode selected."}`;return g[9]!==V||g[10]!==q?(d=(0,n.jsx)("span",{className:"sr-only",id:V,"aria-live":"polite",children:q}),g[9]=V,g[10]=q,g[11]=d):d=g[11],g[12]!==H||g[13]!==d?(c=(0,n.jsxs)("div",{ref:B,className:"MarkdownEditor-module__container--xSX9w",children:[d,H]}),g[12]=H,g[13]=d,g[14]=c):c=g[14],g[15]!==N||g[16]!==C.label||g[17]!==c||g[18]!==U||g[19]!==s?(m=(0,n.jsxs)("fieldset",{"aria-disabled":N,className:U,children:[s,C.label,c]}),g[15]=N,g[16]=C.label,g[17]=c,g[18]=U,g[19]=s,g[20]=m):m=g[20],m};eB.displayName="MarkdownEditor";let eD=Object.assign(eB,{Label:v,Toolbar:eg,ToolbarButton:ei,DefaultToolbarButtons:em,Footer:p,FooterButton:m,Actions:a,ActionButton:d,MarkdownEditorContext:s})},47601:(e,t,r)=>{r.d(t,{_z:()=>a,dz:()=>l,nT:()=>s,rf:()=>function e(t){return t.children.map(t=>"text"===t.type?t.value:"element"!==t.type||Object.hasOwn(t.properties??{},o.Lm)?"":e(t)).join("")}});var n=r(91775),i=r(55035),o=r(75617);function l(e,t){return"element"===e.type&&e.tagName===t}function s(e){if(!e)return{};let t={};for(let r of Object.getOwnPropertyNames(e)){let o=(0,n.I)(i.qy,r),l=e[r]?.toString();"string"==typeof l&&(t[o.attribute]=l)}return t}function a(e,t,r){if(e===t)return!0;if(e.type!==t.type)return!1;let n=r?.ignorePosition?(e,t)=>"position"===e?{}:t:void 0;return JSON.stringify(e,n)===JSON.stringify(t,n)}},48749:(e,t,r)=>{r.d(t,{h:()=>n});function n(e){let t=e.raw,r=t.search(/\S/),n=t.length-t.trimEnd().length;return{startOffset:e.position.start.offset+r,endOffset:e.position.end.offset-n}}},54108:(e,t,r)=>{r.d(t,{bF:()=>q,lM:()=>D,Jr:()=>Y,oE:()=>G,b5:()=>Q,kD:()=>J,rk:()=>Z,o8:()=>X,SF:()=>U,Kp:()=>H,gk:()=>B,xn:()=>K,VA:()=>ee,Dc:()=>et,KB:()=>W,QF:()=>en});var n=r(24774),i=r(1214),o=r(78625),l=r(65012),s=r(3266);let a=e=>e.map(e=>e.prefixes.filter(e=>"blockQuotePrefix"===e.tokenType));var d=r(53839),c=r(1830);let u=e=>{if(1!==e.state.selection.ranges.length||!e.state.selection.main.empty)return!1;let t=e.state.doc.toString(),r=e.state.selection.main.anchor,n=(0,s.wk)(e.state),o=i._.atOffset(n,t,r);if(!o?.isBlank)return!1;let l=o.lastPrefix;if(l?.tokenType!=="blockQuotePrefix"||!o.isOffsetAfterPrefixes(r))return!1;let a=l.position?.start.offset??o.start,u="",f=a;return o.previous()?.isBlank===!1&&(u+=`
`,f+=1),o.next()?.isBlank===!1&&(u+=`
`),e.dispatch({changes:[{from:a,to:o.end,insert:u}],selection:d.OF.single(f),annotations:[c.c.of("escapeBlockquote")],userEvent:"input.type",scrollIntoView:!0}),!0},f=e=>{var t;if(1!==e.state.selection.ranges.length||!e.state.selection.main.empty)return!1;let r=e.state.doc.toString(),n=e.state.selection.main.anchor,a=(0,s.wk)(e.state),d=(0,o.NC)(a,n);if(d?.type!=="code")return!1;let c=i._.atOffset(a,r,n);if(!c||n!==c.end)return!1;let u=d.children?.find(e=>"delimiter"===e.type&&"codeFencedFence"===e.tokenType);if(!u||!(0,l.z)(u)||!c.contains(u.position.start.offset))return!1;let f=(t=u.raw,t.match(/^(`{3,}|~{3,})/)?.[1]??null);return!!f&&(e.dispatch({changes:[{from:n,insert:`

${f}`}],selection:{anchor:n+1},userEvent:"input.type",scrollIntoView:!0}),!0)};var p=r(77695);function m(e){let t=e.state.selection.main.anchor,r=(0,s.wk)(e.state),n=(0,o.NC)(r,t);return n?.type==="code"}let h=e=>{let{from:t}=(0,p.j6)(e.state);return!!m(e)&&((0,p.Jr)(e.state)?e.dispatch(e.state.changeByRange(e=>({changes:[{from:t,insert:"	"}],range:d.OF.range(e.from+1,e.to+1)})),{userEvent:"input.type",scrollIntoView:!0}):e.dispatch(e.state.replaceSelection("	")),!0)},g=e=>{let t=e.state.selection.main.anchor,r=e.state.doc.toString(),{from:n,to:i}=(0,p.j6)(e.state);if(m(e)){let o=r.slice(n,i);return o.startsWith("	")?(e.dispatch({changes:[{from:n,to:n+1,insert:""}],userEvent:"input.type",scrollIntoView:!0}),!0):!o.startsWith("    ")||(e.dispatch({changes:[{from:n,to:n+4,insert:""}],selection:d.OF.single(t-4),userEvent:"input.type",scrollIntoView:!0}),!0)}return!1},y=(e,t,r)=>(0,o.Uh)(e,t,r).find(e=>"heading"===e.type),k=(e,t)=>{let r;e.hasFocus||e.focus();let n=(0,s.wk)(e.state),a=e.state.doc.toString(),d=e.state.selection.main,c=i._.linesAtRange(n,a,d.from,d.to),u=`${"#".repeat(t)} `,f=c.map(e=>y(n,e.start,e.end)),p=!(f.length>0&&f.every(e=>e?.depth===t)),m=[];for(let e of c){let t=y(n,e.start,e.end),i=null;if(t)for(let r of t.children??[]){if(!(0,l.z)(r)||"delimiter"!==r.type)continue;let t="atxHeadingSequence"===r.tokenType,n="setextHeadingLine"===r.tokenType;if(t||n){if(i=r,t)m.push({from:r.position.start.offset,to:r.position.end.offset+1});else{let t=e.next();t&&m.push({from:t.start,to:t.end})}break}}if(p){m.push({from:e.start,insert:u});let t=i&&(0,l.z)(i)&&(0,o.DV)(d.from,d.to,i.position.start.offset,i.position.end.offset,!0);d.empty&&(d.from===e.start||t)&&(r={anchor:e.start+u.length})}}return e.dispatch({changes:m,selection:r,userEvent:"input",scrollIntoView:!0}),!0};var x=r(45580),v=r(55220),b=r(38939),_=r(16058),w=r(42306);let I=e=>{if(1!==e.state.selection.ranges.length)return!1;let t=(0,s.wk)(e.state),r=e.state.doc.toString(),n=(0,w.dT)(e.state);if(!n)return!1;let o=n?.parents.at(-1),a=o&&(0,_.xM)(o.item).listItemPrefix?.raw,d=n.selectedItems.map(e=>i._.linesAtRange(t,r,e.position.start.offset,e.position.end.offset-1)),u=d.some(e=>e.some(e=>!e.isBlank)),f=new WeakSet,p=[];for(let[e,t]of n.selectedItems.entries())for(let[r,n]of(d[e]??[]).entries()){let e=0===r?n.prefixes.findLast(e=>"listItemPrefix"===e.tokenType):void 0,i=n.prefixes.findLast(e=>"listItemIndent"===e.tokenType),o=0===r?n.prefixes.find(e=>"taskListCheck"===e.tokenType):void 0,s=0===r&&(0,_.Wq)(n.content),d=n.prefixes.some(e=>"listItemIndent"===e.tokenType),c=0===r&&n.isBlank&&!d&&(void 0!==o||s);c&&f.add(t);let u=c&&o&&(0,l.z)(o)?o.position.end.offset:c&&s?n.contentStart+n.content.length:e?.position?.end.offset??i?.position?.end.offset??o?.position?.start.offset??n.contentStart,m={from:i?.position?.start.offset??e?.position?.start.offset??n.start,to:u,insert:a&&e?a=(0,_.LY)(a):""};p.push(m)}let m=n.list.children.indexOf(n.selectedItems.at(-1));m>-1&&p.push((0,w.mM)(n.list,m,null));let h=[];if(o){let e=o.list.children.indexOf(o.item);p.push((0,w.mM)(o.list,e,a??""))}else{for(let e of n.selectedItems){let{taskListPrefix:t}=(0,_.xM)(e);t&&(0,l.z)(t)&&!f.has(e)&&p.push({from:t.position.start.offset,to:t.position.end.offset})}if(u){let e=i._.atOffset(t,r,n.selectedItems[0].position.start.offset-1);e?.prefixes.some(e=>"listItemPrefix"===e.tokenType||"listItemIndent"===e.tokenType)&&p.push({from:e.end,insert:`
`});let o=i._.atOffset(t,r,n.selectedItems.at(-1).position.end.offset+1);o?.prefixes.some(e=>"listItemPrefix"===e.tokenType||"listItemIndent"===e.tokenType)&&p.push({from:o.start,insert:`
`}),h.push(c.c.of("escapeList"))}}return e.dispatch({scrollIntoView:!0,userEvent:"input",changes:p,annotations:h}),!0},S=e=>{if(1!==e.state.selection.ranges.length||!e.state.selection.main.empty)return!1;let t=e.state.doc.toString(),r=e.state.selection.main.anchor,n=(0,s.wk)(e.state),o=i._.atOffset(n,t,r);return!!o&&!!j(o,r)&&I(e)},j=(e,t)=>!!e.isBlank&&e.lastPrefix?.tokenType==="listItemPrefix"&&e.isOffsetAfterPrefixes(t);var T=r(9445);function N(e,t){if(0===t)return e.start;for(let r of e.prefixes)if("blockQuotePrefix"===r.tokenType&&0==--t)return r.position?.end.offset??e.start;return e.start}function C(e,t,r,n){let o=[],s=null;for(let a of(0,w.hO)(r.children))for(let[r,d]of i._.linesAtRange(e,t,a.position.start.offset,a.position.end.offset-1).entries())if(0===r){let e=d?.prefixes.find(e=>"listItemPrefix"===e.tokenType);if(!e||!(0,l.z)(e))continue;let t=s?(0,_.LY)(s):(0,_.el)(n);o.push({from:e.position.start.offset,to:e.position.end.offset,insert:t}),s=t}else{let e=d?.prefixes.find(e=>"listItemIndent"===e.tokenType);if(!e||!s||!(0,l.z)(e)||e.raw.length===s.length)continue;o.push({from:e.position.start.offset,to:e.position.end.offset,insert:(0,T.cz)(s)})}return o}let E=e=>(t,r)=>{let n,a=t.state,c=(0,s.wk)(a),u=a.doc.toString(),f=a.selection.main,p=f.from===f.to,m=p?i._.atOffset(c,u,f.from):null,h="keyboard"===r?"input.type":"input",g=Array.from((0,o.v5)(c,f.from,f.to,!0)).findLast(e=>"list"===e.type);if(g)if((g.ordered??!1)===e)return(e=>{let t=(0,s.wk)(e.state),r=e.state.doc.toString(),n=(0,w.dT)(e.state);if(!n)return!1;let o=n.parents.length,a=[];for(let e of(0,w.hO)(n.list.children))for(let n of i._.linesAtRange(t,r,e.position.start.offset,e.position.end.offset-1)){let e=function(e,t){for(let r of e.prefixes)if("listItemIndent"===r.tokenType||"listItemPrefix"===r.tokenType){if(0===t)return r;t--}}(n,o);e&&(0,l.z)(e)&&a.push({from:e.position.start.offset,to:e.position.end.offset})}return!!a.length&&(e.dispatch({changes:a,userEvent:"input",scrollIntoView:!0}),!0)})(t);else{let r=C(c,u,g,e);return t.dispatch({changes:r,scrollIntoView:!0,userEvent:h}),!0}let y=(0,o.aI)(c,f.from,f.to),k=0;for(;1===y.length&&"blockquote"===y[0].type;)y=(0,o.aI)(y[0],f.from,f.to),k++;let x=m?m.prefixes.filter(e=>"blockQuotePrefix"===e.tokenType).length:0;x>k&&(k=x);let v=null,b=[],I=[];for(let t of y){if("list"===t.type){b.push(...C(c,u,t,e));continue}let r=(0,l.z)(t)?i._.linesAtRange(c,u,t.position.start.offset,t.position.end.offset-1):[];r.length>0&&I.push({lines:r,nodeType:t.type})}0===I.length&&m&&I.push({lines:[m],nodeType:"paragraph"});let S=I.length;for(let[t,r]of I.entries()){let{lines:n,nodeType:i}=r;for(let[r,o]of n.entries()){let l=o.overlaps(f.from,f.to)||p&&(f.from===o.start||f.from===o.end);if(o.isBlank&&!l)continue;let s=N(o,k);if("paragraph"!==i||l){if(0===r||"paragraph"===i){let t=o.previous(),r=t&&t.isBlank;null!==v||!t||t.isBlank||o.isBlank||b.push({from:o.start-1,insert:`
`});let n=null===v||r?(0,_.el)(e):(0,_.LY)(v),i={from:s,insert:n};b.push(i),v=n}else v&&b.push({from:s,insert:(0,T.cz)(v)});if(!o.isBlank&&t===S-1&&r===n.length-1){let e=o.next();e&&!e.isBlank&&b.push({from:o.end,insert:`
`})}}}}if(0===b.length){let t=i._.atOffset(c,u,f.from);if(t&&p&&(f.from===t.start||f.from===t.end)){let r=t.prefixes.filter(e=>"blockQuotePrefix"===e.tokenType).length,i=N(t,k||r),o=t.previous(),l=o&&!o.isBlank?1:0;l&&b.push({from:t.start-1,insert:`
`});let s=(0,_.el)(e);if(b.push({from:i,insert:s}),!n){let e=i+l+s.length;n=d.OF.single(e,e)}let a=t.next();a&&!a.isBlank&&b.push({from:t.end,insert:`
`})}if(0===b.length)return!1}if(!n&&p&&b.length>0)try{let t=d.VR.of(b,u.length);if(m?.isBlank){let e=t.mapPos(f.from,1);n=d.OF.single(e)}else{let r=t.apply(d.EY.of(u.split(`
`))).toString(),i=(0,_.el)(e),o=Math.max(0,t.mapPos(f.from,-1)-i.length),l=r.indexOf(i,o);-1===l&&(l=r.indexOf(i));let s=r.indexOf(`
${i}`,Math.max(0,f.from-1));if(-1!==s&&(-1===l||s+1<l))l=s+1;else if(-1!==l&&`
`!==r.charAt(l-1)){let e=r.indexOf(`
${i}`,Math.max(0,f.from-1));-1!==e&&(l=e+1)}let a=t.mapPos(f.from,1);if(l>=0&&a<l+i.length&&(a=l+i.length),l>=0){let e=r.indexOf(`
${i}`,Math.max(0,l-1));if(-1!==e){let t=e+1+i.length;a<t&&(a=t)}}let c=Math.min(a,r.length);n=d.OF.single(c,c)}}catch{}let j={changes:b,scrollIntoView:!0,userEvent:h};return n&&(j.selection=n),t.dispatch(j),!0},M=E(!1),P=E(!0),L=(0,_.DN)(!1),A=`- ${L}`;function O(e,t){let r=e.children.filter(e=>"listItem"===e.type);return r[r.indexOf(t)-1]}let R=e=>{if(1!==e.state.selection.ranges.length)return!1;let t=(0,s.wk)(e.state),r=e.state.doc.toString(),n=(0,w.dT)(e.state);if(!n)return!1;let o=function(e){let t=e.list,r=e.selectedItems,n=r[0]&&O(t,r[0]),i=[...e.parents];for(;!n;){let e=i.pop();if(!e)return null;t=e.list,r=[e.item],n=O(t,e.item)}return{list:t,items:r,previousSibling:n}}(n);if(!o||!o.items[0])return!0;let a=(0,_.xM)(o.previousSibling).listItemPrefix?.raw??"* ",d=" ".repeat(a.length),c=o.previousSibling.children?.findLast(e=>"list"===e.type)?.children?.findLast(e=>"listItem"===e.type),u=c?(0,_.LY)((0,_.xM)(c).listItemPrefix?.raw??"* "):(0,_.Ts)((0,_.xM)(o.items[0]).listItemPrefix?.raw??"* "),f=o.items.map(e=>{if(!(0,l.z)(e))return[];let n=-1;return i._.linesAtRange(t,r,e.position.start.offset,e.position.end.offset-1).map((e,t)=>{if(0===t){n=e.prefixes.findIndex(e=>"listItemPrefix"===e.tokenType);let t={from:e.prefixes[n]?.position?.start?.offset??e.start,to:e.prefixes[n]?.position?.end?.offset??e.contentStart,insert:`${d}${u}`};return u=(0,_.LY)(u),t}return{from:e.prefixes[n]?.position?.start?.offset??e.start,insert:d}})}),p=o.list.children.indexOf(o.items.at(-1));return f.push((0,w.mM)(o.list,p,a)),e.dispatch({scrollIntoView:!0,userEvent:"input",changes:f}),!0};var V=r(48749),$=r(95917);let F=e=>{let t=(0,w.dT)(e.state),r=t?.selectedItems[0];if(!r)return!1;let n=(0,p.JC)(e.state);if((0,$.Ji)(e.state).some(e=>"code"===e.type&&(null===n||(0,l.z)(e)&&(0,o.DV)(n,n,e.position.start.offset,e.position.end.offset)&&e.position.start.offset!==n&&(e.children?.filter(e=>"delimiter"===e.type&&"codeFencedFence"===e.tokenType).length===1||e.position.end.offset!==n))))return!1;let{listItemPrefix:i,taskListPrefix:s}=(0,_.xM)(r),a=s??i;if(a&&(0,l.z)(a)&&(0,V.h)(a).endOffset>e.state.selection.main.from)return!1;let d=i?.raw;if(!d)return!1;let u=(0,_.LY)(d);u.endsWith(" ")||(u+=" "),s&&(u+=(0,_.DN)(!1));let f=t.selectedItems.at(-1),m=t.list.ordered?(0,w.mM)(t.list,t.list.children.indexOf(f),u):[];return e.dispatch(e.state.replaceSelection(`
${u}`),{annotations:[c.c.of("escapeList")],userEvent:"input",scrollIntoView:!0,changes:m}),!0},z=e=>{let t=e.state.selection.main.anchor,r=(0,s.wk)(e.state),n=(0,o.NC)(r,t);return n?.type==="link"&&(window.open(n.url,"_blank","noopener,noreferrer"),!0)},B={key:"Mod-k",run:b.u},D={key:"Mod-b",run:e=>(0,v.Gr)(e,"strong")},H={key:"Mod-i",run:e=>(0,v.Gr)(e,"emphasis")},U={key:"Mod-e",run:e=>(0,v.Gr)(e,"inlineCode")},q={key:"Mod-Shift-.",run:e=>{let t,r;e.hasFocus||e.focus();let n=(0,s.wk)(e.state),d=e.state.doc.toString(),c=e.state.selection.main,u=i._.linesAtRange(n,d,c.from,c.to),f=a(u);if(t=0===f.length,r=f.some(e=>0===e.length),t||r){if(1===u.length&&u[0]?.isBlank)return e.dispatch({changes:[{from:c.from,insert:"> "}],selection:{anchor:c.from+2},userEvent:"input",scrollIntoView:!0}),!0;let t=[];for(let e of u)e.prefixes.some(e=>"blockQuotePrefix"===e.tokenType)||t.push({from:e.start,insert:"> "});e.dispatch({changes:t,userEvent:"input",scrollIntoView:!0})}else{let t=[...new Set(f.map(e=>e.length))].sort((e,t)=>e-t),r=(0,o.Uh)(n,c.from,c.to).find(e=>"blockquote"===e.type);if(!r||!(0,l.z)(r))return!0;let s=r.position.start.offset,u=r.position.end.offset,p=a(i._.linesAtRange(n,d,s,u)),m=[];for(let e of p){let r=!1,n=0;for(let i of t){if(e.length<i)continue;let t=e[i-1];t&&(0,l.z)(t)&&(r=e.length===i,n++,m.push({from:t.position.start.offset,to:t.position.end.offset}))}let i=e[e.length-1];i&&r&&n<e.length&&(0,l.z)(i)&&m.push({from:i.position.start.offset,insert:" "})}e.dispatch({changes:m,userEvent:"input",scrollIntoView:!0})}return!0}},W={key:"Mod-Shift-8",run:M},K={key:"Mod-Shift-7",run:P},Y={key:"Mod-Alt-1",run:e=>k(e,1)},G={key:"Mod-Alt-2",run:e=>k(e,2)},Q={key:"Mod-Alt-3",run:e=>k(e,3)},J={key:"Mod-Alt-4",run:e=>k(e,4)},Z={key:"Mod-Alt-5",run:e=>k(e,5)},X={key:"Mod-Alt-6",run:e=>k(e,6)},ee={key:"Mod-Shift-x",run:e=>(0,v.Gr)(e,"delete")},et={key:"Mod-Shift-l",run:e=>{e.hasFocus||e.focus();let t=e.state.selection.main,r=(0,s.wk)(e.state),n=e.state.doc.toString(),o=t.from,a=t.to,c=i._.linesAtRange(r,n,o,Math.max(a-1,o)),u=[];for(let t of c){let r=t.prefixes.find(e=>"taskListCheck"===e.tokenType);if(r&&(0,l.z)(r)){let e=r.position.start.offset,t=r.position.end.offset;" "===n.charAt(t)&&(t+=1),u.push({from:e,to:t});continue}let i=t.prefixes.findLast(e=>"listItemPrefix"===e.tokenType);if(i&&(0,l.z)(i)){let e=i.position.end.offset,r=n.slice(e,t.end).match(/^\[[ xX]\]\s*/);if(r){u.push({from:e,to:e+r[0].length});continue}u.push({from:e,to:e,insert:L});continue}let o=t.contentStart;e.state.doc.sliceString(o,o+A.length)!==A&&u.push({from:o,to:o,insert:A})}if(0===u.length)return!0;let f=d.VR.of(u,e.state.doc.length),p=t.anchor===t.head,m=t.anchor<=t.head,h=f.mapPos(t.anchor,p?1:m?-1:1),g=f.mapPos(t.head,p||m?1:-1);return e.dispatch({changes:u,selection:d.OF.single(h,g),userEvent:"input",scrollIntoView:!0}),!0}},er=Object.keys(x.S).map(e=>({key:e,run:t=>{if(t.state.selection.main.empty)return!1;if("`"===e||"~"===e)return((e,t)=>{let{doc:r,selection:n}=e.state,i=n.main,o=t.repeat(2),l=Math.max(0,i.from-2),s=r.sliceString(l,i.from),a=r.sliceString(i.to,i.to+2);if(i.from>=2&&s===o&&a===o){let n=r.sliceString(i.from,i.to),o=`${t}
`,l=n.endsWith(`
`)?t:`
${t}`;return(0,v.un)(e,o,l),!0}return(0,v.un)(e,t,t),!0})(t,e);let r=x.S[e];return(0,v.un)(t,e,r),!0}}));function en({primaryAction:e,telemetry:t}){let r=[{binding:{key:"Enter",run:f},commandId:"close_code_block"},{binding:{key:"Enter",run:S},commandId:"dedent_list_if_blank_item"},{binding:{key:"Enter",run:F},commandId:"insert_new_list_item"},{binding:{key:"Enter",run:u},commandId:"split_blockquote_if_blank_line"},{binding:{key:"Alt-Enter",run:z},commandId:"visit_if_link"},{binding:{key:"Mod-Enter",run:e},commandId:"primary_action"},{binding:B,commandId:"format_link"},{binding:D,commandId:"format_bold"},{binding:H,commandId:"format_italic"},{binding:U,commandId:"format_inline_code"},{binding:ee,commandId:"format_strikethrough"},{binding:et,commandId:"format_task_list"},{binding:q,commandId:"format_blockquote"},{binding:W,commandId:"format_unordered_list"},{binding:K,commandId:"format_ordered_list"},{binding:Y,commandId:"format_heading_1"},{binding:G,commandId:"format_heading_2"},{binding:Q,commandId:"format_heading_3"},{binding:J,commandId:"format_heading_4"},{binding:Z,commandId:"format_heading_5"},{binding:X,commandId:"format_heading_6"},...er.map(e=>({binding:e,commandId:e.key?`wrap_with_${e.key.replace(/[^a-zA-Z0-9]+/g,"_").toLowerCase()}`:"wrap_with_delimiter"})),{binding:{key:"Tab",run:h},commandId:"indent_line_if_code_block"},{binding:{key:"Shift-Tab",run:g},commandId:"unindent_line_if_code_block"},{binding:{key:"Shift-Tab",run:I},commandId:"dedent_selected_list_items"},{binding:{key:"Tab",run:R},commandId:"indent_selected_list_items"},{binding:{key:"Mod-[",run:I},commandId:"dedent_selected_list_items_mod"},{binding:{key:"Mod-]",run:R},commandId:"indent_selected_list_items_mod"}].map(({binding:e,commandId:r})=>((e,r)=>{if(!t||!e.run||!e.key)return e;let n=e.run,i=e.key;return{...e,run:e=>{let o=n(e);return t.trackKeyboardShortcut({commandId:r,shortcut:i,handled:o}),o}}})({...e},r));return n.w4.of(r)}},54571:(e,t,r)=>{r.d(t,{I:()=>o});var n=r(96540),i=r(76629);function o(e,t,r=[]){let l=(0,n.useCallback)(e,r),s=(0,i.BP)(),a=(0,n.useRef)(s===i.O8.ClientRender),[d,c]=(0,n.useState)(()=>s===i.O8.ClientRender?l():t),u=(0,n.useCallback)(()=>{c(l)},[l]);return(0,n.useLayoutEffect)(()=>{a.current||c(l),a.current=!1},[l,...r]),[d,u]}},55220:(e,t,r)=>{r.d(t,{Gr:()=>f,JB:()=>c,j9:()=>d,rx:()=>a,un:()=>u});var n=r(53839),i=r(65012),o=r(95917),l=r(77695),s=r(45580);let a=(e,t)=>(0,o.Ji)(e.state).findLast(e=>e.type===t),d=e=>e.children?e.children.filter(e=>"delimiter"===e.type):[],c=(e,t)=>{let r=d(t).filter(i.z);if(0===r.length)return;let n=r.map(e=>({from:e.position.start.offset,to:e.position.end.offset}));e.dispatch({changes:n,userEvent:"input",scrollIntoView:!0})},u=(e,t,r)=>{e.dispatch(e.state.changeByRange(e=>({changes:[{from:e.from,insert:t},{from:e.to,insert:r}],range:n.OF.range(e.from+t.length,e.to+t.length)})),{userEvent:"input",scrollIntoView:!0})},f=(e,t)=>{e.hasFocus||e.focus();let r=a(e,t);if(r)return c(e,r),!0;let n=s.t[t];if((0,l.Jr)(e.state))u(e,n,n);else{let t=(0,o.Ji)(e.state).find(e=>"text"===e.type);((e,t,r,n)=>{let o=e.state.selection.main.anchor,s=n?.value&&(0,i.z)(n),{text:a,offset:d}=s?{text:n.value,offset:o-n.position.start.offset}:{text:e.state.doc.toString(),offset:o},c=s?n.position.start.offset:0,{start:u,end:f}=(0,l.cL)(a,d);e.dispatch({changes:[{from:u+c,insert:t},{from:f+c,insert:r}],selection:{anchor:o+t.length},userEvent:"input",scrollIntoView:!0})})(e,n,n,t)}return!0}},62173:(e,t,r)=>{r.d(t,{y:()=>l});var n=r(96379),i=r(96540);async function o({text:e,issue:t,repository:r,project:i,subjectType:o,path:l,lineNumber:s,startCommitOid:a,endCommitOid:d,baseCommitOid:c,subject:u,startLineNumber:f}){let p=new FormData;p.append("text",e),p.append("issue",t),p.append("repository",r),p.append("project",i),l&&p.append("path",l),s&&p.append("line_number",s.toString()),a&&p.append("start_commit_oid",a),d&&p.append("end_commit_oid",d),c&&p.append("base_commit_oid",c),u&&p.append("subject",u.toString()),f&&p.append("start_line_number",f.toString()),o&&p.append("subject_type",o);let m=await (0,n.DI)("/preview",{body:p,method:"POST"});return m.ok?Promise.resolve(await m.text()):Promise.resolve("Markdown preview unavailable")}function l({subjectId:e,subjectType:t,subject:r,subjectRepoId:n,lineNumber:l,path:s,startCommitOid:a,startLineNumber:d,endCommitOid:c,baseCommitOid:u}){return(0,i.useCallback)(async i=>o({text:i,issue:e?.toString()??"",repository:n?.toString()??"",project:e?.toString()??"",subjectType:function(e){switch(e){case"issue":return"Issue";case"pull_request":return"PullRequest";case"project":return"Project";default:return}}(t),subject:r,lineNumber:l,path:s,startCommitOid:a,endCommitOid:c,baseCommitOid:u,startLineNumber:d}),[e,n,t,r,l,s,a,d,c,u])}},65012:(e,t,r)=>{function n(e){return void 0!==e.position&&void 0!==e.position.start&&void 0!==e.position.end&&"number"==typeof e.position.start.offset&&"number"==typeof e.position.end.offset}function i(e,t){return n(e)&&n(t)?e.position.start.offset!==t.position.start.offset?e.position.start.offset-t.position.start.offset:e.position.end.offset-t.position.end.offset:0}r.d(t,{y:()=>i,z:()=>n})},65826:(e,t,r)=>{r.d(t,{Ek:()=>d,Ph:()=>f,xf:()=>g});var n=r(74848),i=r(16522),o=r(90204),l=r(59403),s=r(5524),a=r(74508);function d(e){return"character"in e&&void 0!==e.character}let c=new Set(["+1","thumbsup","-1"]),u={triggerChar:":",keepTriggerCharOnCommit:!1},f=(e,t)=>void 0!==t?(0,n.jsx)("g-emoji",{alias:e.name,tone:t,"fallback-src":e.url,children:e.character}):e.character,p=e=>{let t,r,o,l=(0,i.c)(9),{emoji:a,tone:c}=e;return l[0]!==a||l[1]!==c?(t=d(a)?f(a,c):(0,n.jsx)("img",{src:a.url,alt:`${a.name} emoji`,height:"16",width:"16"}),l[0]=a,l[1]=c,l[2]=t):t=l[2],l[3]!==t?(r=(0,n.jsx)(s.l.LeadingVisual,{children:t}),l[3]=t,l[4]=r):r=l[4],l[5]!==a.name||l[6]!==e||l[7]!==r?(o=(0,n.jsxs)(s.l.Item,{...e,children:[r,a.name]}),l[5]=a.name,l[6]=e,l[7]=r,l[8]=o):o=l[8],o},m=(e,t)=>{let r=t.name.toLowerCase(),n=e.toLowerCase(),i=0;return r.includes(n)&&(i+=5,r.startsWith(n)&&(i+=5)),0===i?l.IP:i},h=(e,t)=>{let r=e.name.toLowerCase(),n=t.name.toLowerCase();return c.has(r)&&!c.has(n)?-1:c.has(n)&&!c.has(r)?1:0},g=(e,t)=>{let r,n,l=(0,i.c)(5);if(t?.tone,l[0]!==e||l[1]!==t?.tone){let n;r=(0,a.C)(e,m,h,(n=t?.tone,e=>({value:d(e)?void 0!==n?(0,o.R3)(e.character,n):e.character:`:${e.name}:`,key:e.name,render:t=>p({...t,emoji:e,tone:n})})),!0),l[0]=e,l[1]=t?.tone,l[2]=r}else r=l[2];let s=r;return l[3]!==s?(n={calculateSuggestions:s,trigger:u},l[3]=s,l[4]=n):n=l[4],n};try{c.displayName||(c.displayName="PRIORITIZED_EMOJIS")}catch{}try{p.displayName||(p.displayName="RenderEmoji")}catch{}},66964:(e,t,r)=>{r.d(t,{f:()=>i});var n=r(96540);let i=e=>{let[t,r]=(0,n.useState)(null),i=(0,n.useMemo)(()=>e.map(({trigger:e})=>e),[e]);return{triggers:i,suggestions:(0,n.useMemo)(()=>{if(!t)return null;for(let{trigger:r,suggestionsCalculator:n}of e)if(t.trigger.triggerChar===r.triggerChar)return n(t.query);return null},[t,e]),setSuggestionEvent:r,active:!!t}}},69736:(e,t,r)=>{r.d(t,{u:()=>n});let n=(0,r(96540).createContext)([]);try{n.displayName||(n.displayName="SelectionContext")}catch{}},74508:(e,t,r)=>{r.d(t,{C:()=>i});var n=r(59403);let i=(e,t,r,i,o)=>l=>{if("loading"===e)return"loading";let s=l?e.map(e=>[t(l,e),e]).filter(([e])=>e>n.IP).sort(([e,t],[n,i])=>n===e?-r(i,t):n-e).slice(0,5).map(([,e])=>e):e.slice(0,5);return o&&s.sort(r),s.map(i)}},75617:(e,t,r)=>{r.d(t,{JZ:()=>m,Lm:()=>s,YF:()=>f,vQ:()=>p});var n=r(74313),i=r(16143),o=r(43346),l=r(65012);let s="dataDelimiter";function a(e){let t=[];for(let r of e.children??[])"delimiter"===r.type&&t.push(r);return t}let d={tableDelimiter:"td",tableDelimiterRow:"tr"};function c(e){let t={[s]:e.tokenType},r=e.children?.length?e.children.map(c):e.raw,i=(0,n.h)(d[e.tokenType]??"span",t,r);return(0,l.z)(e)&&(i.position={start:{...e.position.start},end:{...e.position.end}}),i}let u=(e,t)=>{let r=(0,i._)(t);if("element"===r.type){let e=a(t).map(c);r.children?.length?r.children=[...r.children,...e].sort(l.y):r.children=e}else if("text"===t.type)return[r,...a(t).map(c)];return r};function f(e){let t=e.properties?.[s];return"string"==typeof t?t:null}let p={handlers:{...Object.fromEntries(Array.from((0,o.XT)()("break","blankLine","code","definition","footnoteReference","image","imageReference","inlineCode","text","thematicBreak","yaml")).map(e=>[e,u])),delimiter:(e,t)=>c(t)}},m={attributes:{"*":[s]}}},77695:(e,t,r)=>{function n(e){return 1===e.selection.ranges.length&&!e.selection.main.empty}function i(e){let t=e.selection.main.anchor,r=e.doc.toString(),n=r.slice(0,t).lastIndexOf(`
`)+1,i=r.indexOf(`
`,t);return -1===i&&(i=r.length),{from:n,to:i}}function o(e,t){let r=t,n=t,i=e=>/[^\w\d']/.test(e);for(;r>0&&e[r-1];){let t=e[r-1];if("'"===t){let t=e[r-2];if(!t||i(t)||/\s/.test(t))break}if(i(t))break;r--}for(;n<e.length&&e[n];){let t=e[n];if("'"===t){let t=e[n+1];if(!t||i(t)||/\s/.test(t))break}if(i(t))break;n++}return{start:r,end:n}}function l(e){return 1===e.selection.ranges.length&&e.selection.main.empty?e.selection.main.anchor:null}r.d(t,{IC:()=>s,JC:()=>l,Jr:()=>n,cL:()=>o,j6:()=>i});let s=(e,t)=>{try{let r=e.domAtPos(t);if(r?.node)try{let e=document.createRange();e.setStart(r.node,r.offset),e.setEnd(r.node,r.offset);let t=e.getBoundingClientRect();if(0!==t.left||0!==t.right||0!==t.top||0!==t.bottom)return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}catch{}return e.coordsAtPos(t)??null}catch{return null}}},78625:(e,t,r)=>{r.d(t,{DT:()=>l,DV:()=>d,H5:()=>u,NC:()=>f,On:()=>m,Uh:()=>s,aI:()=>a,v5:()=>c,z0:()=>p});var n=r(47970),i=r(76814),o=r(65012);function l(e,t,r,n){return e>=r&&e<=n||t>=r&&t<=n||e<=r&&t>=n}function s(e,t,r){let s=[];return(0,n.YR)(e,e=>{if((0,o.z)(e))if(!l(t,r,e.position.start.offset,e.position.end.offset))return i._Z;else s.push(e)}),s}function a(e,t,r){return e.children.filter(e=>(0,o.z)(e)&&l(t,r,e.position?.start.offset,e.position.end.offset))}function d(e,t,r,n,i){return i?e>=r&&t<=n:e>=r&&t<=n&&(e!==r||t!==n)}function c(e,t,r,l){let s=[];return(0,n.YR)(e,e=>{if((0,o.z)(e))if(!d(t,r,e.position.start.offset,e.position.end.offset,l))return i._Z;else s.push(e)}),s}function u(e,t,r){let s=[];return(0,n.YR)(e,e=>{if(!(0,o.z)(e))return;let n=e.position.start.offset,a=e.position.end.offset;if(!l(t,r,n,a))return i._Z;n>=t&&a<=r&&s.push(e)}),s}function f(e,t){let r;return(0,n.YR)(e,e=>{if((0,o.z)(e))if(!d(t,t,e.position.start.offset,e.position.end.offset)||"text"===e.type||"delimiter"===e.type)return i._Z;else r=e}),r}function p(e,t){return{column:e.column+t.column-1,line:e.line+t.line-1,offset:(e.offset??0)+(t.offset??0)}}function m(e,t){let r=t.split(`
`),n=r.at(-1);return{...e,line:e.line+r.length-1,column:1===r.length?e.column+t.length:n.length+1,offset:void 0!==e.offset?e.offset+t.length:void 0}}},80752:(e,t,r)=>{r.d(t,{KI:()=>d,VB:()=>s,a1:()=>a});var n=r(16522),i=r(88567);let o=/^(\s*(?:>\s*)*(?:[*-]\s{1,4})*)([*-]|(\d+)\.)(\s{1,4})(?:(\[[\sx]\])\s)?(.*)/i,l=e=>"number"==typeof e?.delimeter,s=e=>{let t=o.exec(e);if(!t)return null;let[,r="",n,i="",l,s=null,a]=t,d=Number.parseInt(i,10);return{leadingWhitespace:r,text:a,delimeter:Number.isNaN(d)?n:d,middleWhitespace:l,taskBox:s}},a=e=>"number"==typeof e.delimeter?`${e.leadingWhitespace}${e.delimeter}.${e.middleWhitespace}${e.taskBox?`${e.taskBox} `:""}${e.text}`:`${e.leadingWhitespace}${e.delimeter}${e.middleWhitespace}${e.taskBox||""} ${e.text}`,d=e=>{let t,r,o,a=(0,n.c)(7),{emitChange:d}=e;a[0]!==d?(t=(e,t)=>{let[r,n]=t||(0,i.ty)(e),o=s(e.value.slice(r,n));if(!l(o))return;let a=e.value.slice(n+1).split(/\r?\n/),u=[],f=o.delimeter;for(let e of a){let t=s(e);if(!l(t)||t.delimeter!==f)break;u.push(t),f++}if(0===u.length)return;let p=`
${u.map(c).join(`
`)}`;d(p,[n,n+p.length+1],e.selectionStart)},a[0]=d,a[1]=t):t=a[1];let u=t;a[2]!==d||a[3]!==u?(r=e=>{if("Enter"===e.key&&!e.shiftKey&&!e.defaultPrevented){let t=e.currentTarget,[r,n]=(0,i.ty)(t),o=s(t.value.slice(r,t.selectionStart)+t.value.slice(t.selectionEnd,n));if(o)if(e.preventDefault(),t.selectionStart===r){let e=(({leadingWhitespace:e="",delimeter:t,taskBox:r})=>{let n="number"==typeof t?`${t}.`:t;return`${n}${e}${r?" [ ]":" "}
`})(o);null===e?d("",[r,t.selectionEnd]):(d(e),u(t,[r,r+e.length-1]))}else{let e=(({leadingWhitespace:e="",delimeter:t,taskBox:r,text:n})=>{if(!n)return null;let i="number"==typeof t?`${t+1}.`:t;return`
${e}${i}${r?" [ ]":""} `})(o);null===e?d("",[r,t.selectionEnd]):(d(e),u(t))}}},a[2]=d,a[3]=u,a[4]=r):r=a[4];let f=r;return a[5]!==f?(o={onKeyDown:f},a[5]=f,a[6]=o):o=a[6],o};function c(e){return a({...e,delimeter:e.delimeter+1})}},81285:(e,t,r)=>{r.d(t,{M:()=>L});var n,i=r(74848),o=r(16522),l=r(38621),s=r(64954),a=r(1214),d=r(78625),c=r(65012),u=r(3266),f=r(55220);let p=`\`\`\`
`,m=`
\`\`\``,h=e=>{e.hasFocus||e.focus();let t=(0,u.wk)(e.state),r=e.state.doc.toString(),n=e.state.selection.main,{from:i,to:o}=n,l=(0,f.rx)(e,"code");if(l){if(!(0,c.z)(l)||"code"!==l.type)return!1;let t=(0,f.j9)(l).filter(c.z);if(0===t.length)return!1;let r=t.map((e,r)=>({from:r===t.length-1?e.position.start.offset-1:e.position.start.offset,to:0===r?e.position.end.offset+1:e.position.end.offset}));return e.dispatch({changes:r,userEvent:"input",scrollIntoView:!0}),!0}let s=[],h=[...(0,d.Uh)(t,i,o)].filter(e=>"code"===e.type).flatMap(e=>{let t=(0,f.j9)(e).filter(c.z);return t.map((e,r)=>({from:r===t.length-1?e.position.start.offset-1:e.position.start.offset,to:0===r?e.position.end.offset+1:e.position.end.offset}))}),g=h.at(0)?.from,y=h.at(-1)?.to;s.push(...h);let k=a._.linesAtRange(t,r,i,o),x=k[0]?.isOffsetAfterPrefixes(i)?k[0]?.contentStart:k[0]?.start,v=k.at(-1)?.end,b=void 0!==g&&void 0!==x?Math.min(x,g):x,_=void 0!==y&&void 0!==v?Math.max(v,y):v;if(void 0===b||void 0===_)return!1;s.push({from:b,insert:p},{from:_,insert:m});let w=n.empty&&a._.atOffset(t,r,n.from)?.isBlank;return e.dispatch({changes:s,selection:w?{anchor:b+p.length}:void 0,userEvent:"input",scrollIntoView:!0}),!0};var g=r(38939),y=r(42306),k=r(54108),x=r(16058),v=r(29255),b=r(96540),_=r(69736),w=r(39603);function I(e){return e?.replaceAll("+","Plus")?.replaceAll("-","+")}let S=()=>{let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"Toolbar-module__menuLeadingVisualPlaceholder--X75XP"}),t[0]=e):e=t[0],e},j=e=>{let t,r,n,a,d,c,u,f,p,m,h,g,y,x,v,I,j,E,M,P,L,A,O,R,V,$,F,z=(0,o.c)(61),{view:B}=e,D=(0,w.Ec)(),H=(0,b.use)(_.u);z[0]!==H?(t=e=>H.some(T)?H.some(t=>"heading"===t.type&&t.depth===e)?l.CheckIcon:S:void 0,z[0]=H,z[1]=t):t=z[1];let U=t,q=N;z[2]!==H||z[3]!==D||z[4]!==B?(r=(e,t)=>{if(!B)return;let r=H.some(t=>"heading"===t.type&&t.depth===e),n=(t.run||C)(B,"toolbar");D.trackToolbarInteraction({control:`heading_${e}`,action:`heading_${e}`,trigger:"toolbar",isActive:r,keybinding:t.key,handled:n})},z[2]=H,z[3]=D,z[4]=B,z[5]=r):r=z[5];let W=r;return z[6]!==W?(n=()=>W(1,k.Jr),z[6]=W,z[7]=n):n=z[7],z[8]!==U?(a=U(1),z[8]=U,z[9]=a):a=z[9],z[10]===Symbol.for("react.memo_cache_sentinel")?(d=q(k.Jr),z[10]=d):d=z[10],z[11]!==n||z[12]!==a?(c={label:"Heading 1",onClick:n,leadingVisual:a,trailingVisual:d},z[11]=n,z[12]=a,z[13]=c):c=z[13],z[14]!==W?(u=()=>W(2,k.oE),z[14]=W,z[15]=u):u=z[15],z[16]!==U?(f=U(2),z[16]=U,z[17]=f):f=z[17],z[18]===Symbol.for("react.memo_cache_sentinel")?(p=q(k.oE),z[18]=p):p=z[18],z[19]!==u||z[20]!==f?(m={label:"Heading 2",onClick:u,leadingVisual:f,trailingVisual:p},z[19]=u,z[20]=f,z[21]=m):m=z[21],z[22]!==W?(h=()=>W(3,k.b5),z[22]=W,z[23]=h):h=z[23],z[24]!==U?(g=U(3),z[24]=U,z[25]=g):g=z[25],z[26]===Symbol.for("react.memo_cache_sentinel")?(y=q(k.b5),z[26]=y):y=z[26],z[27]!==h||z[28]!==g?(x={label:"Heading 3",onClick:h,leadingVisual:g,trailingVisual:y},z[27]=h,z[28]=g,z[29]=x):x=z[29],z[30]!==W?(v=()=>W(4,k.kD),z[30]=W,z[31]=v):v=z[31],z[32]!==U?(I=U(4),z[32]=U,z[33]=I):I=z[33],z[34]===Symbol.for("react.memo_cache_sentinel")?(j=q(k.kD),z[34]=j):j=z[34],z[35]!==v||z[36]!==I?(E={label:"Heading 4",onClick:v,leadingVisual:I,trailingVisual:j},z[35]=v,z[36]=I,z[37]=E):E=z[37],z[38]!==W?(M=()=>W(5,k.rk),z[38]=W,z[39]=M):M=z[39],z[40]!==U?(P=U(5),z[40]=U,z[41]=P):P=z[41],z[42]===Symbol.for("react.memo_cache_sentinel")?(L=q(k.rk),z[42]=L):L=z[42],z[43]!==M||z[44]!==P?(A={label:"Heading 5",onClick:M,leadingVisual:P,trailingVisual:L},z[43]=M,z[44]=P,z[45]=A):A=z[45],z[46]!==W?(O=()=>W(6,k.o8),z[46]=W,z[47]=O):O=z[47],z[48]!==U?(R=U(6),z[48]=U,z[49]=R):R=z[49],z[50]===Symbol.for("react.memo_cache_sentinel")?(V=q(k.o8),z[50]=V):V=z[50],z[51]!==O||z[52]!==R?($={label:"Heading 6",onClick:O,leadingVisual:R,trailingVisual:V},z[51]=O,z[52]=R,z[53]=$):$=z[53],z[54]!==m||z[55]!==x||z[56]!==E||z[57]!==A||z[58]!==$||z[59]!==c?(F=(0,i.jsx)(s.A.Menu,{"aria-label":"Heading",icon:l.HeadingIcon,items:[c,m,x,E,A,$]}),z[54]=m,z[55]=x,z[56]=E,z[57]=A,z[58]=$,z[59]=c,z[60]=F):F=z[60],F};try{S.displayName||(S.displayName="CheckIconPlaceholder")}catch{}try{(n=TrailingVisual).displayName||(n.displayName="TrailingVisual")}catch{}try{j.displayName||(j.displayName="HeadingMenu")}catch{}function T(e){return"heading"===e.type}function N(e){let t=I(e.key);if(t)return(({keys:e})=>function(){return(0,i.jsx)(v.U,{className:"Toolbar-module__menuKeybindingHint--ET28p",keys:e})})({keys:t})}function C(){return!1}let E=e=>{let t,r,n,l,a,d,c,u,f,p,m=(0,o.c)(27);m[0]!==e?({command:t,view:d,matchingNodeFilter:r,resolveIsPressed:l,telemetryId:a,...n}=e,m[0]=e,m[1]=t,m[2]=r,m[3]=n,m[4]=l,m[5]=a,m[6]=d):(t=m[1],r=m[2],n=m[3],l=m[4],a=m[5],d=m[6]);let h=(0,b.use)(_.u);if(m[7]!==r||m[8]!==l||m[9]!==h){let e=h.some(r);c=l?.(h,e)??e,m[7]=r,m[8]=l,m[9]=h,m[10]=c}else c=m[10];let g=c,y=(0,w.Ec)(),k=n["aria-label"],x="function"!=typeof t,v=(x?t.run:t)??M,S=x?t.key:void 0;m[11]!==k||m[12]!==v||m[13]!==S||m[14]!==g||m[15]!==y||m[16]!==a||m[17]!==d?(u=()=>{if(!d)return;d.hasFocus||d.focus();let e=v(d,"toolbar");y.trackToolbarInteraction({control:a??k??"unknown",action:a??k??"unknown",trigger:"toolbar",isActive:g,keybinding:S,handled:e})},m[11]=k,m[12]=v,m[13]=S,m[14]=g,m[15]=y,m[16]=a,m[17]=d,m[18]=u):u=m[18];let j=u;m[19]!==S?(f=I(S),m[19]=S,m[20]=f):f=m[20];let T=!d;return m[21]!==g||m[22]!==n||m[23]!==j||m[24]!==f||m[25]!==T?(p=(0,i.jsx)(s.A.IconButton,{variant:"invisible",onMouseDown:P,keybindingHint:f,disabled:T,onClick:j,"aria-pressed":g,...n}),m[21]=g,m[22]=n,m[23]=j,m[24]=f,m[25]=T,m[26]=p):p=m[26],p};function M(){return!1}function P(e){return e.preventDefault()}E.displayName="MarkdownEditor.ToolbarButton";let L=e=>{let t,r,n,a,d,c,u,f,p,m,g,v,b,_,w,I,S,T,N,C,M,P,L,B,D,H,U,q,W,K,Y,G,Q,J=(0,o.c)(67),{view:Z,fileUploadButton:X}=e;J[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(function(e){return"listItem"===e.type})(e)&&!!(0,x.xM)(e).taskListPrefix,J[0]=t):t=J[0];let ee=t;J[1]===Symbol.for("react.memo_cache_sentinel")?(r=e=>"list"===e.type&&e.children.some(e=>ee(e)),J[1]=r):r=J[1];let et=r;J[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{let t=e.list,r=new Set;for(let n of e.selectedItems)if(ee(n)?r.add("task"):r.add(t.ordered?"ordered":"unordered"),r.size>1)return null;return r.values().next().value??null},J[2]=n):n=J[2];let er=n;J[3]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{for(let t=e.length-1;t>=0;t-=1){let r=e[t];if(!r||"listItem"!==r.type)continue;if(ee(r))return"task";let n=(0,x.xM)(r).listItemPrefix?.raw??"";return/^\s*(?:\d+\.|\d+\))/u.test(n)?"ordered":"unordered"}return null},J[3]=a):a=J[3];let en=a;if(J[4]!==Z){let e,t,r=Z?(0,y.dT)(Z.state):null,n=e=>(t,n)=>{let i=en(t)??(r?er(r):null);return!!n&&!!i&&i===e};u=s.A,b="Formatting tools",_="Toolbar-module__actionBar--Igyiz",w="none",I=(0,i.jsx)(E,{view:Z,"aria-label":"Bold",icon:l.BoldIcon,command:k.lM,telemetryId:"bold",matchingNodeFilter:A}),S=(0,i.jsx)(E,{view:Z,"aria-label":"Italic",icon:l.ItalicIcon,command:k.Kp,telemetryId:"italic",matchingNodeFilter:O}),T=(0,i.jsx)(E,{view:Z,"aria-label":"Link",icon:l.LinkIcon,command:k.gk,telemetryId:"link",matchingNodeFilter:R}),N=(0,i.jsx)(E,{view:Z,"aria-label":"Code",icon:l.CodeIcon,command:k.SF,telemetryId:"inline_code",matchingNodeFilter:V}),C=(0,i.jsx)(E,{view:Z,"aria-label":"Quote",icon:l.QuoteIcon,command:k.bF,telemetryId:"blockquote",matchingNodeFilter:$}),c=s.A.Group,J[26]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(s.A.Divider,{}),J[26]=m):m=J[26],J[27]===Symbol.for("react.memo_cache_sentinel")?(e=e=>"list"===e.type&&!e.ordered&&!et(e),J[27]=e):e=J[27],g=(0,i.jsx)(E,{view:Z,"aria-label":"Unordered list",icon:l.ListUnorderedIcon,command:k.KB,telemetryId:"unordered_list",matchingNodeFilter:e,resolveIsPressed:n("unordered")}),J[28]===Symbol.for("react.memo_cache_sentinel")?(t=e=>"list"===e.type&&!!e.ordered&&!et(e),J[28]=t):t=J[28],v=(0,i.jsx)(E,{view:Z,"aria-label":"Ordered list",icon:l.ListOrderedIcon,command:k.xn,telemetryId:"ordered_list",matchingNodeFilter:t,resolveIsPressed:n("ordered")}),d=E,M=Z,P="Task list",L=l.TasklistIcon,B=k.Dc,D="task_list",J[29]===Symbol.for("react.memo_cache_sentinel")?(f=e=>ee(e),J[29]=f):f=J[29],p=n("task"),J[4]=Z,J[5]=d,J[6]=c,J[7]=u,J[8]=f,J[9]=p,J[10]=m,J[11]=g,J[12]=v,J[13]=b,J[14]=_,J[15]=w,J[16]=I,J[17]=S,J[18]=T,J[19]=N,J[20]=C,J[21]=M,J[22]=P,J[23]=L,J[24]=B,J[25]=D}else d=J[5],c=J[6],u=J[7],f=J[8],p=J[9],m=J[10],g=J[11],v=J[12],b=J[13],_=J[14],w=J[15],I=J[16],S=J[17],T=J[18],N=J[19],C=J[20],M=J[21],P=J[22],L=J[23],B=J[24],D=J[25];return J[30]!==d||J[31]!==f||J[32]!==p||J[33]!==M||J[34]!==P||J[35]!==L||J[36]!==B||J[37]!==D?(H=(0,i.jsx)(d,{view:M,"aria-label":P,icon:L,command:B,telemetryId:D,matchingNodeFilter:f,resolveIsPressed:p}),J[30]=d,J[31]=f,J[32]=p,J[33]=M,J[34]=P,J[35]=L,J[36]=B,J[37]=D,J[38]=H):H=J[38],J[39]!==c||J[40]!==m||J[41]!==g||J[42]!==v||J[43]!==H?(U=(0,i.jsxs)(c,{children:[m,g,v,H]}),J[39]=c,J[40]=m,J[41]=g,J[42]=v,J[43]=H,J[44]=U):U=J[44],J[45]===Symbol.for("react.memo_cache_sentinel")?(q=(0,i.jsx)(s.A.Divider,{}),J[45]=q):q=J[45],J[46]!==Z?(W=(0,i.jsx)(E,{view:Z,"aria-label":"Code block",icon:l.CodeSquareIcon,command:h,telemetryId:"code_block",matchingNodeFilter:F}),K=(0,i.jsx)(j,{view:Z}),Y=(0,i.jsx)(E,{view:Z,"aria-label":"Strikethrough",icon:l.StrikethroughIcon,command:k.VA,telemetryId:"strikethrough",matchingNodeFilter:z}),J[46]=Z,J[47]=W,J[48]=K,J[49]=Y):(W=J[47],K=J[48],Y=J[49]),J[50]!==X||J[51]!==W||J[52]!==K||J[53]!==Y?(G=(0,i.jsxs)(s.A.Group,{children:[q,X,W,K,Y]}),J[50]=X,J[51]=W,J[52]=K,J[53]=Y,J[54]=G):G=J[54],J[55]!==u||J[56]!==b||J[57]!==_||J[58]!==w||J[59]!==I||J[60]!==S||J[61]!==T||J[62]!==N||J[63]!==C||J[64]!==U||J[65]!==G?(Q=(0,i.jsxs)(u,{"aria-label":b,className:_,gap:w,children:[I,S,T,N,C,U,G]}),J[55]=u,J[56]=b,J[57]=_,J[58]=w,J[59]=I,J[60]=S,J[61]=T,J[62]=N,J[63]=C,J[64]=U,J[65]=G,J[66]=Q):Q=J[66],Q};function A(e){return"strong"===e.type}function O(e){return"emphasis"===e.type}function R(e){return"link"===e.type&&(0,g.A)(e)}function V(e){return"inlineCode"===e.type}function $(e){return"blockquote"===e.type}function F(e){return"code"===e.type}function z(e){return"delete"===e.type}L.displayName="HybridMarkdownEditor.Toolbar"},84174:(e,t,r)=>{r.d(t,{V:()=>o});var n=r(74848),i=r(46251);let o=({label:e,link:t,className:r})=>t?(0,n.jsxs)(i.B,{direction:"horizontal",gap:"condensed",align:"baseline",className:r,children:[e," ",t]}):r?(0,n.jsx)("span",{className:r,children:e}):(0,n.jsx)(n.Fragment,{children:e});try{o.displayName||(o.displayName="LabelWithLink")}catch{}},88567:(e,t,r)=>{r.d(t,{TG:()=>u,VL:()=>a,iQ:()=>s,nf:()=>l,pF:()=>d,ty:()=>o});var n=r(18651),i=r(91446);let o=e=>{let t=e.value.lastIndexOf(`
`,e.selectionStart-1)+1,r=e.value.indexOf(`
`,e.selectionEnd);return -1===r&&(r=e.value.length),[t,r]},l=e=>`<!-- ${e.replaceAll("--","\\-\\-")} -->`,s=(e,t)=>`[${e.replaceAll("[","\\[").replaceAll("]","\\]")}](${t.replaceAll("(","\\(").replaceAll(")","\\)")})`,a=e=>(0,n.U0)()?e.metaKey:e.ctrlKey,d=async e=>{let t=await (0,i.pF)(e);return t?{width:t.width,height:t.height,ppi:t.pixelsPerInch}:null},c=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),u=(e,t,r="Image")=>{let n=c(r),o=c(t);if(e.ppi===i.Sv){let t=Math.round(e.width/2),r=Math.round(e.height/2);return`<img width="${t}" height="${r}" alt="${n}" src="${o}" />`}return e&&e.width>0&&e.height>0?`<img width="${e.width}" height="${e.height}" alt="${n}" src="${o}" />`:`![${n}](${o})`}},90519:(e,t,r)=>{function n(e,t){return e.slice(0,t).lastIndexOf(`
`)+1}function i(e,t){let r=e.indexOf(`
`,t);return -1===r?e.length:r}function o(e,t){return t<0||t>e.length?null:{start:n(e,t),end:i(e,t)}}function l(e,t,r){let o=[],l=n(e,t);for(;l<=r;){let t=i(e,l);o.push({start:l,end:t}),l=t+1}return o}function s(e,t){if(0===t||`
`===e[t-1]&&(1===t||`
`===e[t-2]))return"";let r=e.lastIndexOf(`
`,t-1);return/\S/.test(e.substring(r,t))?`

`:`
`}function a(e,t){return`
`===e[t]?`
`===e[t+1]?"":`
`:`

`}r.d(t,{JK:()=>s,WH:()=>o,be:()=>l,eO:()=>a})},90670:(e,t,r)=>{r.d(t,{A:()=>n});let n={container:"HybridMarkdownEditor-module__container--P0pK8",modPressed:"HybridMarkdownEditor-module__modPressed--Yxc01",isDraggedOver:"HybridMarkdownEditor-module__isDraggedOver--HtKSP"}},91446:(e,t,r)=>{r.d(t,{Sv:()=>i,pF:()=>o});var n=r(50467);let PNGScanner=class PNGScanner{advance(e){this.pos+=e}readInt(e){let t=(()=>{switch(e){case 1:return this.dataview.getUint8(this.pos);case 2:return this.dataview.getUint16(this.pos);case 4:return this.dataview.getUint32(this.pos);default:throw Error("bytes parameter must be 1, 2 or 4")}})();return this.advance(e),t}readChar(){return this.readInt(1)}readShort(){return this.readInt(2)}readLong(){return this.readInt(4)}readString(e){let t=new Uint8Array(this.dataview.buffer,this.pos,e);return this.advance(e),new TextDecoder("ascii").decode(t)}scan(e){let t=[137,80,78,71,13,10,26,10];for(let e=0;e<t.length;e++)if(this.dataview.getUint8(this.pos+e)!==t[e])throw Error("Invalid PNG file: header signature mismatch");for(this.advance(8);this.pos<this.dataview.byteLength;){let t=this.readLong(),r=this.readString(4),n=this.pos+t+4;if(!1===e.call(this,r,t)||"IEND"===r)break;this.pos=n}}constructor(e){(0,n._)(this,"dataview",void 0),(0,n._)(this,"pos",void 0),this.dataview=new DataView(e),this.pos=0}};let i=144,o=async e=>{let t,r,n=await new Promise((t,r)=>{let n=new FileReader;n.onload=()=>t(n.result),n.onerror=()=>r(n.error),n.readAsArrayBuffer(e)});return n?(t=new PNGScanner(n),r={width:0,height:0,pixelsPerInch:72},t.scan(function(e){switch(e){case"IHDR":r.width=this.readLong(),r.height=this.readLong();break;case"pHYs":{let e=this.readLong(),t=this.readLong();return 1===this.readChar()&&(r.pixelsPerInch=Math.round((e+t)/2*.0254)),!1}case"IDAT":return!1}return!0}),r):null}},91886:(e,t,r)=>{r.d(t,{Qd:()=>l,Sv:()=>o,fD:()=>i});var n=r(43346);let i=(0,n.XT)()("break","delete","emphasis","footnoteReference","html","image","imageReference","inlineCode","link","linkReference","strong","text","delimiter"),o=(0,n.XT)()("delete","emphasis","heading","link","linkReference","paragraph","strong","tableCell","root"),l=new Set(["delete","delimiter","emphasis","inlineCode","paragraph","strong","text","root"])},93039:(e,t,r)=>{r.d(t,{m:()=>c});var n=r(74848),i=r(16522),o=r(38621),l=r(39768),s=r(34164);let a="ViewSwitch-module__segmentedControl--HEitU",d="ViewSwitch-module__active--OpjBM",c=e=>{let t,r,c,u,f,p,m,h,g,y,k,x,v,b,_,w,I=(0,i.c)(41),{selectedView:S,onViewSelect:j,onLoadPreview:T,disabled:N}=e;I[0]!==j?(t=e=>{j?.(e)},I[0]=j,I[1]=t):t=I[1];let C=t,E="edit"===S&&d;I[2]!==E?(r=(0,s.$)(a,E),I[2]=E,I[3]=r):r=I[3];let M="edit"===S;I[4]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(o.CodeIcon,{}),I[4]=c):c=I[4],I[5]!==C?(u=()=>C?.("edit"),I[5]=C,I[6]=u):u=I[6],I[7]!==N||I[8]!==r||I[9]!==M||I[10]!==u?(f=(0,n.jsx)(l.I.IconButton,{className:r,selected:M,value:"edit","aria-label":"Edit mode",disabled:N,icon:c,onClick:u}),I[7]=N,I[8]=r,I[9]=M,I[10]=u,I[11]=f):f=I[11];let P="preview"===S&&d;I[12]!==P?(p=(0,s.$)(a,P),I[12]=P,I[13]=p):p=I[13];let L="preview"===S;I[14]===Symbol.for("react.memo_cache_sentinel")?(m=(0,n.jsx)(o.EyeIcon,{}),I[14]=m):m=I[14],I[15]!==C?(h=()=>C?.("preview"),I[15]=C,I[16]=h):h=I[16],I[17]!==T?(g=()=>T?.(),y=()=>T?.(),I[17]=T,I[18]=g,I[19]=y):(g=I[18],y=I[19]),I[20]!==N||I[21]!==L||I[22]!==h||I[23]!==g||I[24]!==y||I[25]!==p?(k=(0,n.jsx)(l.I.IconButton,{className:p,selected:L,value:"preview","aria-label":"Preview mode",disabled:N,icon:m,onClick:h,onMouseOver:g,onFocus:y}),I[20]=N,I[21]=L,I[22]=h,I[23]=g,I[24]=y,I[25]=p,I[26]=k):k=I[26];let A="hybrid"===S&&d;I[27]!==A?(x=(0,s.$)(a,A),I[27]=A,I[28]=x):x=I[28];let O="hybrid"===S;return I[29]===Symbol.for("react.memo_cache_sentinel")?(v=(0,n.jsx)(o.ComposeIcon,{}),I[29]=v):v=I[29],I[30]!==C?(b=()=>C?.("hybrid"),I[30]=C,I[31]=b):b=I[31],I[32]!==N||I[33]!==x||I[34]!==O||I[35]!==b?(_=(0,n.jsx)(l.I.IconButton,{className:x,value:"hybrid",selected:O,"aria-label":"Hybrid mode",disabled:N,icon:v,onClick:b}),I[32]=N,I[33]=x,I[34]=O,I[35]=b,I[36]=_):_=I[36],I[37]!==k||I[38]!==_||I[39]!==f?(w=(0,n.jsx)("nav",{children:(0,n.jsxs)(l.I,{"aria-label":"View mode",children:[f,k,_]})}),I[37]=k,I[38]=_,I[39]=f,I[40]=w):w=I[40],w};try{c.displayName||(c.displayName="ViewSwitch")}catch{}},95863:(e,t,r)=>{r.d(t,{wd:()=>s});var n=r(96540);let i=/^([^/]+)\/([^;]+)/,o=e=>{if(e.startsWith("."))return t=>t.name.toLowerCase().endsWith(e.toLowerCase());{let t=i.exec(e);if(null===t)return()=>!1;let[,r,n]=t;return e=>{let[,t,o]=i.exec(e.type)??[];return r?.toLowerCase()===t?.toLowerCase()&&("*"===n||n?.toLowerCase()===o?.toLowerCase())}}};function l(e){let t=(0,n.useMemo)(()=>e.acceptedFileTypes?.map(o),[e.acceptedFileTypes]),r=(0,n.useCallback)(e=>t?.some(t=>t(e))??!0,[t]);return(0,n.useCallback)(function(t){if(0===t.length)return!1;if(e.multi){let n=[],i=[];for(let e of t)r(e)?n.push(e):i.push(e);e.onSelect(n,i)}else{let n=t[0];n&&r(n)?e.onSelect(n,void 0):e.onSelect(void 0,n)}return!0},[r,e.multi,e.onSelect])}function s(e){let t,r=function(e){let t=l(e),{multi:r,acceptedFileTypes:i}=e,o=(0,n.useCallback)(()=>{let e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("multiple",r?"true":"false"),i&&e.setAttribute("accept",i.join(", ")),e.addEventListener("change",e=>{let r=e.target;r instanceof HTMLInputElement&&r.files&&t(r.files)},{once:!0}),e.click()},[i,r,t]);return(0,n.useMemo)(()=>({onClick:o}),[o])}(e),i=(t=l(e),(0,n.useMemo)(()=>({onPaste:e=>{t(e.clipboardData.files)&&e.preventDefault()}}),[t])),[o,s]=function(e){let t=l(e),[r,i]=(0,n.useState)(!1),o=(0,n.useCallback)(()=>i(!1),[]),s=(0,n.useCallback)(e=>{a(e)&&(i(!0),e.stopPropagation(),e.preventDefault())},[]),d=(0,n.useCallback)(e=>{a(e)&&(e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy")},[]),c=(0,n.useCallback)(e=>{t(e.dataTransfer.files)&&(e.preventDefault(),i(!1))},[t]);return[r,(0,n.useMemo)(()=>({onDragEnter:s,onDragOver:d,onDragLeave:o,onDrop:c}),[c,d,o,s])]}(e);return(0,n.useMemo)(()=>({clickTargetProps:r,pasteTargetProps:i,dropTargetProps:s,isDraggedOver:o}),[r,s,o,i])}let a=e=>e.dataTransfer.types.includes("Files")||Array.from(e.dataTransfer.items).some(e=>"file"===e.kind)},95917:(e,t,r)=>{r.d(t,{Ji:()=>c,Kr:()=>l,aG:()=>d,gJ:()=>u});var n=r(53839),i=r(78625),o=r(3266);let l=[];function s(e){let t=(0,o.wk)(e),r=e.selection.main;return(0,i.v5)(t,r.from,r.to,!0)}let a=n.sU.define({create:s,update:(e,t)=>!t.startState.selection.eq(t.newSelection)||(0,o.AT)(t)?s(t.state):e,provide:()=>[o.YZ]}),d=a;function c(e){return e.field(a)}function u(e){if(!e.startState.selection.eq(e.newSelection)||(0,o.AT)(e))return!0;let t=e.startState.field(a),r=e.state.field(a);if(t.length!==r.length)return!0;for(let e=0;e<t.length;e++)if(t[e]!==r[e])return!0;return!1}},97673:(e,t,r)=>{r.d(t,{k:()=>p});var n=r(74848),i=r(16522),o=r(59403),l=r(20263),s=r(5524),a=r(74508);let d={triggerChar:"#",multiWord:!0},c=e=>({value:e.id,render:t=>(0,n.jsxs)(s.l.Item,{...t,children:[e.iconHtml&&(0,n.jsx)(s.l.LeadingVisual,{children:(0,n.jsx)(l.BC,{html:e.iconHtml})}),(0,n.jsx)("span",{className:"use-reference-suggestions-module__suggestionTitle--NZoUv",children:(0,n.jsx)(l.BC,{html:e.titleHtml})})," ",(0,n.jsxs)(s.l.Description,{truncate:!0,children:["#",e.id]})]})}),u=(e,t)=>(0,o.dt)(e,`${t.id} ${t.titleText}`),f=(e,t)=>0,p=e=>{let t,r,n=(0,i.c)(4);if(n[0]!==e){let r=(0,a.C)(e,u,f,c);t=e=>/^\d+\s/.test(e)?[]:r(e),n[0]=e,n[1]=t}else t=n[1];let o=t;return n[2]!==o?(r={calculateSuggestions:o,trigger:d},n[2]=o,n[3]=r):r=n[3],r}},98211:(e,t,r)=>{r.d(t,{U:()=>o,g:()=>i});var n=r(96540);let i=Symbol("callbackCancelledResult"),o=(e,t=!1)=>{let r=(0,n.useRef)(e);(0,n.useLayoutEffect)(()=>{r.current=e},[e]);let o=(0,n.useRef)(!1);return(0,n.useEffect)(()=>(o.current=!0,()=>{t||(o.current=!1)}),[t]),(0,n.useCallback)((...e)=>o.current?r.current(...e):i,[])}}}]);
//# sourceMappingURL=83326-8356b52c4249.js.map
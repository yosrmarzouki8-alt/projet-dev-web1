"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[46642,52302,86391],{14496:(e,t,n)=>{n.d(t,{b:()=>C});var a=n(74848),r=n(16522),s=n(94236),l=n(21373),o=n(5524),i=n(73077),c=n(38621),u=n(51120),d=n(42455),m=n(69599),h=n(95869),p=n(77430),g=n(78223);function f(e){let t,n,s,l=(0,r.c)(12),{topLevelAgents:i,customAgents:c,selectedAgent:u,onSelectAgent:d}=e;return l[0]!==d||l[1]!==u||l[2]!==i?(t=i.length>0&&(0,a.jsxs)(o.l.Group,{selectionVariant:"single",children:[(0,a.jsx)(o.l.GroupHeading,{children:"Agents"}),i.map(e=>{let t=(0,g.sS)(e.slug),n=u?.typeName==="topLevel"&&u.topLevelAgentId===e.id,r=!u?.typeName&&t,s=n||r;return(0,a.jsxs)(o.l.Item,{disabled:!1,selected:s,onSelect:()=>d(s?{}:{typeName:"topLevel",topLevelAgentId:e.id}),children:[(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(p.r,{src:e.avatar_url||"",size:16,square:!0})}),e.display_name]},e.id)})]}),l[0]=d,l[1]=u,l[2]=i,l[3]=t):t=l[3],l[4]!==c||l[5]!==d||l[6]!==u||l[7]!==i.length?(n=c.length>0&&(0,a.jsxs)(a.Fragment,{children:[i.length>0&&(0,a.jsx)(o.l.Divider,{}),(0,a.jsxs)(o.l.Group,{selectionVariant:"single",children:[(0,a.jsx)(o.l.GroupHeading,{children:"Custom agents"}),c.map(e=>{let t=!!e.config_error&&e.config_error.length>0,n=u.subAgentSlug===e.name;return(0,a.jsx)(o.l.Item,{disabled:t,inactiveText:t?e.config_error:void 0,selected:n,onSelect:()=>d(n?{}:{typeName:"customSubAgent",subAgentSlug:e.name}),children:e.display_name||e.name},e.name)})]})]}),l[4]=c,l[5]=d,l[6]=u,l[7]=i.length,l[8]=n):n=l[8],l[9]!==t||l[10]!==n?(s=(0,a.jsxs)(a.Fragment,{children:[t,n]}),l[9]=t,l[10]=n,l[11]=s):s=l[11],s}try{f.displayName||(f.displayName="AgentListItems")}catch{}var y=n(82156),b=n(63422),v=n(34164),S=n(96540);function C(e){let t,n,i,C,x,w,A,k,N,j,L,P,R,E=(0,r.c)(50),{repo:O,branch:$,selectedAgent:T,onSelectAgent:B,iconOnly:F,disabled:G,buttonProps:M}=e,D=void 0===F||F,q=void 0!==G&&G;E[0]!==O?(t={repo:O},E[0]=O,E[1]=t):t=E[1];let{data:W,isLoading:K}=function(e){let t,n,a=(0,r.c)(4),{repo:s}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.G7)("agent_session_retry_fetch_capi_on_401"),a[0]=t):t=a[0];let l=t;return a[1]!==s.nameOnly||a[2]!==s.owner?(n={queryKey:["custom-agents",s.owner,s.nameOnly],queryFn:async()=>{try{let e=await (0,u.I)({path:`/agents/swe/custom-agents/${s.owner}/${s.nameOnly}`,retryOn401:l});if(404===e.status)return[];return(await e.json()).agents}catch{return[]}}},a[1]=s.nameOnly,a[2]=s.owner,a[3]=n):n=a[3],(0,d.b)(n)}(t);E[2]!==W?(n=void 0===W?[]:W,E[2]=W,E[3]=n):n=E[3];let V=n,{data:U,isLoading:H}=(0,h.n)(O.nameWithOwner);E[4]!==U?(i=void 0===U?[]:U,E[4]=U,E[5]=i):i=E[5];let Q=i,z=O.isEmpty||!$||K||H;E[6]!==V||E[7]!==Q?(C=[...Q,...V],E[6]=V,E[7]=Q,E[8]=C):C=E[8];let J=C;E[9]!==J||E[10]!==z||E[11]!==B||E[12]!==T?(w=()=>{z||0===J.length||!T?.typeName||("topLevel"===T.typeName?J.some(e=>"id"in e&&e.id===T.topLevelAgentId):J.some(e=>"name"in e&&e.name===T.subAgentSlug))||B({})},x=[z,J,T,B],E[9]=J,E[10]=z,E[11]=B,E[12]=T,E[13]=x,E[14]=w):(x=E[13],w=E[14]),(0,S.useEffect)(w,x);let Y=_,X=Y(T)?"Copilot":T,Z="string"==typeof X?"Copilot"===X?"topLevel":"customSubAgent":X.typeName;if(E[15]!==Z||E[16]!==J||E[17]!==$||E[18]!==M||E[19]!==q||E[20]!==X||E[21]!==D||E[22]!==z||E[23]!==O||E[24]!==T){let e,t,n,r,o,i,u=J.find(e=>"string"==typeof X?e.display_name===X:"topLevel"===Z?"id"in e&&e.id===X.topLevelAgentId:"customSubAgent"===Z?"name"in e&&e.name===X.subAgentSlug:void 0);e:{if("string"==typeof X){e=X;break e}if(!u){e=void 0;break e}e=u.display_name||("name"in u?u.name:void 0)}let d=e;if(E[29]!==$||E[30]!==O.nameOnly||E[31]!==O.owner){let e=new URLSearchParams({filename:".github/agents/my-agent.agent.md",value:`---
# Fill in the fields below to create a basic custom agent for your repository.
# The Copilot CLI can be used for local testing: https://gh.io/customagents/cli
# To make this agent available, merge this file into the default repository branch.
# For format details, see: https://gh.io/customagents/config

name:
description:
---

# My Agent

Describe what your agent does here...`});t=O.owner,n=O.nameOnly,r=$,o=e.toString(),E[29]=$,E[30]=O.nameOnly,E[31]=O.owner,E[32]=t,E[33]=n,E[34]=r,E[35]=o}else t=E[32],n=E[33],r=E[34],o=E[35];N=`/${t}/${n}/new/${r}?${o}`;t:{if(Y(T)){i=!0;break t}if("topLevel"===T.typeName&&u&&"slug"in u){i=(0,g.sS)(u.slug);break t}i=!1}let m=i,h=d||"None",f=d?`${"topLevel"===Z?"Agent":"Custom agent"}: ${d}`:"Select an agent";k=s.W,A=s.W.Anchor,j=D?function({isLoading:e,isCopilotSelected:t,selectedAgentObj:n,agentType:r,ariaLabel:s,disabled:o,variant:i,className:u}){return e?(0,a.jsx)(l.Q,{"aria-label":"Loading agents",disabled:!0,variant:i,className:(0,v.$)("AgentSelector-module__avatarButtonSkeleton--jkY1N",u),children:(0,a.jsx)(y.f,{width:"32px",height:"32px","data-testid":"agent-selector-skeleton"})}):t?(0,a.jsx)(b.L,{icon:c.CopilotIcon,selectedIcon:c.CopilotIcon,"aria-label":s,selected:!1,disabled:o,variant:i,className:u}):n&&"object"==typeof n&&"customSubAgent"===r?(0,a.jsx)(b.L,{icon:c.CopilotIcon,selectedIcon:c.FileCheckIcon,"aria-label":s,selected:!!n,disabled:o,variant:i,className:u}):n&&"object"==typeof n&&"avatar_url"in n?(0,a.jsx)(l.Q,{"aria-label":s,disabled:o||e,variant:i,className:(0,v.$)("AgentSelector-module__avatarButton--vp2Ab",u),children:(0,a.jsx)(p.r,{src:n.avatar_url,size:18,square:!0})}):(0,a.jsx)(b.L,{icon:c.CopilotIcon,selectedIcon:c.FileCheckIcon,"aria-label":s,selected:!!n,disabled:o,variant:i,className:u})}({isLoading:z,isCopilotSelected:m,selectedAgentObj:u,agentType:Z,ariaLabel:f,disabled:q,variant:M?.variant,className:M?.className}):(0,a.jsx)(l.Q,{leadingVisual:d?c.FileCheckIcon:c.CopilotIcon,trailingAction:c.TriangleDownIcon,"aria-label":f,className:"AgentSelector-module__anchor--SnbmM","data-selected":!!u,disabled:q||z,...M,children:h}),E[15]=Z,E[16]=J,E[17]=$,E[18]=M,E[19]=q,E[20]=X,E[21]=D,E[22]=z,E[23]=O,E[24]=T,E[25]=A,E[26]=k,E[27]=N,E[28]=j}else A=E[25],k=E[26],N=E[27],j=E[28];return E[36]!==A||E[37]!==j?(L=(0,a.jsx)(A,{children:j}),E[36]=A,E[37]=j,E[38]=L):L=E[38],E[39]!==J.length||E[40]!==V||E[41]!==N||E[42]!==B||E[43]!==T||E[44]!==Q?(P=(0,a.jsx)(s.W.Overlay,{width:"auto",children:0===J.length?(0,a.jsx)(I,{newFileUrl:N}):(0,a.jsxs)(o.l,{children:[(0,a.jsx)(f,{topLevelAgents:Q,customAgents:V,selectedAgent:T,onSelectAgent:B}),(0,a.jsx)(o.l.Divider,{}),(0,a.jsx)(o.l.Group,{selectionVariant:!1,children:(0,a.jsxs)(o.l.LinkItem,{href:N,target:"_blank",children:[(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(c.PlusIcon,{})}),"Create a custom agent"]})})]})}),E[39]=J.length,E[40]=V,E[41]=N,E[42]=B,E[43]=T,E[44]=Q,E[45]=P):P=E[45],E[46]!==k||E[47]!==L||E[48]!==P?(R=(0,a.jsxs)(k,{children:[L,P]}),E[46]=k,E[47]=L,E[48]=P,E[49]=R):R=E[49],R}function _(e){return!e?.typeName}let I=e=>{let t,n,s,l=(0,r.c)(4),{newFileUrl:o}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("h3",{className:"AgentSelector-module__emptyStateTitle--coj6M",children:"This repository has no custom agents"}),n=(0,a.jsx)("p",{className:"AgentSelector-module__emptyStateDescription--C58Xx",children:"Custom agents are reusable instructions and tools in your repository."}),l[0]=t,l[1]=n):(t=l[0],n=l[1]),l[2]!==o?(s=(0,a.jsxs)("div",{className:"AgentSelector-module__emptyStateContainer--FrxRO",children:[t,n,(0,a.jsx)(i.z,{href:o,children:"Create a custom agent"})]}),l[2]=o,l[3]=s):s=l[3],s};try{C.displayName||(C.displayName="AgentSelector")}catch{}try{I.displayName||(I.displayName="EmptyState")}catch{}},25811:(e,t,n)=>{n.d(t,{s:()=>l});var a=n(16522),r=n(96540),s=n(64846);function l(){let e,t,n,l=(0,a.c)(7),{value:o,setValue:i}=(0,s.Q)("AGENT_SESSIONS_LAST_SELECTED_AGENT");l[0]!==o?(e=()=>o??{},l[0]=o,l[1]=e):e=l[1];let[c,u]=(0,r.useState)(e);l[2]!==i?(t=e=>{u(e),i(e)},l[2]=i,l[3]=t):t=l[3];let d=t;return l[4]!==c||l[5]!==d?(n=[c,d],l[4]=c,l[5]=d,l[6]=n):n=l[6],n}},34267:(e,t,n)=>{n.d(t,{D:()=>l,t:()=>o});var a=n(74848),r=n(96540);let s=(0,r.createContext)({updateOpenState:()=>void 0,anyItemPickerOpen:()=>!1});function l({children:e}){let t=(0,r.useRef)({}),n=(0,r.useCallback)((e,n)=>{let a=t.current;return a[e]===n||(t.current={...a,[e]:n}),t.current},[]),l=(0,r.useCallback)(()=>Object.values(t.current).some(e=>e),[t]),o=(0,r.useMemo)(()=>({updateOpenState:n,anyItemPickerOpen:l}),[l,n]);return(0,a.jsx)(s,{value:o,children:e})}function o(){let e=(0,r.useContext)(s);if(!e)throw Error("useItemPickersContext must be used within a ItemPickersContextProvider.");return e}try{s.displayName||(s.displayName="ItemPickersContext")}catch{}try{l.displayName||(l.displayName="ItemPickersContextProvider")}catch{}},34295:(e,t,n)=>{n.d(t,{l:()=>AgentSessionsTokenProvider});var a=n(88243),r=n(16213),s=n(65620),l=n(65411),o=n(96379),i=new WeakSet;let AgentSessionsTokenProvider=class AgentSessionsTokenProvider extends l.JR{async validateAuthToken(e){if(e.ssoChanged(this.ssoOrgIDs))return this.fetchAuthToken();if(!e.isExpired)return e;if(e.refreshToken)try{return await (0,a._)(this,i,c).call(this,e.refreshToken)}catch{}return this.fetchAuthToken()}constructor(){super([],"/copilot/agent-sessions/token","AGENT_SESSIONS_TOKEN"),(0,r._)(this,i)}};async function c(e){let t=await (0,o.lS)(this.tokenEndpoint,{method:"POST",body:JSON.stringify({refresh_token:e})});if(!t.ok)throw Error(`Failed to refresh token: ${t.status}`);let n=await t.json(),a=s.Y.fromResult(n,this.ssoOrgIDs);return this.ssoOrgIDs=a.ssoOrgIDs,this.setLocalStorageAuthToken(a),a}},42455:(e,t,n)=>{n.d(t,{b:()=>u});var a=n(97286),r=n(51120),s=n(97189),l=n(34295),o=n(96540),i=n(65411),c=n(69599);function u(...e){let t=(0,a.I)(...e),{numberOf401s:n,increment401s:d,reset401s:m}=(0,s.eS)(),{isError:h,isLoading:p,error:g}=t;return(0,o.useEffect)(()=>{h&&g instanceof r.Y&&401===g.status?n>=5?(((0,c.G7)("mission_control_use_capi_token_provider")?new i.JR([]):new l.l).removeLocalStorageAuthToken(),m()):d():h||p||!(n>0)||m()},[h,p,g,d,m,n]),t}},46642:(e,t,n)=>{n.d(t,{P:()=>u});var a=n(74848),r=n(96540),s=n(38621),l=n(69497),o=n(21373),i=n(70170),c=n(86391);function u({currentSelection:e,repositoryLoader:t,onSelect:n,selectionVariant:u,selectAllOption:d,additionalButtonProps:m,buttonText:h="",width:p,truncateMaxWidth:g,height:f,fullscreenOnNarrow:y,defaultOwner:b,onLoad:v,loadingElement:S,liveSelection:C=!1,onOpen:_}){let[I,x]=(0,r.useState)(""),[w,A]=(0,r.useState)([]),[k,N]=(0,r.useState)(!0),[j,L]=(0,r.useState)(!1),P=(0,r.useCallback)((0,i.s)(async e=>{try{let n=await t(e,b);A(n),v?.(n)}catch{}N(!1),L(!0)},200),[t,b]);(0,r.useEffect)(()=>{N(!0),P(I)},[I,P,N]);let R=(0,r.useCallback)(e=>{"single"===u?!e[0]||e[0]._all?n(void 0):n(e[0]):n(e)},[u,n]),E=(0,r.useMemo)(()=>"multiple"===u?e||[]:e?[e]:[],[u,e]),O=(0,r.useCallback)(e=>{let t,n="medium"===p?35:"large"===p?60:24;return(e.name.length>n&&(t=`${e.name.substring(0,n)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,a.jsx)(s.RepoLockedIcon,{size:16}):(0,a.jsx)(s.RepoIcon,{size:16})}},[p]),$=(0,r.useCallback)(e=>e.name,[]),T=(0,r.useMemo)(()=>{let e=[];return e.push(...w),d&&e.push({name:"$all$",_all:!0}),e},[w,d]),B=h,F=s.RepoIcon;return B||("multiple"===u?B=E.length>0?`${E.length} repositor${E.length>1?"ies":"y"}`:"Select repositories":E.length>0&&E[0]?(B=E[0].name,F=E[0].private?s.RepoLockedIcon:s.RepoIcon):B=d?"All repositories":"Select a repository"),S&&k&&!e&&!j?S:(0,a.jsx)(c.O,{renderAnchor:({"aria-labelledby":e,...t})=>(0,a.jsx)(o.Q,{leadingVisual:F,trailingAction:s.TriangleDownIcon,"aria-labelledby":e,...t,...m,children:(0,a.jsx)(l.A,{title:B,maxWidth:g??195,children:B})}),placeholderText:"Search",items:T,loading:k,groups:d?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:u,initialSelectedItems:E,onSelectionChange:R,onLiveSelectionChange:C?R:void 0,filterItems:x,getItemKey:$,convertToItemProps:O,title:"Select a repository",width:p,height:f,responsiveOnNarrow:y,onOpen:_})}try{u.displayName||(u.displayName="ReposSelector")}catch{}},51120:(e,t,n)=>{n.d(t,{I:()=>c,Y:()=>FetchCAPIError});var a=n(50467),r=n(34295),s=n(25641),l=n(21067),o=n(69599),i=n(65411);let FetchCAPIError=class FetchCAPIError extends Error{constructor(e,t){super(e),(0,a._)(this,"status",void 0),this.name="FetchCAPIError",this.status=t}};async function c({path:e,method:t="GET",streamingResponse:n=!1,body:a,retryOn401:s=!1}){let c=(0,o.G7)("mission_control_use_capi_token_provider")?new i.JR([]):new r.l;return u({path:e,method:t,streamingResponse:n,body:a,basePath:(0,l._$)().copilotApiOverrideUrl??"https://api.githubcopilot.com",retryOn401:s},c)}async function u(e,t,n=0){let a=await t.getAuthToken();if(!a)throw Error("No token available");let r=await (0,s.p)({authToken:a,basePath:e.basePath,method:e.method,path:e.path,streamingResponse:e.streamingResponse,body:e.body});if(!r.ok){if(e.retryOn401&&401===r.status&&n<1)return t.removeLocalStorageAuthToken(),u(e,t,n+1);let a="error"in r?r.error:`Failed CAPI request (${r.status})`;if("response"in r&&r.response)try{let e=await r.response.text();e&&e.trim()&&(a=e.trim())}catch{}throw new FetchCAPIError(a,r.status)}return r}},57019:(e,t,n)=>{n.d(t,{A:()=>s,_:()=>l});var a=n(96540),r=n(44569);let s={ctrlKey:"ctrlKey",altKey:"altKey",shiftKey:"shiftKey",metaKey:"metaKey"},l=(e,t,n)=>{let l=(0,a.useRef)(t);(0,a.useLayoutEffect)(()=>{l.current=t});let o=(0,a.useCallback)(t=>{(![...document.querySelectorAll('#__primerPortalRoot__, [id$="-portal-root"]')].some(function e(t){if(t.clientHeight>0)return!0;for(let n of t.children)if(e(n))return!0;return!1})||n?.triggerWhenPortalIsActive)&&(function(e,t){for(let n of Object.values(s))if(t&&t[n]&&!e[n]||e[n]&&(!t||!t[n]))return!1;return!0}(t,n)||n?.ignoreModifierKeys)&&!(!n?.triggerWhenInputElementHasFocus&&(0,r.fg)(t.target))&&e.some(e=>/^\d$/.test(e)?t.code===`Digit${e}`:"/"===e?"Slash"===t.code:t.key===e)&&l.current(t)},[e,n]);(0,a.useEffect)(()=>{let e=n?.scopeRef?.current||document;return e.addEventListener("keydown",o),()=>e.removeEventListener("keydown",o)},[o,n?.scopeRef])}},63422:(e,t,n)=>{n.d(t,{L:()=>o});var a=n(74848),r=n(16522),s=n(26108),l=n(34164);let o=e=>{let t,n,o,i,c,u,d,m=(0,r.c)(14);if(m[0]!==e){let{ref:a,...r}=e;o=a;let{selected:d,icon:h,selectedIcon:p,...g}=r;t=(i=d)&&p?p:h,n=s.K,c=g,u=(0,l.$)("IconButtonSelector-module__anchor--t8Bzw",g.className),m[0]=e,m[1]=t,m[2]=n,m[3]=o,m[4]=i,m[5]=c,m[6]=u}else t=m[1],n=m[2],o=m[3],i=m[4],c=m[5],u=m[6];return m[7]!==t||m[8]!==n||m[9]!==o||m[10]!==i||m[11]!==c||m[12]!==u?(d=(0,a.jsx)(n,{...c,className:u,icon:t,"data-selected":i,ref:o}),m[7]=t,m[8]=n,m[9]=o,m[10]=i,m[11]=c,m[12]=u,m[13]=d):d=m[13],d};o.displayName="IconButtonSelector"},64846:(e,t,n)=>{n.d(t,{Q:()=>s});var a=n(82075),r=n(96540);function s(e){let t=(0,a.D)("localStorage");return{value:(0,r.useMemo)(()=>t.getItem(e)??void 0,[t,e]),setValue:n=>{t.setItem(e,n)},removeItem:()=>{t.removeItem(e)}}}},67126:(e,t,n)=>{n.d(t,{S:()=>a});let a={couldNotUpdateAssignees:"Could not update assignees",couldNotSearchAssignees:"Could not search assignees",couldNotUpdateLabels:"Could not update labels",couldNotSearchLabels:"Could not search labels",couldNotUpdateMilestone:"Could not update milestone",couldNotUpdateType:"Could not update type",couldNotSearchMilestones:"Could not search milestones",couldNotUpdateIssueType:"Could not update issue type",couldNotSearchRepositories:"Could not search repositories",couldNotSearchPullRequests:"Could not search pull requests",couldNotSearchProjects:"Could not search projects",couldNotSearchBranches:"Could not search branches",noMatches:"No matches",noResults:"No results",couldNotCreateBranch:"Could not create branch",couldNotCreateLabel:"Could not create label",couldNotCreateMilestone:"Could not create milestone",branchAlreadyExists:e=>`The branch ${e} already exists.`}},74563:(e,t,n)=>{n.d(t,{B:()=>a});let a={itemPickerRootId:"item-picker-root-id",itemPickerTestId:"item-picker-root"}},76027:(e,t,n)=>{n.d(t,{Z:()=>a});let a={activePickerOption:e=>`[data-id="${e}"] [data-is-active-descendant="activated-directly"]`}},78223:(e,t,n)=>{function a(e){return"copilot-swe-agent"===e}function r(e,t){return!e.topLevelAgentId||a(t)||!!e.subAgentSlug}n.d(t,{CF:()=>r,sS:()=>a})},86391:(e,t,n)=>{n.d(t,{D:()=>y,O:()=>f});var a=n(74848),r=n(69599),s=n(53419),l=n(83494),o=n(57019),i=n(93330),c=n(5839),u=n(50279),d=n(96540),m=n(74563),h=n(76027),p=n(34267),g=n(89850);function f({items:e,initialSelectedItems:t,placeholderText:n,selectionVariant:f="single",loading:b,groups:v,filterItems:S,renderAnchor:C,getItemKey:_,convertToItemProps:I,onSelectionChange:x,onOpen:w,onClose:A,onLiveSelectionChange:k,eventsTag:N,height:j="small",width:L="small",selectPanelRef:P,enforceAtleastOneSelected:R,insidePortal:E,maxVisibleItems:O=9,nested:$=!1,resultListAriaLabel:T,title:B,subtitle:F,preventClose:G,triggerOpen:M,initialFilter:D,customNoResultsItem:q,customNoMatchItem:W,footer:K,keybindingCommandId:V,pickerId:U,responsiveOnNarrow:H,secondaryAction:Q,notice:z,className:J,improvedNoMatchAccessibility:Y,noMatchMessage:X,suppressNoMatchItem:Z,focusPrependedElements:ee}){let[et,en]=(0,d.useState)(M??!1),[ea,er]=(0,d.useState)(()=>et?Date.now():null),[es,el]=(0,d.useState)([]),[eo,ei]=(0,d.useState)(D??""),ec=(0,d.useDeferredValue)(eo),{updateOpenState:eu,anyItemPickerOpen:ed}=(0,p.t)(),[em,eh]=(0,d.useState)(!1),ep=(0,d.useId)();U&&(ep=U);let eg=H||(0,r.G7)("primer_react_select_panel_fullscreen_on_narrow");(0,i.w)(()=>{eh(window.innerWidth<768)});let ef=(0,d.useCallback)(e=>{en(e),e?er(Date.now()):er(null)},[en]);(0,d.useEffect)(()=>{void 0!==M&&ef(M)},[ef,M]);let ey=(0,d.useCallback)(()=>{ed()||et||(ef(!0),w&&w())},[ed,et,ef,w]);(0,d.useEffect)(()=>{eu(ep,et)},[ep,et,eu]);let eb=(0,d.useMemo)(()=>new Map,[ep,t]),ev=(0,d.useCallback)(e=>{for(let[,t]of eb)t!==e&&(t.selected=!1)},[eb]),eS=(0,d.useCallback)(e=>"string"==typeof e?e:_(e),[_]),eC=(0,d.useCallback)((e,n)=>{if(G&&!e||"cancel"===n)return;if(!e&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur(),ef(e),e&&w)return void w();ei(""),A&&A();let a=[...eb.values()].filter(e=>e.selected).map(e=>e.source);if(a.length!==t.length||a.some(e=>!t.some(t=>eS(t)===_(e)))){if(ea&&N){let e=Date.now()-ea,n=a.filter(e=>!t.some(t=>eS(t)===_(e))).length,r=t.filter(e=>!a.some(t=>eS(t)===_(e))).length;(0,s.BI)(`item-picker-${N}-selection-duration`,{selectionDuration:e,totalItemsCount:a.length,addedItemsCount:n,removedItemsCount:r})}x(a)}},[G,ef,w,A,eb,t,eS,_,ea,N,x]),e_=(0,d.useCallback)((e,t)=>{let n=_(e),a=eb.get(n),r=I(e);if(a)return{...a,disabled:r.disabled};(a=r).selected=t;let s=a.onAction;return a.onAction=(t,a)=>{let r=eb.get(n);r&&(r.selected=!r.selected,"single"===f&&e.id!==eo&&ev(r),s&&s(t,a))},eb.set(n,a),a},[I,eo,_,eb,f,ev]),eI=(0,d.useMemo)(()=>{let n=e.map(e=>e.__isNew__?(delete e.__isNew__,W&&eb.delete(_(W)),e_(e,!0)):e_(e,t.some(t=>eS(t)===_(e))));return 0===n.length?Y?[]:W?[e_(W,!1)]:Z?[]:eo?[W?e_(W,!1):g.Q3]:[q??g.v8]:n},[W,e,eb,e_,t,eS,_,eo,q,Y,Z]);(0,d.useEffect)(()=>{el(eI.filter(e=>e.selected))},[eI]);let ex=(0,d.useMemo)(()=>"single"===f?es[0]:es,[es,f]),ew=(0,d.useCallback)(e=>{if(void 0===e){R||el([]);return}let t=(Array.isArray(e)?e:[e]).map(e=>eI.find(t=>e.id===t.id)).filter(e=>void 0!==e);el(t),k&&k(t.map(e=>e.source))},[R,eI,k]);(0,o._)([" "],e=>{if(et){let t=document.querySelector(h.Z.activePickerOption(m.B.itemPickerRootId));if(t){let n=t.getAttribute("data-id"),a=[...eb.values()].find(e=>e.id===n);if(a){if(I(a.source).disabled)return;e.preventDefault(),e.stopPropagation(),a.selected=!a.selected,el([...eb.values()].filter(e=>e.selected)),k&&k([...eb.values()].filter(e=>e.selected).map(e=>e.source))}}}},{triggerWhenInputElementHasFocus:!0,triggerWhenPortalIsActive:!0});let eA=(0,d.useCallback)(()=>{if(G)return;ei("");let e=[...eb.values()].filter(e=>e.selected).map(e=>e.source);if(e.length!==t.length||e.some(e=>!t.some(t=>eS(t)===_(e)))){for(let e of eb.values())t.some(t=>eS(t)===_(e.source))?e.selected=!0:e.selected=!1;el([...eb.values()].filter(e=>e.selected))}ef(!1),A&&A()},[G,eb,t,ef,A,eS,_]);(0,d.useEffect)(()=>{S(ec)},[ec,S]);let ek=eI.length>0;1===eI.length&&(eI[0].id===g.Q3.id||eI[0].id===g.v8.id)&&(ek=!1);let eN=(0,d.useMemo)(()=>v&&v?.length>1&&ek?{groupMetadata:v}:{},[v,ek]),ej=y(E,P,eI.length<=O?"auto":j,em&&eg),eL=(0,d.useMemo)(()=>X||(eo?{variant:"empty",title:"No matches found",body:"Try a different search term"}:{variant:"empty",title:"No items to show",body:""}),[X,eo]),eP=(0,d.useMemo)(()=>({renderAnchor:C,placeholderText:n,open:et,onOpenChange:eC,loading:b,items:eI,selected:ex,onSelectedChange:ew,filterValue:eo,onFilterChange:ei,showItemDividers:!0,overlayProps:{width:L,className:J,...ej},...eN,"aria-label":T,"data-id":m.B.itemPickerRootId,"data-testid":m.B.itemPickerTestId,title:B,subtitle:F,footer:K,onCancel:eA,secondaryAction:Q,notice:z,message:Y&&0===eI.length?eL:void 0,focusPrependedElements:ee}),[C,n,et,eC,b,eI,ex,ew,eo,L,ej,eN,T,B,F,K,eL,eA,Q,z,J,Y,ee]);return(0,a.jsxs)(u.g,{flags:{primer_react_select_panel_fullscreen_on_narrow:void 0===K&&eg},children:[V&&(0,a.jsx)(l.ak,{commands:{[V]:ey}}),(0,a.jsx)(c.X,{anchorRef:$?void 0:P,...eP})]})}function y(e,t,n,a=!1){let r=e?"large":n;if(!e||!t?.current)return{height:r};let{top:s}=t.current.getBoundingClientRect(),l=a?0:s-436;return l<0?{height:r}:{height:r,top:l,position:"fixed"}}try{f.displayName||(f.displayName="ItemPicker")}catch{}},89850:(e,t,n)=>{n.d(t,{A2:()=>i,Q3:()=>s,ku:()=>o,v8:()=>l});var a=n(38621),r=n(67126);let s={leadingVisual:a.CircleSlashIcon,text:r.S.noMatches,disabled:!0,selected:void 0,key:"no-matches",id:"no-matches"},l={leadingVisual:a.CircleSlashIcon,text:r.S.noResults,disabled:!0,selected:void 0,key:"no-results",id:"no-results"},o=e=>{try{new URL(e)}catch{return!1}return new RegExp(/^.+\/pull\/\d+$/).test(e)},i=(e="",t="",n="")=>{let a=e&&`owner:${e.trim()} `,r=n&&`repo:${n.trim()} `,s=t&&`${t.trim()}`,l=(e=>{try{new URL(e)}catch{return!1}return new RegExp(/^.+\/issues\/\d+$/).test(e)})(t),o="in:title",i=s&&"#"===s.charAt(0)?s.slice(1):s;i&&!isNaN(Number(i))&&(o+=" in:number");let c=`${a}${r}is:issue ${o}`;return{commenters:`${c} commenter:@me ${s}`.trim(),mentions:`${c} mentions:@me ${s}`.trim(),assignee:`${c} assignee:@me ${s}`.trim(),author:`${c} author:@me ${s}`.trim(),other:`${c} ${s}`.trim(),resource:l?encodeURI(t):"",queryIsUrl:l}}},92352:(e,t,n)=>{n.d(t,{s:()=>b,P:()=>S});var a=n(74848),r=n(16522),s=n(14496),l=n(97189),o=n(69599),i=n(66990),c=n(46642),u=n(96379),d=n(38621),m=n(82156),h=n(26108),p=n(96540),g=n(79064),f=n(63422);let y="RepoBranchAgentSelector-module__invisibleSelectorButton--vpcnl",b=e=>{let t,n,u,b,_,I,x,w=(0,r.c)(30),{hideRepoSelector:A,initialRepoNWO:k,initialBranch:N,selectedRepo:j,selectedBranch:L,selectedAgent:P,onRepoSelect:R,onBranchSelect:E,onAgentSelect:O,agentSelectionEnabled:$}=e,T=void 0===$||$,B=(0,p.useRef)(!1);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.G7)("swe_agent_member_requests_agent_panel"),w[0]=t):t=w[0];let F=t;w[1]!==N||w[2]!==k||w[3]!==E||w[4]!==R||w[5]!==j?(n=e=>{let t;if(!j&&!B.current){if(k&&(t=e.find(e=>e.nameWithOwner===k))&&(t.enabled||F&&v(t))){R(t),E(N||t.defaultBranch),B.current=!0;return}let n=g.Jt.getLastUsedRepository();if(n){let t=e.find(e=>e.nameWithOwner===`${n.ownerLogin}/${n.name}`);if(t&&(t.enabled||F&&v(t))){R(t),E(t?.defaultBranch),B.current=!0;return}}let a=e.find(C);a?(R(a),E(a.defaultBranch),B.current=!0):t&&(R(t),E(N||t.defaultBranch),B.current=!0)}},w[1]=N,w[2]=k,w[3]=E,w[4]=R,w[5]=j,w[6]=n):n=w[6];let G=n;w[7]!==k?(u=(e,t)=>S(e,t,k),w[7]=k,w[8]=u):u=w[8];let M=u;return w[9]!==A||w[10]!==E||w[11]!==G||w[12]!==R||w[13]!==M||w[14]!==j?(b=!A&&(0,a.jsx)(c.P,{repositoryLoader:M,selectionVariant:"single",selectAllOption:!1,onSelect:e=>{e&&(R(e),E(e.defaultBranch))},currentSelection:j,width:"medium",additionalButtonProps:{"aria-label":`Repository: ${j?.nameWithOwner||"Select repository"}`,className:"RepoBranchAgentSelector-module__repoSelectorButton--tAnOR",variant:"invisible"},onLoad:G,loadingElement:(0,a.jsx)(m.f,{width:"150px",height:"32px"})}),w[9]=A,w[10]=E,w[11]=G,w[12]=R,w[13]=M,w[14]=j,w[15]=b):b=w[15],w[16]!==E||w[17]!==L||w[18]!==j?(_=(0,a.jsx)(a.Fragment,{children:j?(0,a.jsx)(i.PI,{cacheKey:"repo-branch-agent-selector",canCreate:!1,currentCommitish:L??j.defaultBranch,defaultBranch:j.defaultBranch,owner:j.owner,repo:j.nameOnly,types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,actionListHeadingText:"Select a branch",onSelectItem:E,renderAnchor:e=>(0,a.jsx)(f.L,{...e,icon:d.GitBranchIcon,selectedIcon:d.GitBranchCheckIcon,selected:L!==j.defaultBranch,"aria-label":`Branch: ${L||"Select branch"}`,"aria-labelledby":void 0,variant:"invisible",className:y})}):(0,a.jsx)(h.K,{icon:d.GitBranchIcon,"aria-label":"Loading branches\u2026",disabled:!0})}),w[16]=E,w[17]=L,w[18]=j,w[19]=_):_=w[19],w[20]!==T||w[21]!==O||w[22]!==P||w[23]!==L||w[24]!==j?(I=T&&(j?(0,a.jsx)(s.b,{repo:j,branch:L||j.defaultBranch,selectedAgent:P,onSelectAgent:e=>O(e),iconOnly:!0,buttonProps:{variant:"invisible",className:y}}):(0,a.jsx)(m.f,{width:"32px",height:"32px"})),w[20]=T,w[21]=O,w[22]=P,w[23]=L,w[24]=j,w[25]=I):I=w[25],w[26]!==b||w[27]!==_||w[28]!==I?(x=(0,a.jsx)(l.Fn,{children:(0,a.jsxs)("div",{className:"RepoBranchAgentSelector-module__container--gHrlH",children:[b,_,I]})}),w[26]=b,w[27]=_,w[28]=I,w[29]=x):x=w[29],x};function v(e){return!!(e.userCanRequestCca||e.userCanGrantOrgCca||e.userCanGrantEnterpriseCca||e.userHasRequestedCca)}async function S(e="",t,n){let a=new URL("/copilot/agent-sessions/repositories",window.location.origin);e.trim()&&a.searchParams.set("q",e.trim()),t&&a.searchParams.set("defaultOwner",t),n&&a.searchParams.set("includeInTopRepos",n);let r=await (0,u.lS)(a.href);if(r.ok){let{repositories:e}=await r.json();return e.map(e=>({id:e.id,graphQLId:e.graphQLId,nameWithOwner:e.nameWithOwner,enabled:e.enabled,name:e.nameWithOwner,nameOnly:e.name,owner:e.owner,defaultBranch:e.defaultBranch,private:"public"!==e.visibility,isEmpty:e.isEmpty,userHasRequestedCca:e.userHasRequestedCca,userCanRequestCca:e.userCanRequestCca,userCanGrantOrgCca:e.userCanGrantOrgCca,userCanGrantEnterpriseCca:e.userCanGrantEnterpriseCca,businessSlug:e.businessSlug}))}return[]}try{b.displayName||(b.displayName="RepoBranchAgentPicker")}catch{}function C(e){return e.enabled}},95869:(e,t,n)=>{n.d(t,{n:()=>s});var a=n(96379),r=n(97286);function s(e){return(0,r.I)({enabled:!!e,queryKey:["top-level-agents",e],queryFn:async()=>{try{if(!e)return[];let t=await (0,a.lS)(`/copilot/agent-sessions/${e}/agents`);if(!t.ok)return[];return(await t.json()).agents||[]}catch{return[]}}})}},97189:(e,t,n)=>{n.d(t,{Fn:()=>i,eS:()=>o});var a=n(74848),r=n(16522),s=n(96540);let l=(0,s.createContext)(void 0);function o(){let e=(0,s.useContext)(l);if(!e)throw Error("useConsecutiveCAPI401sContext must be used within a ConsecutiveCAPI401sProvider");return e}function i(e){let t,n,o,i,u=(0,r.c)(7),{children:d}=e,[m,h]=(0,s.useState)(0);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>h(c),n=()=>h(0),u[0]=t,u[1]=n):(t=u[0],n=u[1]),u[2]!==m?(o={numberOf401s:m,increment401s:t,reset401s:n},u[2]=m,u[3]=o):o=u[3];let p=o;return u[4]!==d||u[5]!==p?(i=(0,a.jsx)(l,{value:p,children:d}),u[4]=d,u[5]=p,u[6]=i):i=u[6],i}function c(e){return e+1}try{l.displayName||(l.displayName="ConsecutiveCAPI401sContext")}catch{}try{i.displayName||(i.displayName="ConsecutiveCAPI401sProvider")}catch{}}}]);
//# sourceMappingURL=52302-2619182bb595.js.map